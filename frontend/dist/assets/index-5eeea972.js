var q2=Object.defineProperty;var X2=(n,e,t)=>e in n?q2(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var O=(n,e,t)=>(X2(n,typeof e!="symbol"?e+"":e,t),t),a1=(n,e,t)=>{if(!e.has(n))throw TypeError("Cannot "+t)};var a=(n,e,t)=>(a1(n,e,"read from private field"),t?t.call(n):e.get(n)),p=(n,e,t)=>{if(e.has(n))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(n):e.set(n,t)},g=(n,e,t,s)=>(a1(n,e,"write to private field"),s?s.call(n,t):e.set(n,t),t);var ct=(n,e,t,s)=>({set _(i){g(n,e,i,t)},get _(){return a(n,e,s)}}),A=(n,e,t)=>(a1(n,e,"access private method"),t);function Y2(n,e){for(var t=0;t<e.length;t++){const s=e[t];if(typeof s!="string"&&!Array.isArray(s)){for(const i in s)if(i!=="default"&&!(i in n)){const r=Object.getOwnPropertyDescriptor(s,i);r&&Object.defineProperty(n,i,r.get?r:{enumerable:!0,get:()=>s[i]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(i){if(i.ep)return;i.ep=!0;const r=t(i);fetch(i.href,r)}})();function yC(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var vC={exports:{}},Ew={},wC={exports:{}},oe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var am=Symbol.for("react.element"),K2=Symbol.for("react.portal"),Q2=Symbol.for("react.fragment"),J2=Symbol.for("react.strict_mode"),Z2=Symbol.for("react.profiler"),eL=Symbol.for("react.provider"),tL=Symbol.for("react.context"),nL=Symbol.for("react.forward_ref"),sL=Symbol.for("react.suspense"),iL=Symbol.for("react.memo"),rL=Symbol.for("react.lazy"),YA=Symbol.iterator;function oL(n){return n===null||typeof n!="object"?null:(n=YA&&n[YA]||n["@@iterator"],typeof n=="function"?n:null)}var bC={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},xC=Object.assign,SC={};function sd(n,e,t){this.props=n,this.context=e,this.refs=SC,this.updater=t||bC}sd.prototype.isReactComponent={};sd.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};sd.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function AC(){}AC.prototype=sd.prototype;function xS(n,e,t){this.props=n,this.context=e,this.refs=SC,this.updater=t||bC}var SS=xS.prototype=new AC;SS.constructor=xS;xC(SS,sd.prototype);SS.isPureReactComponent=!0;var KA=Array.isArray,EC=Object.prototype.hasOwnProperty,AS={current:null},_C={key:!0,ref:!0,__self:!0,__source:!0};function CC(n,e,t){var s,i={},r=null,o=null;if(e!=null)for(s in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(r=""+e.key),e)EC.call(e,s)&&!_C.hasOwnProperty(s)&&(i[s]=e[s]);var l=arguments.length-2;if(l===1)i.children=t;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];i.children=c}if(n&&n.defaultProps)for(s in l=n.defaultProps,l)i[s]===void 0&&(i[s]=l[s]);return{$$typeof:am,type:n,key:r,ref:o,props:i,_owner:AS.current}}function aL(n,e){return{$$typeof:am,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function ES(n){return typeof n=="object"&&n!==null&&n.$$typeof===am}function lL(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var QA=/\/+/g;function l1(n,e){return typeof n=="object"&&n!==null&&n.key!=null?lL(""+n.key):e.toString(36)}function Zm(n,e,t,s,i){var r=typeof n;(r==="undefined"||r==="boolean")&&(n=null);var o=!1;if(n===null)o=!0;else switch(r){case"string":case"number":o=!0;break;case"object":switch(n.$$typeof){case am:case K2:o=!0}}if(o)return o=n,i=i(o),n=s===""?"."+l1(o,0):s,KA(i)?(t="",n!=null&&(t=n.replace(QA,"$&/")+"/"),Zm(i,e,t,"",function(u){return u})):i!=null&&(ES(i)&&(i=aL(i,t+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(QA,"$&/")+"/")+n)),e.push(i)),1;if(o=0,s=s===""?".":s+":",KA(n))for(var l=0;l<n.length;l++){r=n[l];var c=s+l1(r,l);o+=Zm(r,e,t,c,i)}else if(c=oL(n),typeof c=="function")for(n=c.call(n),l=0;!(r=n.next()).done;)r=r.value,c=s+l1(r,l++),o+=Zm(r,e,t,c,i);else if(r==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function _m(n,e,t){if(n==null)return n;var s=[],i=0;return Zm(n,s,"","",function(r){return e.call(t,r,i++)}),s}function cL(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(t){(n._status===0||n._status===-1)&&(n._status=1,n._result=t)},function(t){(n._status===0||n._status===-1)&&(n._status=2,n._result=t)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var ln={current:null},ey={transition:null},uL={ReactCurrentDispatcher:ln,ReactCurrentBatchConfig:ey,ReactCurrentOwner:AS};function TC(){throw Error("act(...) is not supported in production builds of React.")}oe.Children={map:_m,forEach:function(n,e,t){_m(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return _m(n,function(){e++}),e},toArray:function(n){return _m(n,function(e){return e})||[]},only:function(n){if(!ES(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};oe.Component=sd;oe.Fragment=Q2;oe.Profiler=Z2;oe.PureComponent=xS;oe.StrictMode=J2;oe.Suspense=sL;oe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=uL;oe.act=TC;oe.cloneElement=function(n,e,t){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var s=xC({},n.props),i=n.key,r=n.ref,o=n._owner;if(e!=null){if(e.ref!==void 0&&(r=e.ref,o=AS.current),e.key!==void 0&&(i=""+e.key),n.type&&n.type.defaultProps)var l=n.type.defaultProps;for(c in e)EC.call(e,c)&&!_C.hasOwnProperty(c)&&(s[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)s.children=t;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];s.children=l}return{$$typeof:am,type:n.type,key:i,ref:r,props:s,_owner:o}};oe.createContext=function(n){return n={$$typeof:tL,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:eL,_context:n},n.Consumer=n};oe.createElement=CC;oe.createFactory=function(n){var e=CC.bind(null,n);return e.type=n,e};oe.createRef=function(){return{current:null}};oe.forwardRef=function(n){return{$$typeof:nL,render:n}};oe.isValidElement=ES;oe.lazy=function(n){return{$$typeof:rL,_payload:{_status:-1,_result:n},_init:cL}};oe.memo=function(n,e){return{$$typeof:iL,type:n,compare:e===void 0?null:e}};oe.startTransition=function(n){var e=ey.transition;ey.transition={};try{n()}finally{ey.transition=e}};oe.unstable_act=TC;oe.useCallback=function(n,e){return ln.current.useCallback(n,e)};oe.useContext=function(n){return ln.current.useContext(n)};oe.useDebugValue=function(){};oe.useDeferredValue=function(n){return ln.current.useDeferredValue(n)};oe.useEffect=function(n,e){return ln.current.useEffect(n,e)};oe.useId=function(){return ln.current.useId()};oe.useImperativeHandle=function(n,e,t){return ln.current.useImperativeHandle(n,e,t)};oe.useInsertionEffect=function(n,e){return ln.current.useInsertionEffect(n,e)};oe.useLayoutEffect=function(n,e){return ln.current.useLayoutEffect(n,e)};oe.useMemo=function(n,e){return ln.current.useMemo(n,e)};oe.useReducer=function(n,e,t){return ln.current.useReducer(n,e,t)};oe.useRef=function(n){return ln.current.useRef(n)};oe.useState=function(n){return ln.current.useState(n)};oe.useSyncExternalStore=function(n,e,t){return ln.current.useSyncExternalStore(n,e,t)};oe.useTransition=function(){return ln.current.useTransition()};oe.version="18.3.1";wC.exports=oe;var R=wC.exports;const kC=yC(R),hL=Y2({__proto__:null,default:kC},[R]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dL=R,fL=Symbol.for("react.element"),pL=Symbol.for("react.fragment"),gL=Object.prototype.hasOwnProperty,mL=dL.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,yL={key:!0,ref:!0,__self:!0,__source:!0};function PC(n,e,t){var s,i={},r=null,o=null;t!==void 0&&(r=""+t),e.key!==void 0&&(r=""+e.key),e.ref!==void 0&&(o=e.ref);for(s in e)gL.call(e,s)&&!yL.hasOwnProperty(s)&&(i[s]=e[s]);if(n&&n.defaultProps)for(s in e=n.defaultProps,e)i[s]===void 0&&(i[s]=e[s]);return{$$typeof:fL,type:n,key:r,ref:o,props:i,_owner:mL.current}}Ew.Fragment=pL;Ew.jsx=PC;Ew.jsxs=PC;vC.exports=Ew;var _=vC.exports,X1={},RC={exports:{}},ns={},LC={exports:{}},NC={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(L,U){var K=L.length;L.push(U);e:for(;0<K;){var J=K-1>>>1,X=L[J];if(0<i(X,U))L[J]=U,L[K]=X,K=J;else break e}}function t(L){return L.length===0?null:L[0]}function s(L){if(L.length===0)return null;var U=L[0],K=L.pop();if(K!==U){L[0]=K;e:for(var J=0,X=L.length,te=X>>>1;J<te;){var fe=2*(J+1)-1,Le=L[fe],ze=fe+1,ue=L[ze];if(0>i(Le,K))ze<X&&0>i(ue,Le)?(L[J]=ue,L[ze]=K,J=ze):(L[J]=Le,L[fe]=K,J=fe);else if(ze<X&&0>i(ue,K))L[J]=ue,L[ze]=K,J=ze;else break e}}return U}function i(L,U){var K=L.sortIndex-U.sortIndex;return K!==0?K:L.id-U.id}if(typeof performance=="object"&&typeof performance.now=="function"){var r=performance;n.unstable_now=function(){return r.now()}}else{var o=Date,l=o.now();n.unstable_now=function(){return o.now()-l}}var c=[],u=[],h=1,d=null,f=3,m=!1,y=!1,w=!1,x=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(L){for(var U=t(u);U!==null;){if(U.callback===null)s(u);else if(U.startTime<=L)s(u),U.sortIndex=U.expirationTime,e(c,U);else break;U=t(u)}}function E(L){if(w=!1,S(L),!y)if(t(c)!==null)y=!0,F(C);else{var U=t(u);U!==null&&$(E,U.startTime-L)}}function C(L,U){y=!1,w&&(w=!1,v(P),P=-1),m=!0;var K=f;try{for(S(U),d=t(c);d!==null&&(!(d.expirationTime>U)||L&&!I());){var J=d.callback;if(typeof J=="function"){d.callback=null,f=d.priorityLevel;var X=J(d.expirationTime<=U);U=n.unstable_now(),typeof X=="function"?d.callback=X:d===t(c)&&s(c),S(U)}else s(c);d=t(c)}if(d!==null)var te=!0;else{var fe=t(u);fe!==null&&$(E,fe.startTime-U),te=!1}return te}finally{d=null,f=K,m=!1}}var T=!1,k=null,P=-1,N=5,M=-1;function I(){return!(n.unstable_now()-M<N)}function j(){if(k!==null){var L=n.unstable_now();M=L;var U=!0;try{U=k(!0,L)}finally{U?H():(T=!1,k=null)}}else T=!1}var H;if(typeof b=="function")H=function(){b(j)};else if(typeof MessageChannel<"u"){var z=new MessageChannel,Q=z.port2;z.port1.onmessage=j,H=function(){Q.postMessage(null)}}else H=function(){x(j,0)};function F(L){k=L,T||(T=!0,H())}function $(L,U){P=x(function(){L(n.unstable_now())},U)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(L){L.callback=null},n.unstable_continueExecution=function(){y||m||(y=!0,F(C))},n.unstable_forceFrameRate=function(L){0>L||125<L?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<L?Math.floor(1e3/L):5},n.unstable_getCurrentPriorityLevel=function(){return f},n.unstable_getFirstCallbackNode=function(){return t(c)},n.unstable_next=function(L){switch(f){case 1:case 2:case 3:var U=3;break;default:U=f}var K=f;f=U;try{return L()}finally{f=K}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(L,U){switch(L){case 1:case 2:case 3:case 4:case 5:break;default:L=3}var K=f;f=L;try{return U()}finally{f=K}},n.unstable_scheduleCallback=function(L,U,K){var J=n.unstable_now();switch(typeof K=="object"&&K!==null?(K=K.delay,K=typeof K=="number"&&0<K?J+K:J):K=J,L){case 1:var X=-1;break;case 2:X=250;break;case 5:X=1073741823;break;case 4:X=1e4;break;default:X=5e3}return X=K+X,L={id:h++,callback:U,priorityLevel:L,startTime:K,expirationTime:X,sortIndex:-1},K>J?(L.sortIndex=K,e(u,L),t(c)===null&&L===t(u)&&(w?(v(P),P=-1):w=!0,$(E,K-J))):(L.sortIndex=X,e(c,L),y||m||(y=!0,F(C))),L},n.unstable_shouldYield=I,n.unstable_wrapCallback=function(L){var U=f;return function(){var K=f;f=U;try{return L.apply(this,arguments)}finally{f=K}}}})(NC);LC.exports=NC;var vL=LC.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wL=R,es=vL;function B(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var MC=new Set,rf={};function rc(n,e){Gh(n,e),Gh(n+"Capture",e)}function Gh(n,e){for(rf[n]=e,n=0;n<e.length;n++)MC.add(e[n])}var Tr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Y1=Object.prototype.hasOwnProperty,bL=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,JA={},ZA={};function xL(n){return Y1.call(ZA,n)?!0:Y1.call(JA,n)?!1:bL.test(n)?ZA[n]=!0:(JA[n]=!0,!1)}function SL(n,e,t,s){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return s?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function AL(n,e,t,s){if(e===null||typeof e>"u"||SL(n,e,t,s))return!0;if(s)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function cn(n,e,t,s,i,r,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=s,this.attributeNamespace=i,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=r,this.removeEmptyString=o}var Bt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){Bt[n]=new cn(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];Bt[e]=new cn(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){Bt[n]=new cn(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){Bt[n]=new cn(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){Bt[n]=new cn(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){Bt[n]=new cn(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){Bt[n]=new cn(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){Bt[n]=new cn(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){Bt[n]=new cn(n,5,!1,n.toLowerCase(),null,!1,!1)});var _S=/[\-:]([a-z])/g;function CS(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(_S,CS);Bt[e]=new cn(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(_S,CS);Bt[e]=new cn(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(_S,CS);Bt[e]=new cn(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){Bt[n]=new cn(n,1,!1,n.toLowerCase(),null,!1,!1)});Bt.xlinkHref=new cn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){Bt[n]=new cn(n,1,!1,n.toLowerCase(),null,!0,!0)});function TS(n,e,t,s){var i=Bt.hasOwnProperty(e)?Bt[e]:null;(i!==null?i.type!==0:s||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(AL(e,t,i,s)&&(t=null),s||i===null?xL(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):i.mustUseProperty?n[i.propertyName]=t===null?i.type===3?!1:"":t:(e=i.attributeName,s=i.attributeNamespace,t===null?n.removeAttribute(e):(i=i.type,t=i===3||i===4&&t===!0?"":""+t,s?n.setAttributeNS(s,e,t):n.setAttribute(e,t))))}var Mr=wL.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Cm=Symbol.for("react.element"),xc=Symbol.for("react.portal"),Sc=Symbol.for("react.fragment"),kS=Symbol.for("react.strict_mode"),K1=Symbol.for("react.profiler"),DC=Symbol.for("react.provider"),IC=Symbol.for("react.context"),PS=Symbol.for("react.forward_ref"),Q1=Symbol.for("react.suspense"),J1=Symbol.for("react.suspense_list"),RS=Symbol.for("react.memo"),Br=Symbol.for("react.lazy"),FC=Symbol.for("react.offscreen"),eE=Symbol.iterator;function ud(n){return n===null||typeof n!="object"?null:(n=eE&&n[eE]||n["@@iterator"],typeof n=="function"?n:null)}var Xe=Object.assign,c1;function Ad(n){if(c1===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);c1=e&&e[1]||""}return`
`+c1+n}var u1=!1;function h1(n,e){if(!n||u1)return"";u1=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var s=u}Reflect.construct(n,[],e)}else{try{e.call()}catch(u){s=u}n.call(e.prototype)}else{try{throw Error()}catch(u){s=u}n()}}catch(u){if(u&&s&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),r=s.stack.split(`
`),o=i.length-1,l=r.length-1;1<=o&&0<=l&&i[o]!==r[l];)l--;for(;1<=o&&0<=l;o--,l--)if(i[o]!==r[l]){if(o!==1||l!==1)do if(o--,l--,0>l||i[o]!==r[l]){var c=`
`+i[o].replace(" at new "," at ");return n.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",n.displayName)),c}while(1<=o&&0<=l);break}}}finally{u1=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?Ad(n):""}function EL(n){switch(n.tag){case 5:return Ad(n.type);case 16:return Ad("Lazy");case 13:return Ad("Suspense");case 19:return Ad("SuspenseList");case 0:case 2:case 15:return n=h1(n.type,!1),n;case 11:return n=h1(n.type.render,!1),n;case 1:return n=h1(n.type,!0),n;default:return""}}function Z1(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case Sc:return"Fragment";case xc:return"Portal";case K1:return"Profiler";case kS:return"StrictMode";case Q1:return"Suspense";case J1:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case IC:return(n.displayName||"Context")+".Consumer";case DC:return(n._context.displayName||"Context")+".Provider";case PS:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case RS:return e=n.displayName||null,e!==null?e:Z1(n.type)||"Memo";case Br:e=n._payload,n=n._init;try{return Z1(n(e))}catch{}}return null}function _L(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Z1(e);case 8:return e===kS?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ea(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function OC(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function CL(n){var e=OC(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),s=""+n[e];if(!n.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var i=t.get,r=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){s=""+o,r.call(this,o)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return s},setValue:function(o){s=""+o},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function Tm(n){n._valueTracker||(n._valueTracker=CL(n))}function BC(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),s="";return n&&(s=OC(n)?n.checked?"true":"false":n.value),n=s,n!==t?(e.setValue(n),!0):!1}function Yy(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function eb(n,e){var t=e.checked;return Xe({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??n._wrapperState.initialChecked})}function tE(n,e){var t=e.defaultValue==null?"":e.defaultValue,s=e.checked!=null?e.checked:e.defaultChecked;t=ea(e.value!=null?e.value:t),n._wrapperState={initialChecked:s,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function jC(n,e){e=e.checked,e!=null&&TS(n,"checked",e,!1)}function tb(n,e){jC(n,e);var t=ea(e.value),s=e.type;if(t!=null)s==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(s==="submit"||s==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?nb(n,e.type,t):e.hasOwnProperty("defaultValue")&&nb(n,e.type,ea(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function nE(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var s=e.type;if(!(s!=="submit"&&s!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function nb(n,e,t){(e!=="number"||Yy(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}var Ed=Array.isArray;function Bc(n,e,t,s){if(n=n.options,e){e={};for(var i=0;i<t.length;i++)e["$"+t[i]]=!0;for(t=0;t<n.length;t++)i=e.hasOwnProperty("$"+n[t].value),n[t].selected!==i&&(n[t].selected=i),i&&s&&(n[t].defaultSelected=!0)}else{for(t=""+ea(t),e=null,i=0;i<n.length;i++){if(n[i].value===t){n[i].selected=!0,s&&(n[i].defaultSelected=!0);return}e!==null||n[i].disabled||(e=n[i])}e!==null&&(e.selected=!0)}}function sb(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(B(91));return Xe({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function sE(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(B(92));if(Ed(t)){if(1<t.length)throw Error(B(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:ea(t)}}function UC(n,e){var t=ea(e.value),s=ea(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),s!=null&&(n.defaultValue=""+s)}function iE(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function zC(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ib(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?zC(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var km,$C=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,s,i){MSApp.execUnsafeLocalFunction(function(){return n(e,t,s,i)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(km=km||document.createElement("div"),km.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=km.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function of(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var Xd={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},TL=["Webkit","ms","Moz","O"];Object.keys(Xd).forEach(function(n){TL.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),Xd[e]=Xd[n]})});function HC(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||Xd.hasOwnProperty(n)&&Xd[n]?(""+e).trim():e+"px"}function VC(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var s=t.indexOf("--")===0,i=HC(t,e[t],s);t==="float"&&(t="cssFloat"),s?n.setProperty(t,i):n[t]=i}}var kL=Xe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function rb(n,e){if(e){if(kL[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(B(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(B(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(B(61))}if(e.style!=null&&typeof e.style!="object")throw Error(B(62))}}function ob(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ab=null;function LS(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var lb=null,jc=null,Uc=null;function rE(n){if(n=um(n)){if(typeof lb!="function")throw Error(B(280));var e=n.stateNode;e&&(e=Pw(e),lb(n.stateNode,n.type,e))}}function WC(n){jc?Uc?Uc.push(n):Uc=[n]:jc=n}function GC(){if(jc){var n=jc,e=Uc;if(Uc=jc=null,rE(n),e)for(n=0;n<e.length;n++)rE(e[n])}}function qC(n,e){return n(e)}function XC(){}var d1=!1;function YC(n,e,t){if(d1)return n(e,t);d1=!0;try{return qC(n,e,t)}finally{d1=!1,(jc!==null||Uc!==null)&&(XC(),GC())}}function af(n,e){var t=n.stateNode;if(t===null)return null;var s=Pw(t);if(s===null)return null;t=s[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(n=n.type,s=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!s;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error(B(231,e,typeof t));return t}var cb=!1;if(Tr)try{var hd={};Object.defineProperty(hd,"passive",{get:function(){cb=!0}}),window.addEventListener("test",hd,hd),window.removeEventListener("test",hd,hd)}catch{cb=!1}function PL(n,e,t,s,i,r,o,l,c){var u=Array.prototype.slice.call(arguments,3);try{e.apply(t,u)}catch(h){this.onError(h)}}var Yd=!1,Ky=null,Qy=!1,ub=null,RL={onError:function(n){Yd=!0,Ky=n}};function LL(n,e,t,s,i,r,o,l,c){Yd=!1,Ky=null,PL.apply(RL,arguments)}function NL(n,e,t,s,i,r,o,l,c){if(LL.apply(this,arguments),Yd){if(Yd){var u=Ky;Yd=!1,Ky=null}else throw Error(B(198));Qy||(Qy=!0,ub=u)}}function oc(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function KC(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function oE(n){if(oc(n)!==n)throw Error(B(188))}function ML(n){var e=n.alternate;if(!e){if(e=oc(n),e===null)throw Error(B(188));return e!==n?null:n}for(var t=n,s=e;;){var i=t.return;if(i===null)break;var r=i.alternate;if(r===null){if(s=i.return,s!==null){t=s;continue}break}if(i.child===r.child){for(r=i.child;r;){if(r===t)return oE(i),n;if(r===s)return oE(i),e;r=r.sibling}throw Error(B(188))}if(t.return!==s.return)t=i,s=r;else{for(var o=!1,l=i.child;l;){if(l===t){o=!0,t=i,s=r;break}if(l===s){o=!0,s=i,t=r;break}l=l.sibling}if(!o){for(l=r.child;l;){if(l===t){o=!0,t=r,s=i;break}if(l===s){o=!0,s=r,t=i;break}l=l.sibling}if(!o)throw Error(B(189))}}if(t.alternate!==s)throw Error(B(190))}if(t.tag!==3)throw Error(B(188));return t.stateNode.current===t?n:e}function QC(n){return n=ML(n),n!==null?JC(n):null}function JC(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=JC(n);if(e!==null)return e;n=n.sibling}return null}var ZC=es.unstable_scheduleCallback,aE=es.unstable_cancelCallback,DL=es.unstable_shouldYield,IL=es.unstable_requestPaint,st=es.unstable_now,FL=es.unstable_getCurrentPriorityLevel,NS=es.unstable_ImmediatePriority,eT=es.unstable_UserBlockingPriority,Jy=es.unstable_NormalPriority,OL=es.unstable_LowPriority,tT=es.unstable_IdlePriority,_w=null,Pi=null;function BL(n){if(Pi&&typeof Pi.onCommitFiberRoot=="function")try{Pi.onCommitFiberRoot(_w,n,void 0,(n.current.flags&128)===128)}catch{}}var Gs=Math.clz32?Math.clz32:zL,jL=Math.log,UL=Math.LN2;function zL(n){return n>>>=0,n===0?32:31-(jL(n)/UL|0)|0}var Pm=64,Rm=4194304;function _d(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function Zy(n,e){var t=n.pendingLanes;if(t===0)return 0;var s=0,i=n.suspendedLanes,r=n.pingedLanes,o=t&268435455;if(o!==0){var l=o&~i;l!==0?s=_d(l):(r&=o,r!==0&&(s=_d(r)))}else o=t&~i,o!==0?s=_d(o):r!==0&&(s=_d(r));if(s===0)return 0;if(e!==0&&e!==s&&!(e&i)&&(i=s&-s,r=e&-e,i>=r||i===16&&(r&4194240)!==0))return e;if(s&4&&(s|=t&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=s;0<e;)t=31-Gs(e),i=1<<t,s|=n[t],e&=~i;return s}function $L(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function HL(n,e){for(var t=n.suspendedLanes,s=n.pingedLanes,i=n.expirationTimes,r=n.pendingLanes;0<r;){var o=31-Gs(r),l=1<<o,c=i[o];c===-1?(!(l&t)||l&s)&&(i[o]=$L(l,e)):c<=e&&(n.expiredLanes|=l),r&=~l}}function hb(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function nT(){var n=Pm;return Pm<<=1,!(Pm&4194240)&&(Pm=64),n}function f1(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function lm(n,e,t){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-Gs(e),n[e]=t}function VL(n,e){var t=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var s=n.eventTimes;for(n=n.expirationTimes;0<t;){var i=31-Gs(t),r=1<<i;e[i]=0,s[i]=-1,n[i]=-1,t&=~r}}function MS(n,e){var t=n.entangledLanes|=e;for(n=n.entanglements;t;){var s=31-Gs(t),i=1<<s;i&e|n[s]&e&&(n[s]|=e),t&=~i}}var ye=0;function sT(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var iT,DS,rT,oT,aT,db=!1,Lm=[],Go=null,qo=null,Xo=null,lf=new Map,cf=new Map,Ur=[],WL="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function lE(n,e){switch(n){case"focusin":case"focusout":Go=null;break;case"dragenter":case"dragleave":qo=null;break;case"mouseover":case"mouseout":Xo=null;break;case"pointerover":case"pointerout":lf.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":cf.delete(e.pointerId)}}function dd(n,e,t,s,i,r){return n===null||n.nativeEvent!==r?(n={blockedOn:e,domEventName:t,eventSystemFlags:s,nativeEvent:r,targetContainers:[i]},e!==null&&(e=um(e),e!==null&&DS(e)),n):(n.eventSystemFlags|=s,e=n.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),n)}function GL(n,e,t,s,i){switch(e){case"focusin":return Go=dd(Go,n,e,t,s,i),!0;case"dragenter":return qo=dd(qo,n,e,t,s,i),!0;case"mouseover":return Xo=dd(Xo,n,e,t,s,i),!0;case"pointerover":var r=i.pointerId;return lf.set(r,dd(lf.get(r)||null,n,e,t,s,i)),!0;case"gotpointercapture":return r=i.pointerId,cf.set(r,dd(cf.get(r)||null,n,e,t,s,i)),!0}return!1}function lT(n){var e=ma(n.target);if(e!==null){var t=oc(e);if(t!==null){if(e=t.tag,e===13){if(e=KC(t),e!==null){n.blockedOn=e,aT(n.priority,function(){rT(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function ty(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=fb(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t===null){t=n.nativeEvent;var s=new t.constructor(t.type,t);ab=s,t.target.dispatchEvent(s),ab=null}else return e=um(t),e!==null&&DS(e),n.blockedOn=t,!1;e.shift()}return!0}function cE(n,e,t){ty(n)&&t.delete(e)}function qL(){db=!1,Go!==null&&ty(Go)&&(Go=null),qo!==null&&ty(qo)&&(qo=null),Xo!==null&&ty(Xo)&&(Xo=null),lf.forEach(cE),cf.forEach(cE)}function fd(n,e){n.blockedOn===e&&(n.blockedOn=null,db||(db=!0,es.unstable_scheduleCallback(es.unstable_NormalPriority,qL)))}function uf(n){function e(i){return fd(i,n)}if(0<Lm.length){fd(Lm[0],n);for(var t=1;t<Lm.length;t++){var s=Lm[t];s.blockedOn===n&&(s.blockedOn=null)}}for(Go!==null&&fd(Go,n),qo!==null&&fd(qo,n),Xo!==null&&fd(Xo,n),lf.forEach(e),cf.forEach(e),t=0;t<Ur.length;t++)s=Ur[t],s.blockedOn===n&&(s.blockedOn=null);for(;0<Ur.length&&(t=Ur[0],t.blockedOn===null);)lT(t),t.blockedOn===null&&Ur.shift()}var zc=Mr.ReactCurrentBatchConfig,e0=!0;function XL(n,e,t,s){var i=ye,r=zc.transition;zc.transition=null;try{ye=1,IS(n,e,t,s)}finally{ye=i,zc.transition=r}}function YL(n,e,t,s){var i=ye,r=zc.transition;zc.transition=null;try{ye=4,IS(n,e,t,s)}finally{ye=i,zc.transition=r}}function IS(n,e,t,s){if(e0){var i=fb(n,e,t,s);if(i===null)A1(n,e,s,t0,t),lE(n,s);else if(GL(i,n,e,t,s))s.stopPropagation();else if(lE(n,s),e&4&&-1<WL.indexOf(n)){for(;i!==null;){var r=um(i);if(r!==null&&iT(r),r=fb(n,e,t,s),r===null&&A1(n,e,s,t0,t),r===i)break;i=r}i!==null&&s.stopPropagation()}else A1(n,e,s,null,t)}}var t0=null;function fb(n,e,t,s){if(t0=null,n=LS(s),n=ma(n),n!==null)if(e=oc(n),e===null)n=null;else if(t=e.tag,t===13){if(n=KC(e),n!==null)return n;n=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return t0=n,null}function cT(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(FL()){case NS:return 1;case eT:return 4;case Jy:case OL:return 16;case tT:return 536870912;default:return 16}default:return 16}}var Ho=null,FS=null,ny=null;function uT(){if(ny)return ny;var n,e=FS,t=e.length,s,i="value"in Ho?Ho.value:Ho.textContent,r=i.length;for(n=0;n<t&&e[n]===i[n];n++);var o=t-n;for(s=1;s<=o&&e[t-s]===i[r-s];s++);return ny=i.slice(n,1<s?1-s:void 0)}function sy(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function Nm(){return!0}function uE(){return!1}function ss(n){function e(t,s,i,r,o){this._reactName=t,this._targetInst=i,this.type=s,this.nativeEvent=r,this.target=o,this.currentTarget=null;for(var l in n)n.hasOwnProperty(l)&&(t=n[l],this[l]=t?t(r):r[l]);return this.isDefaultPrevented=(r.defaultPrevented!=null?r.defaultPrevented:r.returnValue===!1)?Nm:uE,this.isPropagationStopped=uE,this}return Xe(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=Nm)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=Nm)},persist:function(){},isPersistent:Nm}),e}var id={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},OS=ss(id),cm=Xe({},id,{view:0,detail:0}),KL=ss(cm),p1,g1,pd,Cw=Xe({},cm,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:BS,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==pd&&(pd&&n.type==="mousemove"?(p1=n.screenX-pd.screenX,g1=n.screenY-pd.screenY):g1=p1=0,pd=n),p1)},movementY:function(n){return"movementY"in n?n.movementY:g1}}),hE=ss(Cw),QL=Xe({},Cw,{dataTransfer:0}),JL=ss(QL),ZL=Xe({},cm,{relatedTarget:0}),m1=ss(ZL),eN=Xe({},id,{animationName:0,elapsedTime:0,pseudoElement:0}),tN=ss(eN),nN=Xe({},id,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),sN=ss(nN),iN=Xe({},id,{data:0}),dE=ss(iN),rN={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},oN={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},aN={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function lN(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=aN[n])?!!e[n]:!1}function BS(){return lN}var cN=Xe({},cm,{key:function(n){if(n.key){var e=rN[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=sy(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?oN[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:BS,charCode:function(n){return n.type==="keypress"?sy(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?sy(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),uN=ss(cN),hN=Xe({},Cw,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),fE=ss(hN),dN=Xe({},cm,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:BS}),fN=ss(dN),pN=Xe({},id,{propertyName:0,elapsedTime:0,pseudoElement:0}),gN=ss(pN),mN=Xe({},Cw,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),yN=ss(mN),vN=[9,13,27,32],jS=Tr&&"CompositionEvent"in window,Kd=null;Tr&&"documentMode"in document&&(Kd=document.documentMode);var wN=Tr&&"TextEvent"in window&&!Kd,hT=Tr&&(!jS||Kd&&8<Kd&&11>=Kd),pE=String.fromCharCode(32),gE=!1;function dT(n,e){switch(n){case"keyup":return vN.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function fT(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Ac=!1;function bN(n,e){switch(n){case"compositionend":return fT(e);case"keypress":return e.which!==32?null:(gE=!0,pE);case"textInput":return n=e.data,n===pE&&gE?null:n;default:return null}}function xN(n,e){if(Ac)return n==="compositionend"||!jS&&dT(n,e)?(n=uT(),ny=FS=Ho=null,Ac=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return hT&&e.locale!=="ko"?null:e.data;default:return null}}var SN={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function mE(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!SN[n.type]:e==="textarea"}function pT(n,e,t,s){WC(s),e=n0(e,"onChange"),0<e.length&&(t=new OS("onChange","change",null,t,s),n.push({event:t,listeners:e}))}var Qd=null,hf=null;function AN(n){_T(n,0)}function Tw(n){var e=Cc(n);if(BC(e))return n}function EN(n,e){if(n==="change")return e}var gT=!1;if(Tr){var y1;if(Tr){var v1="oninput"in document;if(!v1){var yE=document.createElement("div");yE.setAttribute("oninput","return;"),v1=typeof yE.oninput=="function"}y1=v1}else y1=!1;gT=y1&&(!document.documentMode||9<document.documentMode)}function vE(){Qd&&(Qd.detachEvent("onpropertychange",mT),hf=Qd=null)}function mT(n){if(n.propertyName==="value"&&Tw(hf)){var e=[];pT(e,hf,n,LS(n)),YC(AN,e)}}function _N(n,e,t){n==="focusin"?(vE(),Qd=e,hf=t,Qd.attachEvent("onpropertychange",mT)):n==="focusout"&&vE()}function CN(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Tw(hf)}function TN(n,e){if(n==="click")return Tw(e)}function kN(n,e){if(n==="input"||n==="change")return Tw(e)}function PN(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var Ys=typeof Object.is=="function"?Object.is:PN;function df(n,e){if(Ys(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),s=Object.keys(e);if(t.length!==s.length)return!1;for(s=0;s<t.length;s++){var i=t[s];if(!Y1.call(e,i)||!Ys(n[i],e[i]))return!1}return!0}function wE(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function bE(n,e){var t=wE(n);n=0;for(var s;t;){if(t.nodeType===3){if(s=n+t.textContent.length,n<=e&&s>=e)return{node:t,offset:e-n};n=s}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=wE(t)}}function yT(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?yT(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function vT(){for(var n=window,e=Yy();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=Yy(n.document)}return e}function US(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function RN(n){var e=vT(),t=n.focusedElem,s=n.selectionRange;if(e!==t&&t&&t.ownerDocument&&yT(t.ownerDocument.documentElement,t)){if(s!==null&&US(t)){if(e=s.start,n=s.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var i=t.textContent.length,r=Math.min(s.start,i);s=s.end===void 0?r:Math.min(s.end,i),!n.extend&&r>s&&(i=s,s=r,r=i),i=bE(t,r);var o=bE(t,s);i&&o&&(n.rangeCount!==1||n.anchorNode!==i.node||n.anchorOffset!==i.offset||n.focusNode!==o.node||n.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),n.removeAllRanges(),r>s?(n.addRange(e),n.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var LN=Tr&&"documentMode"in document&&11>=document.documentMode,Ec=null,pb=null,Jd=null,gb=!1;function xE(n,e,t){var s=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;gb||Ec==null||Ec!==Yy(s)||(s=Ec,"selectionStart"in s&&US(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),Jd&&df(Jd,s)||(Jd=s,s=n0(pb,"onSelect"),0<s.length&&(e=new OS("onSelect","select",null,e,t),n.push({event:e,listeners:s}),e.target=Ec)))}function Mm(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var _c={animationend:Mm("Animation","AnimationEnd"),animationiteration:Mm("Animation","AnimationIteration"),animationstart:Mm("Animation","AnimationStart"),transitionend:Mm("Transition","TransitionEnd")},w1={},wT={};Tr&&(wT=document.createElement("div").style,"AnimationEvent"in window||(delete _c.animationend.animation,delete _c.animationiteration.animation,delete _c.animationstart.animation),"TransitionEvent"in window||delete _c.transitionend.transition);function kw(n){if(w1[n])return w1[n];if(!_c[n])return n;var e=_c[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in wT)return w1[n]=e[t];return n}var bT=kw("animationend"),xT=kw("animationiteration"),ST=kw("animationstart"),AT=kw("transitionend"),ET=new Map,SE="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ia(n,e){ET.set(n,e),rc(e,[n])}for(var b1=0;b1<SE.length;b1++){var x1=SE[b1],NN=x1.toLowerCase(),MN=x1[0].toUpperCase()+x1.slice(1);ia(NN,"on"+MN)}ia(bT,"onAnimationEnd");ia(xT,"onAnimationIteration");ia(ST,"onAnimationStart");ia("dblclick","onDoubleClick");ia("focusin","onFocus");ia("focusout","onBlur");ia(AT,"onTransitionEnd");Gh("onMouseEnter",["mouseout","mouseover"]);Gh("onMouseLeave",["mouseout","mouseover"]);Gh("onPointerEnter",["pointerout","pointerover"]);Gh("onPointerLeave",["pointerout","pointerover"]);rc("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));rc("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));rc("onBeforeInput",["compositionend","keypress","textInput","paste"]);rc("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));rc("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));rc("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Cd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),DN=new Set("cancel close invalid load scroll toggle".split(" ").concat(Cd));function AE(n,e,t){var s=n.type||"unknown-event";n.currentTarget=t,NL(s,e,void 0,n),n.currentTarget=null}function _T(n,e){e=(e&4)!==0;for(var t=0;t<n.length;t++){var s=n[t],i=s.event;s=s.listeners;e:{var r=void 0;if(e)for(var o=s.length-1;0<=o;o--){var l=s[o],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==r&&i.isPropagationStopped())break e;AE(i,l,u),r=c}else for(o=0;o<s.length;o++){if(l=s[o],c=l.instance,u=l.currentTarget,l=l.listener,c!==r&&i.isPropagationStopped())break e;AE(i,l,u),r=c}}}if(Qy)throw n=ub,Qy=!1,ub=null,n}function Ne(n,e){var t=e[bb];t===void 0&&(t=e[bb]=new Set);var s=n+"__bubble";t.has(s)||(CT(e,n,2,!1),t.add(s))}function S1(n,e,t){var s=0;e&&(s|=4),CT(t,n,s,e)}var Dm="_reactListening"+Math.random().toString(36).slice(2);function ff(n){if(!n[Dm]){n[Dm]=!0,MC.forEach(function(t){t!=="selectionchange"&&(DN.has(t)||S1(t,!1,n),S1(t,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[Dm]||(e[Dm]=!0,S1("selectionchange",!1,e))}}function CT(n,e,t,s){switch(cT(e)){case 1:var i=XL;break;case 4:i=YL;break;default:i=IS}t=i.bind(null,e,t,n),i=void 0,!cb||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),s?i!==void 0?n.addEventListener(e,t,{capture:!0,passive:i}):n.addEventListener(e,t,!0):i!==void 0?n.addEventListener(e,t,{passive:i}):n.addEventListener(e,t,!1)}function A1(n,e,t,s,i){var r=s;if(!(e&1)&&!(e&2)&&s!==null)e:for(;;){if(s===null)return;var o=s.tag;if(o===3||o===4){var l=s.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(o===4)for(o=s.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===i||c.nodeType===8&&c.parentNode===i))return;o=o.return}for(;l!==null;){if(o=ma(l),o===null)return;if(c=o.tag,c===5||c===6){s=r=o;continue e}l=l.parentNode}}s=s.return}YC(function(){var u=r,h=LS(t),d=[];e:{var f=ET.get(n);if(f!==void 0){var m=OS,y=n;switch(n){case"keypress":if(sy(t)===0)break e;case"keydown":case"keyup":m=uN;break;case"focusin":y="focus",m=m1;break;case"focusout":y="blur",m=m1;break;case"beforeblur":case"afterblur":m=m1;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=hE;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=JL;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=fN;break;case bT:case xT:case ST:m=tN;break;case AT:m=gN;break;case"scroll":m=KL;break;case"wheel":m=yN;break;case"copy":case"cut":case"paste":m=sN;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=fE}var w=(e&4)!==0,x=!w&&n==="scroll",v=w?f!==null?f+"Capture":null:f;w=[];for(var b=u,S;b!==null;){S=b;var E=S.stateNode;if(S.tag===5&&E!==null&&(S=E,v!==null&&(E=af(b,v),E!=null&&w.push(pf(b,E,S)))),x)break;b=b.return}0<w.length&&(f=new m(f,y,null,t,h),d.push({event:f,listeners:w}))}}if(!(e&7)){e:{if(f=n==="mouseover"||n==="pointerover",m=n==="mouseout"||n==="pointerout",f&&t!==ab&&(y=t.relatedTarget||t.fromElement)&&(ma(y)||y[kr]))break e;if((m||f)&&(f=h.window===h?h:(f=h.ownerDocument)?f.defaultView||f.parentWindow:window,m?(y=t.relatedTarget||t.toElement,m=u,y=y?ma(y):null,y!==null&&(x=oc(y),y!==x||y.tag!==5&&y.tag!==6)&&(y=null)):(m=null,y=u),m!==y)){if(w=hE,E="onMouseLeave",v="onMouseEnter",b="mouse",(n==="pointerout"||n==="pointerover")&&(w=fE,E="onPointerLeave",v="onPointerEnter",b="pointer"),x=m==null?f:Cc(m),S=y==null?f:Cc(y),f=new w(E,b+"leave",m,t,h),f.target=x,f.relatedTarget=S,E=null,ma(h)===u&&(w=new w(v,b+"enter",y,t,h),w.target=S,w.relatedTarget=x,E=w),x=E,m&&y)t:{for(w=m,v=y,b=0,S=w;S;S=hc(S))b++;for(S=0,E=v;E;E=hc(E))S++;for(;0<b-S;)w=hc(w),b--;for(;0<S-b;)v=hc(v),S--;for(;b--;){if(w===v||v!==null&&w===v.alternate)break t;w=hc(w),v=hc(v)}w=null}else w=null;m!==null&&EE(d,f,m,w,!1),y!==null&&x!==null&&EE(d,x,y,w,!0)}}e:{if(f=u?Cc(u):window,m=f.nodeName&&f.nodeName.toLowerCase(),m==="select"||m==="input"&&f.type==="file")var C=EN;else if(mE(f))if(gT)C=kN;else{C=CN;var T=_N}else(m=f.nodeName)&&m.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(C=TN);if(C&&(C=C(n,u))){pT(d,C,t,h);break e}T&&T(n,f,u),n==="focusout"&&(T=f._wrapperState)&&T.controlled&&f.type==="number"&&nb(f,"number",f.value)}switch(T=u?Cc(u):window,n){case"focusin":(mE(T)||T.contentEditable==="true")&&(Ec=T,pb=u,Jd=null);break;case"focusout":Jd=pb=Ec=null;break;case"mousedown":gb=!0;break;case"contextmenu":case"mouseup":case"dragend":gb=!1,xE(d,t,h);break;case"selectionchange":if(LN)break;case"keydown":case"keyup":xE(d,t,h)}var k;if(jS)e:{switch(n){case"compositionstart":var P="onCompositionStart";break e;case"compositionend":P="onCompositionEnd";break e;case"compositionupdate":P="onCompositionUpdate";break e}P=void 0}else Ac?dT(n,t)&&(P="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(P="onCompositionStart");P&&(hT&&t.locale!=="ko"&&(Ac||P!=="onCompositionStart"?P==="onCompositionEnd"&&Ac&&(k=uT()):(Ho=h,FS="value"in Ho?Ho.value:Ho.textContent,Ac=!0)),T=n0(u,P),0<T.length&&(P=new dE(P,n,null,t,h),d.push({event:P,listeners:T}),k?P.data=k:(k=fT(t),k!==null&&(P.data=k)))),(k=wN?bN(n,t):xN(n,t))&&(u=n0(u,"onBeforeInput"),0<u.length&&(h=new dE("onBeforeInput","beforeinput",null,t,h),d.push({event:h,listeners:u}),h.data=k))}_T(d,e)})}function pf(n,e,t){return{instance:n,listener:e,currentTarget:t}}function n0(n,e){for(var t=e+"Capture",s=[];n!==null;){var i=n,r=i.stateNode;i.tag===5&&r!==null&&(i=r,r=af(n,t),r!=null&&s.unshift(pf(n,r,i)),r=af(n,e),r!=null&&s.push(pf(n,r,i))),n=n.return}return s}function hc(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function EE(n,e,t,s,i){for(var r=e._reactName,o=[];t!==null&&t!==s;){var l=t,c=l.alternate,u=l.stateNode;if(c!==null&&c===s)break;l.tag===5&&u!==null&&(l=u,i?(c=af(t,r),c!=null&&o.unshift(pf(t,c,l))):i||(c=af(t,r),c!=null&&o.push(pf(t,c,l)))),t=t.return}o.length!==0&&n.push({event:e,listeners:o})}var IN=/\r\n?/g,FN=/\u0000|\uFFFD/g;function _E(n){return(typeof n=="string"?n:""+n).replace(IN,`
`).replace(FN,"")}function Im(n,e,t){if(e=_E(e),_E(n)!==e&&t)throw Error(B(425))}function s0(){}var mb=null,yb=null;function vb(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var wb=typeof setTimeout=="function"?setTimeout:void 0,ON=typeof clearTimeout=="function"?clearTimeout:void 0,CE=typeof Promise=="function"?Promise:void 0,BN=typeof queueMicrotask=="function"?queueMicrotask:typeof CE<"u"?function(n){return CE.resolve(null).then(n).catch(jN)}:wb;function jN(n){setTimeout(function(){throw n})}function E1(n,e){var t=e,s=0;do{var i=t.nextSibling;if(n.removeChild(t),i&&i.nodeType===8)if(t=i.data,t==="/$"){if(s===0){n.removeChild(i),uf(e);return}s--}else t!=="$"&&t!=="$?"&&t!=="$!"||s++;t=i}while(t);uf(e)}function Yo(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function TE(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var rd=Math.random().toString(36).slice(2),Ti="__reactFiber$"+rd,gf="__reactProps$"+rd,kr="__reactContainer$"+rd,bb="__reactEvents$"+rd,UN="__reactListeners$"+rd,zN="__reactHandles$"+rd;function ma(n){var e=n[Ti];if(e)return e;for(var t=n.parentNode;t;){if(e=t[kr]||t[Ti]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=TE(n);n!==null;){if(t=n[Ti])return t;n=TE(n)}return e}n=t,t=n.parentNode}return null}function um(n){return n=n[Ti]||n[kr],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function Cc(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(B(33))}function Pw(n){return n[gf]||null}var xb=[],Tc=-1;function ra(n){return{current:n}}function Me(n){0>Tc||(n.current=xb[Tc],xb[Tc]=null,Tc--)}function Pe(n,e){Tc++,xb[Tc]=n.current,n.current=e}var ta={},Jt=ra(ta),En=ra(!1),Ql=ta;function qh(n,e){var t=n.type.contextTypes;if(!t)return ta;var s=n.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===e)return s.__reactInternalMemoizedMaskedChildContext;var i={},r;for(r in t)i[r]=e[r];return s&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=i),i}function _n(n){return n=n.childContextTypes,n!=null}function i0(){Me(En),Me(Jt)}function kE(n,e,t){if(Jt.current!==ta)throw Error(B(168));Pe(Jt,e),Pe(En,t)}function TT(n,e,t){var s=n.stateNode;if(e=e.childContextTypes,typeof s.getChildContext!="function")return t;s=s.getChildContext();for(var i in s)if(!(i in e))throw Error(B(108,_L(n)||"Unknown",i));return Xe({},t,s)}function r0(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||ta,Ql=Jt.current,Pe(Jt,n),Pe(En,En.current),!0}function PE(n,e,t){var s=n.stateNode;if(!s)throw Error(B(169));t?(n=TT(n,e,Ql),s.__reactInternalMemoizedMergedChildContext=n,Me(En),Me(Jt),Pe(Jt,n)):Me(En),Pe(En,t)}var Ui=null,Rw=!1,_1=!1;function kT(n){Ui===null?Ui=[n]:Ui.push(n)}function $N(n){Rw=!0,kT(n)}function oa(){if(!_1&&Ui!==null){_1=!0;var n=0,e=ye;try{var t=Ui;for(ye=1;n<t.length;n++){var s=t[n];do s=s(!0);while(s!==null)}Ui=null,Rw=!1}catch(i){throw Ui!==null&&(Ui=Ui.slice(n+1)),ZC(NS,oa),i}finally{ye=e,_1=!1}}return null}var kc=[],Pc=0,o0=null,a0=0,ws=[],bs=0,Jl=null,Er=1,_r="";function la(n,e){kc[Pc++]=a0,kc[Pc++]=o0,o0=n,a0=e}function PT(n,e,t){ws[bs++]=Er,ws[bs++]=_r,ws[bs++]=Jl,Jl=n;var s=Er;n=_r;var i=32-Gs(s)-1;s&=~(1<<i),t+=1;var r=32-Gs(e)+i;if(30<r){var o=i-i%5;r=(s&(1<<o)-1).toString(32),s>>=o,i-=o,Er=1<<32-Gs(e)+i|t<<i|s,_r=r+n}else Er=1<<r|t<<i|s,_r=n}function zS(n){n.return!==null&&(la(n,1),PT(n,1,0))}function $S(n){for(;n===o0;)o0=kc[--Pc],kc[Pc]=null,a0=kc[--Pc],kc[Pc]=null;for(;n===Jl;)Jl=ws[--bs],ws[bs]=null,_r=ws[--bs],ws[bs]=null,Er=ws[--bs],ws[bs]=null}var Zn=null,Jn=null,je=!1,Ws=null;function RT(n,e){var t=xs(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=n,e=n.deletions,e===null?(n.deletions=[t],n.flags|=16):e.push(t)}function RE(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,Zn=n,Jn=Yo(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,Zn=n,Jn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=Jl!==null?{id:Er,overflow:_r}:null,n.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=xs(18,null,null,0),t.stateNode=e,t.return=n,n.child=t,Zn=n,Jn=null,!0):!1;default:return!1}}function Sb(n){return(n.mode&1)!==0&&(n.flags&128)===0}function Ab(n){if(je){var e=Jn;if(e){var t=e;if(!RE(n,e)){if(Sb(n))throw Error(B(418));e=Yo(t.nextSibling);var s=Zn;e&&RE(n,e)?RT(s,t):(n.flags=n.flags&-4097|2,je=!1,Zn=n)}}else{if(Sb(n))throw Error(B(418));n.flags=n.flags&-4097|2,je=!1,Zn=n}}}function LE(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;Zn=n}function Fm(n){if(n!==Zn)return!1;if(!je)return LE(n),je=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!vb(n.type,n.memoizedProps)),e&&(e=Jn)){if(Sb(n))throw LT(),Error(B(418));for(;e;)RT(n,e),e=Yo(e.nextSibling)}if(LE(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(B(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){Jn=Yo(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}Jn=null}}else Jn=Zn?Yo(n.stateNode.nextSibling):null;return!0}function LT(){for(var n=Jn;n;)n=Yo(n.nextSibling)}function Xh(){Jn=Zn=null,je=!1}function HS(n){Ws===null?Ws=[n]:Ws.push(n)}var HN=Mr.ReactCurrentBatchConfig;function gd(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(B(309));var s=t.stateNode}if(!s)throw Error(B(147,n));var i=s,r=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===r?e.ref:(e=function(o){var l=i.refs;o===null?delete l[r]:l[r]=o},e._stringRef=r,e)}if(typeof n!="string")throw Error(B(284));if(!t._owner)throw Error(B(290,n))}return n}function Om(n,e){throw n=Object.prototype.toString.call(e),Error(B(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function NE(n){var e=n._init;return e(n._payload)}function NT(n){function e(v,b){if(n){var S=v.deletions;S===null?(v.deletions=[b],v.flags|=16):S.push(b)}}function t(v,b){if(!n)return null;for(;b!==null;)e(v,b),b=b.sibling;return null}function s(v,b){for(v=new Map;b!==null;)b.key!==null?v.set(b.key,b):v.set(b.index,b),b=b.sibling;return v}function i(v,b){return v=Zo(v,b),v.index=0,v.sibling=null,v}function r(v,b,S){return v.index=S,n?(S=v.alternate,S!==null?(S=S.index,S<b?(v.flags|=2,b):S):(v.flags|=2,b)):(v.flags|=1048576,b)}function o(v){return n&&v.alternate===null&&(v.flags|=2),v}function l(v,b,S,E){return b===null||b.tag!==6?(b=N1(S,v.mode,E),b.return=v,b):(b=i(b,S),b.return=v,b)}function c(v,b,S,E){var C=S.type;return C===Sc?h(v,b,S.props.children,E,S.key):b!==null&&(b.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===Br&&NE(C)===b.type)?(E=i(b,S.props),E.ref=gd(v,b,S),E.return=v,E):(E=uy(S.type,S.key,S.props,null,v.mode,E),E.ref=gd(v,b,S),E.return=v,E)}function u(v,b,S,E){return b===null||b.tag!==4||b.stateNode.containerInfo!==S.containerInfo||b.stateNode.implementation!==S.implementation?(b=M1(S,v.mode,E),b.return=v,b):(b=i(b,S.children||[]),b.return=v,b)}function h(v,b,S,E,C){return b===null||b.tag!==7?(b=Yl(S,v.mode,E,C),b.return=v,b):(b=i(b,S),b.return=v,b)}function d(v,b,S){if(typeof b=="string"&&b!==""||typeof b=="number")return b=N1(""+b,v.mode,S),b.return=v,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Cm:return S=uy(b.type,b.key,b.props,null,v.mode,S),S.ref=gd(v,null,b),S.return=v,S;case xc:return b=M1(b,v.mode,S),b.return=v,b;case Br:var E=b._init;return d(v,E(b._payload),S)}if(Ed(b)||ud(b))return b=Yl(b,v.mode,S,null),b.return=v,b;Om(v,b)}return null}function f(v,b,S,E){var C=b!==null?b.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return C!==null?null:l(v,b,""+S,E);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Cm:return S.key===C?c(v,b,S,E):null;case xc:return S.key===C?u(v,b,S,E):null;case Br:return C=S._init,f(v,b,C(S._payload),E)}if(Ed(S)||ud(S))return C!==null?null:h(v,b,S,E,null);Om(v,S)}return null}function m(v,b,S,E,C){if(typeof E=="string"&&E!==""||typeof E=="number")return v=v.get(S)||null,l(b,v,""+E,C);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Cm:return v=v.get(E.key===null?S:E.key)||null,c(b,v,E,C);case xc:return v=v.get(E.key===null?S:E.key)||null,u(b,v,E,C);case Br:var T=E._init;return m(v,b,S,T(E._payload),C)}if(Ed(E)||ud(E))return v=v.get(S)||null,h(b,v,E,C,null);Om(b,E)}return null}function y(v,b,S,E){for(var C=null,T=null,k=b,P=b=0,N=null;k!==null&&P<S.length;P++){k.index>P?(N=k,k=null):N=k.sibling;var M=f(v,k,S[P],E);if(M===null){k===null&&(k=N);break}n&&k&&M.alternate===null&&e(v,k),b=r(M,b,P),T===null?C=M:T.sibling=M,T=M,k=N}if(P===S.length)return t(v,k),je&&la(v,P),C;if(k===null){for(;P<S.length;P++)k=d(v,S[P],E),k!==null&&(b=r(k,b,P),T===null?C=k:T.sibling=k,T=k);return je&&la(v,P),C}for(k=s(v,k);P<S.length;P++)N=m(k,v,P,S[P],E),N!==null&&(n&&N.alternate!==null&&k.delete(N.key===null?P:N.key),b=r(N,b,P),T===null?C=N:T.sibling=N,T=N);return n&&k.forEach(function(I){return e(v,I)}),je&&la(v,P),C}function w(v,b,S,E){var C=ud(S);if(typeof C!="function")throw Error(B(150));if(S=C.call(S),S==null)throw Error(B(151));for(var T=C=null,k=b,P=b=0,N=null,M=S.next();k!==null&&!M.done;P++,M=S.next()){k.index>P?(N=k,k=null):N=k.sibling;var I=f(v,k,M.value,E);if(I===null){k===null&&(k=N);break}n&&k&&I.alternate===null&&e(v,k),b=r(I,b,P),T===null?C=I:T.sibling=I,T=I,k=N}if(M.done)return t(v,k),je&&la(v,P),C;if(k===null){for(;!M.done;P++,M=S.next())M=d(v,M.value,E),M!==null&&(b=r(M,b,P),T===null?C=M:T.sibling=M,T=M);return je&&la(v,P),C}for(k=s(v,k);!M.done;P++,M=S.next())M=m(k,v,P,M.value,E),M!==null&&(n&&M.alternate!==null&&k.delete(M.key===null?P:M.key),b=r(M,b,P),T===null?C=M:T.sibling=M,T=M);return n&&k.forEach(function(j){return e(v,j)}),je&&la(v,P),C}function x(v,b,S,E){if(typeof S=="object"&&S!==null&&S.type===Sc&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case Cm:e:{for(var C=S.key,T=b;T!==null;){if(T.key===C){if(C=S.type,C===Sc){if(T.tag===7){t(v,T.sibling),b=i(T,S.props.children),b.return=v,v=b;break e}}else if(T.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===Br&&NE(C)===T.type){t(v,T.sibling),b=i(T,S.props),b.ref=gd(v,T,S),b.return=v,v=b;break e}t(v,T);break}else e(v,T);T=T.sibling}S.type===Sc?(b=Yl(S.props.children,v.mode,E,S.key),b.return=v,v=b):(E=uy(S.type,S.key,S.props,null,v.mode,E),E.ref=gd(v,b,S),E.return=v,v=E)}return o(v);case xc:e:{for(T=S.key;b!==null;){if(b.key===T)if(b.tag===4&&b.stateNode.containerInfo===S.containerInfo&&b.stateNode.implementation===S.implementation){t(v,b.sibling),b=i(b,S.children||[]),b.return=v,v=b;break e}else{t(v,b);break}else e(v,b);b=b.sibling}b=M1(S,v.mode,E),b.return=v,v=b}return o(v);case Br:return T=S._init,x(v,b,T(S._payload),E)}if(Ed(S))return y(v,b,S,E);if(ud(S))return w(v,b,S,E);Om(v,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,b!==null&&b.tag===6?(t(v,b.sibling),b=i(b,S),b.return=v,v=b):(t(v,b),b=N1(S,v.mode,E),b.return=v,v=b),o(v)):t(v,b)}return x}var Yh=NT(!0),MT=NT(!1),l0=ra(null),c0=null,Rc=null,VS=null;function WS(){VS=Rc=c0=null}function GS(n){var e=l0.current;Me(l0),n._currentValue=e}function Eb(n,e,t){for(;n!==null;){var s=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,s!==null&&(s.childLanes|=e)):s!==null&&(s.childLanes&e)!==e&&(s.childLanes|=e),n===t)break;n=n.return}}function $c(n,e){c0=n,VS=Rc=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&(An=!0),n.firstContext=null)}function As(n){var e=n._currentValue;if(VS!==n)if(n={context:n,memoizedValue:e,next:null},Rc===null){if(c0===null)throw Error(B(308));Rc=n,c0.dependencies={lanes:0,firstContext:n}}else Rc=Rc.next=n;return e}var ya=null;function qS(n){ya===null?ya=[n]:ya.push(n)}function DT(n,e,t,s){var i=e.interleaved;return i===null?(t.next=t,qS(e)):(t.next=i.next,i.next=t),e.interleaved=t,Pr(n,s)}function Pr(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}var jr=!1;function XS(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function IT(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function Cr(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function Ko(n,e,t){var s=n.updateQueue;if(s===null)return null;if(s=s.shared,de&2){var i=s.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),s.pending=e,Pr(n,t)}return i=s.interleaved,i===null?(e.next=e,qS(s)):(e.next=i.next,i.next=e),s.interleaved=e,Pr(n,t)}function iy(n,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var s=e.lanes;s&=n.pendingLanes,t|=s,e.lanes=t,MS(n,t)}}function ME(n,e){var t=n.updateQueue,s=n.alternate;if(s!==null&&(s=s.updateQueue,t===s)){var i=null,r=null;if(t=t.firstBaseUpdate,t!==null){do{var o={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};r===null?i=r=o:r=r.next=o,t=t.next}while(t!==null);r===null?i=r=e:r=r.next=e}else i=r=e;t={baseState:s.baseState,firstBaseUpdate:i,lastBaseUpdate:r,shared:s.shared,effects:s.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function u0(n,e,t,s){var i=n.updateQueue;jr=!1;var r=i.firstBaseUpdate,o=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var c=l,u=c.next;c.next=null,o===null?r=u:o.next=u,o=c;var h=n.alternate;h!==null&&(h=h.updateQueue,l=h.lastBaseUpdate,l!==o&&(l===null?h.firstBaseUpdate=u:l.next=u,h.lastBaseUpdate=c))}if(r!==null){var d=i.baseState;o=0,h=u=c=null,l=r;do{var f=l.lane,m=l.eventTime;if((s&f)===f){h!==null&&(h=h.next={eventTime:m,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var y=n,w=l;switch(f=e,m=t,w.tag){case 1:if(y=w.payload,typeof y=="function"){d=y.call(m,d,f);break e}d=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=w.payload,f=typeof y=="function"?y.call(m,d,f):y,f==null)break e;d=Xe({},d,f);break e;case 2:jr=!0}}l.callback!==null&&l.lane!==0&&(n.flags|=64,f=i.effects,f===null?i.effects=[l]:f.push(l))}else m={eventTime:m,lane:f,tag:l.tag,payload:l.payload,callback:l.callback,next:null},h===null?(u=h=m,c=d):h=h.next=m,o|=f;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;f=l,l=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(1);if(h===null&&(c=d),i.baseState=c,i.firstBaseUpdate=u,i.lastBaseUpdate=h,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else r===null&&(i.shared.lanes=0);ec|=o,n.lanes=o,n.memoizedState=d}}function DE(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var s=n[e],i=s.callback;if(i!==null){if(s.callback=null,s=t,typeof i!="function")throw Error(B(191,i));i.call(s)}}}var hm={},Ri=ra(hm),mf=ra(hm),yf=ra(hm);function va(n){if(n===hm)throw Error(B(174));return n}function YS(n,e){switch(Pe(yf,e),Pe(mf,n),Pe(Ri,hm),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:ib(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=ib(e,n)}Me(Ri),Pe(Ri,e)}function Kh(){Me(Ri),Me(mf),Me(yf)}function FT(n){va(yf.current);var e=va(Ri.current),t=ib(e,n.type);e!==t&&(Pe(mf,n),Pe(Ri,t))}function KS(n){mf.current===n&&(Me(Ri),Me(mf))}var Ve=ra(0);function h0(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var C1=[];function QS(){for(var n=0;n<C1.length;n++)C1[n]._workInProgressVersionPrimary=null;C1.length=0}var ry=Mr.ReactCurrentDispatcher,T1=Mr.ReactCurrentBatchConfig,Zl=0,Ge=null,ft=null,_t=null,d0=!1,Zd=!1,vf=0,VN=0;function jt(){throw Error(B(321))}function JS(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!Ys(n[t],e[t]))return!1;return!0}function ZS(n,e,t,s,i,r){if(Zl=r,Ge=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,ry.current=n===null||n.memoizedState===null?XN:YN,n=t(s,i),Zd){r=0;do{if(Zd=!1,vf=0,25<=r)throw Error(B(301));r+=1,_t=ft=null,e.updateQueue=null,ry.current=KN,n=t(s,i)}while(Zd)}if(ry.current=f0,e=ft!==null&&ft.next!==null,Zl=0,_t=ft=Ge=null,d0=!1,e)throw Error(B(300));return n}function eA(){var n=vf!==0;return vf=0,n}function ni(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return _t===null?Ge.memoizedState=_t=n:_t=_t.next=n,_t}function Es(){if(ft===null){var n=Ge.alternate;n=n!==null?n.memoizedState:null}else n=ft.next;var e=_t===null?Ge.memoizedState:_t.next;if(e!==null)_t=e,ft=n;else{if(n===null)throw Error(B(310));ft=n,n={memoizedState:ft.memoizedState,baseState:ft.baseState,baseQueue:ft.baseQueue,queue:ft.queue,next:null},_t===null?Ge.memoizedState=_t=n:_t=_t.next=n}return _t}function wf(n,e){return typeof e=="function"?e(n):e}function k1(n){var e=Es(),t=e.queue;if(t===null)throw Error(B(311));t.lastRenderedReducer=n;var s=ft,i=s.baseQueue,r=t.pending;if(r!==null){if(i!==null){var o=i.next;i.next=r.next,r.next=o}s.baseQueue=i=r,t.pending=null}if(i!==null){r=i.next,s=s.baseState;var l=o=null,c=null,u=r;do{var h=u.lane;if((Zl&h)===h)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),s=u.hasEagerState?u.eagerState:n(s,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=d,o=s):c=c.next=d,Ge.lanes|=h,ec|=h}u=u.next}while(u!==null&&u!==r);c===null?o=s:c.next=l,Ys(s,e.memoizedState)||(An=!0),e.memoizedState=s,e.baseState=o,e.baseQueue=c,t.lastRenderedState=s}if(n=t.interleaved,n!==null){i=n;do r=i.lane,Ge.lanes|=r,ec|=r,i=i.next;while(i!==n)}else i===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function P1(n){var e=Es(),t=e.queue;if(t===null)throw Error(B(311));t.lastRenderedReducer=n;var s=t.dispatch,i=t.pending,r=e.memoizedState;if(i!==null){t.pending=null;var o=i=i.next;do r=n(r,o.action),o=o.next;while(o!==i);Ys(r,e.memoizedState)||(An=!0),e.memoizedState=r,e.baseQueue===null&&(e.baseState=r),t.lastRenderedState=r}return[r,s]}function OT(){}function BT(n,e){var t=Ge,s=Es(),i=e(),r=!Ys(s.memoizedState,i);if(r&&(s.memoizedState=i,An=!0),s=s.queue,tA(zT.bind(null,t,s,n),[n]),s.getSnapshot!==e||r||_t!==null&&_t.memoizedState.tag&1){if(t.flags|=2048,bf(9,UT.bind(null,t,s,i,e),void 0,null),Ct===null)throw Error(B(349));Zl&30||jT(t,e,i)}return i}function jT(n,e,t){n.flags|=16384,n={getSnapshot:e,value:t},e=Ge.updateQueue,e===null?(e={lastEffect:null,stores:null},Ge.updateQueue=e,e.stores=[n]):(t=e.stores,t===null?e.stores=[n]:t.push(n))}function UT(n,e,t,s){e.value=t,e.getSnapshot=s,$T(e)&&HT(n)}function zT(n,e,t){return t(function(){$T(e)&&HT(n)})}function $T(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!Ys(n,t)}catch{return!0}}function HT(n){var e=Pr(n,1);e!==null&&qs(e,n,1,-1)}function IE(n){var e=ni();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:wf,lastRenderedState:n},e.queue=n,n=n.dispatch=qN.bind(null,Ge,n),[e.memoizedState,n]}function bf(n,e,t,s){return n={tag:n,create:e,destroy:t,deps:s,next:null},e=Ge.updateQueue,e===null?(e={lastEffect:null,stores:null},Ge.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(s=t.next,t.next=n,n.next=s,e.lastEffect=n)),n}function VT(){return Es().memoizedState}function oy(n,e,t,s){var i=ni();Ge.flags|=n,i.memoizedState=bf(1|e,t,void 0,s===void 0?null:s)}function Lw(n,e,t,s){var i=Es();s=s===void 0?null:s;var r=void 0;if(ft!==null){var o=ft.memoizedState;if(r=o.destroy,s!==null&&JS(s,o.deps)){i.memoizedState=bf(e,t,r,s);return}}Ge.flags|=n,i.memoizedState=bf(1|e,t,r,s)}function FE(n,e){return oy(8390656,8,n,e)}function tA(n,e){return Lw(2048,8,n,e)}function WT(n,e){return Lw(4,2,n,e)}function GT(n,e){return Lw(4,4,n,e)}function qT(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function XT(n,e,t){return t=t!=null?t.concat([n]):null,Lw(4,4,qT.bind(null,e,n),t)}function nA(){}function YT(n,e){var t=Es();e=e===void 0?null:e;var s=t.memoizedState;return s!==null&&e!==null&&JS(e,s[1])?s[0]:(t.memoizedState=[n,e],n)}function KT(n,e){var t=Es();e=e===void 0?null:e;var s=t.memoizedState;return s!==null&&e!==null&&JS(e,s[1])?s[0]:(n=n(),t.memoizedState=[n,e],n)}function QT(n,e,t){return Zl&21?(Ys(t,e)||(t=nT(),Ge.lanes|=t,ec|=t,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,An=!0),n.memoizedState=t)}function WN(n,e){var t=ye;ye=t!==0&&4>t?t:4,n(!0);var s=T1.transition;T1.transition={};try{n(!1),e()}finally{ye=t,T1.transition=s}}function JT(){return Es().memoizedState}function GN(n,e,t){var s=Jo(n);if(t={lane:s,action:t,hasEagerState:!1,eagerState:null,next:null},ZT(n))ek(e,t);else if(t=DT(n,e,t,s),t!==null){var i=an();qs(t,n,s,i),tk(t,e,s)}}function qN(n,e,t){var s=Jo(n),i={lane:s,action:t,hasEagerState:!1,eagerState:null,next:null};if(ZT(n))ek(e,i);else{var r=n.alternate;if(n.lanes===0&&(r===null||r.lanes===0)&&(r=e.lastRenderedReducer,r!==null))try{var o=e.lastRenderedState,l=r(o,t);if(i.hasEagerState=!0,i.eagerState=l,Ys(l,o)){var c=e.interleaved;c===null?(i.next=i,qS(e)):(i.next=c.next,c.next=i),e.interleaved=i;return}}catch{}finally{}t=DT(n,e,i,s),t!==null&&(i=an(),qs(t,n,s,i),tk(t,e,s))}}function ZT(n){var e=n.alternate;return n===Ge||e!==null&&e===Ge}function ek(n,e){Zd=d0=!0;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}function tk(n,e,t){if(t&4194240){var s=e.lanes;s&=n.pendingLanes,t|=s,e.lanes=t,MS(n,t)}}var f0={readContext:As,useCallback:jt,useContext:jt,useEffect:jt,useImperativeHandle:jt,useInsertionEffect:jt,useLayoutEffect:jt,useMemo:jt,useReducer:jt,useRef:jt,useState:jt,useDebugValue:jt,useDeferredValue:jt,useTransition:jt,useMutableSource:jt,useSyncExternalStore:jt,useId:jt,unstable_isNewReconciler:!1},XN={readContext:As,useCallback:function(n,e){return ni().memoizedState=[n,e===void 0?null:e],n},useContext:As,useEffect:FE,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,oy(4194308,4,qT.bind(null,e,n),t)},useLayoutEffect:function(n,e){return oy(4194308,4,n,e)},useInsertionEffect:function(n,e){return oy(4,2,n,e)},useMemo:function(n,e){var t=ni();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var s=ni();return e=t!==void 0?t(e):e,s.memoizedState=s.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},s.queue=n,n=n.dispatch=GN.bind(null,Ge,n),[s.memoizedState,n]},useRef:function(n){var e=ni();return n={current:n},e.memoizedState=n},useState:IE,useDebugValue:nA,useDeferredValue:function(n){return ni().memoizedState=n},useTransition:function(){var n=IE(!1),e=n[0];return n=WN.bind(null,n[1]),ni().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,t){var s=Ge,i=ni();if(je){if(t===void 0)throw Error(B(407));t=t()}else{if(t=e(),Ct===null)throw Error(B(349));Zl&30||jT(s,e,t)}i.memoizedState=t;var r={value:t,getSnapshot:e};return i.queue=r,FE(zT.bind(null,s,r,n),[n]),s.flags|=2048,bf(9,UT.bind(null,s,r,t,e),void 0,null),t},useId:function(){var n=ni(),e=Ct.identifierPrefix;if(je){var t=_r,s=Er;t=(s&~(1<<32-Gs(s)-1)).toString(32)+t,e=":"+e+"R"+t,t=vf++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=VN++,e=":"+e+"r"+t.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},YN={readContext:As,useCallback:YT,useContext:As,useEffect:tA,useImperativeHandle:XT,useInsertionEffect:WT,useLayoutEffect:GT,useMemo:KT,useReducer:k1,useRef:VT,useState:function(){return k1(wf)},useDebugValue:nA,useDeferredValue:function(n){var e=Es();return QT(e,ft.memoizedState,n)},useTransition:function(){var n=k1(wf)[0],e=Es().memoizedState;return[n,e]},useMutableSource:OT,useSyncExternalStore:BT,useId:JT,unstable_isNewReconciler:!1},KN={readContext:As,useCallback:YT,useContext:As,useEffect:tA,useImperativeHandle:XT,useInsertionEffect:WT,useLayoutEffect:GT,useMemo:KT,useReducer:P1,useRef:VT,useState:function(){return P1(wf)},useDebugValue:nA,useDeferredValue:function(n){var e=Es();return ft===null?e.memoizedState=n:QT(e,ft.memoizedState,n)},useTransition:function(){var n=P1(wf)[0],e=Es().memoizedState;return[n,e]},useMutableSource:OT,useSyncExternalStore:BT,useId:JT,unstable_isNewReconciler:!1};function Ps(n,e){if(n&&n.defaultProps){e=Xe({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}function _b(n,e,t,s){e=n.memoizedState,t=t(s,e),t=t==null?e:Xe({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var Nw={isMounted:function(n){return(n=n._reactInternals)?oc(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var s=an(),i=Jo(n),r=Cr(s,i);r.payload=e,t!=null&&(r.callback=t),e=Ko(n,r,i),e!==null&&(qs(e,n,i,s),iy(e,n,i))},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var s=an(),i=Jo(n),r=Cr(s,i);r.tag=1,r.payload=e,t!=null&&(r.callback=t),e=Ko(n,r,i),e!==null&&(qs(e,n,i,s),iy(e,n,i))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=an(),s=Jo(n),i=Cr(t,s);i.tag=2,e!=null&&(i.callback=e),e=Ko(n,i,s),e!==null&&(qs(e,n,s,t),iy(e,n,s))}};function OE(n,e,t,s,i,r,o){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(s,r,o):e.prototype&&e.prototype.isPureReactComponent?!df(t,s)||!df(i,r):!0}function nk(n,e,t){var s=!1,i=ta,r=e.contextType;return typeof r=="object"&&r!==null?r=As(r):(i=_n(e)?Ql:Jt.current,s=e.contextTypes,r=(s=s!=null)?qh(n,i):ta),e=new e(t,r),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Nw,n.stateNode=e,e._reactInternals=n,s&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=i,n.__reactInternalMemoizedMaskedChildContext=r),e}function BE(n,e,t,s){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,s),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,s),e.state!==n&&Nw.enqueueReplaceState(e,e.state,null)}function Cb(n,e,t,s){var i=n.stateNode;i.props=t,i.state=n.memoizedState,i.refs={},XS(n);var r=e.contextType;typeof r=="object"&&r!==null?i.context=As(r):(r=_n(e)?Ql:Jt.current,i.context=qh(n,r)),i.state=n.memoizedState,r=e.getDerivedStateFromProps,typeof r=="function"&&(_b(n,e,r,t),i.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Nw.enqueueReplaceState(i,i.state,null),u0(n,t,i,s),i.state=n.memoizedState),typeof i.componentDidMount=="function"&&(n.flags|=4194308)}function Qh(n,e){try{var t="",s=e;do t+=EL(s),s=s.return;while(s);var i=t}catch(r){i=`
Error generating stack: `+r.message+`
`+r.stack}return{value:n,source:e,stack:i,digest:null}}function R1(n,e,t){return{value:n,source:null,stack:t??null,digest:e??null}}function Tb(n,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var QN=typeof WeakMap=="function"?WeakMap:Map;function sk(n,e,t){t=Cr(-1,t),t.tag=3,t.payload={element:null};var s=e.value;return t.callback=function(){g0||(g0=!0,Ob=s),Tb(n,e)},t}function ik(n,e,t){t=Cr(-1,t),t.tag=3;var s=n.type.getDerivedStateFromError;if(typeof s=="function"){var i=e.value;t.payload=function(){return s(i)},t.callback=function(){Tb(n,e)}}var r=n.stateNode;return r!==null&&typeof r.componentDidCatch=="function"&&(t.callback=function(){Tb(n,e),typeof s!="function"&&(Qo===null?Qo=new Set([this]):Qo.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),t}function jE(n,e,t){var s=n.pingCache;if(s===null){s=n.pingCache=new QN;var i=new Set;s.set(e,i)}else i=s.get(e),i===void 0&&(i=new Set,s.set(e,i));i.has(t)||(i.add(t),n=hM.bind(null,n,e,t),e.then(n,n))}function UE(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function zE(n,e,t,s,i){return n.mode&1?(n.flags|=65536,n.lanes=i,n):(n===e?n.flags|=65536:(n.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=Cr(-1,1),e.tag=2,Ko(t,e,1))),t.lanes|=1),n)}var JN=Mr.ReactCurrentOwner,An=!1;function on(n,e,t,s){e.child=n===null?MT(e,null,t,s):Yh(e,n.child,t,s)}function $E(n,e,t,s,i){t=t.render;var r=e.ref;return $c(e,i),s=ZS(n,e,t,s,r,i),t=eA(),n!==null&&!An?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~i,Rr(n,e,i)):(je&&t&&zS(e),e.flags|=1,on(n,e,s,i),e.child)}function HE(n,e,t,s,i){if(n===null){var r=t.type;return typeof r=="function"&&!uA(r)&&r.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=r,rk(n,e,r,s,i)):(n=uy(t.type,null,s,e,e.mode,i),n.ref=e.ref,n.return=e,e.child=n)}if(r=n.child,!(n.lanes&i)){var o=r.memoizedProps;if(t=t.compare,t=t!==null?t:df,t(o,s)&&n.ref===e.ref)return Rr(n,e,i)}return e.flags|=1,n=Zo(r,s),n.ref=e.ref,n.return=e,e.child=n}function rk(n,e,t,s,i){if(n!==null){var r=n.memoizedProps;if(df(r,s)&&n.ref===e.ref)if(An=!1,e.pendingProps=s=r,(n.lanes&i)!==0)n.flags&131072&&(An=!0);else return e.lanes=n.lanes,Rr(n,e,i)}return kb(n,e,t,s,i)}function ok(n,e,t){var s=e.pendingProps,i=s.children,r=n!==null?n.memoizedState:null;if(s.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Pe(Nc,Yn),Yn|=t;else{if(!(t&1073741824))return n=r!==null?r.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,Pe(Nc,Yn),Yn|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=r!==null?r.baseLanes:t,Pe(Nc,Yn),Yn|=s}else r!==null?(s=r.baseLanes|t,e.memoizedState=null):s=t,Pe(Nc,Yn),Yn|=s;return on(n,e,i,t),e.child}function ak(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function kb(n,e,t,s,i){var r=_n(t)?Ql:Jt.current;return r=qh(e,r),$c(e,i),t=ZS(n,e,t,s,r,i),s=eA(),n!==null&&!An?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~i,Rr(n,e,i)):(je&&s&&zS(e),e.flags|=1,on(n,e,t,i),e.child)}function VE(n,e,t,s,i){if(_n(t)){var r=!0;r0(e)}else r=!1;if($c(e,i),e.stateNode===null)ay(n,e),nk(e,t,s),Cb(e,t,s,i),s=!0;else if(n===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var c=o.context,u=t.contextType;typeof u=="object"&&u!==null?u=As(u):(u=_n(t)?Ql:Jt.current,u=qh(e,u));var h=t.getDerivedStateFromProps,d=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==s||c!==u)&&BE(e,o,s,u),jr=!1;var f=e.memoizedState;o.state=f,u0(e,s,o,i),c=e.memoizedState,l!==s||f!==c||En.current||jr?(typeof h=="function"&&(_b(e,t,h,s),c=e.memoizedState),(l=jr||OE(e,t,l,s,f,c,u))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=s,e.memoizedState=c),o.props=s,o.state=c,o.context=u,s=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),s=!1)}else{o=e.stateNode,IT(n,e),l=e.memoizedProps,u=e.type===e.elementType?l:Ps(e.type,l),o.props=u,d=e.pendingProps,f=o.context,c=t.contextType,typeof c=="object"&&c!==null?c=As(c):(c=_n(t)?Ql:Jt.current,c=qh(e,c));var m=t.getDerivedStateFromProps;(h=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==d||f!==c)&&BE(e,o,s,c),jr=!1,f=e.memoizedState,o.state=f,u0(e,s,o,i);var y=e.memoizedState;l!==d||f!==y||En.current||jr?(typeof m=="function"&&(_b(e,t,m,s),y=e.memoizedState),(u=jr||OE(e,t,u,s,f,y,c)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(s,y,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(s,y,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===n.memoizedProps&&f===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===n.memoizedProps&&f===n.memoizedState||(e.flags|=1024),e.memoizedProps=s,e.memoizedState=y),o.props=s,o.state=y,o.context=c,s=u):(typeof o.componentDidUpdate!="function"||l===n.memoizedProps&&f===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===n.memoizedProps&&f===n.memoizedState||(e.flags|=1024),s=!1)}return Pb(n,e,t,s,r,i)}function Pb(n,e,t,s,i,r){ak(n,e);var o=(e.flags&128)!==0;if(!s&&!o)return i&&PE(e,t,!1),Rr(n,e,r);s=e.stateNode,JN.current=e;var l=o&&typeof t.getDerivedStateFromError!="function"?null:s.render();return e.flags|=1,n!==null&&o?(e.child=Yh(e,n.child,null,r),e.child=Yh(e,null,l,r)):on(n,e,l,r),e.memoizedState=s.state,i&&PE(e,t,!0),e.child}function lk(n){var e=n.stateNode;e.pendingContext?kE(n,e.pendingContext,e.pendingContext!==e.context):e.context&&kE(n,e.context,!1),YS(n,e.containerInfo)}function WE(n,e,t,s,i){return Xh(),HS(i),e.flags|=256,on(n,e,t,s),e.child}var Rb={dehydrated:null,treeContext:null,retryLane:0};function Lb(n){return{baseLanes:n,cachePool:null,transitions:null}}function ck(n,e,t){var s=e.pendingProps,i=Ve.current,r=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=n!==null&&n.memoizedState===null?!1:(i&2)!==0),l?(r=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(i|=1),Pe(Ve,i&1),n===null)return Ab(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=s.children,n=s.fallback,r?(s=e.mode,r=e.child,o={mode:"hidden",children:o},!(s&1)&&r!==null?(r.childLanes=0,r.pendingProps=o):r=Iw(o,s,0,null),n=Yl(n,s,t,null),r.return=e,n.return=e,r.sibling=n,e.child=r,e.child.memoizedState=Lb(t),e.memoizedState=Rb,n):sA(e,o));if(i=n.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return ZN(n,e,o,s,l,i,t);if(r){r=s.fallback,o=e.mode,i=n.child,l=i.sibling;var c={mode:"hidden",children:s.children};return!(o&1)&&e.child!==i?(s=e.child,s.childLanes=0,s.pendingProps=c,e.deletions=null):(s=Zo(i,c),s.subtreeFlags=i.subtreeFlags&14680064),l!==null?r=Zo(l,r):(r=Yl(r,o,t,null),r.flags|=2),r.return=e,s.return=e,s.sibling=r,e.child=s,s=r,r=e.child,o=n.child.memoizedState,o=o===null?Lb(t):{baseLanes:o.baseLanes|t,cachePool:null,transitions:o.transitions},r.memoizedState=o,r.childLanes=n.childLanes&~t,e.memoizedState=Rb,s}return r=n.child,n=r.sibling,s=Zo(r,{mode:"visible",children:s.children}),!(e.mode&1)&&(s.lanes=t),s.return=e,s.sibling=null,n!==null&&(t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)),e.child=s,e.memoizedState=null,s}function sA(n,e){return e=Iw({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function Bm(n,e,t,s){return s!==null&&HS(s),Yh(e,n.child,null,t),n=sA(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function ZN(n,e,t,s,i,r,o){if(t)return e.flags&256?(e.flags&=-257,s=R1(Error(B(422))),Bm(n,e,o,s)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(r=s.fallback,i=e.mode,s=Iw({mode:"visible",children:s.children},i,0,null),r=Yl(r,i,o,null),r.flags|=2,s.return=e,r.return=e,s.sibling=r,e.child=s,e.mode&1&&Yh(e,n.child,null,o),e.child.memoizedState=Lb(o),e.memoizedState=Rb,r);if(!(e.mode&1))return Bm(n,e,o,null);if(i.data==="$!"){if(s=i.nextSibling&&i.nextSibling.dataset,s)var l=s.dgst;return s=l,r=Error(B(419)),s=R1(r,s,void 0),Bm(n,e,o,s)}if(l=(o&n.childLanes)!==0,An||l){if(s=Ct,s!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(s.suspendedLanes|o)?0:i,i!==0&&i!==r.retryLane&&(r.retryLane=i,Pr(n,i),qs(s,n,i,-1))}return cA(),s=R1(Error(B(421))),Bm(n,e,o,s)}return i.data==="$?"?(e.flags|=128,e.child=n.child,e=dM.bind(null,n),i._reactRetry=e,null):(n=r.treeContext,Jn=Yo(i.nextSibling),Zn=e,je=!0,Ws=null,n!==null&&(ws[bs++]=Er,ws[bs++]=_r,ws[bs++]=Jl,Er=n.id,_r=n.overflow,Jl=e),e=sA(e,s.children),e.flags|=4096,e)}function GE(n,e,t){n.lanes|=e;var s=n.alternate;s!==null&&(s.lanes|=e),Eb(n.return,e,t)}function L1(n,e,t,s,i){var r=n.memoizedState;r===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:s,tail:t,tailMode:i}:(r.isBackwards=e,r.rendering=null,r.renderingStartTime=0,r.last=s,r.tail=t,r.tailMode=i)}function uk(n,e,t){var s=e.pendingProps,i=s.revealOrder,r=s.tail;if(on(n,e,s.children,t),s=Ve.current,s&2)s=s&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&GE(n,t,e);else if(n.tag===19)GE(n,t,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}s&=1}if(Pe(Ve,s),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(t=e.child,i=null;t!==null;)n=t.alternate,n!==null&&h0(n)===null&&(i=t),t=t.sibling;t=i,t===null?(i=e.child,e.child=null):(i=t.sibling,t.sibling=null),L1(e,!1,i,t,r);break;case"backwards":for(t=null,i=e.child,e.child=null;i!==null;){if(n=i.alternate,n!==null&&h0(n)===null){e.child=i;break}n=i.sibling,i.sibling=t,t=i,i=n}L1(e,!0,t,null,r);break;case"together":L1(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function ay(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function Rr(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),ec|=e.lanes,!(t&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error(B(153));if(e.child!==null){for(n=e.child,t=Zo(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=Zo(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}function eM(n,e,t){switch(e.tag){case 3:lk(e),Xh();break;case 5:FT(e);break;case 1:_n(e.type)&&r0(e);break;case 4:YS(e,e.stateNode.containerInfo);break;case 10:var s=e.type._context,i=e.memoizedProps.value;Pe(l0,s._currentValue),s._currentValue=i;break;case 13:if(s=e.memoizedState,s!==null)return s.dehydrated!==null?(Pe(Ve,Ve.current&1),e.flags|=128,null):t&e.child.childLanes?ck(n,e,t):(Pe(Ve,Ve.current&1),n=Rr(n,e,t),n!==null?n.sibling:null);Pe(Ve,Ve.current&1);break;case 19:if(s=(t&e.childLanes)!==0,n.flags&128){if(s)return uk(n,e,t);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Pe(Ve,Ve.current),s)break;return null;case 22:case 23:return e.lanes=0,ok(n,e,t)}return Rr(n,e,t)}var hk,Nb,dk,fk;hk=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};Nb=function(){};dk=function(n,e,t,s){var i=n.memoizedProps;if(i!==s){n=e.stateNode,va(Ri.current);var r=null;switch(t){case"input":i=eb(n,i),s=eb(n,s),r=[];break;case"select":i=Xe({},i,{value:void 0}),s=Xe({},s,{value:void 0}),r=[];break;case"textarea":i=sb(n,i),s=sb(n,s),r=[];break;default:typeof i.onClick!="function"&&typeof s.onClick=="function"&&(n.onclick=s0)}rb(t,s);var o;t=null;for(u in i)if(!s.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var l=i[u];for(o in l)l.hasOwnProperty(o)&&(t||(t={}),t[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(rf.hasOwnProperty(u)?r||(r=[]):(r=r||[]).push(u,null));for(u in s){var c=s[u];if(l=i!=null?i[u]:void 0,s.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(t||(t={}),t[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(t||(t={}),t[o]=c[o])}else t||(r||(r=[]),r.push(u,t)),t=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(r=r||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(r=r||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(rf.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&Ne("scroll",n),r||l===c||(r=[])):(r=r||[]).push(u,c))}t&&(r=r||[]).push("style",t);var u=r;(e.updateQueue=u)&&(e.flags|=4)}};fk=function(n,e,t,s){t!==s&&(e.flags|=4)};function md(n,e){if(!je)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var s=null;t!==null;)t.alternate!==null&&(s=t),t=t.sibling;s===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:s.sibling=null}}function Ut(n){var e=n.alternate!==null&&n.alternate.child===n.child,t=0,s=0;if(e)for(var i=n.child;i!==null;)t|=i.lanes|i.childLanes,s|=i.subtreeFlags&14680064,s|=i.flags&14680064,i.return=n,i=i.sibling;else for(i=n.child;i!==null;)t|=i.lanes|i.childLanes,s|=i.subtreeFlags,s|=i.flags,i.return=n,i=i.sibling;return n.subtreeFlags|=s,n.childLanes=t,e}function tM(n,e,t){var s=e.pendingProps;switch($S(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ut(e),null;case 1:return _n(e.type)&&i0(),Ut(e),null;case 3:return s=e.stateNode,Kh(),Me(En),Me(Jt),QS(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(n===null||n.child===null)&&(Fm(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Ws!==null&&(Ub(Ws),Ws=null))),Nb(n,e),Ut(e),null;case 5:KS(e);var i=va(yf.current);if(t=e.type,n!==null&&e.stateNode!=null)dk(n,e,t,s,i),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!s){if(e.stateNode===null)throw Error(B(166));return Ut(e),null}if(n=va(Ri.current),Fm(e)){s=e.stateNode,t=e.type;var r=e.memoizedProps;switch(s[Ti]=e,s[gf]=r,n=(e.mode&1)!==0,t){case"dialog":Ne("cancel",s),Ne("close",s);break;case"iframe":case"object":case"embed":Ne("load",s);break;case"video":case"audio":for(i=0;i<Cd.length;i++)Ne(Cd[i],s);break;case"source":Ne("error",s);break;case"img":case"image":case"link":Ne("error",s),Ne("load",s);break;case"details":Ne("toggle",s);break;case"input":tE(s,r),Ne("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!r.multiple},Ne("invalid",s);break;case"textarea":sE(s,r),Ne("invalid",s)}rb(t,r),i=null;for(var o in r)if(r.hasOwnProperty(o)){var l=r[o];o==="children"?typeof l=="string"?s.textContent!==l&&(r.suppressHydrationWarning!==!0&&Im(s.textContent,l,n),i=["children",l]):typeof l=="number"&&s.textContent!==""+l&&(r.suppressHydrationWarning!==!0&&Im(s.textContent,l,n),i=["children",""+l]):rf.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Ne("scroll",s)}switch(t){case"input":Tm(s),nE(s,r,!0);break;case"textarea":Tm(s),iE(s);break;case"select":case"option":break;default:typeof r.onClick=="function"&&(s.onclick=s0)}s=i,e.updateQueue=s,s!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=zC(t)),n==="http://www.w3.org/1999/xhtml"?t==="script"?(n=o.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof s.is=="string"?n=o.createElement(t,{is:s.is}):(n=o.createElement(t),t==="select"&&(o=n,s.multiple?o.multiple=!0:s.size&&(o.size=s.size))):n=o.createElementNS(n,t),n[Ti]=e,n[gf]=s,hk(n,e,!1,!1),e.stateNode=n;e:{switch(o=ob(t,s),t){case"dialog":Ne("cancel",n),Ne("close",n),i=s;break;case"iframe":case"object":case"embed":Ne("load",n),i=s;break;case"video":case"audio":for(i=0;i<Cd.length;i++)Ne(Cd[i],n);i=s;break;case"source":Ne("error",n),i=s;break;case"img":case"image":case"link":Ne("error",n),Ne("load",n),i=s;break;case"details":Ne("toggle",n),i=s;break;case"input":tE(n,s),i=eb(n,s),Ne("invalid",n);break;case"option":i=s;break;case"select":n._wrapperState={wasMultiple:!!s.multiple},i=Xe({},s,{value:void 0}),Ne("invalid",n);break;case"textarea":sE(n,s),i=sb(n,s),Ne("invalid",n);break;default:i=s}rb(t,i),l=i;for(r in l)if(l.hasOwnProperty(r)){var c=l[r];r==="style"?VC(n,c):r==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&$C(n,c)):r==="children"?typeof c=="string"?(t!=="textarea"||c!=="")&&of(n,c):typeof c=="number"&&of(n,""+c):r!=="suppressContentEditableWarning"&&r!=="suppressHydrationWarning"&&r!=="autoFocus"&&(rf.hasOwnProperty(r)?c!=null&&r==="onScroll"&&Ne("scroll",n):c!=null&&TS(n,r,c,o))}switch(t){case"input":Tm(n),nE(n,s,!1);break;case"textarea":Tm(n),iE(n);break;case"option":s.value!=null&&n.setAttribute("value",""+ea(s.value));break;case"select":n.multiple=!!s.multiple,r=s.value,r!=null?Bc(n,!!s.multiple,r,!1):s.defaultValue!=null&&Bc(n,!!s.multiple,s.defaultValue,!0);break;default:typeof i.onClick=="function"&&(n.onclick=s0)}switch(t){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ut(e),null;case 6:if(n&&e.stateNode!=null)fk(n,e,n.memoizedProps,s);else{if(typeof s!="string"&&e.stateNode===null)throw Error(B(166));if(t=va(yf.current),va(Ri.current),Fm(e)){if(s=e.stateNode,t=e.memoizedProps,s[Ti]=e,(r=s.nodeValue!==t)&&(n=Zn,n!==null))switch(n.tag){case 3:Im(s.nodeValue,t,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&Im(s.nodeValue,t,(n.mode&1)!==0)}r&&(e.flags|=4)}else s=(t.nodeType===9?t:t.ownerDocument).createTextNode(s),s[Ti]=e,e.stateNode=s}return Ut(e),null;case 13:if(Me(Ve),s=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(je&&Jn!==null&&e.mode&1&&!(e.flags&128))LT(),Xh(),e.flags|=98560,r=!1;else if(r=Fm(e),s!==null&&s.dehydrated!==null){if(n===null){if(!r)throw Error(B(318));if(r=e.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(B(317));r[Ti]=e}else Xh(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ut(e),r=!1}else Ws!==null&&(Ub(Ws),Ws=null),r=!0;if(!r)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(s=s!==null,s!==(n!==null&&n.memoizedState!==null)&&s&&(e.child.flags|=8192,e.mode&1&&(n===null||Ve.current&1?pt===0&&(pt=3):cA())),e.updateQueue!==null&&(e.flags|=4),Ut(e),null);case 4:return Kh(),Nb(n,e),n===null&&ff(e.stateNode.containerInfo),Ut(e),null;case 10:return GS(e.type._context),Ut(e),null;case 17:return _n(e.type)&&i0(),Ut(e),null;case 19:if(Me(Ve),r=e.memoizedState,r===null)return Ut(e),null;if(s=(e.flags&128)!==0,o=r.rendering,o===null)if(s)md(r,!1);else{if(pt!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(o=h0(n),o!==null){for(e.flags|=128,md(r,!1),s=o.updateQueue,s!==null&&(e.updateQueue=s,e.flags|=4),e.subtreeFlags=0,s=t,t=e.child;t!==null;)r=t,n=s,r.flags&=14680066,o=r.alternate,o===null?(r.childLanes=0,r.lanes=n,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=o.childLanes,r.lanes=o.lanes,r.child=o.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=o.memoizedProps,r.memoizedState=o.memoizedState,r.updateQueue=o.updateQueue,r.type=o.type,n=o.dependencies,r.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return Pe(Ve,Ve.current&1|2),e.child}n=n.sibling}r.tail!==null&&st()>Jh&&(e.flags|=128,s=!0,md(r,!1),e.lanes=4194304)}else{if(!s)if(n=h0(o),n!==null){if(e.flags|=128,s=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),md(r,!0),r.tail===null&&r.tailMode==="hidden"&&!o.alternate&&!je)return Ut(e),null}else 2*st()-r.renderingStartTime>Jh&&t!==1073741824&&(e.flags|=128,s=!0,md(r,!1),e.lanes=4194304);r.isBackwards?(o.sibling=e.child,e.child=o):(t=r.last,t!==null?t.sibling=o:e.child=o,r.last=o)}return r.tail!==null?(e=r.tail,r.rendering=e,r.tail=e.sibling,r.renderingStartTime=st(),e.sibling=null,t=Ve.current,Pe(Ve,s?t&1|2:t&1),e):(Ut(e),null);case 22:case 23:return lA(),s=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==s&&(e.flags|=8192),s&&e.mode&1?Yn&1073741824&&(Ut(e),e.subtreeFlags&6&&(e.flags|=8192)):Ut(e),null;case 24:return null;case 25:return null}throw Error(B(156,e.tag))}function nM(n,e){switch($S(e),e.tag){case 1:return _n(e.type)&&i0(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return Kh(),Me(En),Me(Jt),QS(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return KS(e),null;case 13:if(Me(Ve),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(B(340));Xh()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return Me(Ve),null;case 4:return Kh(),null;case 10:return GS(e.type._context),null;case 22:case 23:return lA(),null;case 24:return null;default:return null}}var jm=!1,Yt=!1,sM=typeof WeakSet=="function"?WeakSet:Set,G=null;function Lc(n,e){var t=n.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(s){Je(n,e,s)}else t.current=null}function Mb(n,e,t){try{t()}catch(s){Je(n,e,s)}}var qE=!1;function iM(n,e){if(mb=e0,n=vT(),US(n)){if("selectionStart"in n)var t={start:n.selectionStart,end:n.selectionEnd};else e:{t=(t=n.ownerDocument)&&t.defaultView||window;var s=t.getSelection&&t.getSelection();if(s&&s.rangeCount!==0){t=s.anchorNode;var i=s.anchorOffset,r=s.focusNode;s=s.focusOffset;try{t.nodeType,r.nodeType}catch{t=null;break e}var o=0,l=-1,c=-1,u=0,h=0,d=n,f=null;t:for(;;){for(var m;d!==t||i!==0&&d.nodeType!==3||(l=o+i),d!==r||s!==0&&d.nodeType!==3||(c=o+s),d.nodeType===3&&(o+=d.nodeValue.length),(m=d.firstChild)!==null;)f=d,d=m;for(;;){if(d===n)break t;if(f===t&&++u===i&&(l=o),f===r&&++h===s&&(c=o),(m=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=m}t=l===-1||c===-1?null:{start:l,end:c}}else t=null}t=t||{start:0,end:0}}else t=null;for(yb={focusedElem:n,selectionRange:t},e0=!1,G=e;G!==null;)if(e=G,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,G=n;else for(;G!==null;){e=G;try{var y=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var w=y.memoizedProps,x=y.memoizedState,v=e.stateNode,b=v.getSnapshotBeforeUpdate(e.elementType===e.type?w:Ps(e.type,w),x);v.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var S=e.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(B(163))}}catch(E){Je(e,e.return,E)}if(n=e.sibling,n!==null){n.return=e.return,G=n;break}G=e.return}return y=qE,qE=!1,y}function ef(n,e,t){var s=e.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var i=s=s.next;do{if((i.tag&n)===n){var r=i.destroy;i.destroy=void 0,r!==void 0&&Mb(e,t,r)}i=i.next}while(i!==s)}}function Mw(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&n)===n){var s=t.create;t.destroy=s()}t=t.next}while(t!==e)}}function Db(n){var e=n.ref;if(e!==null){var t=n.stateNode;switch(n.tag){case 5:n=t;break;default:n=t}typeof e=="function"?e(n):e.current=n}}function pk(n){var e=n.alternate;e!==null&&(n.alternate=null,pk(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[Ti],delete e[gf],delete e[bb],delete e[UN],delete e[zN])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function gk(n){return n.tag===5||n.tag===3||n.tag===4}function XE(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||gk(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Ib(n,e,t){var s=n.tag;if(s===5||s===6)n=n.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=s0));else if(s!==4&&(n=n.child,n!==null))for(Ib(n,e,t),n=n.sibling;n!==null;)Ib(n,e,t),n=n.sibling}function Fb(n,e,t){var s=n.tag;if(s===5||s===6)n=n.stateNode,e?t.insertBefore(n,e):t.appendChild(n);else if(s!==4&&(n=n.child,n!==null))for(Fb(n,e,t),n=n.sibling;n!==null;)Fb(n,e,t),n=n.sibling}var It=null,Vs=!1;function Fr(n,e,t){for(t=t.child;t!==null;)mk(n,e,t),t=t.sibling}function mk(n,e,t){if(Pi&&typeof Pi.onCommitFiberUnmount=="function")try{Pi.onCommitFiberUnmount(_w,t)}catch{}switch(t.tag){case 5:Yt||Lc(t,e);case 6:var s=It,i=Vs;It=null,Fr(n,e,t),It=s,Vs=i,It!==null&&(Vs?(n=It,t=t.stateNode,n.nodeType===8?n.parentNode.removeChild(t):n.removeChild(t)):It.removeChild(t.stateNode));break;case 18:It!==null&&(Vs?(n=It,t=t.stateNode,n.nodeType===8?E1(n.parentNode,t):n.nodeType===1&&E1(n,t),uf(n)):E1(It,t.stateNode));break;case 4:s=It,i=Vs,It=t.stateNode.containerInfo,Vs=!0,Fr(n,e,t),It=s,Vs=i;break;case 0:case 11:case 14:case 15:if(!Yt&&(s=t.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){i=s=s.next;do{var r=i,o=r.destroy;r=r.tag,o!==void 0&&(r&2||r&4)&&Mb(t,e,o),i=i.next}while(i!==s)}Fr(n,e,t);break;case 1:if(!Yt&&(Lc(t,e),s=t.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=t.memoizedProps,s.state=t.memoizedState,s.componentWillUnmount()}catch(l){Je(t,e,l)}Fr(n,e,t);break;case 21:Fr(n,e,t);break;case 22:t.mode&1?(Yt=(s=Yt)||t.memoizedState!==null,Fr(n,e,t),Yt=s):Fr(n,e,t);break;default:Fr(n,e,t)}}function YE(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new sM),e.forEach(function(s){var i=fM.bind(null,n,s);t.has(s)||(t.add(s),s.then(i,i))})}}function Cs(n,e){var t=e.deletions;if(t!==null)for(var s=0;s<t.length;s++){var i=t[s];try{var r=n,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:It=l.stateNode,Vs=!1;break e;case 3:It=l.stateNode.containerInfo,Vs=!0;break e;case 4:It=l.stateNode.containerInfo,Vs=!0;break e}l=l.return}if(It===null)throw Error(B(160));mk(r,o,i),It=null,Vs=!1;var c=i.alternate;c!==null&&(c.return=null),i.return=null}catch(u){Je(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)yk(e,n),e=e.sibling}function yk(n,e){var t=n.alternate,s=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(Cs(e,n),Js(n),s&4){try{ef(3,n,n.return),Mw(3,n)}catch(w){Je(n,n.return,w)}try{ef(5,n,n.return)}catch(w){Je(n,n.return,w)}}break;case 1:Cs(e,n),Js(n),s&512&&t!==null&&Lc(t,t.return);break;case 5:if(Cs(e,n),Js(n),s&512&&t!==null&&Lc(t,t.return),n.flags&32){var i=n.stateNode;try{of(i,"")}catch(w){Je(n,n.return,w)}}if(s&4&&(i=n.stateNode,i!=null)){var r=n.memoizedProps,o=t!==null?t.memoizedProps:r,l=n.type,c=n.updateQueue;if(n.updateQueue=null,c!==null)try{l==="input"&&r.type==="radio"&&r.name!=null&&jC(i,r),ob(l,o);var u=ob(l,r);for(o=0;o<c.length;o+=2){var h=c[o],d=c[o+1];h==="style"?VC(i,d):h==="dangerouslySetInnerHTML"?$C(i,d):h==="children"?of(i,d):TS(i,h,d,u)}switch(l){case"input":tb(i,r);break;case"textarea":UC(i,r);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!r.multiple;var m=r.value;m!=null?Bc(i,!!r.multiple,m,!1):f!==!!r.multiple&&(r.defaultValue!=null?Bc(i,!!r.multiple,r.defaultValue,!0):Bc(i,!!r.multiple,r.multiple?[]:"",!1))}i[gf]=r}catch(w){Je(n,n.return,w)}}break;case 6:if(Cs(e,n),Js(n),s&4){if(n.stateNode===null)throw Error(B(162));i=n.stateNode,r=n.memoizedProps;try{i.nodeValue=r}catch(w){Je(n,n.return,w)}}break;case 3:if(Cs(e,n),Js(n),s&4&&t!==null&&t.memoizedState.isDehydrated)try{uf(e.containerInfo)}catch(w){Je(n,n.return,w)}break;case 4:Cs(e,n),Js(n);break;case 13:Cs(e,n),Js(n),i=n.child,i.flags&8192&&(r=i.memoizedState!==null,i.stateNode.isHidden=r,!r||i.alternate!==null&&i.alternate.memoizedState!==null||(oA=st())),s&4&&YE(n);break;case 22:if(h=t!==null&&t.memoizedState!==null,n.mode&1?(Yt=(u=Yt)||h,Cs(e,n),Yt=u):Cs(e,n),Js(n),s&8192){if(u=n.memoizedState!==null,(n.stateNode.isHidden=u)&&!h&&n.mode&1)for(G=n,h=n.child;h!==null;){for(d=G=h;G!==null;){switch(f=G,m=f.child,f.tag){case 0:case 11:case 14:case 15:ef(4,f,f.return);break;case 1:Lc(f,f.return);var y=f.stateNode;if(typeof y.componentWillUnmount=="function"){s=f,t=f.return;try{e=s,y.props=e.memoizedProps,y.state=e.memoizedState,y.componentWillUnmount()}catch(w){Je(s,t,w)}}break;case 5:Lc(f,f.return);break;case 22:if(f.memoizedState!==null){QE(d);continue}}m!==null?(m.return=f,G=m):QE(d)}h=h.sibling}e:for(h=null,d=n;;){if(d.tag===5){if(h===null){h=d;try{i=d.stateNode,u?(r=i.style,typeof r.setProperty=="function"?r.setProperty("display","none","important"):r.display="none"):(l=d.stateNode,c=d.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=HC("display",o))}catch(w){Je(n,n.return,w)}}}else if(d.tag===6){if(h===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(w){Je(n,n.return,w)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===n)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===n)break e;for(;d.sibling===null;){if(d.return===null||d.return===n)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Cs(e,n),Js(n),s&4&&YE(n);break;case 21:break;default:Cs(e,n),Js(n)}}function Js(n){var e=n.flags;if(e&2){try{e:{for(var t=n.return;t!==null;){if(gk(t)){var s=t;break e}t=t.return}throw Error(B(160))}switch(s.tag){case 5:var i=s.stateNode;s.flags&32&&(of(i,""),s.flags&=-33);var r=XE(n);Fb(n,r,i);break;case 3:case 4:var o=s.stateNode.containerInfo,l=XE(n);Ib(n,l,o);break;default:throw Error(B(161))}}catch(c){Je(n,n.return,c)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function rM(n,e,t){G=n,vk(n)}function vk(n,e,t){for(var s=(n.mode&1)!==0;G!==null;){var i=G,r=i.child;if(i.tag===22&&s){var o=i.memoizedState!==null||jm;if(!o){var l=i.alternate,c=l!==null&&l.memoizedState!==null||Yt;l=jm;var u=Yt;if(jm=o,(Yt=c)&&!u)for(G=i;G!==null;)o=G,c=o.child,o.tag===22&&o.memoizedState!==null?JE(i):c!==null?(c.return=o,G=c):JE(i);for(;r!==null;)G=r,vk(r),r=r.sibling;G=i,jm=l,Yt=u}KE(n)}else i.subtreeFlags&8772&&r!==null?(r.return=i,G=r):KE(n)}}function KE(n){for(;G!==null;){var e=G;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Yt||Mw(5,e);break;case 1:var s=e.stateNode;if(e.flags&4&&!Yt)if(t===null)s.componentDidMount();else{var i=e.elementType===e.type?t.memoizedProps:Ps(e.type,t.memoizedProps);s.componentDidUpdate(i,t.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var r=e.updateQueue;r!==null&&DE(e,r,s);break;case 3:var o=e.updateQueue;if(o!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}DE(e,o,t)}break;case 5:var l=e.stateNode;if(t===null&&e.flags&4){t=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&t.focus();break;case"img":c.src&&(t.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var h=u.memoizedState;if(h!==null){var d=h.dehydrated;d!==null&&uf(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(B(163))}Yt||e.flags&512&&Db(e)}catch(f){Je(e,e.return,f)}}if(e===n){G=null;break}if(t=e.sibling,t!==null){t.return=e.return,G=t;break}G=e.return}}function QE(n){for(;G!==null;){var e=G;if(e===n){G=null;break}var t=e.sibling;if(t!==null){t.return=e.return,G=t;break}G=e.return}}function JE(n){for(;G!==null;){var e=G;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{Mw(4,e)}catch(c){Je(e,t,c)}break;case 1:var s=e.stateNode;if(typeof s.componentDidMount=="function"){var i=e.return;try{s.componentDidMount()}catch(c){Je(e,i,c)}}var r=e.return;try{Db(e)}catch(c){Je(e,r,c)}break;case 5:var o=e.return;try{Db(e)}catch(c){Je(e,o,c)}}}catch(c){Je(e,e.return,c)}if(e===n){G=null;break}var l=e.sibling;if(l!==null){l.return=e.return,G=l;break}G=e.return}}var oM=Math.ceil,p0=Mr.ReactCurrentDispatcher,iA=Mr.ReactCurrentOwner,Ss=Mr.ReactCurrentBatchConfig,de=0,Ct=null,at=null,Ot=0,Yn=0,Nc=ra(0),pt=0,xf=null,ec=0,Dw=0,rA=0,tf=null,Sn=null,oA=0,Jh=1/0,Oi=null,g0=!1,Ob=null,Qo=null,Um=!1,Vo=null,m0=0,nf=0,Bb=null,ly=-1,cy=0;function an(){return de&6?st():ly!==-1?ly:ly=st()}function Jo(n){return n.mode&1?de&2&&Ot!==0?Ot&-Ot:HN.transition!==null?(cy===0&&(cy=nT()),cy):(n=ye,n!==0||(n=window.event,n=n===void 0?16:cT(n.type)),n):1}function qs(n,e,t,s){if(50<nf)throw nf=0,Bb=null,Error(B(185));lm(n,t,s),(!(de&2)||n!==Ct)&&(n===Ct&&(!(de&2)&&(Dw|=t),pt===4&&zr(n,Ot)),Cn(n,s),t===1&&de===0&&!(e.mode&1)&&(Jh=st()+500,Rw&&oa()))}function Cn(n,e){var t=n.callbackNode;HL(n,e);var s=Zy(n,n===Ct?Ot:0);if(s===0)t!==null&&aE(t),n.callbackNode=null,n.callbackPriority=0;else if(e=s&-s,n.callbackPriority!==e){if(t!=null&&aE(t),e===1)n.tag===0?$N(ZE.bind(null,n)):kT(ZE.bind(null,n)),BN(function(){!(de&6)&&oa()}),t=null;else{switch(sT(s)){case 1:t=NS;break;case 4:t=eT;break;case 16:t=Jy;break;case 536870912:t=tT;break;default:t=Jy}t=Ck(t,wk.bind(null,n))}n.callbackPriority=e,n.callbackNode=t}}function wk(n,e){if(ly=-1,cy=0,de&6)throw Error(B(327));var t=n.callbackNode;if(Hc()&&n.callbackNode!==t)return null;var s=Zy(n,n===Ct?Ot:0);if(s===0)return null;if(s&30||s&n.expiredLanes||e)e=y0(n,s);else{e=s;var i=de;de|=2;var r=xk();(Ct!==n||Ot!==e)&&(Oi=null,Jh=st()+500,Xl(n,e));do try{cM();break}catch(l){bk(n,l)}while(1);WS(),p0.current=r,de=i,at!==null?e=0:(Ct=null,Ot=0,e=pt)}if(e!==0){if(e===2&&(i=hb(n),i!==0&&(s=i,e=jb(n,i))),e===1)throw t=xf,Xl(n,0),zr(n,s),Cn(n,st()),t;if(e===6)zr(n,s);else{if(i=n.current.alternate,!(s&30)&&!aM(i)&&(e=y0(n,s),e===2&&(r=hb(n),r!==0&&(s=r,e=jb(n,r))),e===1))throw t=xf,Xl(n,0),zr(n,s),Cn(n,st()),t;switch(n.finishedWork=i,n.finishedLanes=s,e){case 0:case 1:throw Error(B(345));case 2:ca(n,Sn,Oi);break;case 3:if(zr(n,s),(s&130023424)===s&&(e=oA+500-st(),10<e)){if(Zy(n,0)!==0)break;if(i=n.suspendedLanes,(i&s)!==s){an(),n.pingedLanes|=n.suspendedLanes&i;break}n.timeoutHandle=wb(ca.bind(null,n,Sn,Oi),e);break}ca(n,Sn,Oi);break;case 4:if(zr(n,s),(s&4194240)===s)break;for(e=n.eventTimes,i=-1;0<s;){var o=31-Gs(s);r=1<<o,o=e[o],o>i&&(i=o),s&=~r}if(s=i,s=st()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*oM(s/1960))-s,10<s){n.timeoutHandle=wb(ca.bind(null,n,Sn,Oi),s);break}ca(n,Sn,Oi);break;case 5:ca(n,Sn,Oi);break;default:throw Error(B(329))}}}return Cn(n,st()),n.callbackNode===t?wk.bind(null,n):null}function jb(n,e){var t=tf;return n.current.memoizedState.isDehydrated&&(Xl(n,e).flags|=256),n=y0(n,e),n!==2&&(e=Sn,Sn=t,e!==null&&Ub(e)),n}function Ub(n){Sn===null?Sn=n:Sn.push.apply(Sn,n)}function aM(n){for(var e=n;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var s=0;s<t.length;s++){var i=t[s],r=i.getSnapshot;i=i.value;try{if(!Ys(r(),i))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function zr(n,e){for(e&=~rA,e&=~Dw,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-Gs(e),s=1<<t;n[t]=-1,e&=~s}}function ZE(n){if(de&6)throw Error(B(327));Hc();var e=Zy(n,0);if(!(e&1))return Cn(n,st()),null;var t=y0(n,e);if(n.tag!==0&&t===2){var s=hb(n);s!==0&&(e=s,t=jb(n,s))}if(t===1)throw t=xf,Xl(n,0),zr(n,e),Cn(n,st()),t;if(t===6)throw Error(B(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,ca(n,Sn,Oi),Cn(n,st()),null}function aA(n,e){var t=de;de|=1;try{return n(e)}finally{de=t,de===0&&(Jh=st()+500,Rw&&oa())}}function tc(n){Vo!==null&&Vo.tag===0&&!(de&6)&&Hc();var e=de;de|=1;var t=Ss.transition,s=ye;try{if(Ss.transition=null,ye=1,n)return n()}finally{ye=s,Ss.transition=t,de=e,!(de&6)&&oa()}}function lA(){Yn=Nc.current,Me(Nc)}function Xl(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,ON(t)),at!==null)for(t=at.return;t!==null;){var s=t;switch($S(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&i0();break;case 3:Kh(),Me(En),Me(Jt),QS();break;case 5:KS(s);break;case 4:Kh();break;case 13:Me(Ve);break;case 19:Me(Ve);break;case 10:GS(s.type._context);break;case 22:case 23:lA()}t=t.return}if(Ct=n,at=n=Zo(n.current,null),Ot=Yn=e,pt=0,xf=null,rA=Dw=ec=0,Sn=tf=null,ya!==null){for(e=0;e<ya.length;e++)if(t=ya[e],s=t.interleaved,s!==null){t.interleaved=null;var i=s.next,r=t.pending;if(r!==null){var o=r.next;r.next=i,s.next=o}t.pending=s}ya=null}return n}function bk(n,e){do{var t=at;try{if(WS(),ry.current=f0,d0){for(var s=Ge.memoizedState;s!==null;){var i=s.queue;i!==null&&(i.pending=null),s=s.next}d0=!1}if(Zl=0,_t=ft=Ge=null,Zd=!1,vf=0,iA.current=null,t===null||t.return===null){pt=1,xf=e,at=null;break}e:{var r=n,o=t.return,l=t,c=e;if(e=Ot,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,h=l,d=h.tag;if(!(h.mode&1)&&(d===0||d===11||d===15)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var m=UE(o);if(m!==null){m.flags&=-257,zE(m,o,l,r,e),m.mode&1&&jE(r,u,e),e=m,c=u;var y=e.updateQueue;if(y===null){var w=new Set;w.add(c),e.updateQueue=w}else y.add(c);break e}else{if(!(e&1)){jE(r,u,e),cA();break e}c=Error(B(426))}}else if(je&&l.mode&1){var x=UE(o);if(x!==null){!(x.flags&65536)&&(x.flags|=256),zE(x,o,l,r,e),HS(Qh(c,l));break e}}r=c=Qh(c,l),pt!==4&&(pt=2),tf===null?tf=[r]:tf.push(r),r=o;do{switch(r.tag){case 3:r.flags|=65536,e&=-e,r.lanes|=e;var v=sk(r,c,e);ME(r,v);break e;case 1:l=c;var b=r.type,S=r.stateNode;if(!(r.flags&128)&&(typeof b.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(Qo===null||!Qo.has(S)))){r.flags|=65536,e&=-e,r.lanes|=e;var E=ik(r,l,e);ME(r,E);break e}}r=r.return}while(r!==null)}Ak(t)}catch(C){e=C,at===t&&t!==null&&(at=t=t.return);continue}break}while(1)}function xk(){var n=p0.current;return p0.current=f0,n===null?f0:n}function cA(){(pt===0||pt===3||pt===2)&&(pt=4),Ct===null||!(ec&268435455)&&!(Dw&268435455)||zr(Ct,Ot)}function y0(n,e){var t=de;de|=2;var s=xk();(Ct!==n||Ot!==e)&&(Oi=null,Xl(n,e));do try{lM();break}catch(i){bk(n,i)}while(1);if(WS(),de=t,p0.current=s,at!==null)throw Error(B(261));return Ct=null,Ot=0,pt}function lM(){for(;at!==null;)Sk(at)}function cM(){for(;at!==null&&!DL();)Sk(at)}function Sk(n){var e=_k(n.alternate,n,Yn);n.memoizedProps=n.pendingProps,e===null?Ak(n):at=e,iA.current=null}function Ak(n){var e=n;do{var t=e.alternate;if(n=e.return,e.flags&32768){if(t=nM(t,e),t!==null){t.flags&=32767,at=t;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{pt=6,at=null;return}}else if(t=tM(t,e,Yn),t!==null){at=t;return}if(e=e.sibling,e!==null){at=e;return}at=e=n}while(e!==null);pt===0&&(pt=5)}function ca(n,e,t){var s=ye,i=Ss.transition;try{Ss.transition=null,ye=1,uM(n,e,t,s)}finally{Ss.transition=i,ye=s}return null}function uM(n,e,t,s){do Hc();while(Vo!==null);if(de&6)throw Error(B(327));t=n.finishedWork;var i=n.finishedLanes;if(t===null)return null;if(n.finishedWork=null,n.finishedLanes=0,t===n.current)throw Error(B(177));n.callbackNode=null,n.callbackPriority=0;var r=t.lanes|t.childLanes;if(VL(n,r),n===Ct&&(at=Ct=null,Ot=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||Um||(Um=!0,Ck(Jy,function(){return Hc(),null})),r=(t.flags&15990)!==0,t.subtreeFlags&15990||r){r=Ss.transition,Ss.transition=null;var o=ye;ye=1;var l=de;de|=4,iA.current=null,iM(n,t),yk(t,n),RN(yb),e0=!!mb,yb=mb=null,n.current=t,rM(t),IL(),de=l,ye=o,Ss.transition=r}else n.current=t;if(Um&&(Um=!1,Vo=n,m0=i),r=n.pendingLanes,r===0&&(Qo=null),BL(t.stateNode),Cn(n,st()),e!==null)for(s=n.onRecoverableError,t=0;t<e.length;t++)i=e[t],s(i.value,{componentStack:i.stack,digest:i.digest});if(g0)throw g0=!1,n=Ob,Ob=null,n;return m0&1&&n.tag!==0&&Hc(),r=n.pendingLanes,r&1?n===Bb?nf++:(nf=0,Bb=n):nf=0,oa(),null}function Hc(){if(Vo!==null){var n=sT(m0),e=Ss.transition,t=ye;try{if(Ss.transition=null,ye=16>n?16:n,Vo===null)var s=!1;else{if(n=Vo,Vo=null,m0=0,de&6)throw Error(B(331));var i=de;for(de|=4,G=n.current;G!==null;){var r=G,o=r.child;if(G.flags&16){var l=r.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(G=u;G!==null;){var h=G;switch(h.tag){case 0:case 11:case 15:ef(8,h,r)}var d=h.child;if(d!==null)d.return=h,G=d;else for(;G!==null;){h=G;var f=h.sibling,m=h.return;if(pk(h),h===u){G=null;break}if(f!==null){f.return=m,G=f;break}G=m}}}var y=r.alternate;if(y!==null){var w=y.child;if(w!==null){y.child=null;do{var x=w.sibling;w.sibling=null,w=x}while(w!==null)}}G=r}}if(r.subtreeFlags&2064&&o!==null)o.return=r,G=o;else e:for(;G!==null;){if(r=G,r.flags&2048)switch(r.tag){case 0:case 11:case 15:ef(9,r,r.return)}var v=r.sibling;if(v!==null){v.return=r.return,G=v;break e}G=r.return}}var b=n.current;for(G=b;G!==null;){o=G;var S=o.child;if(o.subtreeFlags&2064&&S!==null)S.return=o,G=S;else e:for(o=b;G!==null;){if(l=G,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Mw(9,l)}}catch(C){Je(l,l.return,C)}if(l===o){G=null;break e}var E=l.sibling;if(E!==null){E.return=l.return,G=E;break e}G=l.return}}if(de=i,oa(),Pi&&typeof Pi.onPostCommitFiberRoot=="function")try{Pi.onPostCommitFiberRoot(_w,n)}catch{}s=!0}return s}finally{ye=t,Ss.transition=e}}return!1}function e_(n,e,t){e=Qh(t,e),e=sk(n,e,1),n=Ko(n,e,1),e=an(),n!==null&&(lm(n,1,e),Cn(n,e))}function Je(n,e,t){if(n.tag===3)e_(n,n,t);else for(;e!==null;){if(e.tag===3){e_(e,n,t);break}else if(e.tag===1){var s=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(Qo===null||!Qo.has(s))){n=Qh(t,n),n=ik(e,n,1),e=Ko(e,n,1),n=an(),e!==null&&(lm(e,1,n),Cn(e,n));break}}e=e.return}}function hM(n,e,t){var s=n.pingCache;s!==null&&s.delete(e),e=an(),n.pingedLanes|=n.suspendedLanes&t,Ct===n&&(Ot&t)===t&&(pt===4||pt===3&&(Ot&130023424)===Ot&&500>st()-oA?Xl(n,0):rA|=t),Cn(n,e)}function Ek(n,e){e===0&&(n.mode&1?(e=Rm,Rm<<=1,!(Rm&130023424)&&(Rm=4194304)):e=1);var t=an();n=Pr(n,e),n!==null&&(lm(n,e,t),Cn(n,t))}function dM(n){var e=n.memoizedState,t=0;e!==null&&(t=e.retryLane),Ek(n,t)}function fM(n,e){var t=0;switch(n.tag){case 13:var s=n.stateNode,i=n.memoizedState;i!==null&&(t=i.retryLane);break;case 19:s=n.stateNode;break;default:throw Error(B(314))}s!==null&&s.delete(e),Ek(n,t)}var _k;_k=function(n,e,t){if(n!==null)if(n.memoizedProps!==e.pendingProps||En.current)An=!0;else{if(!(n.lanes&t)&&!(e.flags&128))return An=!1,eM(n,e,t);An=!!(n.flags&131072)}else An=!1,je&&e.flags&1048576&&PT(e,a0,e.index);switch(e.lanes=0,e.tag){case 2:var s=e.type;ay(n,e),n=e.pendingProps;var i=qh(e,Jt.current);$c(e,t),i=ZS(null,e,s,n,i,t);var r=eA();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,_n(s)?(r=!0,r0(e)):r=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,XS(e),i.updater=Nw,e.stateNode=i,i._reactInternals=e,Cb(e,s,n,t),e=Pb(null,e,s,!0,r,t)):(e.tag=0,je&&r&&zS(e),on(null,e,i,t),e=e.child),e;case 16:s=e.elementType;e:{switch(ay(n,e),n=e.pendingProps,i=s._init,s=i(s._payload),e.type=s,i=e.tag=gM(s),n=Ps(s,n),i){case 0:e=kb(null,e,s,n,t);break e;case 1:e=VE(null,e,s,n,t);break e;case 11:e=$E(null,e,s,n,t);break e;case 14:e=HE(null,e,s,Ps(s.type,n),t);break e}throw Error(B(306,s,""))}return e;case 0:return s=e.type,i=e.pendingProps,i=e.elementType===s?i:Ps(s,i),kb(n,e,s,i,t);case 1:return s=e.type,i=e.pendingProps,i=e.elementType===s?i:Ps(s,i),VE(n,e,s,i,t);case 3:e:{if(lk(e),n===null)throw Error(B(387));s=e.pendingProps,r=e.memoizedState,i=r.element,IT(n,e),u0(e,s,null,t);var o=e.memoizedState;if(s=o.element,r.isDehydrated)if(r={element:s,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=r,e.memoizedState=r,e.flags&256){i=Qh(Error(B(423)),e),e=WE(n,e,s,t,i);break e}else if(s!==i){i=Qh(Error(B(424)),e),e=WE(n,e,s,t,i);break e}else for(Jn=Yo(e.stateNode.containerInfo.firstChild),Zn=e,je=!0,Ws=null,t=MT(e,null,s,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(Xh(),s===i){e=Rr(n,e,t);break e}on(n,e,s,t)}e=e.child}return e;case 5:return FT(e),n===null&&Ab(e),s=e.type,i=e.pendingProps,r=n!==null?n.memoizedProps:null,o=i.children,vb(s,i)?o=null:r!==null&&vb(s,r)&&(e.flags|=32),ak(n,e),on(n,e,o,t),e.child;case 6:return n===null&&Ab(e),null;case 13:return ck(n,e,t);case 4:return YS(e,e.stateNode.containerInfo),s=e.pendingProps,n===null?e.child=Yh(e,null,s,t):on(n,e,s,t),e.child;case 11:return s=e.type,i=e.pendingProps,i=e.elementType===s?i:Ps(s,i),$E(n,e,s,i,t);case 7:return on(n,e,e.pendingProps,t),e.child;case 8:return on(n,e,e.pendingProps.children,t),e.child;case 12:return on(n,e,e.pendingProps.children,t),e.child;case 10:e:{if(s=e.type._context,i=e.pendingProps,r=e.memoizedProps,o=i.value,Pe(l0,s._currentValue),s._currentValue=o,r!==null)if(Ys(r.value,o)){if(r.children===i.children&&!En.current){e=Rr(n,e,t);break e}}else for(r=e.child,r!==null&&(r.return=e);r!==null;){var l=r.dependencies;if(l!==null){o=r.child;for(var c=l.firstContext;c!==null;){if(c.context===s){if(r.tag===1){c=Cr(-1,t&-t),c.tag=2;var u=r.updateQueue;if(u!==null){u=u.shared;var h=u.pending;h===null?c.next=c:(c.next=h.next,h.next=c),u.pending=c}}r.lanes|=t,c=r.alternate,c!==null&&(c.lanes|=t),Eb(r.return,t,e),l.lanes|=t;break}c=c.next}}else if(r.tag===10)o=r.type===e.type?null:r.child;else if(r.tag===18){if(o=r.return,o===null)throw Error(B(341));o.lanes|=t,l=o.alternate,l!==null&&(l.lanes|=t),Eb(o,t,e),o=r.sibling}else o=r.child;if(o!==null)o.return=r;else for(o=r;o!==null;){if(o===e){o=null;break}if(r=o.sibling,r!==null){r.return=o.return,o=r;break}o=o.return}r=o}on(n,e,i.children,t),e=e.child}return e;case 9:return i=e.type,s=e.pendingProps.children,$c(e,t),i=As(i),s=s(i),e.flags|=1,on(n,e,s,t),e.child;case 14:return s=e.type,i=Ps(s,e.pendingProps),i=Ps(s.type,i),HE(n,e,s,i,t);case 15:return rk(n,e,e.type,e.pendingProps,t);case 17:return s=e.type,i=e.pendingProps,i=e.elementType===s?i:Ps(s,i),ay(n,e),e.tag=1,_n(s)?(n=!0,r0(e)):n=!1,$c(e,t),nk(e,s,i),Cb(e,s,i,t),Pb(null,e,s,!0,n,t);case 19:return uk(n,e,t);case 22:return ok(n,e,t)}throw Error(B(156,e.tag))};function Ck(n,e){return ZC(n,e)}function pM(n,e,t,s){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function xs(n,e,t,s){return new pM(n,e,t,s)}function uA(n){return n=n.prototype,!(!n||!n.isReactComponent)}function gM(n){if(typeof n=="function")return uA(n)?1:0;if(n!=null){if(n=n.$$typeof,n===PS)return 11;if(n===RS)return 14}return 2}function Zo(n,e){var t=n.alternate;return t===null?(t=xs(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=n.flags&14680064,t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function uy(n,e,t,s,i,r){var o=2;if(s=n,typeof n=="function")uA(n)&&(o=1);else if(typeof n=="string")o=5;else e:switch(n){case Sc:return Yl(t.children,i,r,e);case kS:o=8,i|=8;break;case K1:return n=xs(12,t,e,i|2),n.elementType=K1,n.lanes=r,n;case Q1:return n=xs(13,t,e,i),n.elementType=Q1,n.lanes=r,n;case J1:return n=xs(19,t,e,i),n.elementType=J1,n.lanes=r,n;case FC:return Iw(t,i,r,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case DC:o=10;break e;case IC:o=9;break e;case PS:o=11;break e;case RS:o=14;break e;case Br:o=16,s=null;break e}throw Error(B(130,n==null?n:typeof n,""))}return e=xs(o,t,e,i),e.elementType=n,e.type=s,e.lanes=r,e}function Yl(n,e,t,s){return n=xs(7,n,s,e),n.lanes=t,n}function Iw(n,e,t,s){return n=xs(22,n,s,e),n.elementType=FC,n.lanes=t,n.stateNode={isHidden:!1},n}function N1(n,e,t){return n=xs(6,n,null,e),n.lanes=t,n}function M1(n,e,t){return e=xs(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function mM(n,e,t,s,i){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=f1(0),this.expirationTimes=f1(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=f1(0),this.identifierPrefix=s,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function hA(n,e,t,s,i,r,o,l,c){return n=new mM(n,e,t,l,c),e===1?(e=1,r===!0&&(e|=8)):e=0,r=xs(3,null,null,e),n.current=r,r.stateNode=n,r.memoizedState={element:s,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},XS(r),n}function yM(n,e,t){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:xc,key:s==null?null:""+s,children:n,containerInfo:e,implementation:t}}function Tk(n){if(!n)return ta;n=n._reactInternals;e:{if(oc(n)!==n||n.tag!==1)throw Error(B(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(_n(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(B(171))}if(n.tag===1){var t=n.type;if(_n(t))return TT(n,t,e)}return e}function kk(n,e,t,s,i,r,o,l,c){return n=hA(t,s,!0,n,i,r,o,l,c),n.context=Tk(null),t=n.current,s=an(),i=Jo(t),r=Cr(s,i),r.callback=e??null,Ko(t,r,i),n.current.lanes=i,lm(n,i,s),Cn(n,s),n}function Fw(n,e,t,s){var i=e.current,r=an(),o=Jo(i);return t=Tk(t),e.context===null?e.context=t:e.pendingContext=t,e=Cr(r,o),e.payload={element:n},s=s===void 0?null:s,s!==null&&(e.callback=s),n=Ko(i,e,o),n!==null&&(qs(n,i,o,r),iy(n,i,o)),o}function v0(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function t_(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function dA(n,e){t_(n,e),(n=n.alternate)&&t_(n,e)}function vM(){return null}var Pk=typeof reportError=="function"?reportError:function(n){console.error(n)};function fA(n){this._internalRoot=n}Ow.prototype.render=fA.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(B(409));Fw(n,e,null,null)};Ow.prototype.unmount=fA.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;tc(function(){Fw(null,n,null,null)}),e[kr]=null}};function Ow(n){this._internalRoot=n}Ow.prototype.unstable_scheduleHydration=function(n){if(n){var e=oT();n={blockedOn:null,target:n,priority:e};for(var t=0;t<Ur.length&&e!==0&&e<Ur[t].priority;t++);Ur.splice(t,0,n),t===0&&lT(n)}};function pA(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function Bw(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function n_(){}function wM(n,e,t,s,i){if(i){if(typeof s=="function"){var r=s;s=function(){var u=v0(o);r.call(u)}}var o=kk(e,s,n,0,null,!1,!1,"",n_);return n._reactRootContainer=o,n[kr]=o.current,ff(n.nodeType===8?n.parentNode:n),tc(),o}for(;i=n.lastChild;)n.removeChild(i);if(typeof s=="function"){var l=s;s=function(){var u=v0(c);l.call(u)}}var c=hA(n,0,!1,null,null,!1,!1,"",n_);return n._reactRootContainer=c,n[kr]=c.current,ff(n.nodeType===8?n.parentNode:n),tc(function(){Fw(e,c,t,s)}),c}function jw(n,e,t,s,i){var r=t._reactRootContainer;if(r){var o=r;if(typeof i=="function"){var l=i;i=function(){var c=v0(o);l.call(c)}}Fw(e,o,n,i)}else o=wM(t,e,n,i,s);return v0(o)}iT=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var t=_d(e.pendingLanes);t!==0&&(MS(e,t|1),Cn(e,st()),!(de&6)&&(Jh=st()+500,oa()))}break;case 13:tc(function(){var s=Pr(n,1);if(s!==null){var i=an();qs(s,n,1,i)}}),dA(n,1)}};DS=function(n){if(n.tag===13){var e=Pr(n,134217728);if(e!==null){var t=an();qs(e,n,134217728,t)}dA(n,134217728)}};rT=function(n){if(n.tag===13){var e=Jo(n),t=Pr(n,e);if(t!==null){var s=an();qs(t,n,e,s)}dA(n,e)}};oT=function(){return ye};aT=function(n,e){var t=ye;try{return ye=n,e()}finally{ye=t}};lb=function(n,e,t){switch(e){case"input":if(tb(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var s=t[e];if(s!==n&&s.form===n.form){var i=Pw(s);if(!i)throw Error(B(90));BC(s),tb(s,i)}}}break;case"textarea":UC(n,t);break;case"select":e=t.value,e!=null&&Bc(n,!!t.multiple,e,!1)}};qC=aA;XC=tc;var bM={usingClientEntryPoint:!1,Events:[um,Cc,Pw,WC,GC,aA]},yd={findFiberByHostInstance:ma,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},xM={bundleType:yd.bundleType,version:yd.version,rendererPackageName:yd.rendererPackageName,rendererConfig:yd.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Mr.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=QC(n),n===null?null:n.stateNode},findFiberByHostInstance:yd.findFiberByHostInstance||vM,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var zm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!zm.isDisabled&&zm.supportsFiber)try{_w=zm.inject(xM),Pi=zm}catch{}}ns.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=bM;ns.createPortal=function(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!pA(e))throw Error(B(200));return yM(n,e,null,t)};ns.createRoot=function(n,e){if(!pA(n))throw Error(B(299));var t=!1,s="",i=Pk;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(s=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=hA(n,1,!1,null,null,t,!1,s,i),n[kr]=e.current,ff(n.nodeType===8?n.parentNode:n),new fA(e)};ns.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(B(188)):(n=Object.keys(n).join(","),Error(B(268,n)));return n=QC(e),n=n===null?null:n.stateNode,n};ns.flushSync=function(n){return tc(n)};ns.hydrate=function(n,e,t){if(!Bw(e))throw Error(B(200));return jw(null,n,e,!0,t)};ns.hydrateRoot=function(n,e,t){if(!pA(n))throw Error(B(405));var s=t!=null&&t.hydratedSources||null,i=!1,r="",o=Pk;if(t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),e=kk(e,null,n,1,t??null,i,!1,r,o),n[kr]=e.current,ff(n),s)for(n=0;n<s.length;n++)t=s[n],i=t._getVersion,i=i(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,i]:e.mutableSourceEagerHydrationData.push(t,i);return new Ow(e)};ns.render=function(n,e,t){if(!Bw(e))throw Error(B(200));return jw(null,n,e,!1,t)};ns.unmountComponentAtNode=function(n){if(!Bw(n))throw Error(B(40));return n._reactRootContainer?(tc(function(){jw(null,null,n,!1,function(){n._reactRootContainer=null,n[kr]=null})}),!0):!1};ns.unstable_batchedUpdates=aA;ns.unstable_renderSubtreeIntoContainer=function(n,e,t,s){if(!Bw(t))throw Error(B(200));if(n==null||n._reactInternals===void 0)throw Error(B(38));return jw(n,e,t,!1,s)};ns.version="18.3.1-next-f1338f8080-20240426";function Rk(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Rk)}catch(n){console.error(n)}}Rk(),RC.exports=ns;var SM=RC.exports,s_=SM;X1.createRoot=s_.createRoot,X1.hydrateRoot=s_.hydrateRoot;/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Sf(){return Sf=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(n[s]=t[s])}return n},Sf.apply(this,arguments)}var Wo;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(Wo||(Wo={}));const i_="popstate";function AM(n){n===void 0&&(n={});function e(s,i){let{pathname:r,search:o,hash:l}=s.location;return zb("",{pathname:r,search:o,hash:l},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function t(s,i){return typeof i=="string"?i:Lk(i)}return _M(e,t,null,n)}function gt(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function gA(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function EM(){return Math.random().toString(36).substr(2,8)}function r_(n,e){return{usr:n.state,key:n.key,idx:e}}function zb(n,e,t,s){return t===void 0&&(t=null),Sf({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?od(e):e,{state:t,key:e&&e.key||s||EM()})}function Lk(n){let{pathname:e="/",search:t="",hash:s=""}=n;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),s&&s!=="#"&&(e+=s.charAt(0)==="#"?s:"#"+s),e}function od(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substr(t),n=n.substr(0,t));let s=n.indexOf("?");s>=0&&(e.search=n.substr(s),n=n.substr(0,s)),n&&(e.pathname=n)}return e}function _M(n,e,t,s){s===void 0&&(s={});let{window:i=document.defaultView,v5Compat:r=!1}=s,o=i.history,l=Wo.Pop,c=null,u=h();u==null&&(u=0,o.replaceState(Sf({},o.state,{idx:u}),""));function h(){return(o.state||{idx:null}).idx}function d(){l=Wo.Pop;let x=h(),v=x==null?null:x-u;u=x,c&&c({action:l,location:w.location,delta:v})}function f(x,v){l=Wo.Push;let b=zb(w.location,x,v);t&&t(b,x),u=h()+1;let S=r_(b,u),E=w.createHref(b);try{o.pushState(S,"",E)}catch(C){if(C instanceof DOMException&&C.name==="DataCloneError")throw C;i.location.assign(E)}r&&c&&c({action:l,location:w.location,delta:1})}function m(x,v){l=Wo.Replace;let b=zb(w.location,x,v);t&&t(b,x),u=h();let S=r_(b,u),E=w.createHref(b);o.replaceState(S,"",E),r&&c&&c({action:l,location:w.location,delta:0})}function y(x){let v=i.location.origin!=="null"?i.location.origin:i.location.href,b=typeof x=="string"?x:Lk(x);return b=b.replace(/ $/,"%20"),gt(v,"No window.location.(origin|href) available to create URL for href: "+b),new URL(b,v)}let w={get action(){return l},get location(){return n(i,o)},listen(x){if(c)throw new Error("A history only accepts one active listener");return i.addEventListener(i_,d),c=x,()=>{i.removeEventListener(i_,d),c=null}},createHref(x){return e(i,x)},createURL:y,encodeLocation(x){let v=y(x);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:f,replace:m,go(x){return o.go(x)}};return w}var o_;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(o_||(o_={}));function CM(n,e,t){return t===void 0&&(t="/"),TM(n,e,t,!1)}function TM(n,e,t,s){let i=typeof e=="string"?od(e):e,r=Dk(i.pathname||"/",t);if(r==null)return null;let o=Nk(n);kM(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let u=jM(r);l=OM(o[c],u,s)}return l}function Nk(n,e,t,s){e===void 0&&(e=[]),t===void 0&&(t=[]),s===void 0&&(s="");let i=(r,o,l)=>{let c={relativePath:l===void 0?r.path||"":l,caseSensitive:r.caseSensitive===!0,childrenIndex:o,route:r};c.relativePath.startsWith("/")&&(gt(c.relativePath.startsWith(s),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+s+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(s.length));let u=Kl([s,c.relativePath]),h=t.concat(c);r.children&&r.children.length>0&&(gt(r.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),Nk(r.children,e,h,u)),!(r.path==null&&!r.index)&&e.push({path:u,score:IM(u,r.index),routesMeta:h})};return n.forEach((r,o)=>{var l;if(r.path===""||!((l=r.path)!=null&&l.includes("?")))i(r,o);else for(let c of Mk(r.path))i(r,o,c)}),e}function Mk(n){let e=n.split("/");if(e.length===0)return[];let[t,...s]=e,i=t.endsWith("?"),r=t.replace(/\?$/,"");if(s.length===0)return i?[r,""]:[r];let o=Mk(s.join("/")),l=[];return l.push(...o.map(c=>c===""?r:[r,c].join("/"))),i&&l.push(...o),l.map(c=>n.startsWith("/")&&c===""?"/":c)}function kM(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:FM(e.routesMeta.map(s=>s.childrenIndex),t.routesMeta.map(s=>s.childrenIndex)))}const PM=/^:[\w-]+$/,RM=3,LM=2,NM=1,MM=10,DM=-2,a_=n=>n==="*";function IM(n,e){let t=n.split("/"),s=t.length;return t.some(a_)&&(s+=DM),e&&(s+=LM),t.filter(i=>!a_(i)).reduce((i,r)=>i+(PM.test(r)?RM:r===""?NM:MM),s)}function FM(n,e){return n.length===e.length&&n.slice(0,-1).every((s,i)=>s===e[i])?n[n.length-1]-e[e.length-1]:0}function OM(n,e,t){t===void 0&&(t=!1);let{routesMeta:s}=n,i={},r="/",o=[];for(let l=0;l<s.length;++l){let c=s[l],u=l===s.length-1,h=r==="/"?e:e.slice(r.length)||"/",d=l_({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},h),f=c.route;if(!d&&u&&t&&!s[s.length-1].route.index&&(d=l_({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},h)),!d)return null;Object.assign(i,d.params),o.push({params:i,pathname:Kl([r,d.pathname]),pathnameBase:GM(Kl([r,d.pathnameBase])),route:f}),d.pathnameBase!=="/"&&(r=Kl([r,d.pathnameBase]))}return o}function l_(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,s]=BM(n.path,n.caseSensitive,n.end),i=e.match(t);if(!i)return null;let r=i[0],o=r.replace(/(.)\/+$/,"$1"),l=i.slice(1);return{params:s.reduce((u,h,d)=>{let{paramName:f,isOptional:m}=h;if(f==="*"){let w=l[d]||"";o=r.slice(0,r.length-w.length).replace(/(.)\/+$/,"$1")}const y=l[d];return m&&!y?u[f]=void 0:u[f]=(y||"").replace(/%2F/g,"/"),u},{}),pathname:r,pathnameBase:o,pattern:n}}function BM(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),gA(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let s=[],i="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(s.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(s.push({paramName:"*"}),i+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?i+="\\/*$":n!==""&&n!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),s]}function jM(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return gA(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),n}}function Dk(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,s=n.charAt(t);return s&&s!=="/"?null:n.slice(t)||"/"}const UM=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,zM=n=>UM.test(n);function $M(n,e){e===void 0&&(e="/");let{pathname:t,search:s="",hash:i=""}=typeof n=="string"?od(n):n,r;if(t)if(zM(t))r=t;else{if(t.includes("//")){let o=t;t=t.replace(/\/\/+/g,"/"),gA(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+t))}t.startsWith("/")?r=c_(t.substring(1),"/"):r=c_(t,e)}else r=e;return{pathname:r,search:qM(s),hash:XM(i)}}function c_(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(i=>{i===".."?t.length>1&&t.pop():i!=="."&&t.push(i)}),t.length>1?t.join("/"):"/"}function D1(n,e,t,s){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(s)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function HM(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function VM(n,e){let t=HM(n);return e?t.map((s,i)=>i===t.length-1?s.pathname:s.pathnameBase):t.map(s=>s.pathnameBase)}function WM(n,e,t,s){s===void 0&&(s=!1);let i;typeof n=="string"?i=od(n):(i=Sf({},n),gt(!i.pathname||!i.pathname.includes("?"),D1("?","pathname","search",i)),gt(!i.pathname||!i.pathname.includes("#"),D1("#","pathname","hash",i)),gt(!i.search||!i.search.includes("#"),D1("#","search","hash",i)));let r=n===""||i.pathname==="",o=r?"/":i.pathname,l;if(o==null)l=t;else{let d=e.length-1;if(!s&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),d-=1;i.pathname=f.join("/")}l=d>=0?e[d]:"/"}let c=$M(i,l),u=o&&o!=="/"&&o.endsWith("/"),h=(r||o===".")&&t.endsWith("/");return!c.pathname.endsWith("/")&&(u||h)&&(c.pathname+="/"),c}const Kl=n=>n.join("/").replace(/\/\/+/g,"/"),GM=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),qM=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,XM=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function YM(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const Ik=["post","put","patch","delete"];new Set(Ik);const KM=["get",...Ik];new Set(KM);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Af(){return Af=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(n[s]=t[s])}return n},Af.apply(this,arguments)}const mA=R.createContext(null),QM=R.createContext(null),Uw=R.createContext(null),zw=R.createContext(null),ac=R.createContext({outlet:null,matches:[],isDataRoute:!1}),Fk=R.createContext(null);function $w(){return R.useContext(zw)!=null}function Ok(){return $w()||gt(!1),R.useContext(zw).location}function Bk(n){R.useContext(Uw).static||R.useLayoutEffect(n)}function yA(){let{isDataRoute:n}=R.useContext(ac);return n?hD():JM()}function JM(){$w()||gt(!1);let n=R.useContext(mA),{basename:e,future:t,navigator:s}=R.useContext(Uw),{matches:i}=R.useContext(ac),{pathname:r}=Ok(),o=JSON.stringify(VM(i,t.v7_relativeSplatPath)),l=R.useRef(!1);return Bk(()=>{l.current=!0}),R.useCallback(function(u,h){if(h===void 0&&(h={}),!l.current)return;if(typeof u=="number"){s.go(u);return}let d=WM(u,JSON.parse(o),r,h.relative==="path");n==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:Kl([e,d.pathname])),(h.replace?s.replace:s.push)(d,h.state,h)},[e,s,o,r,n])}function ZM(){let{matches:n}=R.useContext(ac),e=n[n.length-1];return e?e.params:{}}function eD(n,e){return tD(n,e)}function tD(n,e,t,s){$w()||gt(!1);let{navigator:i}=R.useContext(Uw),{matches:r}=R.useContext(ac),o=r[r.length-1],l=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let u=Ok(),h;if(e){var d;let x=typeof e=="string"?od(e):e;c==="/"||(d=x.pathname)!=null&&d.startsWith(c)||gt(!1),h=x}else h=u;let f=h.pathname||"/",m=f;if(c!=="/"){let x=c.replace(/^\//,"").split("/");m="/"+f.replace(/^\//,"").split("/").slice(x.length).join("/")}let y=CM(n,{pathname:m}),w=oD(y&&y.map(x=>Object.assign({},x,{params:Object.assign({},l,x.params),pathname:Kl([c,i.encodeLocation?i.encodeLocation(x.pathname).pathname:x.pathname]),pathnameBase:x.pathnameBase==="/"?c:Kl([c,i.encodeLocation?i.encodeLocation(x.pathnameBase).pathname:x.pathnameBase])})),r,t,s);return e&&w?R.createElement(zw.Provider,{value:{location:Af({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:Wo.Pop}},w):w}function nD(){let n=uD(),e=YM(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},r=null;return R.createElement(R.Fragment,null,R.createElement("h2",null,"Unexpected Application Error!"),R.createElement("h3",{style:{fontStyle:"italic"}},e),t?R.createElement("pre",{style:i},t):null,r)}const sD=R.createElement(nD,null);class iD extends R.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?R.createElement(ac.Provider,{value:this.props.routeContext},R.createElement(Fk.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function rD(n){let{routeContext:e,match:t,children:s}=n,i=R.useContext(mA);return i&&i.static&&i.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=t.route.id),R.createElement(ac.Provider,{value:e},s)}function oD(n,e,t,s){var i;if(e===void 0&&(e=[]),t===void 0&&(t=null),s===void 0&&(s=null),n==null){var r;if(!t)return null;if(t.errors)n=t.matches;else if((r=s)!=null&&r.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let o=n,l=(i=t)==null?void 0:i.errors;if(l!=null){let h=o.findIndex(d=>d.route.id&&(l==null?void 0:l[d.route.id])!==void 0);h>=0||gt(!1),o=o.slice(0,Math.min(o.length,h+1))}let c=!1,u=-1;if(t&&s&&s.v7_partialHydration)for(let h=0;h<o.length;h++){let d=o[h];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(u=h),d.route.id){let{loaderData:f,errors:m}=t,y=d.route.loader&&f[d.route.id]===void 0&&(!m||m[d.route.id]===void 0);if(d.route.lazy||y){c=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((h,d,f)=>{let m,y=!1,w=null,x=null;t&&(m=l&&d.route.id?l[d.route.id]:void 0,w=d.route.errorElement||sD,c&&(u<0&&f===0?(dD("route-fallback",!1),y=!0,x=null):u===f&&(y=!0,x=d.route.hydrateFallbackElement||null)));let v=e.concat(o.slice(0,f+1)),b=()=>{let S;return m?S=w:y?S=x:d.route.Component?S=R.createElement(d.route.Component,null):d.route.element?S=d.route.element:S=h,R.createElement(rD,{match:d,routeContext:{outlet:h,matches:v,isDataRoute:t!=null},children:S})};return t&&(d.route.ErrorBoundary||d.route.errorElement||f===0)?R.createElement(iD,{location:t.location,revalidation:t.revalidation,component:w,error:m,children:b(),routeContext:{outlet:null,matches:v,isDataRoute:!0}}):b()},null)}var jk=function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n}(jk||{}),w0=function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n}(w0||{});function aD(n){let e=R.useContext(mA);return e||gt(!1),e}function lD(n){let e=R.useContext(QM);return e||gt(!1),e}function cD(n){let e=R.useContext(ac);return e||gt(!1),e}function Uk(n){let e=cD(),t=e.matches[e.matches.length-1];return t.route.id||gt(!1),t.route.id}function uD(){var n;let e=R.useContext(Fk),t=lD(w0.UseRouteError),s=Uk(w0.UseRouteError);return e!==void 0?e:(n=t.errors)==null?void 0:n[s]}function hD(){let{router:n}=aD(jk.UseNavigateStable),e=Uk(w0.UseNavigateStable),t=R.useRef(!1);return Bk(()=>{t.current=!0}),R.useCallback(function(i,r){r===void 0&&(r={}),t.current&&(typeof i=="number"?n.navigate(i):n.navigate(i,Af({fromRouteId:e},r)))},[n,e])}const u_={};function dD(n,e,t){!e&&!u_[n]&&(u_[n]=!0)}function fD(n,e){n==null||n.v7_startTransition,(n==null?void 0:n.v7_relativeSplatPath)===void 0&&(!e||e.v7_relativeSplatPath),e&&(e.v7_fetcherPersist,e.v7_normalizeFormMethod,e.v7_partialHydration,e.v7_skipActionErrorRevalidation)}function hy(n){gt(!1)}function pD(n){let{basename:e="/",children:t=null,location:s,navigationType:i=Wo.Pop,navigator:r,static:o=!1,future:l}=n;$w()&&gt(!1);let c=e.replace(/^\/*/,"/"),u=R.useMemo(()=>({basename:c,navigator:r,static:o,future:Af({v7_relativeSplatPath:!1},l)}),[c,l,r,o]);typeof s=="string"&&(s=od(s));let{pathname:h="/",search:d="",hash:f="",state:m=null,key:y="default"}=s,w=R.useMemo(()=>{let x=Dk(h,c);return x==null?null:{location:{pathname:x,search:d,hash:f,state:m,key:y},navigationType:i}},[c,h,d,f,m,y,i]);return w==null?null:R.createElement(Uw.Provider,{value:u},R.createElement(zw.Provider,{children:t,value:w}))}function gD(n){let{children:e,location:t}=n;return eD($b(e),t)}new Promise(()=>{});function $b(n,e){e===void 0&&(e=[]);let t=[];return R.Children.forEach(n,(s,i)=>{if(!R.isValidElement(s))return;let r=[...e,i];if(s.type===R.Fragment){t.push.apply(t,$b(s.props.children,r));return}s.type!==hy&&gt(!1),!s.props.index||!s.props.children||gt(!1);let o={id:s.props.id||r.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(o.children=$b(s.props.children,r)),t.push(o)}),t}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const mD="6";try{window.__reactRouterVersion=mD}catch{}const yD="startTransition",h_=hL[yD];function vD(n){let{basename:e,children:t,future:s,window:i}=n,r=R.useRef();r.current==null&&(r.current=AM({window:i,v5Compat:!0}));let o=r.current,[l,c]=R.useState({action:o.action,location:o.location}),{v7_startTransition:u}=s||{},h=R.useCallback(d=>{u&&h_?h_(()=>c(d)):c(d)},[c,u]);return R.useLayoutEffect(()=>o.listen(h),[o,h]),R.useEffect(()=>fD(s),[s]),R.createElement(pD,{basename:e,children:t,location:l.location,navigationType:l.action,navigator:o,future:s})}var d_;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(d_||(d_={}));var f_;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(f_||(f_={}));/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var wD={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bD=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Ue=(n,e)=>{const t=R.forwardRef(({color:s="currentColor",size:i=24,strokeWidth:r=2,absoluteStrokeWidth:o,className:l="",children:c,...u},h)=>R.createElement("svg",{ref:h,...wD,width:i,height:i,stroke:s,strokeWidth:o?Number(r)*24/Number(i):r,className:["lucide",`lucide-${bD(n)}`,l].join(" "),...u},[...e.map(([d,f])=>R.createElement(d,f)),...Array.isArray(c)?c:[c]]));return t.displayName=`${n}`,t};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zk=Ue("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xD=Ue("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SD=Ue("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $k=Ue("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hk=Ue("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AD=Ue("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vk=Ue("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ED=Ue("FileImage",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["circle",{cx:"10",cy:"13",r:"2",key:"6v46hv"}],["path",{d:"m20 17-1.09-1.09a2 2 0 0 0-2.82 0L10 22",key:"17vly1"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vA=Ue("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _D=Ue("GraduationCap",[["path",{d:"M22 10v6M2 10l10-5 10 5-10 5z",key:"1ef52a"}],["path",{d:"M6 12v5c3 3 9 3 12 0v-5",key:"1f75yj"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CD=Ue("Loader",[["line",{x1:"12",x2:"12",y1:"2",y2:"6",key:"gza1u7"}],["line",{x1:"12",x2:"12",y1:"18",y2:"22",key:"1qhbu9"}],["line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76",key:"xae44r"}],["line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07",key:"bxnmvf"}],["line",{x1:"2",x2:"6",y1:"12",y2:"12",key:"89khin"}],["line",{x1:"18",x2:"22",y1:"12",y2:"12",key:"pb8tfm"}],["line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24",key:"1uxjnu"}],["line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93",key:"6duxfx"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TD=Ue("Maximize",[["path",{d:"M8 3H5a2 2 0 0 0-2 2v3",key:"1dcmit"}],["path",{d:"M21 8V5a2 2 0 0 0-2-2h-3",key:"1e4gt3"}],["path",{d:"M3 16v3a2 2 0 0 0 2 2h3",key:"wsl5sc"}],["path",{d:"M16 21h3a2 2 0 0 0 2-2v-3",key:"18trek"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kD=Ue("Minimize",[["path",{d:"M8 3v3a2 2 0 0 1-2 2H3",key:"hohbtr"}],["path",{d:"M21 8h-3a2 2 0 0 1-2-2V3",key:"5jw1f3"}],["path",{d:"M3 16h3a2 2 0 0 1 2 2v3",key:"198tvr"}],["path",{d:"M16 21v-3a2 2 0 0 1 2-2h3",key:"ph8mxp"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PD=Ue("Pencil",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RD=Ue("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LD=Ue("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p_=Ue("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ND=Ue("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g_=Ue("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MD=Ue("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DD=Ue("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wk=Ue("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ID=Ue("ZoomIn",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FD=Ue("ZoomOut",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),I1=({onUpload:n,type:e,title:t})=>{const[s,i]=R.useState(!1),[r,o]=R.useState(null),[l,c]=R.useState(!1),[u,h]=R.useState({title:"",studentName:"",totalQuestions:""}),d=R.useCallback(x=>{x.preventDefault(),x.stopPropagation(),x.type==="dragenter"||x.type==="dragover"?i(!0):x.type==="dragleave"&&i(!1)},[]),f=R.useCallback(x=>{x.preventDefault(),x.stopPropagation(),i(!1);const v=x.dataTransfer.files;v&&v[0]&&v[0].type==="application/pdf"&&o(v[0])},[]),m=x=>{const v=x.target.files[0];v&&v.type==="application/pdf"&&o(v)},y=async()=>{if(r){c(!0);try{await n(r,u),o(null),h({title:"",studentName:"",totalQuestions:""})}catch(x){console.error("Upload failed:",x)}finally{c(!1)}}},w=()=>{o(null)};return _.jsxs("div",{className:"glass p-6 rounded-xl",children:[_.jsx("h3",{className:"text-xl font-semibold mb-4 gradient-text",children:t}),_.jsxs("div",{className:`border-2 border-dashed rounded-xl p-8 text-center transition-all ${s?"drag-active":"border-white border-opacity-20"}`,onDragEnter:d,onDragLeave:d,onDragOver:d,onDrop:f,children:[_.jsx("input",{type:"file",accept:".pdf",onChange:m,className:"hidden",id:`file-input-${e}`}),r?_.jsxs("div",{className:"flex items-center justify-center gap-4",children:[_.jsx(vA,{className:"w-8 h-8 text-primary-400"}),_.jsx("span",{className:"flex-1 text-left",children:r.name}),_.jsx("button",{onClick:w,className:"p-2 hover:bg-red-500 hover:bg-opacity-20 rounded-lg",children:_.jsx(Wk,{className:"w-5 h-5"})})]}):_.jsxs("label",{htmlFor:`file-input-${e}`,className:"cursor-pointer",children:[_.jsx(DD,{className:"w-12 h-12 mx-auto mb-4 text-primary-400"}),_.jsx("p",{className:"text-lg mb-2",children:"Drop PDF here or click to browse"}),_.jsx("p",{className:"text-sm text-gray-400",children:"Only PDF files are accepted"})]})]}),r&&_.jsxs("div",{className:"mt-4 space-y-3",children:[e==="question"&&_.jsxs(_.Fragment,{children:[_.jsx("input",{type:"text",placeholder:"Question Paper Title",value:u.title,onChange:x=>h({...u,title:x.target.value}),className:"w-full px-4 py-2 bg-white bg-opacity-10 rounded-lg border border-white border-opacity-20 focus:border-primary-500 outline-none"}),_.jsx("input",{type:"number",placeholder:"Total Questions",value:u.totalQuestions,onChange:x=>h({...u,totalQuestions:x.target.value}),className:"w-full px-4 py-2 bg-white bg-opacity-10 rounded-lg border border-white border-opacity-20 focus:border-primary-500 outline-none"})]}),e==="answer"&&_.jsx("input",{type:"text",placeholder:"Student Name",value:u.studentName,onChange:x=>h({...u,studentName:x.target.value}),className:"w-full px-4 py-2 bg-white bg-opacity-10 rounded-lg border border-white border-opacity-20 focus:border-primary-500 outline-none"}),e==="rubric"&&_.jsx("input",{type:"text",placeholder:"Rubric Title",value:u.title,onChange:x=>h({...u,title:x.target.value}),className:"w-full px-4 py-2 bg-white bg-opacity-10 rounded-lg border border-white border-opacity-20 focus:border-primary-500 outline-none"}),_.jsx("button",{onClick:y,disabled:l,className:"btn btn-primary w-full",children:l?"Uploading...":"Upload"})]})]})};function Gk(n,e){return function(){return n.apply(e,arguments)}}const{toString:OD}=Object.prototype,{getPrototypeOf:wA}=Object,{iterator:Hw,toStringTag:qk}=Symbol,Vw=(n=>e=>{const t=OD.call(e);return n[t]||(n[t]=t.slice(8,-1).toLowerCase())})(Object.create(null)),Qs=n=>(n=n.toLowerCase(),e=>Vw(e)===n),Ww=n=>e=>typeof e===n,{isArray:ad}=Array,Zh=Ww("undefined");function dm(n){return n!==null&&!Zh(n)&&n.constructor!==null&&!Zh(n.constructor)&&Tn(n.constructor.isBuffer)&&n.constructor.isBuffer(n)}const Xk=Qs("ArrayBuffer");function BD(n){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(n):e=n&&n.buffer&&Xk(n.buffer),e}const jD=Ww("string"),Tn=Ww("function"),Yk=Ww("number"),fm=n=>n!==null&&typeof n=="object",UD=n=>n===!0||n===!1,dy=n=>{if(Vw(n)!=="object")return!1;const e=wA(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(qk in n)&&!(Hw in n)},zD=n=>{if(!fm(n)||dm(n))return!1;try{return Object.keys(n).length===0&&Object.getPrototypeOf(n)===Object.prototype}catch{return!1}},$D=Qs("Date"),HD=Qs("File"),VD=Qs("Blob"),WD=Qs("FileList"),GD=n=>fm(n)&&Tn(n.pipe),qD=n=>{let e;return n&&(typeof FormData=="function"&&n instanceof FormData||Tn(n.append)&&((e=Vw(n))==="formdata"||e==="object"&&Tn(n.toString)&&n.toString()==="[object FormData]"))},XD=Qs("URLSearchParams"),[YD,KD,QD,JD]=["ReadableStream","Request","Response","Headers"].map(Qs),ZD=n=>n.trim?n.trim():n.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function pm(n,e,{allOwnKeys:t=!1}={}){if(n===null||typeof n>"u")return;let s,i;if(typeof n!="object"&&(n=[n]),ad(n))for(s=0,i=n.length;s<i;s++)e.call(null,n[s],s,n);else{if(dm(n))return;const r=t?Object.getOwnPropertyNames(n):Object.keys(n),o=r.length;let l;for(s=0;s<o;s++)l=r[s],e.call(null,n[l],l,n)}}function Kk(n,e){if(dm(n))return null;e=e.toLowerCase();const t=Object.keys(n);let s=t.length,i;for(;s-- >0;)if(i=t[s],e===i.toLowerCase())return i;return null}const wa=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),Qk=n=>!Zh(n)&&n!==wa;function Hb(){const{caseless:n,skipUndefined:e}=Qk(this)&&this||{},t={},s=(i,r)=>{if(r==="__proto__"||r==="constructor"||r==="prototype")return;const o=n&&Kk(t,r)||r;dy(t[o])&&dy(i)?t[o]=Hb(t[o],i):dy(i)?t[o]=Hb({},i):ad(i)?t[o]=i.slice():(!e||!Zh(i))&&(t[o]=i)};for(let i=0,r=arguments.length;i<r;i++)arguments[i]&&pm(arguments[i],s);return t}const eI=(n,e,t,{allOwnKeys:s}={})=>(pm(e,(i,r)=>{t&&Tn(i)?Object.defineProperty(n,r,{value:Gk(i,t),writable:!0,enumerable:!0,configurable:!0}):Object.defineProperty(n,r,{value:i,writable:!0,enumerable:!0,configurable:!0})},{allOwnKeys:s}),n),tI=n=>(n.charCodeAt(0)===65279&&(n=n.slice(1)),n),nI=(n,e,t,s)=>{n.prototype=Object.create(e.prototype,s),Object.defineProperty(n.prototype,"constructor",{value:n,writable:!0,enumerable:!1,configurable:!0}),Object.defineProperty(n,"super",{value:e.prototype}),t&&Object.assign(n.prototype,t)},sI=(n,e,t,s)=>{let i,r,o;const l={};if(e=e||{},n==null)return e;do{for(i=Object.getOwnPropertyNames(n),r=i.length;r-- >0;)o=i[r],(!s||s(o,n,e))&&!l[o]&&(e[o]=n[o],l[o]=!0);n=t!==!1&&wA(n)}while(n&&(!t||t(n,e))&&n!==Object.prototype);return e},iI=(n,e,t)=>{n=String(n),(t===void 0||t>n.length)&&(t=n.length),t-=e.length;const s=n.indexOf(e,t);return s!==-1&&s===t},rI=n=>{if(!n)return null;if(ad(n))return n;let e=n.length;if(!Yk(e))return null;const t=new Array(e);for(;e-- >0;)t[e]=n[e];return t},oI=(n=>e=>n&&e instanceof n)(typeof Uint8Array<"u"&&wA(Uint8Array)),aI=(n,e)=>{const s=(n&&n[Hw]).call(n);let i;for(;(i=s.next())&&!i.done;){const r=i.value;e.call(n,r[0],r[1])}},lI=(n,e)=>{let t;const s=[];for(;(t=n.exec(e))!==null;)s.push(t);return s},cI=Qs("HTMLFormElement"),uI=n=>n.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,s,i){return s.toUpperCase()+i}),m_=(({hasOwnProperty:n})=>(e,t)=>n.call(e,t))(Object.prototype),hI=Qs("RegExp"),Jk=(n,e)=>{const t=Object.getOwnPropertyDescriptors(n),s={};pm(t,(i,r)=>{let o;(o=e(i,r,n))!==!1&&(s[r]=o||i)}),Object.defineProperties(n,s)},dI=n=>{Jk(n,(e,t)=>{if(Tn(n)&&["arguments","caller","callee"].indexOf(t)!==-1)return!1;const s=n[t];if(Tn(s)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+t+"'")})}})},fI=(n,e)=>{const t={},s=i=>{i.forEach(r=>{t[r]=!0})};return ad(n)?s(n):s(String(n).split(e)),t},pI=()=>{},gI=(n,e)=>n!=null&&Number.isFinite(n=+n)?n:e;function mI(n){return!!(n&&Tn(n.append)&&n[qk]==="FormData"&&n[Hw])}const yI=n=>{const e=new Array(10),t=(s,i)=>{if(fm(s)){if(e.indexOf(s)>=0)return;if(dm(s))return s;if(!("toJSON"in s)){e[i]=s;const r=ad(s)?[]:{};return pm(s,(o,l)=>{const c=t(o,i+1);!Zh(c)&&(r[l]=c)}),e[i]=void 0,r}}return s};return t(n,0)},vI=Qs("AsyncFunction"),wI=n=>n&&(fm(n)||Tn(n))&&Tn(n.then)&&Tn(n.catch),Zk=((n,e)=>n?setImmediate:e?((t,s)=>(wa.addEventListener("message",({source:i,data:r})=>{i===wa&&r===t&&s.length&&s.shift()()},!1),i=>{s.push(i),wa.postMessage(t,"*")}))(`axios@${Math.random()}`,[]):t=>setTimeout(t))(typeof setImmediate=="function",Tn(wa.postMessage)),bI=typeof queueMicrotask<"u"?queueMicrotask.bind(wa):typeof process<"u"&&process.nextTick||Zk,xI=n=>n!=null&&Tn(n[Hw]),D={isArray:ad,isArrayBuffer:Xk,isBuffer:dm,isFormData:qD,isArrayBufferView:BD,isString:jD,isNumber:Yk,isBoolean:UD,isObject:fm,isPlainObject:dy,isEmptyObject:zD,isReadableStream:YD,isRequest:KD,isResponse:QD,isHeaders:JD,isUndefined:Zh,isDate:$D,isFile:HD,isBlob:VD,isRegExp:hI,isFunction:Tn,isStream:GD,isURLSearchParams:XD,isTypedArray:oI,isFileList:WD,forEach:pm,merge:Hb,extend:eI,trim:ZD,stripBOM:tI,inherits:nI,toFlatObject:sI,kindOf:Vw,kindOfTest:Qs,endsWith:iI,toArray:rI,forEachEntry:aI,matchAll:lI,isHTMLForm:cI,hasOwnProperty:m_,hasOwnProp:m_,reduceDescriptors:Jk,freezeMethods:dI,toObjectSet:fI,toCamelCase:uI,noop:pI,toFiniteNumber:gI,findKey:Kk,global:wa,isContextDefined:Qk,isSpecCompliantForm:mI,toJSONObject:yI,isAsyncFn:vI,isThenable:wI,setImmediate:Zk,asap:bI,isIterable:xI};class un extends Error{static from(e,t,s,i,r,o){const l=new un(e.message,t||e.code,s,i,r);return l.cause=e,l.name=e.name,o&&Object.assign(l,o),l}constructor(e,t,s,i,r){super(e),this.name="AxiosError",this.isAxiosError=!0,t&&(this.code=t),s&&(this.config=s),i&&(this.request=i),r&&(this.response=r,this.status=r.status)}toJSON(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:D.toJSONObject(this.config),code:this.code,status:this.status}}}un.ERR_BAD_OPTION_VALUE="ERR_BAD_OPTION_VALUE";un.ERR_BAD_OPTION="ERR_BAD_OPTION";un.ECONNABORTED="ECONNABORTED";un.ETIMEDOUT="ETIMEDOUT";un.ERR_NETWORK="ERR_NETWORK";un.ERR_FR_TOO_MANY_REDIRECTS="ERR_FR_TOO_MANY_REDIRECTS";un.ERR_DEPRECATED="ERR_DEPRECATED";un.ERR_BAD_RESPONSE="ERR_BAD_RESPONSE";un.ERR_BAD_REQUEST="ERR_BAD_REQUEST";un.ERR_CANCELED="ERR_CANCELED";un.ERR_NOT_SUPPORT="ERR_NOT_SUPPORT";un.ERR_INVALID_URL="ERR_INVALID_URL";const le=un,SI=null;function Vb(n){return D.isPlainObject(n)||D.isArray(n)}function eP(n){return D.endsWith(n,"[]")?n.slice(0,-2):n}function y_(n,e,t){return n?n.concat(e).map(function(i,r){return i=eP(i),!t&&r?"["+i+"]":i}).join(t?".":""):e}function AI(n){return D.isArray(n)&&!n.some(Vb)}const EI=D.toFlatObject(D,{},null,function(e){return/^is[A-Z]/.test(e)});function Gw(n,e,t){if(!D.isObject(n))throw new TypeError("target must be an object");e=e||new FormData,t=D.toFlatObject(t,{metaTokens:!0,dots:!1,indexes:!1},!1,function(w,x){return!D.isUndefined(x[w])});const s=t.metaTokens,i=t.visitor||h,r=t.dots,o=t.indexes,c=(t.Blob||typeof Blob<"u"&&Blob)&&D.isSpecCompliantForm(e);if(!D.isFunction(i))throw new TypeError("visitor must be a function");function u(y){if(y===null)return"";if(D.isDate(y))return y.toISOString();if(D.isBoolean(y))return y.toString();if(!c&&D.isBlob(y))throw new le("Blob is not supported. Use a Buffer instead.");return D.isArrayBuffer(y)||D.isTypedArray(y)?c&&typeof Blob=="function"?new Blob([y]):Buffer.from(y):y}function h(y,w,x){let v=y;if(y&&!x&&typeof y=="object"){if(D.endsWith(w,"{}"))w=s?w:w.slice(0,-2),y=JSON.stringify(y);else if(D.isArray(y)&&AI(y)||(D.isFileList(y)||D.endsWith(w,"[]"))&&(v=D.toArray(y)))return w=eP(w),v.forEach(function(S,E){!(D.isUndefined(S)||S===null)&&e.append(o===!0?y_([w],E,r):o===null?w:w+"[]",u(S))}),!1}return Vb(y)?!0:(e.append(y_(x,w,r),u(y)),!1)}const d=[],f=Object.assign(EI,{defaultVisitor:h,convertValue:u,isVisitable:Vb});function m(y,w){if(!D.isUndefined(y)){if(d.indexOf(y)!==-1)throw Error("Circular reference detected in "+w.join("."));d.push(y),D.forEach(y,function(v,b){(!(D.isUndefined(v)||v===null)&&i.call(e,v,D.isString(b)?b.trim():b,w,f))===!0&&m(v,w?w.concat(b):[b])}),d.pop()}}if(!D.isObject(n))throw new TypeError("data must be an object");return m(n),e}function v_(n){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(n).replace(/[!'()~]|%20|%00/g,function(s){return e[s]})}function bA(n,e){this._pairs=[],n&&Gw(n,this,e)}const tP=bA.prototype;tP.append=function(e,t){this._pairs.push([e,t])};tP.toString=function(e){const t=e?function(s){return e.call(this,s,v_)}:v_;return this._pairs.map(function(i){return t(i[0])+"="+t(i[1])},"").join("&")};function _I(n){return encodeURIComponent(n).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function nP(n,e,t){if(!e)return n;const s=t&&t.encode||_I,i=D.isFunction(t)?{serialize:t}:t,r=i&&i.serialize;let o;if(r?o=r(e,i):o=D.isURLSearchParams(e)?e.toString():new bA(e,i).toString(s),o){const l=n.indexOf("#");l!==-1&&(n=n.slice(0,l)),n+=(n.indexOf("?")===-1?"?":"&")+o}return n}class CI{constructor(){this.handlers=[]}use(e,t,s){return this.handlers.push({fulfilled:e,rejected:t,synchronous:s?s.synchronous:!1,runWhen:s?s.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){D.forEach(this.handlers,function(s){s!==null&&e(s)})}}const w_=CI,xA={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1,legacyInterceptorReqResOrdering:!0},TI=typeof URLSearchParams<"u"?URLSearchParams:bA,kI=typeof FormData<"u"?FormData:null,PI=typeof Blob<"u"?Blob:null,RI={isBrowser:!0,classes:{URLSearchParams:TI,FormData:kI,Blob:PI},protocols:["http","https","file","blob","url","data"]},SA=typeof window<"u"&&typeof document<"u",Wb=typeof navigator=="object"&&navigator||void 0,LI=SA&&(!Wb||["ReactNative","NativeScript","NS"].indexOf(Wb.product)<0),NI=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),MI=SA&&window.location.href||"http://localhost",DI=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:SA,hasStandardBrowserEnv:LI,hasStandardBrowserWebWorkerEnv:NI,navigator:Wb,origin:MI},Symbol.toStringTag,{value:"Module"})),Kt={...DI,...RI};function II(n,e){return Gw(n,new Kt.classes.URLSearchParams,{visitor:function(t,s,i,r){return Kt.isNode&&D.isBuffer(t)?(this.append(s,t.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)},...e})}function FI(n){return D.matchAll(/\w+|\[(\w*)]/g,n).map(e=>e[0]==="[]"?"":e[1]||e[0])}function OI(n){const e={},t=Object.keys(n);let s;const i=t.length;let r;for(s=0;s<i;s++)r=t[s],e[r]=n[r];return e}function sP(n){function e(t,s,i,r){let o=t[r++];if(o==="__proto__")return!0;const l=Number.isFinite(+o),c=r>=t.length;return o=!o&&D.isArray(i)?i.length:o,c?(D.hasOwnProp(i,o)?i[o]=[i[o],s]:i[o]=s,!l):((!i[o]||!D.isObject(i[o]))&&(i[o]=[]),e(t,s,i[o],r)&&D.isArray(i[o])&&(i[o]=OI(i[o])),!l)}if(D.isFormData(n)&&D.isFunction(n.entries)){const t={};return D.forEachEntry(n,(s,i)=>{e(FI(s),i,t,0)}),t}return null}function BI(n,e,t){if(D.isString(n))try{return(e||JSON.parse)(n),D.trim(n)}catch(s){if(s.name!=="SyntaxError")throw s}return(t||JSON.stringify)(n)}const AA={transitional:xA,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const s=t.getContentType()||"",i=s.indexOf("application/json")>-1,r=D.isObject(e);if(r&&D.isHTMLForm(e)&&(e=new FormData(e)),D.isFormData(e))return i?JSON.stringify(sP(e)):e;if(D.isArrayBuffer(e)||D.isBuffer(e)||D.isStream(e)||D.isFile(e)||D.isBlob(e)||D.isReadableStream(e))return e;if(D.isArrayBufferView(e))return e.buffer;if(D.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let l;if(r){if(s.indexOf("application/x-www-form-urlencoded")>-1)return II(e,this.formSerializer).toString();if((l=D.isFileList(e))||s.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return Gw(l?{"files[]":e}:e,c&&new c,this.formSerializer)}}return r||i?(t.setContentType("application/json",!1),BI(e)):e}],transformResponse:[function(e){const t=this.transitional||AA.transitional,s=t&&t.forcedJSONParsing,i=this.responseType==="json";if(D.isResponse(e)||D.isReadableStream(e))return e;if(e&&D.isString(e)&&(s&&!this.responseType||i)){const o=!(t&&t.silentJSONParsing)&&i;try{return JSON.parse(e,this.parseReviver)}catch(l){if(o)throw l.name==="SyntaxError"?le.from(l,le.ERR_BAD_RESPONSE,this,null,this.response):l}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Kt.classes.FormData,Blob:Kt.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};D.forEach(["delete","get","head","post","put","patch"],n=>{AA.headers[n]={}});const EA=AA,jI=D.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),UI=n=>{const e={};let t,s,i;return n&&n.split(`
`).forEach(function(o){i=o.indexOf(":"),t=o.substring(0,i).trim().toLowerCase(),s=o.substring(i+1).trim(),!(!t||e[t]&&jI[t])&&(t==="set-cookie"?e[t]?e[t].push(s):e[t]=[s]:e[t]=e[t]?e[t]+", "+s:s)}),e},b_=Symbol("internals");function vd(n){return n&&String(n).trim().toLowerCase()}function fy(n){return n===!1||n==null?n:D.isArray(n)?n.map(fy):String(n)}function zI(n){const e=Object.create(null),t=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let s;for(;s=t.exec(n);)e[s[1]]=s[2];return e}const $I=n=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(n.trim());function F1(n,e,t,s,i){if(D.isFunction(s))return s.call(this,e,t);if(i&&(e=t),!!D.isString(e)){if(D.isString(s))return e.indexOf(s)!==-1;if(D.isRegExp(s))return s.test(e)}}function HI(n){return n.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,s)=>t.toUpperCase()+s)}function VI(n,e){const t=D.toCamelCase(" "+e);["get","set","has"].forEach(s=>{Object.defineProperty(n,s+t,{value:function(i,r,o){return this[s].call(this,e,i,r,o)},configurable:!0})})}class qw{constructor(e){e&&this.set(e)}set(e,t,s){const i=this;function r(l,c,u){const h=vd(c);if(!h)throw new Error("header name must be a non-empty string");const d=D.findKey(i,h);(!d||i[d]===void 0||u===!0||u===void 0&&i[d]!==!1)&&(i[d||c]=fy(l))}const o=(l,c)=>D.forEach(l,(u,h)=>r(u,h,c));if(D.isPlainObject(e)||e instanceof this.constructor)o(e,t);else if(D.isString(e)&&(e=e.trim())&&!$I(e))o(UI(e),t);else if(D.isObject(e)&&D.isIterable(e)){let l={},c,u;for(const h of e){if(!D.isArray(h))throw TypeError("Object iterator must return a key-value pair");l[u=h[0]]=(c=l[u])?D.isArray(c)?[...c,h[1]]:[c,h[1]]:h[1]}o(l,t)}else e!=null&&r(t,e,s);return this}get(e,t){if(e=vd(e),e){const s=D.findKey(this,e);if(s){const i=this[s];if(!t)return i;if(t===!0)return zI(i);if(D.isFunction(t))return t.call(this,i,s);if(D.isRegExp(t))return t.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=vd(e),e){const s=D.findKey(this,e);return!!(s&&this[s]!==void 0&&(!t||F1(this,this[s],s,t)))}return!1}delete(e,t){const s=this;let i=!1;function r(o){if(o=vd(o),o){const l=D.findKey(s,o);l&&(!t||F1(s,s[l],l,t))&&(delete s[l],i=!0)}}return D.isArray(e)?e.forEach(r):r(e),i}clear(e){const t=Object.keys(this);let s=t.length,i=!1;for(;s--;){const r=t[s];(!e||F1(this,this[r],r,e,!0))&&(delete this[r],i=!0)}return i}normalize(e){const t=this,s={};return D.forEach(this,(i,r)=>{const o=D.findKey(s,r);if(o){t[o]=fy(i),delete t[r];return}const l=e?HI(r):String(r).trim();l!==r&&delete t[r],t[l]=fy(i),s[l]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return D.forEach(this,(s,i)=>{s!=null&&s!==!1&&(t[i]=e&&D.isArray(s)?s.join(", "):s)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const s=new this(e);return t.forEach(i=>s.set(i)),s}static accessor(e){const s=(this[b_]=this[b_]={accessors:{}}).accessors,i=this.prototype;function r(o){const l=vd(o);s[l]||(VI(i,o),s[l]=!0)}return D.isArray(e)?e.forEach(r):r(e),this}}qw.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);D.reduceDescriptors(qw.prototype,({value:n},e)=>{let t=e[0].toUpperCase()+e.slice(1);return{get:()=>n,set(s){this[t]=s}}});D.freezeMethods(qw);const Xs=qw;function O1(n,e){const t=this||EA,s=e||t,i=Xs.from(s.headers);let r=s.data;return D.forEach(n,function(l){r=l.call(t,r,i.normalize(),e?e.status:void 0)}),i.normalize(),r}function iP(n){return!!(n&&n.__CANCEL__)}class WI extends le{constructor(e,t,s){super(e??"canceled",le.ERR_CANCELED,t,s),this.name="CanceledError",this.__CANCEL__=!0}}const gm=WI;function rP(n,e,t){const s=t.config.validateStatus;!t.status||!s||s(t.status)?n(t):e(new le("Request failed with status code "+t.status,[le.ERR_BAD_REQUEST,le.ERR_BAD_RESPONSE][Math.floor(t.status/100)-4],t.config,t.request,t))}function GI(n){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(n);return e&&e[1]||""}function qI(n,e){n=n||10;const t=new Array(n),s=new Array(n);let i=0,r=0,o;return e=e!==void 0?e:1e3,function(c){const u=Date.now(),h=s[r];o||(o=u),t[i]=c,s[i]=u;let d=r,f=0;for(;d!==i;)f+=t[d++],d=d%n;if(i=(i+1)%n,i===r&&(r=(r+1)%n),u-o<e)return;const m=h&&u-h;return m?Math.round(f*1e3/m):void 0}}function XI(n,e){let t=0,s=1e3/e,i,r;const o=(u,h=Date.now())=>{t=h,i=null,r&&(clearTimeout(r),r=null),n(...u)};return[(...u)=>{const h=Date.now(),d=h-t;d>=s?o(u,h):(i=u,r||(r=setTimeout(()=>{r=null,o(i)},s-d)))},()=>i&&o(i)]}const b0=(n,e,t=3)=>{let s=0;const i=qI(50,250);return XI(r=>{const o=r.loaded,l=r.lengthComputable?r.total:void 0,c=o-s,u=i(c),h=o<=l;s=o;const d={loaded:o,total:l,progress:l?o/l:void 0,bytes:c,rate:u||void 0,estimated:u&&l&&h?(l-o)/u:void 0,event:r,lengthComputable:l!=null,[e?"download":"upload"]:!0};n(d)},t)},x_=(n,e)=>{const t=n!=null;return[s=>e[0]({lengthComputable:t,total:n,loaded:s}),e[1]]},S_=n=>(...e)=>D.asap(()=>n(...e)),YI=Kt.hasStandardBrowserEnv?((n,e)=>t=>(t=new URL(t,Kt.origin),n.protocol===t.protocol&&n.host===t.host&&(e||n.port===t.port)))(new URL(Kt.origin),Kt.navigator&&/(msie|trident)/i.test(Kt.navigator.userAgent)):()=>!0,KI=Kt.hasStandardBrowserEnv?{write(n,e,t,s,i,r,o){if(typeof document>"u")return;const l=[`${n}=${encodeURIComponent(e)}`];D.isNumber(t)&&l.push(`expires=${new Date(t).toUTCString()}`),D.isString(s)&&l.push(`path=${s}`),D.isString(i)&&l.push(`domain=${i}`),r===!0&&l.push("secure"),D.isString(o)&&l.push(`SameSite=${o}`),document.cookie=l.join("; ")},read(n){if(typeof document>"u")return null;const e=document.cookie.match(new RegExp("(?:^|; )"+n+"=([^;]*)"));return e?decodeURIComponent(e[1]):null},remove(n){this.write(n,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function QI(n){return typeof n!="string"?!1:/^([a-z][a-z\d+\-.]*:)?\/\//i.test(n)}function JI(n,e){return e?n.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):n}function oP(n,e,t){let s=!QI(e);return n&&(s||t==!1)?JI(n,e):e}const A_=n=>n instanceof Xs?{...n}:n;function nc(n,e){e=e||{};const t={};function s(u,h,d,f){return D.isPlainObject(u)&&D.isPlainObject(h)?D.merge.call({caseless:f},u,h):D.isPlainObject(h)?D.merge({},h):D.isArray(h)?h.slice():h}function i(u,h,d,f){if(D.isUndefined(h)){if(!D.isUndefined(u))return s(void 0,u,d,f)}else return s(u,h,d,f)}function r(u,h){if(!D.isUndefined(h))return s(void 0,h)}function o(u,h){if(D.isUndefined(h)){if(!D.isUndefined(u))return s(void 0,u)}else return s(void 0,h)}function l(u,h,d){if(d in e)return s(u,h);if(d in n)return s(void 0,u)}const c={url:r,method:r,data:r,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:l,headers:(u,h,d)=>i(A_(u),A_(h),d,!0)};return D.forEach(Object.keys({...n,...e}),function(h){if(h==="__proto__"||h==="constructor"||h==="prototype")return;const d=D.hasOwnProp(c,h)?c[h]:i,f=d(n[h],e[h],h);D.isUndefined(f)&&d!==l||(t[h]=f)}),t}const aP=n=>{const e=nc({},n);let{data:t,withXSRFToken:s,xsrfHeaderName:i,xsrfCookieName:r,headers:o,auth:l}=e;if(e.headers=o=Xs.from(o),e.url=nP(oP(e.baseURL,e.url,e.allowAbsoluteUrls),n.params,n.paramsSerializer),l&&o.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):""))),D.isFormData(t)){if(Kt.hasStandardBrowserEnv||Kt.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if(D.isFunction(t.getHeaders)){const c=t.getHeaders(),u=["content-type","content-length"];Object.entries(c).forEach(([h,d])=>{u.includes(h.toLowerCase())&&o.set(h,d)})}}if(Kt.hasStandardBrowserEnv&&(s&&D.isFunction(s)&&(s=s(e)),s||s!==!1&&YI(e.url))){const c=i&&r&&KI.read(r);c&&o.set(i,c)}return e},ZI=typeof XMLHttpRequest<"u",eF=ZI&&function(n){return new Promise(function(t,s){const i=aP(n);let r=i.data;const o=Xs.from(i.headers).normalize();let{responseType:l,onUploadProgress:c,onDownloadProgress:u}=i,h,d,f,m,y;function w(){m&&m(),y&&y(),i.cancelToken&&i.cancelToken.unsubscribe(h),i.signal&&i.signal.removeEventListener("abort",h)}let x=new XMLHttpRequest;x.open(i.method.toUpperCase(),i.url,!0),x.timeout=i.timeout;function v(){if(!x)return;const S=Xs.from("getAllResponseHeaders"in x&&x.getAllResponseHeaders()),C={data:!l||l==="text"||l==="json"?x.responseText:x.response,status:x.status,statusText:x.statusText,headers:S,config:n,request:x};rP(function(k){t(k),w()},function(k){s(k),w()},C),x=null}"onloadend"in x?x.onloadend=v:x.onreadystatechange=function(){!x||x.readyState!==4||x.status===0&&!(x.responseURL&&x.responseURL.indexOf("file:")===0)||setTimeout(v)},x.onabort=function(){x&&(s(new le("Request aborted",le.ECONNABORTED,n,x)),x=null)},x.onerror=function(E){const C=E&&E.message?E.message:"Network Error",T=new le(C,le.ERR_NETWORK,n,x);T.event=E||null,s(T),x=null},x.ontimeout=function(){let E=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const C=i.transitional||xA;i.timeoutErrorMessage&&(E=i.timeoutErrorMessage),s(new le(E,C.clarifyTimeoutError?le.ETIMEDOUT:le.ECONNABORTED,n,x)),x=null},r===void 0&&o.setContentType(null),"setRequestHeader"in x&&D.forEach(o.toJSON(),function(E,C){x.setRequestHeader(C,E)}),D.isUndefined(i.withCredentials)||(x.withCredentials=!!i.withCredentials),l&&l!=="json"&&(x.responseType=i.responseType),u&&([f,y]=b0(u,!0),x.addEventListener("progress",f)),c&&x.upload&&([d,m]=b0(c),x.upload.addEventListener("progress",d),x.upload.addEventListener("loadend",m)),(i.cancelToken||i.signal)&&(h=S=>{x&&(s(!S||S.type?new gm(null,n,x):S),x.abort(),x=null)},i.cancelToken&&i.cancelToken.subscribe(h),i.signal&&(i.signal.aborted?h():i.signal.addEventListener("abort",h)));const b=GI(i.url);if(b&&Kt.protocols.indexOf(b)===-1){s(new le("Unsupported protocol "+b+":",le.ERR_BAD_REQUEST,n));return}x.send(r||null)})},tF=(n,e)=>{const{length:t}=n=n?n.filter(Boolean):[];if(e||t){let s=new AbortController,i;const r=function(u){if(!i){i=!0,l();const h=u instanceof Error?u:this.reason;s.abort(h instanceof le?h:new gm(h instanceof Error?h.message:h))}};let o=e&&setTimeout(()=>{o=null,r(new le(`timeout of ${e}ms exceeded`,le.ETIMEDOUT))},e);const l=()=>{n&&(o&&clearTimeout(o),o=null,n.forEach(u=>{u.unsubscribe?u.unsubscribe(r):u.removeEventListener("abort",r)}),n=null)};n.forEach(u=>u.addEventListener("abort",r));const{signal:c}=s;return c.unsubscribe=()=>D.asap(l),c}},nF=tF,sF=function*(n,e){let t=n.byteLength;if(!e||t<e){yield n;return}let s=0,i;for(;s<t;)i=s+e,yield n.slice(s,i),s=i},iF=async function*(n,e){for await(const t of rF(n))yield*sF(t,e)},rF=async function*(n){if(n[Symbol.asyncIterator]){yield*n;return}const e=n.getReader();try{for(;;){const{done:t,value:s}=await e.read();if(t)break;yield s}}finally{await e.cancel()}},E_=(n,e,t,s)=>{const i=iF(n,e);let r=0,o,l=c=>{o||(o=!0,s&&s(c))};return new ReadableStream({async pull(c){try{const{done:u,value:h}=await i.next();if(u){l(),c.close();return}let d=h.byteLength;if(t){let f=r+=d;t(f)}c.enqueue(new Uint8Array(h))}catch(u){throw l(u),u}},cancel(c){return l(c),i.return()}},{highWaterMark:2})},__=64*1024,{isFunction:$m}=D,oF=(({Request:n,Response:e})=>({Request:n,Response:e}))(D.global),{ReadableStream:C_,TextEncoder:T_}=D.global,k_=(n,...e)=>{try{return!!n(...e)}catch{return!1}},aF=n=>{n=D.merge.call({skipUndefined:!0},oF,n);const{fetch:e,Request:t,Response:s}=n,i=e?$m(e):typeof fetch=="function",r=$m(t),o=$m(s);if(!i)return!1;const l=i&&$m(C_),c=i&&(typeof T_=="function"?(y=>w=>y.encode(w))(new T_):async y=>new Uint8Array(await new t(y).arrayBuffer())),u=r&&l&&k_(()=>{let y=!1;const w=new t(Kt.origin,{body:new C_,method:"POST",get duplex(){return y=!0,"half"}}).headers.has("Content-Type");return y&&!w}),h=o&&l&&k_(()=>D.isReadableStream(new s("").body)),d={stream:h&&(y=>y.body)};i&&["text","arrayBuffer","blob","formData","stream"].forEach(y=>{!d[y]&&(d[y]=(w,x)=>{let v=w&&w[y];if(v)return v.call(w);throw new le(`Response type '${y}' is not supported`,le.ERR_NOT_SUPPORT,x)})});const f=async y=>{if(y==null)return 0;if(D.isBlob(y))return y.size;if(D.isSpecCompliantForm(y))return(await new t(Kt.origin,{method:"POST",body:y}).arrayBuffer()).byteLength;if(D.isArrayBufferView(y)||D.isArrayBuffer(y))return y.byteLength;if(D.isURLSearchParams(y)&&(y=y+""),D.isString(y))return(await c(y)).byteLength},m=async(y,w)=>{const x=D.toFiniteNumber(y.getContentLength());return x??f(w)};return async y=>{let{url:w,method:x,data:v,signal:b,cancelToken:S,timeout:E,onDownloadProgress:C,onUploadProgress:T,responseType:k,headers:P,withCredentials:N="same-origin",fetchOptions:M}=aP(y),I=e||fetch;k=k?(k+"").toLowerCase():"text";let j=nF([b,S&&S.toAbortSignal()],E),H=null;const z=j&&j.unsubscribe&&(()=>{j.unsubscribe()});let Q;try{if(T&&u&&x!=="get"&&x!=="head"&&(Q=await m(P,v))!==0){let J=new t(w,{method:"POST",body:v,duplex:"half"}),X;if(D.isFormData(v)&&(X=J.headers.get("content-type"))&&P.setContentType(X),J.body){const[te,fe]=x_(Q,b0(S_(T)));v=E_(J.body,__,te,fe)}}D.isString(N)||(N=N?"include":"omit");const F=r&&"credentials"in t.prototype,$={...M,signal:j,method:x.toUpperCase(),headers:P.normalize().toJSON(),body:v,duplex:"half",credentials:F?N:void 0};H=r&&new t(w,$);let L=await(r?I(H,M):I(w,$));const U=h&&(k==="stream"||k==="response");if(h&&(C||U&&z)){const J={};["status","statusText","headers"].forEach(Le=>{J[Le]=L[Le]});const X=D.toFiniteNumber(L.headers.get("content-length")),[te,fe]=C&&x_(X,b0(S_(C),!0))||[];L=new s(E_(L.body,__,te,()=>{fe&&fe(),z&&z()}),J)}k=k||"text";let K=await d[D.findKey(d,k)||"text"](L,y);return!U&&z&&z(),await new Promise((J,X)=>{rP(J,X,{data:K,headers:Xs.from(L.headers),status:L.status,statusText:L.statusText,config:y,request:H})})}catch(F){throw z&&z(),F&&F.name==="TypeError"&&/Load failed|fetch/i.test(F.message)?Object.assign(new le("Network Error",le.ERR_NETWORK,y,H,F&&F.response),{cause:F.cause||F}):le.from(F,F&&F.code,y,H,F&&F.response)}}},lF=new Map,lP=n=>{let e=n&&n.env||{};const{fetch:t,Request:s,Response:i}=e,r=[s,i,t];let o=r.length,l=o,c,u,h=lF;for(;l--;)c=r[l],u=h.get(c),u===void 0&&h.set(c,u=l?new Map:aF(e)),h=u;return u};lP();const _A={http:SI,xhr:eF,fetch:{get:lP}};D.forEach(_A,(n,e)=>{if(n){try{Object.defineProperty(n,"name",{value:e})}catch{}Object.defineProperty(n,"adapterName",{value:e})}});const P_=n=>`- ${n}`,cF=n=>D.isFunction(n)||n===null||n===!1;function uF(n,e){n=D.isArray(n)?n:[n];const{length:t}=n;let s,i;const r={};for(let o=0;o<t;o++){s=n[o];let l;if(i=s,!cF(s)&&(i=_A[(l=String(s)).toLowerCase()],i===void 0))throw new le(`Unknown adapter '${l}'`);if(i&&(D.isFunction(i)||(i=i.get(e))))break;r[l||"#"+o]=i}if(!i){const o=Object.entries(r).map(([c,u])=>`adapter ${c} `+(u===!1?"is not supported by the environment":"is not available in the build"));let l=t?o.length>1?`since :
`+o.map(P_).join(`
`):" "+P_(o[0]):"as no adapter specified";throw new le("There is no suitable adapter to dispatch the request "+l,"ERR_NOT_SUPPORT")}return i}const cP={getAdapter:uF,adapters:_A};function B1(n){if(n.cancelToken&&n.cancelToken.throwIfRequested(),n.signal&&n.signal.aborted)throw new gm(null,n)}function R_(n){return B1(n),n.headers=Xs.from(n.headers),n.data=O1.call(n,n.transformRequest),["post","put","patch"].indexOf(n.method)!==-1&&n.headers.setContentType("application/x-www-form-urlencoded",!1),cP.getAdapter(n.adapter||EA.adapter,n)(n).then(function(s){return B1(n),s.data=O1.call(n,n.transformResponse,s),s.headers=Xs.from(s.headers),s},function(s){return iP(s)||(B1(n),s&&s.response&&(s.response.data=O1.call(n,n.transformResponse,s.response),s.response.headers=Xs.from(s.response.headers))),Promise.reject(s)})}const uP="1.13.5",Xw={};["object","boolean","number","function","string","symbol"].forEach((n,e)=>{Xw[n]=function(s){return typeof s===n||"a"+(e<1?"n ":" ")+n}});const L_={};Xw.transitional=function(e,t,s){function i(r,o){return"[Axios v"+uP+"] Transitional option '"+r+"'"+o+(s?". "+s:"")}return(r,o,l)=>{if(e===!1)throw new le(i(o," has been removed"+(t?" in "+t:"")),le.ERR_DEPRECATED);return t&&!L_[o]&&(L_[o]=!0,console.warn(i(o," has been deprecated since v"+t+" and will be removed in the near future"))),e?e(r,o,l):!0}};Xw.spelling=function(e){return(t,s)=>(console.warn(`${s} is likely a misspelling of ${e}`),!0)};function hF(n,e,t){if(typeof n!="object")throw new le("options must be an object",le.ERR_BAD_OPTION_VALUE);const s=Object.keys(n);let i=s.length;for(;i-- >0;){const r=s[i],o=e[r];if(o){const l=n[r],c=l===void 0||o(l,r,n);if(c!==!0)throw new le("option "+r+" must be "+c,le.ERR_BAD_OPTION_VALUE);continue}if(t!==!0)throw new le("Unknown option "+r,le.ERR_BAD_OPTION)}}const py={assertOptions:hF,validators:Xw},is=py.validators;class x0{constructor(e){this.defaults=e||{},this.interceptors={request:new w_,response:new w_}}async request(e,t){try{return await this._request(e,t)}catch(s){if(s instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const r=i.stack?i.stack.replace(/^.+\n/,""):"";try{s.stack?r&&!String(s.stack).endsWith(r.replace(/^.+\n.+\n/,""))&&(s.stack+=`
`+r):s.stack=r}catch{}}throw s}}_request(e,t){typeof e=="string"?(t=t||{},t.url=e):t=e||{},t=nc(this.defaults,t);const{transitional:s,paramsSerializer:i,headers:r}=t;s!==void 0&&py.assertOptions(s,{silentJSONParsing:is.transitional(is.boolean),forcedJSONParsing:is.transitional(is.boolean),clarifyTimeoutError:is.transitional(is.boolean),legacyInterceptorReqResOrdering:is.transitional(is.boolean)},!1),i!=null&&(D.isFunction(i)?t.paramsSerializer={serialize:i}:py.assertOptions(i,{encode:is.function,serialize:is.function},!0)),t.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),py.assertOptions(t,{baseUrl:is.spelling("baseURL"),withXsrfToken:is.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let o=r&&D.merge(r.common,r[t.method]);r&&D.forEach(["delete","get","head","post","put","patch","common"],y=>{delete r[y]}),t.headers=Xs.concat(o,r);const l=[];let c=!0;this.interceptors.request.forEach(function(w){if(typeof w.runWhen=="function"&&w.runWhen(t)===!1)return;c=c&&w.synchronous;const x=t.transitional||xA;x&&x.legacyInterceptorReqResOrdering?l.unshift(w.fulfilled,w.rejected):l.push(w.fulfilled,w.rejected)});const u=[];this.interceptors.response.forEach(function(w){u.push(w.fulfilled,w.rejected)});let h,d=0,f;if(!c){const y=[R_.bind(this),void 0];for(y.unshift(...l),y.push(...u),f=y.length,h=Promise.resolve(t);d<f;)h=h.then(y[d++],y[d++]);return h}f=l.length;let m=t;for(;d<f;){const y=l[d++],w=l[d++];try{m=y(m)}catch(x){w.call(this,x);break}}try{h=R_.call(this,m)}catch(y){return Promise.reject(y)}for(d=0,f=u.length;d<f;)h=h.then(u[d++],u[d++]);return h}getUri(e){e=nc(this.defaults,e);const t=oP(e.baseURL,e.url,e.allowAbsoluteUrls);return nP(t,e.params,e.paramsSerializer)}}D.forEach(["delete","get","head","options"],function(e){x0.prototype[e]=function(t,s){return this.request(nc(s||{},{method:e,url:t,data:(s||{}).data}))}});D.forEach(["post","put","patch"],function(e){function t(s){return function(r,o,l){return this.request(nc(l||{},{method:e,headers:s?{"Content-Type":"multipart/form-data"}:{},url:r,data:o}))}}x0.prototype[e]=t(),x0.prototype[e+"Form"]=t(!0)});const gy=x0;class CA{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(r){t=r});const s=this;this.promise.then(i=>{if(!s._listeners)return;let r=s._listeners.length;for(;r-- >0;)s._listeners[r](i);s._listeners=null}),this.promise.then=i=>{let r;const o=new Promise(l=>{s.subscribe(l),r=l}).then(i);return o.cancel=function(){s.unsubscribe(r)},o},e(function(r,o,l){s.reason||(s.reason=new gm(r,o,l),t(s.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);t!==-1&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=s=>{e.abort(s)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new CA(function(i){e=i}),cancel:e}}}const dF=CA;function fF(n){return function(t){return n.apply(null,t)}}function pF(n){return D.isObject(n)&&n.isAxiosError===!0}const Gb={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(Gb).forEach(([n,e])=>{Gb[e]=n});const gF=Gb;function hP(n){const e=new gy(n),t=Gk(gy.prototype.request,e);return D.extend(t,gy.prototype,e,{allOwnKeys:!0}),D.extend(t,e,null,{allOwnKeys:!0}),t.create=function(i){return hP(nc(n,i))},t}const lt=hP(EA);lt.Axios=gy;lt.CanceledError=gm;lt.CancelToken=dF;lt.isCancel=iP;lt.VERSION=uP;lt.toFormData=Gw;lt.AxiosError=le;lt.Cancel=lt.CanceledError;lt.all=function(e){return Promise.all(e)};lt.spread=fF;lt.isAxiosError=pF;lt.mergeConfig=nc;lt.AxiosHeaders=Xs;lt.formToJSON=n=>sP(D.isHTMLForm(n)?new FormData(n):n);lt.getAdapter=cP.getAdapter;lt.HttpStatusCode=gF;lt.default=lt;const mF=lt,TA={}.VITE_API_URL||(window.location.hostname==="localhost"?"http://localhost:5000/api":`${window.location.origin}/api`),_s=mF.create({baseURL:TA,headers:{"Content-Type":"application/json"}}),yF=async(n,e,t)=>{const s=new FormData;return s.append("file",n),s.append("title",e),s.append("total_questions",t),(await _s.post("/upload/question-paper",s,{headers:{"Content-Type":"multipart/form-data"}})).data},vF=async(n,e,t)=>{const s=new FormData;return s.append("file",n),s.append("student_name",e),t&&s.append("question_paper_id",t),(await _s.post("/upload/answer-sheet",s,{headers:{"Content-Type":"multipart/form-data"}})).data},wF=async(n,e)=>{const t=new FormData;return t.append("file",n),t.append("title",e),(await _s.post("/upload/rubric",t,{headers:{"Content-Type":"multipart/form-data"}})).data},my=async(n="all")=>(await _s.get(`/upload/files?type=${n}`)).data,dP=(n,e)=>`${TA}/upload/files/${n}/view?type=${e}`,bF=(n,e)=>`${TA}/upload/files/${n}/thumbnail?type=${e}`,xF=async(n,e,t)=>(await _s.post("/evaluate/transcribe",{answersheetId:n,page:e,coordinates:t})).data,SF=async(n,e,t,s,i)=>(await _s.post("/evaluate/marks",{answersheetId:n,questionPaperId:e,questionNumber:t,marksAwarded:s,maxMarks:i})).data,AF=async n=>(await _s.get(`/evaluate/marks/${n}`)).data,EF=async n=>(await _s.get(`/evaluate/marks/${n}/total`)).data,_F=async n=>(await _s.get(`/evaluate/pdf-info/${n}`)).data,CF=async(n,e)=>(await _s.post("/evaluate/save-report",{answersheetId:n,remarks:e})).data,TF=({files:n,onRefresh:e})=>{const t=yA(),s=o=>{t(`/evaluate/${o.id}`)},i=o=>{switch(o){case"question_paper":return"from-blue-500 to-blue-600";case"answer_sheet":return"from-green-500 to-green-600";case"rubric":return"from-purple-500 to-purple-600";default:return"from-gray-500 to-gray-600"}},r=o=>{switch(o){case"question_paper":return"Question Paper";case"answer_sheet":return"Answer Sheet";case"rubric":return"Rubric";default:return"File"}};return!n||n.length===0?_.jsxs("div",{className:"glass p-12 rounded-xl text-center",children:[_.jsx(vA,{className:"w-16 h-16 mx-auto mb-4 text-gray-500"}),_.jsx("p",{className:"text-xl text-gray-400",children:"No files uploaded yet"})]}):_.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:n.map(o=>_.jsxs("div",{className:"glass card-hover group relative overflow-hidden rounded-xl",children:[_.jsxs("div",{className:"aspect-[3/4] bg-gray-800 relative overflow-hidden",children:[_.jsx("img",{src:bF(o.id,o.type.replace("_sheet","").replace("_paper","")),alt:o.title||o.student_name,className:"w-full h-full object-cover",onError:l=>{l.target.src='data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="280"><rect fill="%23374151" width="200" height="280"/><text x="50%" y="50%" text-anchor="middle" fill="%239CA3AF" font-size="24">PDF</text></svg>'}}),_.jsxs("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-70 transition-all flex items-center justify-center gap-3 opacity-0 group-hover:opacity-100",children:[_.jsx("button",{className:"btn btn-ghost p-3",children:_.jsx(Vk,{className:"w-5 h-5"})}),o.type==="answer_sheet"&&_.jsx("button",{onClick:()=>s(o),className:"btn btn-primary p-3",children:_.jsx(PD,{className:"w-5 h-5"})})]})]}),_.jsxs("div",{className:"p-4",children:[_.jsx("div",{className:`inline-block px-3 py-1 rounded-full text-xs font-medium bg-gradient-to-r ${i(o.type)} mb-2`,children:r(o.type)}),_.jsx("h4",{className:"font-semibold text-lg mb-1 truncate",children:o.student_name||o.title}),_.jsx("p",{className:"text-sm text-gray-400",children:new Date(o.uploaded_at).toLocaleDateString()})]})]},`${o.type}-${o.id}`))})},kF=()=>{const[n,e]=R.useState([]),[t,s]=R.useState(!0),[i,r]=R.useState("all"),o=async()=>{try{s(!0);const h=await my(i);e(h.files||[])}catch(h){console.error("Failed to load files:",h)}finally{s(!1)}};R.useEffect(()=>{o()},[i]);const l=async(h,d)=>{await yF(h,d.title,d.totalQuestions),o()},c=async(h,d)=>{await vF(h,d.studentName),o()},u=async(h,d)=>{await wF(h,d.title),o()};return _.jsxs("div",{className:"min-h-screen p-8",children:[_.jsxs("header",{className:"mb-12",children:[_.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[_.jsx("div",{className:"p-4 bg-gradient-to-br from-primary-500 to-accent-500 rounded-2xl pulse-glow",children:_.jsx(_D,{className:"w-10 h-10 text-white"})}),_.jsxs("div",{children:[_.jsx("h1",{className:"text-4xl font-bold gradient-text",children:"ScriptSense"}),_.jsx("p",{className:"text-gray-400 text-lg",children:"AI-Powered Handwriting Recognition & Grading"})]})]}),_.jsx("a",{href:"/results",className:"inline-flex items-center gap-2 px-4 py-2 rounded-lg bg-white bg-opacity-10 hover:bg-opacity-20 transition-all border border-white border-opacity-10",children:_.jsx("span",{className:"font-semibold",children:"View Results Library"})})]}),_.jsxs("section",{className:"mb-12",children:[_.jsx("h2",{className:"text-2xl font-semibold mb-6 flex items-center gap-3",children:_.jsx("span",{className:"gradient-text",children:"Upload Documents"})}),_.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[_.jsx(I1,{type:"question",title:"Question Papers",onUpload:l}),_.jsx(I1,{type:"answer",title:"Answer Sheets",onUpload:c}),_.jsx(I1,{type:"rubric",title:"Evaluation Rubrics",onUpload:u})]})]}),_.jsxs("section",{children:[_.jsxs("div",{className:"flex items-center justify-between mb-6",children:[_.jsx("h2",{className:"text-2xl font-semibold gradient-text",children:"Uploaded Files"}),_.jsxs("div",{className:"flex items-center gap-4",children:[_.jsx("div",{className:"flex gap-2 glass px-3 py-2 rounded-lg",children:["all","question","answer","rubric"].map(h=>_.jsx("button",{onClick:()=>r(h),className:`px-4 py-2 rounded-lg font-medium transition-all ${i===h?"bg-primary-500 text-white":"hover:bg-white hover:bg-opacity-10"}`,children:h.charAt(0).toUpperCase()+h.slice(1)},h))}),_.jsx("button",{onClick:o,className:"btn btn-ghost p-3",disabled:t,children:_.jsx(LD,{className:`w-5 h-5 ${t?"animate-spin":""}`})})]})]}),t?_.jsx("div",{className:"flex justify-center items-center h-64",children:_.jsx("div",{className:"spinner"})}):_.jsx(TF,{files:n,onRefresh:o})]})]})},PF=()=>{const n=yA(),[e,t]=R.useState([]),[s,i]=R.useState(!0),[r,o]=R.useState("");R.useEffect(()=>{l()},[]);const l=async()=>{try{i(!0);const h=await _s.get("/evaluate/results");t(h.data.results||[])}catch(h){console.error("Failed to load results:",h)}finally{i(!1)}},c=async()=>{try{const h=await _s.get("/evaluate/results/export",{responseType:"blob"}),d=window.URL.createObjectURL(new Blob([h.data])),f=document.createElement("a");f.href=d,f.setAttribute("download","class_results.csv"),document.body.appendChild(f),f.click(),f.remove()}catch(h){console.error("Failed to export results:",h),alert("Failed to export results")}},u=e.filter(h=>h.student_name.toLowerCase().includes(r.toLowerCase())||h.question_paper.toLowerCase().includes(r.toLowerCase()));return _.jsxs("div",{className:"min-h-screen p-8",children:[_.jsxs("div",{className:"flex items-center justify-between mb-8",children:[_.jsxs("div",{className:"flex items-center gap-4",children:[_.jsx("button",{onClick:()=>n("/"),className:"btn btn-ghost p-3",children:_.jsx(zk,{className:"w-5 h-5"})}),_.jsxs("div",{children:[_.jsx("h1",{className:"text-3xl font-bold gradient-text",children:"Results Library"}),_.jsx("p",{className:"text-gray-400",children:"View and manage evaluated answer sheets"})]})]}),_.jsxs("button",{onClick:c,disabled:e.length===0,className:"btn btn-primary flex items-center gap-2",children:[_.jsx(AD,{className:"w-4 h-4"}),"Export CSV"]})]}),_.jsxs("div",{className:"mb-6 relative",children:[_.jsx(ND,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),_.jsx("input",{type:"text",placeholder:"Search by student name or question paper...",value:r,onChange:h=>o(h.target.value),className:"w-full pl-12 pr-4 py-3 bg-white bg-opacity-5 border border-white border-opacity-10 rounded-xl outline-none focus:border-primary-500 transition-colors"})]}),_.jsx("div",{className:"glass-strong rounded-xl overflow-hidden",children:_.jsx("div",{className:"overflow-x-auto",children:_.jsxs("table",{className:"w-full text-left border-collapse",children:[_.jsx("thead",{children:_.jsxs("tr",{className:"bg-white bg-opacity-5 border-b border-white border-opacity-10 text-gray-300",children:[_.jsx("th",{className:"p-4 font-semibold",children:"Student Name"}),_.jsx("th",{className:"p-4 font-semibold",children:"Question Paper"}),_.jsx("th",{className:"p-4 font-semibold text-right",children:"Score"}),_.jsx("th",{className:"p-4 font-semibold text-right",children:"Percentage"}),_.jsx("th",{className:"p-4 font-semibold",children:"Remarks"}),_.jsx("th",{className:"p-4 font-semibold text-center",children:"Actions"})]})}),_.jsx("tbody",{children:s?_.jsx("tr",{children:_.jsx("td",{colSpan:"6",className:"p-8 text-center text-gray-400",children:"Loading results..."})}):u.length===0?_.jsx("tr",{children:_.jsx("td",{colSpan:"6",className:"p-8 text-center text-gray-400",children:"No results found."})}):u.map(h=>_.jsxs("tr",{className:"border-b border-white border-opacity-5 hover:bg-white hover:bg-opacity-5 transition-colors",children:[_.jsx("td",{className:"p-4 font-medium",children:h.student_name}),_.jsx("td",{className:"p-4 text-gray-400",children:h.question_paper}),_.jsxs("td",{className:"p-4 text-right font-bold text-accent-300",children:[h.total_awarded," ",_.jsxs("span",{className:"text-gray-500 font-normal",children:["/ ",h.total_max]})]}),_.jsx("td",{className:"p-4 text-right",children:_.jsxs("span",{className:`px-2 py-1 rounded text-xs font-semibold ${h.percentage>=70?"bg-green-500 bg-opacity-20 text-green-300":h.percentage>=40?"bg-yellow-500 bg-opacity-20 text-yellow-300":"bg-red-500 bg-opacity-20 text-red-300"}`,children:[h.percentage,"%"]})}),_.jsx("td",{className:"p-4 text-gray-400 max-w-xs truncate",children:h.remarks||"-"}),_.jsx("td",{className:"p-4 text-center",children:_.jsx("button",{onClick:()=>n(`/evaluate/${h.id}`),className:"p-2 hover:bg-white hover:bg-opacity-10 rounded text-primary-300",title:"View Marks Card",children:_.jsx(Vk,{className:"w-5 h-5"})})})]},h.id))})]})})})]})},RF="modulepreload",LF=function(n){return"/"+n},N_={},NF=function(e,t,s){if(!t||t.length===0)return e();const i=document.getElementsByTagName("link");return Promise.all(t.map(r=>{if(r=LF(r),r in N_)return;N_[r]=!0;const o=r.endsWith(".css"),l=o?'[rel="stylesheet"]':"";if(!!s)for(let h=i.length-1;h>=0;h--){const d=i[h];if(d.href===r&&(!o||d.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${r}"]${l}`))return;const u=document.createElement("link");if(u.rel=o?"stylesheet":RF,o||(u.as="script",u.crossOrigin=""),u.href=r,document.head.appendChild(u),o)return new Promise((h,d)=>{u.addEventListener("load",h),u.addEventListener("error",()=>d(new Error(`Unable to preload CSS for ${r}`)))})})).then(()=>e()).catch(r=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=r,window.dispatchEvent(o),!o.defaultPrevented)throw r})},rn=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),qb=[.001,0,0,.001,0,0],j1=1.35,Xn={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},ki={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},Ef="pdfjs_internal_editor_",Z={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,POPUP:16,SIGNATURE:101,COMMENT:102},ae={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_THICKNESS:32,HIGHLIGHT_FREE:33,HIGHLIGHT_SHOW_ALL:34,DRAW_STEP:41},fP={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},kt={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},sf={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},et={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},fc={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},mm={ERRORS:0,WARNINGS:1,INFOS:5},ed={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},Hm={moveTo:0,lineTo:1,curveTo:2,closePath:3},pP={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let Yw=mm.WARNINGS;function MF(n){Number.isInteger(n)&&(Yw=n)}function DF(){return Yw}function Kw(n){Yw>=mm.INFOS&&console.info(`Info: ${n}`)}function ee(n){Yw>=mm.WARNINGS&&console.warn(`Warning: ${n}`)}function _e(n){throw new Error(n)}function ce(n,e){n||_e(e)}function IF(n){switch(n==null?void 0:n.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function kA(n,e=null,t=null){if(!n)return null;if(t&&typeof n=="string"){if(t.addDefaultProtocol&&n.startsWith("www.")){const i=n.match(/\./g);(i==null?void 0:i.length)>=2&&(n=`http://${n}`)}if(t.tryConvertEncoding)try{n=UF(n)}catch{}}const s=e?URL.parse(n,e):URL.parse(n);return IF(s)?s:null}function PA(n,e,t=!1){const s=URL.parse(n);return s?(s.hash=e,s.href):t&&kA(n,"http://example.com")?n.split("#",1)[0]+`${e?`#${e}`:""}`:""}function ie(n,e,t,s=!1){return Object.defineProperty(n,e,{value:t,enumerable:!s,configurable:!0,writable:!1}),t}const lc=function(){function e(t,s){this.message=t,this.name=s}return e.prototype=new Error,e.constructor=e,e}();class M_ extends lc{constructor(e,t){super(e,"PasswordException"),this.code=t}}class U1 extends lc{constructor(e,t){super(e,"UnknownErrorException"),this.details=t}}class S0 extends lc{constructor(e){super(e,"InvalidPDFException")}}class _f extends lc{constructor(e,t,s){super(e,"ResponseException"),this.status=t,this.missing=s}}class FF extends lc{constructor(e){super(e,"FormatError")}}class Lr extends lc{constructor(e){super(e,"AbortException")}}function gP(n){(typeof n!="object"||(n==null?void 0:n.length)===void 0)&&_e("Invalid argument for bytesToString");const e=n.length,t=8192;if(e<t)return String.fromCharCode.apply(null,n);const s=[];for(let i=0;i<e;i+=t){const r=Math.min(i+t,e),o=n.subarray(i,r);s.push(String.fromCharCode.apply(null,o))}return s.join("")}function ym(n){typeof n!="string"&&_e("Invalid argument for stringToBytes");const e=n.length,t=new Uint8Array(e);for(let s=0;s<e;++s)t[s]=n.charCodeAt(s)&255;return t}function OF(n){return String.fromCharCode(n>>24&255,n>>16&255,n>>8&255,n&255)}function BF(){const n=new Uint8Array(4);return n[0]=1,new Uint32Array(n.buffer,0,1)[0]===1}function jF(){try{return new Function(""),!0}catch{return!1}}class Tt{static get isLittleEndian(){return ie(this,"isLittleEndian",BF())}static get isEvalSupported(){return ie(this,"isEvalSupported",jF())}static get isOffscreenCanvasSupported(){return ie(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return ie(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get platform(){const{platform:e,userAgent:t}=navigator;return ie(this,"platform",{isAndroid:t.includes("Android"),isLinux:e.includes("Linux"),isMac:e.includes("Mac"),isWindows:e.includes("Win"),isFirefox:t.includes("Firefox")})}static get isCSSRoundSupported(){var e,t;return ie(this,"isCSSRoundSupported",(t=(e=globalThis.CSS)==null?void 0:e.supports)==null?void 0:t.call(e,"width: round(1.5px, 1px)"))}}const z1=Array.from(Array(256).keys(),n=>n.toString(16).padStart(2,"0"));var qc,yy,Nf,Xb;class V{static makeHexColor(e,t,s){return`#${z1[e]}${z1[t]}${z1[s]}`}static domMatrixToTransform(e){return[e.a,e.b,e.c,e.d,e.e,e.f]}static scaleMinMax(e,t){let s;e[0]?(e[0]<0&&(s=t[0],t[0]=t[2],t[2]=s),t[0]*=e[0],t[2]*=e[0],e[3]<0&&(s=t[1],t[1]=t[3],t[3]=s),t[1]*=e[3],t[3]*=e[3]):(s=t[0],t[0]=t[1],t[1]=s,s=t[2],t[2]=t[3],t[3]=s,e[1]<0&&(s=t[1],t[1]=t[3],t[3]=s),t[1]*=e[1],t[3]*=e[1],e[2]<0&&(s=t[0],t[0]=t[2],t[2]=s),t[0]*=e[2],t[2]*=e[2]),t[0]+=e[4],t[1]+=e[5],t[2]+=e[4],t[3]+=e[5]}static transform(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}static multiplyByDOMMatrix(e,t){return[e[0]*t.a+e[2]*t.b,e[1]*t.a+e[3]*t.b,e[0]*t.c+e[2]*t.d,e[1]*t.c+e[3]*t.d,e[0]*t.e+e[2]*t.f+e[4],e[1]*t.e+e[3]*t.f+e[5]]}static applyTransform(e,t,s=0){const i=e[s],r=e[s+1];e[s]=i*t[0]+r*t[2]+t[4],e[s+1]=i*t[1]+r*t[3]+t[5]}static applyTransformToBezier(e,t,s=0){const i=t[0],r=t[1],o=t[2],l=t[3],c=t[4],u=t[5];for(let h=0;h<6;h+=2){const d=e[s+h],f=e[s+h+1];e[s+h]=d*i+f*o+c,e[s+h+1]=d*r+f*l+u}}static applyInverseTransform(e,t){const s=e[0],i=e[1],r=t[0]*t[3]-t[1]*t[2];e[0]=(s*t[3]-i*t[2]+t[2]*t[5]-t[4]*t[3])/r,e[1]=(-s*t[1]+i*t[0]+t[4]*t[1]-t[5]*t[0])/r}static axialAlignedBoundingBox(e,t,s){const i=t[0],r=t[1],o=t[2],l=t[3],c=t[4],u=t[5],h=e[0],d=e[1],f=e[2],m=e[3];let y=i*h+c,w=y,x=i*f+c,v=x,b=l*d+u,S=b,E=l*m+u,C=E;if(r!==0||o!==0){const T=r*h,k=r*f,P=o*d,N=o*m;y+=P,v+=P,x+=N,w+=N,b+=T,C+=T,E+=k,S+=k}s[0]=Math.min(s[0],y,x,w,v),s[1]=Math.min(s[1],b,E,S,C),s[2]=Math.max(s[2],y,x,w,v),s[3]=Math.max(s[3],b,E,S,C)}static inverseTransform(e){const t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]}static singularValueDecompose2dScale(e,t){const s=e[0],i=e[1],r=e[2],o=e[3],l=s**2+i**2,c=s*r+i*o,u=r**2+o**2,h=(l+u)/2,d=Math.sqrt(h**2-(l*u-c**2));t[0]=Math.sqrt(h+d||1),t[1]=Math.sqrt(h-d||1)}static normalizeRect(e){const t=e.slice(0);return e[0]>e[2]&&(t[0]=e[2],t[2]=e[0]),e[1]>e[3]&&(t[1]=e[3],t[3]=e[1]),t}static intersect(e,t){const s=Math.max(Math.min(e[0],e[2]),Math.min(t[0],t[2])),i=Math.min(Math.max(e[0],e[2]),Math.max(t[0],t[2]));if(s>i)return null;const r=Math.max(Math.min(e[1],e[3]),Math.min(t[1],t[3])),o=Math.min(Math.max(e[1],e[3]),Math.max(t[1],t[3]));return r>o?null:[s,r,i,o]}static pointBoundingBox(e,t,s){s[0]=Math.min(s[0],e),s[1]=Math.min(s[1],t),s[2]=Math.max(s[2],e),s[3]=Math.max(s[3],t)}static rectBoundingBox(e,t,s,i,r){r[0]=Math.min(r[0],e,s),r[1]=Math.min(r[1],t,i),r[2]=Math.max(r[2],e,s),r[3]=Math.max(r[3],t,i)}static bezierBoundingBox(e,t,s,i,r,o,l,c,u){u[0]=Math.min(u[0],e,l),u[1]=Math.min(u[1],t,c),u[2]=Math.max(u[2],e,l),u[3]=Math.max(u[3],t,c),A(this,Nf,Xb).call(this,e,s,r,l,t,i,o,c,3*(-e+3*(s-r)+l),6*(e-2*s+r),3*(s-e),u),A(this,Nf,Xb).call(this,e,s,r,l,t,i,o,c,3*(-t+3*(i-o)+c),6*(t-2*i+o),3*(i-t),u)}}qc=new WeakSet,yy=function(e,t,s,i,r,o,l,c,u,h){if(u<=0||u>=1)return;const d=1-u,f=u*u,m=f*u,y=d*(d*(d*e+3*u*t)+3*f*s)+m*i,w=d*(d*(d*r+3*u*o)+3*f*l)+m*c;h[0]=Math.min(h[0],y),h[1]=Math.min(h[1],w),h[2]=Math.max(h[2],y),h[3]=Math.max(h[3],w)},Nf=new WeakSet,Xb=function(e,t,s,i,r,o,l,c,u,h,d,f){if(Math.abs(u)<1e-12){Math.abs(h)>=1e-12&&A(this,qc,yy).call(this,e,t,s,i,r,o,l,c,-d/h,f);return}const m=h**2-4*d*u;if(m<0)return;const y=Math.sqrt(m),w=2*u;A(this,qc,yy).call(this,e,t,s,i,r,o,l,c,(-h+y)/w,f),A(this,qc,yy).call(this,e,t,s,i,r,o,l,c,(-h-y)/w,f)},p(V,qc),p(V,Nf);function UF(n){return decodeURIComponent(escape(n))}let $1=null,D_=null;function mP(n){return $1||($1=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,D_=new Map([["","t"]])),n.replaceAll($1,(e,t,s)=>t?t.normalize("NFKC"):D_.get(s))}function RA(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const n=new Uint8Array(32);return crypto.getRandomValues(n),gP(n)}const LA="pdfjs_internal_id_";function zF(n,e,t){if(!Array.isArray(t)||t.length<2)return!1;const[s,i,...r]=t;if(!n(s)&&!Number.isInteger(s)||!e(i))return!1;const o=r.length;let l=!0;switch(i.name){case"XYZ":if(o<2||o>3)return!1;break;case"Fit":case"FitB":return o===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(o>1)return!1;break;case"FitR":if(o!==4)return!1;l=!1;break;default:return!1}for(const c of r)if(!(typeof c=="number"||l&&c===null))return!1;return!0}function Xt(n,e,t){return Math.min(Math.max(n,e),t)}function yP(n){return Uint8Array.prototype.toBase64?n.toBase64():btoa(gP(n))}function $F(n){return Uint8Array.fromBase64?Uint8Array.fromBase64(n):ym(atob(n))}typeof Promise.try!="function"&&(Promise.try=function(n,...e){return new Promise(t=>{t(n(...e))})});typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(n){return n.reduce((e,t)=>e+t,0)});class Cf{static textContent(e){const t=[],s={items:t,styles:Object.create(null)};function i(r){var c;if(!r)return;let o=null;const l=r.name;if(l==="#text")o=r.value;else if(Cf.shouldBuildText(l))(c=r==null?void 0:r.attributes)!=null&&c.textContent?o=r.attributes.textContent:r.value&&(o=r.value);else return;if(o!==null&&t.push({str:o}),!!r.children)for(const u of r.children)i(u)}return i(e),s}static shouldBuildText(e){return!(e==="textarea"||e==="input"||e==="option"||e==="select")}}class NA{static setupStorage(e,t,s,i,r){const o=i.getValue(t,{value:null});switch(s.name){case"textarea":if(o.value!==null&&(e.textContent=o.value),r==="print")break;e.addEventListener("input",l=>{i.setValue(t,{value:l.target.value})});break;case"input":if(s.attributes.type==="radio"||s.attributes.type==="checkbox"){if(o.value===s.attributes.xfaOn?e.setAttribute("checked",!0):o.value===s.attributes.xfaOff&&e.removeAttribute("checked"),r==="print")break;e.addEventListener("change",l=>{i.setValue(t,{value:l.target.checked?l.target.getAttribute("xfaOn"):l.target.getAttribute("xfaOff")})})}else{if(o.value!==null&&e.setAttribute("value",o.value),r==="print")break;e.addEventListener("input",l=>{i.setValue(t,{value:l.target.value})})}break;case"select":if(o.value!==null){e.setAttribute("value",o.value);for(const l of s.children)l.attributes.value===o.value?l.attributes.selected=!0:l.attributes.hasOwnProperty("selected")&&delete l.attributes.selected}e.addEventListener("input",l=>{const c=l.target.options,u=c.selectedIndex===-1?"":c[c.selectedIndex].value;i.setValue(t,{value:u})});break}}static setAttributes({html:e,element:t,storage:s=null,intent:i,linkService:r}){const{attributes:o}=t,l=e instanceof HTMLAnchorElement;o.type==="radio"&&(o.name=`${o.name}-${i}`);for(const[c,u]of Object.entries(o))if(u!=null)switch(c){case"class":u.length&&e.setAttribute(c,u.join(" "));break;case"dataId":break;case"id":e.setAttribute("data-element-id",u);break;case"style":Object.assign(e.style,u);break;case"textContent":e.textContent=u;break;default:(!l||c!=="href"&&c!=="newWindow")&&e.setAttribute(c,u)}l&&r.addLinkAttributes(e,o.href,o.newWindow),s&&o.dataId&&this.setupStorage(e,o.dataId,t,s)}static render(e){var d,f;const t=e.annotationStorage,s=e.linkService,i=e.xfaHtml,r=e.intent||"display",o=document.createElement(i.name);i.attributes&&this.setAttributes({html:o,element:i,intent:r,linkService:s});const l=r!=="richText",c=e.div;if(c.append(o),e.viewport){const m=`matrix(${e.viewport.transform.join(",")})`;c.style.transform=m}l&&c.setAttribute("class","xfaLayer xfaFont");const u=[];if(i.children.length===0){if(i.value){const m=document.createTextNode(i.value);o.append(m),l&&Cf.shouldBuildText(i.name)&&u.push(m)}return{textDivs:u}}const h=[[i,-1,o]];for(;h.length>0;){const[m,y,w]=h.at(-1);if(y+1===m.children.length){h.pop();continue}const x=m.children[++h.at(-1)[1]];if(x===null)continue;const{name:v}=x;if(v==="#text"){const S=document.createTextNode(x.value);u.push(S),w.append(S);continue}const b=(d=x==null?void 0:x.attributes)!=null&&d.xmlns?document.createElementNS(x.attributes.xmlns,v):document.createElement(v);if(w.append(b),x.attributes&&this.setAttributes({html:b,element:x,storage:t,intent:r,linkService:s}),((f=x.children)==null?void 0:f.length)>0)h.push([x,-1,b]);else if(x.value){const S=document.createTextNode(x.value);l&&Cf.shouldBuildText(v)&&u.push(S),b.append(S)}}for(const m of c.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))m.setAttribute("readOnly",!0);return{textDivs:u}}static update(e){const t=`matrix(${e.viewport.transform.join(",")})`;e.div.style.transform=t,e.div.hidden=!1}}const Di="http://www.w3.org/2000/svg",fa=class fa{};O(fa,"CSS",96),O(fa,"PDF",72),O(fa,"PDF_TO_CSS_UNITS",fa.CSS/fa.PDF);let Nr=fa;async function ld(n,e="text"){if(Td(n,document.baseURI)){const t=await fetch(n);if(!t.ok)throw new Error(t.statusText);switch(e){case"arraybuffer":return t.arrayBuffer();case"blob":return t.blob();case"json":return t.json()}return t.text()}return new Promise((t,s)=>{const i=new XMLHttpRequest;i.open("GET",n,!0),i.responseType=e,i.onreadystatechange=()=>{if(i.readyState===XMLHttpRequest.DONE){if(i.status===200||i.status===0){switch(e){case"arraybuffer":case"blob":case"json":t(i.response);return}t(i.responseText);return}s(new Error(i.statusText))}},i.send(null)})}class vm{constructor({viewBox:e,userUnit:t,scale:s,rotation:i,offsetX:r=0,offsetY:o=0,dontFlip:l=!1}){this.viewBox=e,this.userUnit=t,this.scale=s,this.rotation=i,this.offsetX=r,this.offsetY=o,s*=t;const c=(e[2]+e[0])/2,u=(e[3]+e[1])/2;let h,d,f,m;switch(i%=360,i<0&&(i+=360),i){case 180:h=-1,d=0,f=0,m=1;break;case 90:h=0,d=1,f=1,m=0;break;case 270:h=0,d=-1,f=-1,m=0;break;case 0:h=1,d=0,f=0,m=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}l&&(f=-f,m=-m);let y,w,x,v;h===0?(y=Math.abs(u-e[1])*s+r,w=Math.abs(c-e[0])*s+o,x=(e[3]-e[1])*s,v=(e[2]-e[0])*s):(y=Math.abs(c-e[0])*s+r,w=Math.abs(u-e[1])*s+o,x=(e[2]-e[0])*s,v=(e[3]-e[1])*s),this.transform=[h*s,d*s,f*s,m*s,y-h*s*c-f*s*u,w-d*s*c-m*s*u],this.width=x,this.height=v}get rawDims(){const e=this.viewBox;return ie(this,"rawDims",{pageWidth:e[2]-e[0],pageHeight:e[3]-e[1],pageX:e[0],pageY:e[1]})}clone({scale:e=this.scale,rotation:t=this.rotation,offsetX:s=this.offsetX,offsetY:i=this.offsetY,dontFlip:r=!1}={}){return new vm({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:e,rotation:t,offsetX:s,offsetY:i,dontFlip:r})}convertToViewportPoint(e,t){const s=[e,t];return V.applyTransform(s,this.transform),s}convertToViewportRectangle(e){const t=[e[0],e[1]];V.applyTransform(t,this.transform);const s=[e[2],e[3]];return V.applyTransform(s,this.transform),[t[0],t[1],s[0],s[1]]}convertToPdfPoint(e,t){const s=[e,t];return V.applyInverseTransform(s,this.transform),s}}class Qw extends lc{constructor(e,t=0){super(e,"RenderingCancelledException"),this.extraDelay=t}}function wm(n){const e=n.length;let t=0;for(;t<e&&n[t].trim()==="";)t++;return n.substring(t,t+5).toLowerCase()==="data:"}function Jw(n){return typeof n=="string"&&/\.pdf$/i.test(n)}function vP(n){return[n]=n.split(/[#?]/,1),n.substring(n.lastIndexOf("/")+1)}function wP(n,e="document.pdf"){if(typeof n!="string")return e;if(wm(n))return ee('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),e;const s=(l=>{try{return new URL(l)}catch{try{return new URL(decodeURIComponent(l))}catch{try{return new URL(l,"https://foo.bar")}catch{try{return new URL(decodeURIComponent(l),"https://foo.bar")}catch{return null}}}}})(n);if(!s)return e;const i=l=>{try{let c=decodeURIComponent(l);return c.includes("/")?(c=c.split("/").at(-1),c.test(/^\.pdf$/i)?c:l):c}catch{return l}},r=/\.pdf$/i,o=s.pathname.split("/").at(-1);if(r.test(o))return i(o);if(s.searchParams.size>0){const l=Array.from(s.searchParams.values()).reverse();for(const u of l)if(r.test(u))return i(u);const c=Array.from(s.searchParams.keys()).reverse();for(const u of c)if(r.test(u))return i(u)}if(s.hash){const c=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(s.hash);if(c)return i(c[0])}return e}class I_{constructor(){O(this,"started",Object.create(null));O(this,"times",[])}time(e){e in this.started&&ee(`Timer is already running for ${e}`),this.started[e]=Date.now()}timeEnd(e){e in this.started||ee(`Timer has not been started for ${e}`),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){const e=[];let t=0;for(const{name:s}of this.times)t=Math.max(s.length,t);for(const{name:s,start:i,end:r}of this.times)e.push(`${s.padEnd(t)} ${r-i}ms
`);return e.join("")}}function Td(n,e){const t=e?URL.parse(n,e):URL.parse(n);return(t==null?void 0:t.protocol)==="http:"||(t==null?void 0:t.protocol)==="https:"}function ts(n){n.preventDefault()}function We(n){n.preventDefault(),n.stopPropagation()}function HF(n){console.log("Deprecated API usage: "+n)}var Mf;class Tf{static toDateObject(e){if(e instanceof Date)return e;if(!e||typeof e!="string")return null;a(this,Mf)||g(this,Mf,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const t=a(this,Mf).exec(e);if(!t)return null;const s=parseInt(t[1],10);let i=parseInt(t[2],10);i=i>=1&&i<=12?i-1:0;let r=parseInt(t[3],10);r=r>=1&&r<=31?r:1;let o=parseInt(t[4],10);o=o>=0&&o<=23?o:0;let l=parseInt(t[5],10);l=l>=0&&l<=59?l:0;let c=parseInt(t[6],10);c=c>=0&&c<=59?c:0;const u=t[7]||"Z";let h=parseInt(t[8],10);h=h>=0&&h<=23?h:0;let d=parseInt(t[9],10)||0;return d=d>=0&&d<=59?d:0,u==="-"?(o+=h,l+=d):u==="+"&&(o-=h,l-=d),new Date(Date.UTC(s,i,r,o,l,c))}}Mf=new WeakMap,p(Tf,Mf,void 0);function bP(n,{scale:e=1,rotation:t=0}){const{width:s,height:i}=n.attributes.style,r=[0,0,parseInt(s),parseInt(i)];return new vm({viewBox:r,userUnit:1,scale:e,rotation:t})}function cd(n){if(n.startsWith("#")){const e=parseInt(n.slice(1),16);return[(e&16711680)>>16,(e&65280)>>8,e&255]}return n.startsWith("rgb(")?n.slice(4,-1).split(",").map(e=>parseInt(e)):n.startsWith("rgba(")?n.slice(5,-1).split(",").map(e=>parseInt(e)).slice(0,3):(ee(`Not a valid color format: "${n}"`),[0,0,0])}function VF(n){const e=document.createElement("span");e.style.visibility="hidden",e.style.colorScheme="only light",document.body.append(e);for(const t of n.keys()){e.style.color=t;const s=window.getComputedStyle(e).color;n.set(t,cd(s))}e.remove()}function He(n){const{a:e,b:t,c:s,d:i,e:r,f:o}=n.getTransform();return[e,t,s,i,r,o]}function Zs(n){const{a:e,b:t,c:s,d:i,e:r,f:o}=n.getTransform().invertSelf();return[e,t,s,i,r,o]}function na(n,e,t=!1,s=!0){if(e instanceof vm){const{pageWidth:i,pageHeight:r}=e.rawDims,{style:o}=n,l=Tt.isCSSRoundSupported,c=`var(--total-scale-factor) * ${i}px`,u=`var(--total-scale-factor) * ${r}px`,h=l?`round(down, ${c}, var(--scale-round-x))`:`calc(${c})`,d=l?`round(down, ${u}, var(--scale-round-y))`:`calc(${u})`;!t||e.rotation%180===0?(o.width=h,o.height=d):(o.width=d,o.height=h)}s&&n.setAttribute("data-main-rotation",e.rotation)}class Ks{constructor(){const{pixelRatio:e}=Ks;this.sx=e,this.sy=e}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(e,t,s,i,r=-1){let o=1/0,l=1/0,c=1/0;s=Ks.capPixels(s,r),s>0&&(o=Math.sqrt(s/(e*t))),i!==-1&&(l=i/e,c=i/t);const u=Math.min(o,l,c);return this.sx>u||this.sy>u?(this.sx=u,this.sy=u,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(e,t){if(t>=0){const s=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+t/100));return e>0?Math.min(e,s):s}return e}}const A0=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];class WF{static get isDarkMode(){var e;return ie(this,"isDarkMode",!!((e=window==null?void 0:window.matchMedia)!=null&&e.call(window,"(prefers-color-scheme: dark)").matches))}}class xP{static get commentForegroundColor(){const e=document.createElement("span");e.classList.add("comment","sidebar");const{style:t}=e;t.width=t.height="0",t.display="none",t.color="var(--comment-fg-color)",document.body.append(e);const{color:s}=window.getComputedStyle(e);return e.remove(),ie(this,"commentForegroundColor",cd(s))}}function SP(n,e,t,s){s=Math.min(Math.max(s??1,0),1);const i=255*(1-s);return n=Math.round(n*s+i),e=Math.round(e*s+i),t=Math.round(t*s+i),[n,e,t]}function F_(n,e){const t=n[0]/255,s=n[1]/255,i=n[2]/255,r=Math.max(t,s,i),o=Math.min(t,s,i),l=(r+o)/2;if(r===o)e[0]=e[1]=0;else{const c=r-o;switch(e[1]=l<.5?c/(r+o):c/(2-r-o),r){case t:e[0]=((s-i)/c+(s<i?6:0))*60;break;case s:e[0]=((i-t)/c+2)*60;break;case i:e[0]=((t-s)/c+4)*60;break}}e[2]=l}function Yb(n,e){const t=n[0],s=n[1],i=n[2],r=(1-Math.abs(2*i-1))*s,o=r*(1-Math.abs(t/60%2-1)),l=i-r/2;switch(Math.floor(t/60)){case 0:e[0]=r+l,e[1]=o+l,e[2]=l;break;case 1:e[0]=o+l,e[1]=r+l,e[2]=l;break;case 2:e[0]=l,e[1]=r+l,e[2]=o+l;break;case 3:e[0]=l,e[1]=o+l,e[2]=r+l;break;case 4:e[0]=o+l,e[1]=l,e[2]=r+l;break;case 5:case 6:e[0]=r+l,e[1]=l,e[2]=o+l;break}}function O_(n){return n<=.03928?n/12.92:((n+.055)/1.055)**2.4}function B_(n,e,t){Yb(n,t),t.map(O_);const s=.2126*t[0]+.7152*t[1]+.0722*t[2];Yb(e,t),t.map(O_);const i=.2126*t[0]+.7152*t[1]+.0722*t[2];return s>i?(s+.05)/(i+.05):(i+.05)/(s+.05)}const j_=new Map;function AP(n,e){const t=n[0]+n[1]*256+n[2]*65536+e[0]*16777216+e[1]*4294967296+e[2]*1099511627776;let s=j_.get(t);if(s)return s;const i=new Float32Array(9),r=i.subarray(0,3),o=i.subarray(3,6);F_(n,o);const l=i.subarray(6,9);F_(e,l);const c=l[2]<.5,u=c?12:4.5;if(o[2]=c?Math.sqrt(o[2]):1-Math.sqrt(1-o[2]),B_(o,l,r)<u){let h,d;c?(h=o[2],d=1):(h=0,d=o[2]);const f=.005;for(;d-h>f;){const m=o[2]=(h+d)/2;c===B_(o,l,r)<u?h=m:d=m}o[2]=c?d:h}return Yb(o,r),s=V.makeHexColor(Math.round(r[0]*255),Math.round(r[1]*255),Math.round(r[2]*255)),j_.set(t,s),s}function MA({html:n,dir:e,className:t},s){const i=document.createDocumentFragment();if(typeof n=="string"){const r=document.createElement("p");r.dir=e||"auto";const o=n.split(/(?:\r\n?|\n)/);for(let l=0,c=o.length;l<c;++l){const u=o[l];r.append(document.createTextNode(u)),l<c-1&&r.append(document.createElement("br"))}i.append(r)}else NA.render({xfaHtml:n,div:i,intent:"richText"});i.firstChild.classList.add("richText",t),s.append(i)}var $r,Hr,as,ls,Df,Vr,Xc,Yc,If,D0,EP,I0,_P,F0,CP,Wr,pc,ba,kd;const Bi=class Bi{constructor(e){p(this,I0);p(this,F0);p(this,Wr);p(this,ba);p(this,$r,null);p(this,Hr,null);p(this,as,void 0);p(this,ls,null);p(this,Df,null);p(this,Vr,null);p(this,Xc,null);p(this,Yc,null);g(this,as,e),a(Bi,If)||g(Bi,If,Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"}))}render(){const e=g(this,$r,document.createElement("div"));e.classList.add("editToolbar","hidden"),e.setAttribute("role","toolbar");const t=a(this,as)._uiManager._signal;t instanceof AbortSignal&&!t.aborted&&(e.addEventListener("contextmenu",ts,{signal:t}),e.addEventListener("pointerdown",A(Bi,D0,EP),{signal:t}));const s=g(this,ls,document.createElement("div"));s.className="buttons",e.append(s);const i=a(this,as).toolbarPosition;if(i){const{style:r}=e,o=a(this,as)._uiManager.direction==="ltr"?1-i[0]:i[0];r.insetInlineEnd=`${100*o}%`,r.top=`calc(${100*i[1]}% + var(--editor-toolbar-vert-offset))`}return e}get div(){return a(this,$r)}hide(){var e;a(this,$r).classList.add("hidden"),(e=a(this,Hr))==null||e.hideDropdown()}show(){var e,t;a(this,$r).classList.remove("hidden"),(e=a(this,Df))==null||e.shown(),(t=a(this,Vr))==null||t.shown()}addDeleteButton(){const{editorType:e,_uiManager:t}=a(this,as),s=document.createElement("button");s.classList.add("basic","deleteButton"),s.tabIndex=0,s.setAttribute("data-l10n-id",a(Bi,If)[e]),A(this,Wr,pc).call(this,s)&&s.addEventListener("click",i=>{t.delete()},{signal:t._signal}),a(this,ls).append(s)}async addAltText(e){const t=await e.render();A(this,Wr,pc).call(this,t),a(this,ls).append(t,a(this,ba,kd)),g(this,Df,e)}addComment(e,t=null){if(a(this,Vr))return;const s=e.renderForToolbar();if(!s)return;A(this,Wr,pc).call(this,s);const i=g(this,Xc,a(this,ba,kd));t?(a(this,ls).insertBefore(s,t),a(this,ls).insertBefore(i,t)):a(this,ls).append(s,i),g(this,Vr,e),e.toolbar=this}addColorPicker(e){if(a(this,Hr))return;g(this,Hr,e);const t=e.renderButton();A(this,Wr,pc).call(this,t),a(this,ls).append(t,a(this,ba,kd))}async addEditSignatureButton(e){const t=g(this,Yc,await e.renderEditButton(a(this,as)));A(this,Wr,pc).call(this,t),a(this,ls).append(t,a(this,ba,kd))}removeButton(e){var t,s;switch(e){case"comment":(t=a(this,Vr))==null||t.removeToolbarCommentButton(),g(this,Vr,null),(s=a(this,Xc))==null||s.remove(),g(this,Xc,null);break}}async addButton(e,t){switch(e){case"colorPicker":this.addColorPicker(t);break;case"altText":await this.addAltText(t);break;case"editSignature":await this.addEditSignatureButton(t);break;case"delete":this.addDeleteButton();break;case"comment":this.addComment(t);break}}async addButtonBefore(e,t,s){const i=a(this,ls).querySelector(s);i&&e==="comment"&&this.addComment(t,i)}updateEditSignatureButton(e){a(this,Yc)&&(a(this,Yc).title=e)}remove(){var e;a(this,$r).remove(),(e=a(this,Hr))==null||e.destroy(),g(this,Hr,null)}};$r=new WeakMap,Hr=new WeakMap,as=new WeakMap,ls=new WeakMap,Df=new WeakMap,Vr=new WeakMap,Xc=new WeakMap,Yc=new WeakMap,If=new WeakMap,D0=new WeakSet,EP=function(e){e.stopPropagation()},I0=new WeakSet,_P=function(e){a(this,as)._focusEventsAllowed=!1,We(e)},F0=new WeakSet,CP=function(e){a(this,as)._focusEventsAllowed=!0,We(e)},Wr=new WeakSet,pc=function(e){const t=a(this,as)._uiManager._signal;return!(t instanceof AbortSignal)||t.aborted?!1:(e.addEventListener("focusin",A(this,I0,_P).bind(this),{capture:!0,signal:t}),e.addEventListener("focusout",A(this,F0,CP).bind(this),{capture:!0,signal:t}),e.addEventListener("contextmenu",ts,{signal:t}),!0)},ba=new WeakSet,kd=function(){const e=document.createElement("div");return e.className="divider",e},p(Bi,D0),p(Bi,If,null);let Kb=Bi;var Ff,xa,zi,O0,TP,B0,kP,Of,Qb;class GF{constructor(e){p(this,O0);p(this,B0);p(this,Of);p(this,Ff,null);p(this,xa,null);p(this,zi,void 0);g(this,zi,e)}show(e,t,s){const[i,r]=A(this,B0,kP).call(this,t,s),{style:o}=a(this,xa)||g(this,xa,A(this,O0,TP).call(this));e.append(a(this,xa)),o.insetInlineEnd=`${100*i}%`,o.top=`calc(${100*r}% + var(--editor-toolbar-vert-offset))`}hide(){a(this,xa).remove()}}Ff=new WeakMap,xa=new WeakMap,zi=new WeakMap,O0=new WeakSet,TP=function(){const e=g(this,xa,document.createElement("div"));e.className="editToolbar",e.setAttribute("role","toolbar");const t=a(this,zi)._signal;t instanceof AbortSignal&&!t.aborted&&e.addEventListener("contextmenu",ts,{signal:t});const s=g(this,Ff,document.createElement("div"));return s.className="buttons",e.append(s),a(this,zi).hasCommentManager()&&A(this,Of,Qb).call(this,"commentButton","pdfjs-comment-floating-button","pdfjs-comment-floating-button-label",()=>{a(this,zi).commentSelection("floating_button")}),A(this,Of,Qb).call(this,"highlightButton","pdfjs-highlight-floating-button1","pdfjs-highlight-floating-button-label",()=>{a(this,zi).highlightSelection("floating_button")}),e},B0=new WeakSet,kP=function(e,t){let s=0,i=0;for(const r of e){const o=r.y+r.height;if(o<s)continue;const l=r.x+(t?r.width:0);if(o>s){i=l,s=o;continue}t?l>i&&(i=l):l<i&&(i=l)}return[t?1-i:i,s]},Of=new WeakSet,Qb=function(e,t,s,i){const r=document.createElement("button");r.classList.add("basic",e),r.tabIndex=0,r.setAttribute("data-l10n-id",t);const o=document.createElement("span");r.append(o),o.className="visuallyHidden",o.setAttribute("data-l10n-id",s);const l=a(this,zi)._signal;l instanceof AbortSignal&&!l.aborted&&(r.addEventListener("contextmenu",ts,{signal:l}),r.addEventListener("click",i,{signal:l})),a(this,Ff).append(r)};function PP(n,e,t){for(const s of t)e.addEventListener(s,n[s].bind(n))}var j0;class qF{constructor(){p(this,j0,0)}get id(){return`${Ef}${ct(this,j0)._++}`}}j0=new WeakMap;var Kc,Bf,$t,Qc,vy;const VA=class VA{constructor(){p(this,Qc);p(this,Kc,RA());p(this,Bf,0);p(this,$t,null)}static get _isSVGFittingCanvas(){const e='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',s=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),i=new Image;i.src=e;const r=i.decode().then(()=>(s.drawImage(i,0,0,1,1,0,0,1,3),new Uint32Array(s.getImageData(0,0,1,1).data.buffer)[0]===0));return ie(this,"_isSVGFittingCanvas",r)}async getFromFile(e){const{lastModified:t,name:s,size:i,type:r}=e;return A(this,Qc,vy).call(this,`${t}_${s}_${i}_${r}`,e)}async getFromUrl(e){return A(this,Qc,vy).call(this,e,e)}async getFromBlob(e,t){const s=await t;return A(this,Qc,vy).call(this,e,s)}async getFromId(e){a(this,$t)||g(this,$t,new Map);const t=a(this,$t).get(e);if(!t)return null;if(t.bitmap)return t.refCounter+=1,t;if(t.file)return this.getFromFile(t.file);if(t.blobPromise){const{blobPromise:s}=t;return delete t.blobPromise,this.getFromBlob(t.id,s)}return this.getFromUrl(t.url)}getFromCanvas(e,t){a(this,$t)||g(this,$t,new Map);let s=a(this,$t).get(e);if(s!=null&&s.bitmap)return s.refCounter+=1,s;const i=new OffscreenCanvas(t.width,t.height);return i.getContext("2d").drawImage(t,0,0),s={bitmap:i.transferToImageBitmap(),id:`image_${a(this,Kc)}_${ct(this,Bf)._++}`,refCounter:1,isSvg:!1},a(this,$t).set(e,s),a(this,$t).set(s.id,s),s}getSvgUrl(e){const t=a(this,$t).get(e);return t!=null&&t.isSvg?t.svgUrl:null}deleteId(e){var i;a(this,$t)||g(this,$t,new Map);const t=a(this,$t).get(e);if(!t||(t.refCounter-=1,t.refCounter!==0))return;const{bitmap:s}=t;if(!t.url&&!t.file){const r=new OffscreenCanvas(s.width,s.height);r.getContext("bitmaprenderer").transferFromImageBitmap(s),t.blobPromise=r.convertToBlob()}(i=s.close)==null||i.call(s),t.bitmap=null}isValidId(e){return e.startsWith(`image_${a(this,Kc)}_`)}};Kc=new WeakMap,Bf=new WeakMap,$t=new WeakMap,Qc=new WeakSet,vy=async function(e,t){a(this,$t)||g(this,$t,new Map);let s=a(this,$t).get(e);if(s===null)return null;if(s!=null&&s.bitmap)return s.refCounter+=1,s;try{s||(s={bitmap:null,id:`image_${a(this,Kc)}_${ct(this,Bf)._++}`,refCounter:0,isSvg:!1});let i;if(typeof t=="string"?(s.url=t,i=await ld(t,"blob")):t instanceof File?i=s.file=t:t instanceof Blob&&(i=t),i.type==="image/svg+xml"){const r=VA._isSVGFittingCanvas,o=new FileReader,l=new Image,c=new Promise((u,h)=>{l.onload=()=>{s.bitmap=l,s.isSvg=!0,u()},o.onload=async()=>{const d=s.svgUrl=o.result;l.src=await r?`${d}#svgView(preserveAspectRatio(none))`:d},l.onerror=o.onerror=h});o.readAsDataURL(i),await c}else s.bitmap=await createImageBitmap(i);s.refCounter=1}catch(i){ee(i),s=null}return a(this,$t).set(e,s),s&&a(this,$t).set(s.id,s),s};let Jb=VA;var tt,Gr,jf,$e;class XF{constructor(e=128){p(this,tt,[]);p(this,Gr,!1);p(this,jf,void 0);p(this,$e,-1);g(this,jf,e)}add({cmd:e,undo:t,post:s,mustExec:i,type:r=NaN,overwriteIfSameType:o=!1,keepUndo:l=!1}){if(i&&e(),a(this,Gr))return;const c={cmd:e,undo:t,post:s,type:r};if(a(this,$e)===-1){a(this,tt).length>0&&(a(this,tt).length=0),g(this,$e,0),a(this,tt).push(c);return}if(o&&a(this,tt)[a(this,$e)].type===r){l&&(c.undo=a(this,tt)[a(this,$e)].undo),a(this,tt)[a(this,$e)]=c;return}const u=a(this,$e)+1;u===a(this,jf)?a(this,tt).splice(0,1):(g(this,$e,u),u<a(this,tt).length&&a(this,tt).splice(u)),a(this,tt).push(c)}undo(){if(a(this,$e)===-1)return;g(this,Gr,!0);const{undo:e,post:t}=a(this,tt)[a(this,$e)];e(),t==null||t(),g(this,Gr,!1),g(this,$e,a(this,$e)-1)}redo(){if(a(this,$e)<a(this,tt).length-1){g(this,$e,a(this,$e)+1),g(this,Gr,!0);const{cmd:e,post:t}=a(this,tt)[a(this,$e)];e(),t==null||t(),g(this,Gr,!1)}}hasSomethingToUndo(){return a(this,$e)!==-1}hasSomethingToRedo(){return a(this,$e)<a(this,tt).length-1}cleanType(e){if(a(this,$e)!==-1){for(let t=a(this,$e);t>=0;t--)if(a(this,tt)[t].type!==e){a(this,tt).splice(t+1,a(this,$e)-t),g(this,$e,t);return}a(this,tt).length=0,g(this,$e,-1)}}destroy(){g(this,tt,null)}}tt=new WeakMap,Gr=new WeakMap,jf=new WeakMap,$e=new WeakMap;var U0,RP;class bm{constructor(e){p(this,U0);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:t}=Tt.platform;for(const[s,i,r={}]of e)for(const o of s){const l=o.startsWith("mac+");t&&l?(this.callbacks.set(o.slice(4),{callback:i,options:r}),this.allKeys.add(o.split("+").at(-1))):!t&&!l&&(this.callbacks.set(o,{callback:i,options:r}),this.allKeys.add(o.split("+").at(-1)))}}exec(e,t){if(!this.allKeys.has(t.key))return;const s=this.callbacks.get(A(this,U0,RP).call(this,t));if(!s)return;const{callback:i,options:{bubbles:r=!1,args:o=[],checker:l=null}}=s;l&&!l(e,t)||(i.bind(e,...o,t)(),r||We(t))}}U0=new WeakSet,RP=function(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);const t=this.buffer.join("+");return this.buffer.length=0,t};const z0=class z0{get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);return VF(e),ie(this,"_colors",e)}convert(e){const t=cd(e);if(!window.matchMedia("(forced-colors: active)").matches)return t;for(const[s,i]of this._colors)if(i.every((r,o)=>r===t[o]))return z0._colorsMapping.get(s);return t}getHexCode(e){const t=this._colors.get(e);return t?V.makeHexColor(...t):e}};O(z0,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let Zb=z0;var Jc,Rn,Zc,Ye,ht,eu,cs,tu,us,Ht,qr,Xr,nu,Yr,si,hs,Sa,Uf,zf,su,$f,ii,Kr,iu,Qr,ri,$0,Jr,ru,Hf,Zr,Aa,ou,eo,Vf,rt,ge,$i,to,no,Wf,au,Gf,so,oi,Hi,qf,Xf,ds,lu,wy,Yf,ex,H0,LP,V0,NP,Ea,Pd,W0,MP,G0,DP,q0,IP,Kf,tx,X0,FP,Qf,nx,Jf,sx,Y0,OP,Pt,Zt,Rs,Ii,K0,BP,Q0,jP,Zf,ix,J0,UP,_a,Rd,ep,rx;const Dc=class Dc{constructor(e,t,s,i,r,o,l,c,u,h,d,f,m,y,w,x){p(this,lu);p(this,Yf);p(this,H0);p(this,V0);p(this,Ea);p(this,W0);p(this,G0);p(this,q0);p(this,Kf);p(this,X0);p(this,Qf);p(this,Jf);p(this,Y0);p(this,Pt);p(this,Rs);p(this,K0);p(this,Q0);p(this,Zf);p(this,J0);p(this,_a);p(this,ep);p(this,Jc,new AbortController);p(this,Rn,null);p(this,Zc,null);p(this,Ye,new Map);p(this,ht,new Map);p(this,eu,null);p(this,cs,null);p(this,tu,null);p(this,us,new XF);p(this,Ht,null);p(this,qr,null);p(this,Xr,null);p(this,nu,0);p(this,Yr,new Set);p(this,si,null);p(this,hs,null);p(this,Sa,new Set);O(this,"_editorUndoBar",null);p(this,Uf,!1);p(this,zf,!1);p(this,su,!1);p(this,$f,null);p(this,ii,null);p(this,Kr,null);p(this,iu,null);p(this,Qr,!1);p(this,ri,null);p(this,$0,new qF);p(this,Jr,!1);p(this,ru,!1);p(this,Hf,!1);p(this,Zr,null);p(this,Aa,null);p(this,ou,null);p(this,eo,null);p(this,Vf,null);p(this,rt,Z.NONE);p(this,ge,new Set);p(this,$i,null);p(this,to,null);p(this,no,null);p(this,Wf,null);p(this,au,null);p(this,Gf,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});p(this,so,[0,0]);p(this,oi,null);p(this,Hi,null);p(this,qf,null);p(this,Xf,null);p(this,ds,null);const v=this._signal=a(this,Jc).signal;g(this,Hi,e),g(this,qf,t),g(this,Xf,s),g(this,eu,i),g(this,Ht,r),g(this,to,o),g(this,au,c),this._eventBus=l,l._on("editingaction",this.onEditingAction.bind(this),{signal:v}),l._on("pagechanging",this.onPageChanging.bind(this),{signal:v}),l._on("scalechanging",this.onScaleChanging.bind(this),{signal:v}),l._on("rotationchanging",this.onRotationChanging.bind(this),{signal:v}),l._on("setpreference",this.onSetPreference.bind(this),{signal:v}),l._on("switchannotationeditorparams",b=>this.updateParams(b.type,b.value),{signal:v}),window.addEventListener("pointerdown",()=>{g(this,ru,!0)},{capture:!0,signal:v}),window.addEventListener("pointerup",()=>{g(this,ru,!1)},{capture:!0,signal:v}),A(this,W0,MP).call(this),A(this,Y0,OP).call(this),A(this,Kf,tx).call(this),g(this,cs,c.annotationStorage),g(this,$f,c.filterFactory),g(this,no,u),g(this,iu,h||null),g(this,Uf,d),g(this,zf,f),g(this,su,m),g(this,Vf,y||null),this.viewParameters={realScale:Nr.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=w||null,this._supportsPinchToZoom=x!==!1,r==null||r.setSidebarUiManager(this)}static get _keyboardManager(){const e=Dc.prototype,t=o=>a(o,Hi).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&o.hasSomethingToControl(),s=(o,{target:l})=>{if(l instanceof HTMLInputElement){const{type:c}=l;return c!=="text"&&c!=="number"}return!0},i=this.TRANSLATE_SMALL,r=this.TRANSLATE_BIG;return ie(this,"_keyboardManager",new bm([[["ctrl+a","mac+meta+a"],e.selectAll,{checker:s}],[["ctrl+z","mac+meta+z"],e.undo,{checker:s}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo,{checker:s}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete,{checker:s}],[["Enter","mac+Enter"],e.addNewEditorFromKeyboard,{checker:(o,{target:l})=>!(l instanceof HTMLButtonElement)&&a(o,Hi).contains(l)&&!o.isEnterHandled}],[[" ","mac+ "],e.addNewEditorFromKeyboard,{checker:(o,{target:l})=>!(l instanceof HTMLButtonElement)&&a(o,Hi).contains(document.activeElement)}],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-i,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-r,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[i,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[r,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-i],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-r],checker:t}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,i],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,r],checker:t}]]))}destroy(){var e,t,s,i,r,o,l,c,u;(e=a(this,ds))==null||e.resolve(),g(this,ds,null),(t=a(this,Jc))==null||t.abort(),g(this,Jc,null),this._signal=null;for(const h of a(this,ht).values())h.destroy();a(this,ht).clear(),a(this,Ye).clear(),a(this,Sa).clear(),(s=a(this,eo))==null||s.clear(),g(this,Rn,null),a(this,ge).clear(),a(this,us).destroy(),(i=a(this,eu))==null||i.destroy(),(r=a(this,Ht))==null||r.destroy(),(o=a(this,to))==null||o.destroy(),(l=a(this,ri))==null||l.hide(),g(this,ri,null),(c=a(this,ou))==null||c.destroy(),g(this,ou,null),g(this,Zc,null),a(this,ii)&&(clearTimeout(a(this,ii)),g(this,ii,null)),a(this,oi)&&(clearTimeout(a(this,oi)),g(this,oi,null)),(u=this._editorUndoBar)==null||u.destroy(),g(this,au,null)}combinedSignal(e){return AbortSignal.any([this._signal,e.signal])}get mlManager(){return a(this,Vf)}get useNewAltTextFlow(){return a(this,zf)}get useNewAltTextWhenAddingImage(){return a(this,su)}get hcmFilter(){return ie(this,"hcmFilter",a(this,no)?a(this,$f).addHCMFilter(a(this,no).foreground,a(this,no).background):"none")}get direction(){return ie(this,"direction",getComputedStyle(a(this,Hi)).direction)}get _highlightColors(){return ie(this,"_highlightColors",a(this,iu)?new Map(a(this,iu).split(",").map(e=>(e=e.split("=").map(t=>t.trim()),e[1]=e[1].toUpperCase(),e))):null)}get highlightColors(){const{_highlightColors:e}=this;if(!e)return ie(this,"highlightColors",null);const t=new Map,s=!!a(this,no);for(const[i,r]of e){const o=i.endsWith("_HCM");if(s&&o){t.set(i.replace("_HCM",""),r);continue}!s&&!o&&t.set(i,r)}return ie(this,"highlightColors",t)}get highlightColorNames(){return ie(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,e=>e.reverse())):null)}getNonHCMColor(e){if(!this._highlightColors)return e;const t=this.highlightColorNames.get(e);return this._highlightColors.get(t)||e}getNonHCMColorName(e){return this.highlightColorNames.get(e)||e}setCurrentDrawingSession(e){e?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),g(this,Xr,e)}setMainHighlightColorPicker(e){g(this,ou,e)}editAltText(e,t=!1){var s;(s=a(this,eu))==null||s.editAltText(this,e,t)}hasCommentManager(){return!!a(this,Ht)}editComment(e,t,s,i){var r;(r=a(this,Ht))==null||r.showDialog(this,e,t,s,i)}selectComment(e,t){const s=a(this,ht).get(e),i=s==null?void 0:s.getEditorByUID(t);i==null||i.toggleComment(!0,!0)}updateComment(e){var t;(t=a(this,Ht))==null||t.updateComment(e.getData())}updatePopupColor(e){var t;(t=a(this,Ht))==null||t.updatePopupColor(e)}removeComment(e){var t;(t=a(this,Ht))==null||t.removeComments([e.uid])}toggleComment(e,t,s=void 0){var i;(i=a(this,Ht))==null||i.toggleCommentPopup(e,t,s)}makeCommentColor(e,t){var s;return e&&((s=a(this,Ht))==null?void 0:s.makeCommentColor(e,t))||null}getCommentDialogElement(){var e;return((e=a(this,Ht))==null?void 0:e.dialogElement)||null}async waitForEditorsRendered(e){if(a(this,ht).has(e-1))return;const{resolve:t,promise:s}=Promise.withResolvers(),i=r=>{r.pageNumber===e&&(this._eventBus._off("editorsrendered",i),t())};this._eventBus.on("editorsrendered",i),await s}getSignature(e){var t;(t=a(this,to))==null||t.getSignature({uiManager:this,editor:e})}get signatureManager(){return a(this,to)}switchToMode(e,t){this._eventBus.on("annotationeditormodechanged",t,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:e})}setPreference(e,t){this._eventBus.dispatch("setpreference",{source:this,name:e,value:t})}onSetPreference({name:e,value:t}){switch(e){case"enableNewAltTextWhenAddingImage":g(this,su,t);break}}onPageChanging({pageNumber:e}){g(this,nu,e-1)}focusMainContainer(){a(this,Hi).focus()}findParent(e,t){for(const s of a(this,ht).values()){const{x:i,y:r,width:o,height:l}=s.div.getBoundingClientRect();if(e>=i&&e<=i+o&&t>=r&&t<=r+l)return s}return null}disableUserSelect(e=!1){a(this,qf).classList.toggle("noUserSelect",e)}addShouldRescale(e){a(this,Sa).add(e)}removeShouldRescale(e){a(this,Sa).delete(e)}onScaleChanging({scale:e}){var t;this.commitOrRemove(),this.viewParameters.realScale=e*Nr.PDF_TO_CSS_UNITS;for(const s of a(this,Sa))s.onScaleChanging();(t=a(this,Xr))==null||t.onScaleChanging()}onRotationChanging({pagesRotation:e}){this.commitOrRemove(),this.viewParameters.rotation=e}highlightSelection(e="",t=!1){const s=document.getSelection();if(!s||s.isCollapsed)return;const{anchorNode:i,anchorOffset:r,focusNode:o,focusOffset:l}=s,c=s.toString(),h=A(this,lu,wy).call(this,s).closest(".textLayer"),d=this.getSelectionBoxes(h);if(!d)return;s.empty();const f=A(this,Yf,ex).call(this,h),m=a(this,rt)===Z.NONE,y=()=>{const w=f==null?void 0:f.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:e,boxes:d,anchorNode:i,anchorOffset:r,focusNode:o,focusOffset:l,text:c});m&&this.showAllEditors("highlight",!0,!0),t&&(w==null||w.editComment())};if(m){this.switchToMode(Z.HIGHLIGHT,y);return}y()}commentSelection(e=""){this.highlightSelection(e,!0)}getAndRemoveDataFromAnnotationStorage(e){if(!a(this,cs))return null;const t=`${Ef}${e}`,s=a(this,cs).getRawValue(t);return s&&a(this,cs).remove(t),s}addToAnnotationStorage(e){!e.isEmpty()&&a(this,cs)&&!a(this,cs).has(e.id)&&a(this,cs).setValue(e.id,e)}a11yAlert(e,t=null){const s=a(this,Xf);s&&(s.setAttribute("data-l10n-id",e),t?s.setAttribute("data-l10n-args",JSON.stringify(t)):s.removeAttribute("data-l10n-args"))}blur(){if(this.isShiftKeyDown=!1,a(this,Qr)&&(g(this,Qr,!1),A(this,Ea,Pd).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:e}=document;for(const t of a(this,ge))if(t.div.contains(e)){g(this,Aa,[t,e]),t._focusEventsAllowed=!1;break}}focus(){if(!a(this,Aa))return;const[e,t]=a(this,Aa);g(this,Aa,null),t.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this._signal}),t.focus()}addEditListeners(){A(this,Kf,tx).call(this),A(this,Qf,nx).call(this)}removeEditListeners(){A(this,X0,FP).call(this),A(this,Jf,sx).call(this)}dragOver(e){for(const{type:t}of e.dataTransfer.items)for(const s of a(this,hs))if(s.isHandlingMimeForPasting(t)){e.dataTransfer.dropEffect="copy",e.preventDefault();return}}drop(e){for(const t of e.dataTransfer.items)for(const s of a(this,hs))if(s.isHandlingMimeForPasting(t.type)){s.paste(t,this.currentLayer),e.preventDefault();return}}copy(e){var s;if(e.preventDefault(),(s=a(this,Rn))==null||s.commitOrRemove(),!this.hasSelection)return;const t=[];for(const i of a(this,ge)){const r=i.serialize(!0);r&&t.push(r)}t.length!==0&&e.clipboardData.setData("application/pdfjs",JSON.stringify(t))}cut(e){this.copy(e),this.delete()}async paste(e){e.preventDefault();const{clipboardData:t}=e;for(const r of t.items)for(const o of a(this,hs))if(o.isHandlingMimeForPasting(r.type)){o.paste(r,this.currentLayer);return}let s=t.getData("application/pdfjs");if(!s)return;try{s=JSON.parse(s)}catch(r){ee(`paste: "${r.message}".`);return}if(!Array.isArray(s))return;this.unselectAll();const i=this.currentLayer;try{const r=[];for(const c of s){const u=await i.deserialize(c);if(!u)return;r.push(u)}const o=()=>{for(const c of r)A(this,Zf,ix).call(this,c);A(this,ep,rx).call(this,r)},l=()=>{for(const c of r)c.remove()};this.addCommands({cmd:o,undo:l,mustExec:!0})}catch(r){ee(`paste: "${r.message}".`)}}keydown(e){!this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!0),a(this,rt)!==Z.NONE&&!this.isEditorHandlingKeyboard&&Dc._keyboardManager.exec(this,e)}keyup(e){this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!1,a(this,Qr)&&(g(this,Qr,!1),A(this,Ea,Pd).call(this,"main_toolbar")))}onEditingAction({name:e}){switch(e){case"undo":case"redo":case"delete":case"selectAll":this[e]();break;case"highlightSelection":this.highlightSelection("context_menu");break;case"commentSelection":this.commentSelection("context_menu");break}}setEditingState(e){e?(A(this,G0,DP).call(this),A(this,Qf,nx).call(this),A(this,Pt,Zt).call(this,{isEditing:a(this,rt)!==Z.NONE,isEmpty:A(this,_a,Rd).call(this),hasSomethingToUndo:a(this,us).hasSomethingToUndo(),hasSomethingToRedo:a(this,us).hasSomethingToRedo(),hasSelectedEditor:!1})):(A(this,q0,IP).call(this),A(this,Jf,sx).call(this),A(this,Pt,Zt).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!a(this,hs)){g(this,hs,e);for(const t of a(this,hs))A(this,Rs,Ii).call(this,t.defaultPropertiesToUpdate)}}getId(){return a(this,$0).id}get currentLayer(){return a(this,ht).get(a(this,nu))}getLayer(e){return a(this,ht).get(e)}get currentPageIndex(){return a(this,nu)}addLayer(e){a(this,ht).set(e.pageIndex,e),a(this,Jr)?e.enable():e.disable()}removeLayer(e){a(this,ht).delete(e.pageIndex)}async updateMode(e,t=null,s=!1,i=!1,r=!1){var o,l,c,u,h,d;if(a(this,rt)!==e&&!(a(this,ds)&&(await a(this,ds).promise,!a(this,ds)))){if(g(this,ds,Promise.withResolvers()),(o=a(this,Xr))==null||o.commitOrRemove(),a(this,rt)===Z.POPUP&&((l=a(this,Ht))==null||l.hideSidebar()),(c=a(this,Ht))==null||c.destroyPopup(),g(this,rt,e),e===Z.NONE){this.setEditingState(!1),A(this,Q0,jP).call(this);for(const f of a(this,Ye).values())f.hideStandaloneCommentButton();(u=this._editorUndoBar)==null||u.hide(),this.toggleComment(null),a(this,ds).resolve();return}for(const f of a(this,Ye).values())f.addStandaloneCommentButton();e===Z.SIGNATURE&&await((h=a(this,to))==null?void 0:h.loadSignatures()),this.setEditingState(!0),await A(this,K0,BP).call(this),this.unselectAll();for(const f of a(this,ht).values())f.updateMode(e);if(e===Z.POPUP){a(this,Zc)||g(this,Zc,await a(this,au).getAnnotationsByType(new Set(a(this,hs).map(y=>y._editorType))));const f=new Set,m=[];for(const y of a(this,Ye).values()){const{annotationElementId:w,hasComment:x,deleted:v}=y;w&&f.add(w),x&&!v&&m.push(y.getData())}for(const y of a(this,Zc)){const{id:w,popupRef:x,contentsObj:v}=y;x&&(v!=null&&v.str)&&!f.has(w)&&!a(this,Yr).has(w)&&m.push(y)}(d=a(this,Ht))==null||d.showSidebar(m)}if(!t){s&&this.addNewEditorFromKeyboard(),a(this,ds).resolve();return}for(const f of a(this,Ye).values())f.uid===t?(this.setSelected(f),r?f.editComment():i?f.enterInEditMode():f.focus()):f.unselect();a(this,ds).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(e){e.mode!==a(this,rt)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...e})}updateParams(e,t){if(a(this,hs)){switch(e){case ae.CREATE:this.currentLayer.addNewEditor(t);return;case ae.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(a(this,Wf)||g(this,Wf,new Map)).set(e,t),this.showAllEditors("highlight",t);break}if(this.hasSelection)for(const s of a(this,ge))s.updateParams(e,t);else for(const s of a(this,hs))s.updateDefaultParams(e,t)}}showAllEditors(e,t,s=!1){var r;for(const o of a(this,Ye).values())o.editorType===e&&o.show(t);(((r=a(this,Wf))==null?void 0:r.get(ae.HIGHLIGHT_SHOW_ALL))??!0)!==t&&A(this,Rs,Ii).call(this,[[ae.HIGHLIGHT_SHOW_ALL,t]])}enableWaiting(e=!1){if(a(this,Hf)!==e){g(this,Hf,e);for(const t of a(this,ht).values())e?t.disableClick():t.enableClick(),t.div.classList.toggle("waiting",e)}}*getEditors(e){for(const t of a(this,Ye).values())t.pageIndex===e&&(yield t)}getEditor(e){return a(this,Ye).get(e)}addEditor(e){a(this,Ye).set(e.id,e)}removeEditor(e){var t,s;e.div.contains(document.activeElement)&&(a(this,ii)&&clearTimeout(a(this,ii)),g(this,ii,setTimeout(()=>{this.focusMainContainer(),g(this,ii,null)},0))),a(this,Ye).delete(e.id),e.annotationElementId&&((t=a(this,eo))==null||t.delete(e.annotationElementId)),this.unselect(e),(!e.annotationElementId||!a(this,Yr).has(e.annotationElementId))&&((s=a(this,cs))==null||s.remove(e.id))}addDeletedAnnotationElement(e){a(this,Yr).add(e.annotationElementId),this.addChangedExistingAnnotation(e),e.deleted=!0}isDeletedAnnotationElement(e){return a(this,Yr).has(e)}removeDeletedAnnotationElement(e){a(this,Yr).delete(e.annotationElementId),this.removeChangedExistingAnnotation(e),e.deleted=!1}setActiveEditor(e){a(this,Rn)!==e&&(g(this,Rn,e),e&&A(this,Rs,Ii).call(this,e.propertiesToUpdate))}updateUI(e){a(this,J0,UP)===e&&A(this,Rs,Ii).call(this,e.propertiesToUpdate)}updateUIForDefaultProperties(e){A(this,Rs,Ii).call(this,e.defaultPropertiesToUpdate)}toggleSelected(e){if(a(this,ge).has(e)){a(this,ge).delete(e),e.unselect(),A(this,Pt,Zt).call(this,{hasSelectedEditor:this.hasSelection});return}a(this,ge).add(e),e.select(),A(this,Rs,Ii).call(this,e.propertiesToUpdate),A(this,Pt,Zt).call(this,{hasSelectedEditor:!0})}setSelected(e){var t;this.updateToolbar({mode:e.mode,editId:e.id}),(t=a(this,Xr))==null||t.commitOrRemove();for(const s of a(this,ge))s!==e&&s.unselect();a(this,ge).clear(),a(this,ge).add(e),e.select(),A(this,Rs,Ii).call(this,e.propertiesToUpdate),A(this,Pt,Zt).call(this,{hasSelectedEditor:!0})}isSelected(e){return a(this,ge).has(e)}get firstSelectedEditor(){return a(this,ge).values().next().value}unselect(e){e.unselect(),a(this,ge).delete(e),A(this,Pt,Zt).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return a(this,ge).size!==0}get isEnterHandled(){return a(this,ge).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){var e;a(this,us).undo(),A(this,Pt,Zt).call(this,{hasSomethingToUndo:a(this,us).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:A(this,_a,Rd).call(this)}),(e=this._editorUndoBar)==null||e.hide()}redo(){a(this,us).redo(),A(this,Pt,Zt).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:a(this,us).hasSomethingToRedo(),isEmpty:A(this,_a,Rd).call(this)})}addCommands(e){a(this,us).add(e),A(this,Pt,Zt).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:A(this,_a,Rd).call(this)})}cleanUndoStack(e){a(this,us).cleanType(e)}delete(){var r;this.commitOrRemove();const e=(r=this.currentLayer)==null?void 0:r.endDrawingSession(!0);if(!this.hasSelection&&!e)return;const t=e?[e]:[...a(this,ge)],s=()=>{var o;(o=this._editorUndoBar)==null||o.show(i,t.length===1?t[0].editorType:t.length);for(const l of t)l.remove()},i=()=>{for(const o of t)A(this,Zf,ix).call(this,o)};this.addCommands({cmd:s,undo:i,mustExec:!0})}commitOrRemove(){var e;(e=a(this,Rn))==null||e.commitOrRemove()}hasSomethingToControl(){return a(this,Rn)||this.hasSelection}selectAll(){for(const e of a(this,ge))e.commit();A(this,ep,rx).call(this,a(this,Ye).values())}unselectAll(){var e;if(!(a(this,Rn)&&(a(this,Rn).commitOrRemove(),a(this,rt)!==Z.NONE))&&!((e=a(this,Xr))!=null&&e.commitOrRemove())&&this.hasSelection){for(const t of a(this,ge))t.unselect();a(this,ge).clear(),A(this,Pt,Zt).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(e,t,s=!1){if(s||this.commitOrRemove(),!this.hasSelection)return;a(this,so)[0]+=e,a(this,so)[1]+=t;const[i,r]=a(this,so),o=[...a(this,ge)],l=1e3;a(this,oi)&&clearTimeout(a(this,oi)),g(this,oi,setTimeout(()=>{g(this,oi,null),a(this,so)[0]=a(this,so)[1]=0,this.addCommands({cmd:()=>{for(const c of o)a(this,Ye).has(c.id)&&(c.translateInPage(i,r),c.translationDone())},undo:()=>{for(const c of o)a(this,Ye).has(c.id)&&(c.translateInPage(-i,-r),c.translationDone())},mustExec:!1})},l));for(const c of o)c.translateInPage(e,t),c.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),g(this,si,new Map);for(const e of a(this,ge))a(this,si).set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!a(this,si))return!1;this.disableUserSelect(!1);const e=a(this,si);g(this,si,null);let t=!1;for(const[{x:i,y:r,pageIndex:o},l]of e)l.newX=i,l.newY=r,l.newPageIndex=o,t||(t=i!==l.savedX||r!==l.savedY||o!==l.savedPageIndex);if(!t)return!1;const s=(i,r,o,l)=>{if(a(this,Ye).has(i.id)){const c=a(this,ht).get(l);c?i._setParentAndPosition(c,r,o):(i.pageIndex=l,i.x=r,i.y=o)}};return this.addCommands({cmd:()=>{for(const[i,{newX:r,newY:o,newPageIndex:l}]of e)s(i,r,o,l)},undo:()=>{for(const[i,{savedX:r,savedY:o,savedPageIndex:l}]of e)s(i,r,o,l)},mustExec:!0}),!0}dragSelectedEditors(e,t){if(a(this,si))for(const s of a(this,si).keys())s.drag(e,t)}rebuild(e){if(e.parent===null){const t=this.getLayer(e.pageIndex);t?(t.changeParent(e),t.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}get isEditorHandlingKeyboard(){var e;return((e=this.getActive())==null?void 0:e.shouldGetKeyboardEvents())||a(this,ge).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(e){return a(this,Rn)===e}getActive(){return a(this,Rn)}getMode(){return a(this,rt)}isEditingMode(){return a(this,rt)!==Z.NONE}get imageManager(){return ie(this,"imageManager",new Jb)}getSelectionBoxes(e){if(!e)return null;const t=document.getSelection();for(let u=0,h=t.rangeCount;u<h;u++)if(!e.contains(t.getRangeAt(u).commonAncestorContainer))return null;const{x:s,y:i,width:r,height:o}=e.getBoundingClientRect();let l;switch(e.getAttribute("data-main-rotation")){case"90":l=(u,h,d,f)=>({x:(h-i)/o,y:1-(u+d-s)/r,width:f/o,height:d/r});break;case"180":l=(u,h,d,f)=>({x:1-(u+d-s)/r,y:1-(h+f-i)/o,width:d/r,height:f/o});break;case"270":l=(u,h,d,f)=>({x:1-(h+f-i)/o,y:(u-s)/r,width:f/o,height:d/r});break;default:l=(u,h,d,f)=>({x:(u-s)/r,y:(h-i)/o,width:d/r,height:f/o});break}const c=[];for(let u=0,h=t.rangeCount;u<h;u++){const d=t.getRangeAt(u);if(!d.collapsed)for(const{x:f,y:m,width:y,height:w}of d.getClientRects())y===0||w===0||c.push(l(f,m,y,w))}return c.length===0?null:c}addChangedExistingAnnotation({annotationElementId:e,id:t}){(a(this,tu)||g(this,tu,new Map)).set(e,t)}removeChangedExistingAnnotation({annotationElementId:e}){var t;(t=a(this,tu))==null||t.delete(e)}renderAnnotationElement(e){var i;const t=(i=a(this,tu))==null?void 0:i.get(e.data.id);if(!t)return;const s=a(this,cs).getRawValue(t);s&&(a(this,rt)===Z.NONE&&!s.hasBeenModified||s.renderAnnotationElement(e))}setMissingCanvas(e,t,s){var r;const i=(r=a(this,eo))==null?void 0:r.get(e);i&&(i.setCanvas(t,s),a(this,eo).delete(e))}addMissingCanvas(e,t){(a(this,eo)||g(this,eo,new Map)).set(e,t)}};Jc=new WeakMap,Rn=new WeakMap,Zc=new WeakMap,Ye=new WeakMap,ht=new WeakMap,eu=new WeakMap,cs=new WeakMap,tu=new WeakMap,us=new WeakMap,Ht=new WeakMap,qr=new WeakMap,Xr=new WeakMap,nu=new WeakMap,Yr=new WeakMap,si=new WeakMap,hs=new WeakMap,Sa=new WeakMap,Uf=new WeakMap,zf=new WeakMap,su=new WeakMap,$f=new WeakMap,ii=new WeakMap,Kr=new WeakMap,iu=new WeakMap,Qr=new WeakMap,ri=new WeakMap,$0=new WeakMap,Jr=new WeakMap,ru=new WeakMap,Hf=new WeakMap,Zr=new WeakMap,Aa=new WeakMap,ou=new WeakMap,eo=new WeakMap,Vf=new WeakMap,rt=new WeakMap,ge=new WeakMap,$i=new WeakMap,to=new WeakMap,no=new WeakMap,Wf=new WeakMap,au=new WeakMap,Gf=new WeakMap,so=new WeakMap,oi=new WeakMap,Hi=new WeakMap,qf=new WeakMap,Xf=new WeakMap,ds=new WeakMap,lu=new WeakSet,wy=function({anchorNode:e}){return e.nodeType===Node.TEXT_NODE?e.parentElement:e},Yf=new WeakSet,ex=function(e){const{currentLayer:t}=this;if(t.hasTextLayer(e))return t;for(const s of a(this,ht).values())if(s.hasTextLayer(e))return s;return null},H0=new WeakSet,LP=function(){const e=document.getSelection();if(!e||e.isCollapsed)return;const s=A(this,lu,wy).call(this,e).closest(".textLayer"),i=this.getSelectionBoxes(s);i&&(a(this,ri)||g(this,ri,new GF(this)),a(this,ri).show(s,i,this.direction==="ltr"))},V0=new WeakSet,NP=function(){var r,o,l;const e=document.getSelection();if(!e||e.isCollapsed){a(this,$i)&&((r=a(this,ri))==null||r.hide(),g(this,$i,null),A(this,Pt,Zt).call(this,{hasSelectedText:!1}));return}const{anchorNode:t}=e;if(t===a(this,$i))return;const i=A(this,lu,wy).call(this,e).closest(".textLayer");if(!i){a(this,$i)&&((o=a(this,ri))==null||o.hide(),g(this,$i,null),A(this,Pt,Zt).call(this,{hasSelectedText:!1}));return}if((l=a(this,ri))==null||l.hide(),g(this,$i,t),A(this,Pt,Zt).call(this,{hasSelectedText:!0}),!(a(this,rt)!==Z.HIGHLIGHT&&a(this,rt)!==Z.NONE)&&(a(this,rt)===Z.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),g(this,Qr,this.isShiftKeyDown),!this.isShiftKeyDown)){const c=a(this,rt)===Z.HIGHLIGHT?A(this,Yf,ex).call(this,i):null;if(c==null||c.toggleDrawing(),a(this,ru)){const u=new AbortController,h=this.combinedSignal(u),d=f=>{f.type==="pointerup"&&f.button!==0||(u.abort(),c==null||c.toggleDrawing(!0),f.type==="pointerup"&&A(this,Ea,Pd).call(this,"main_toolbar"))};window.addEventListener("pointerup",d,{signal:h}),window.addEventListener("blur",d,{signal:h})}else c==null||c.toggleDrawing(!0),A(this,Ea,Pd).call(this,"main_toolbar")}},Ea=new WeakSet,Pd=function(e=""){a(this,rt)===Z.HIGHLIGHT?this.highlightSelection(e):a(this,Uf)&&A(this,H0,LP).call(this)},W0=new WeakSet,MP=function(){document.addEventListener("selectionchange",A(this,V0,NP).bind(this),{signal:this._signal})},G0=new WeakSet,DP=function(){if(a(this,Kr))return;g(this,Kr,new AbortController);const e=this.combinedSignal(a(this,Kr));window.addEventListener("focus",this.focus.bind(this),{signal:e}),window.addEventListener("blur",this.blur.bind(this),{signal:e})},q0=new WeakSet,IP=function(){var e;(e=a(this,Kr))==null||e.abort(),g(this,Kr,null)},Kf=new WeakSet,tx=function(){if(a(this,Zr))return;g(this,Zr,new AbortController);const e=this.combinedSignal(a(this,Zr));window.addEventListener("keydown",this.keydown.bind(this),{signal:e}),window.addEventListener("keyup",this.keyup.bind(this),{signal:e})},X0=new WeakSet,FP=function(){var e;(e=a(this,Zr))==null||e.abort(),g(this,Zr,null)},Qf=new WeakSet,nx=function(){if(a(this,qr))return;g(this,qr,new AbortController);const e=this.combinedSignal(a(this,qr));document.addEventListener("copy",this.copy.bind(this),{signal:e}),document.addEventListener("cut",this.cut.bind(this),{signal:e}),document.addEventListener("paste",this.paste.bind(this),{signal:e})},Jf=new WeakSet,sx=function(){var e;(e=a(this,qr))==null||e.abort(),g(this,qr,null)},Y0=new WeakSet,OP=function(){const e=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:e}),document.addEventListener("drop",this.drop.bind(this),{signal:e})},Pt=new WeakSet,Zt=function(e){Object.entries(e).some(([s,i])=>a(this,Gf)[s]!==i)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(a(this,Gf),e)}),a(this,rt)===Z.HIGHLIGHT&&e.hasSelectedEditor===!1&&A(this,Rs,Ii).call(this,[[ae.HIGHLIGHT_FREE,!0]]))},Rs=new WeakSet,Ii=function(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})},K0=new WeakSet,BP=async function(){if(!a(this,Jr)){g(this,Jr,!0);const e=[];for(const t of a(this,ht).values())e.push(t.enable());await Promise.all(e);for(const t of a(this,Ye).values())t.enable()}},Q0=new WeakSet,jP=function(){if(this.unselectAll(),a(this,Jr)){g(this,Jr,!1);for(const e of a(this,ht).values())e.disable();for(const e of a(this,Ye).values())e.disable()}},Zf=new WeakSet,ix=function(e){const t=a(this,ht).get(e.pageIndex);t?t.addOrRebuild(e):(this.addEditor(e),this.addToAnnotationStorage(e))},J0=new WeakSet,UP=function(){let e=null;for(e of a(this,ge));return e},_a=new WeakSet,Rd=function(){if(a(this,Ye).size===0)return!0;if(a(this,Ye).size===1)for(const e of a(this,Ye).values())return e.isEmpty();return!1},ep=new WeakSet,rx=function(e){for(const t of a(this,ge))t.unselect();a(this,ge).clear();for(const t of e)t.isEmpty()||(a(this,ge).add(t),t.select());A(this,Pt,Zt).call(this,{hasSelectedEditor:this.hasSelection})},O(Dc,"TRANSLATE_SMALL",1),O(Dc,"TRANSLATE_BIG",10);let sa=Dc;var yt,ai,Ls,cu,li,Ln,uu,ci,pn,Vi,Ca,ui,io,Ta,Ld,hu,by;const en=class en{constructor(e){p(this,Ta);p(this,hu);p(this,yt,null);p(this,ai,!1);p(this,Ls,null);p(this,cu,null);p(this,li,null);p(this,Ln,null);p(this,uu,!1);p(this,ci,null);p(this,pn,null);p(this,Vi,null);p(this,Ca,null);p(this,ui,!1);g(this,pn,e),g(this,ui,e._uiManager.useNewAltTextFlow),a(en,io)||g(en,io,Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(e){en._l10n??(en._l10n=e)}async render(){const e=g(this,Ls,document.createElement("button"));e.className="altText",e.tabIndex="0";const t=g(this,cu,document.createElement("span"));e.append(t),a(this,ui)?(e.classList.add("new"),e.setAttribute("data-l10n-id",a(en,io).missing),t.setAttribute("data-l10n-id",a(en,io)["missing-label"])):(e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const s=a(this,pn)._uiManager._signal;e.addEventListener("contextmenu",ts,{signal:s}),e.addEventListener("pointerdown",r=>r.stopPropagation(),{signal:s});const i=r=>{r.preventDefault(),a(this,pn)._uiManager.editAltText(a(this,pn)),a(this,ui)&&a(this,pn)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:a(this,Ta,Ld)}})};return e.addEventListener("click",i,{capture:!0,signal:s}),e.addEventListener("keydown",r=>{r.target===e&&r.key==="Enter"&&(g(this,uu,!0),i(r))},{signal:s}),await A(this,hu,by).call(this),e}finish(){a(this,Ls)&&(a(this,Ls).focus({focusVisible:a(this,uu)}),g(this,uu,!1))}isEmpty(){return a(this,ui)?a(this,yt)===null:!a(this,yt)&&!a(this,ai)}hasData(){return a(this,ui)?a(this,yt)!==null||!!a(this,Vi):this.isEmpty()}get guessedText(){return a(this,Vi)}async setGuessedText(e){a(this,yt)===null&&(g(this,Vi,e),g(this,Ca,await en._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:e})),A(this,hu,by).call(this))}toggleAltTextBadge(e=!1){var t;if(!a(this,ui)||a(this,yt)){(t=a(this,ci))==null||t.remove(),g(this,ci,null);return}if(!a(this,ci)){const s=g(this,ci,document.createElement("div"));s.className="noAltTextBadge",a(this,pn).div.append(s)}a(this,ci).classList.toggle("hidden",!e)}serialize(e){let t=a(this,yt);return!e&&a(this,Vi)===t&&(t=a(this,Ca)),{altText:t,decorative:a(this,ai),guessedText:a(this,Vi),textWithDisclaimer:a(this,Ca)}}get data(){return{altText:a(this,yt),decorative:a(this,ai)}}set data({altText:e,decorative:t,guessedText:s,textWithDisclaimer:i,cancel:r=!1}){s&&(g(this,Vi,s),g(this,Ca,i)),!(a(this,yt)===e&&a(this,ai)===t)&&(r||(g(this,yt,e),g(this,ai,t)),A(this,hu,by).call(this))}toggle(e=!1){a(this,Ls)&&(!e&&a(this,Ln)&&(clearTimeout(a(this,Ln)),g(this,Ln,null)),a(this,Ls).disabled=!e)}shown(){a(this,pn)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:a(this,Ta,Ld)}})}destroy(){var e,t;(e=a(this,Ls))==null||e.remove(),g(this,Ls,null),g(this,cu,null),g(this,li,null),(t=a(this,ci))==null||t.remove(),g(this,ci,null)}};yt=new WeakMap,ai=new WeakMap,Ls=new WeakMap,cu=new WeakMap,li=new WeakMap,Ln=new WeakMap,uu=new WeakMap,ci=new WeakMap,pn=new WeakMap,Vi=new WeakMap,Ca=new WeakMap,ui=new WeakMap,io=new WeakMap,Ta=new WeakSet,Ld=function(){return a(this,yt)&&"added"||a(this,yt)===null&&this.guessedText&&"review"||"missing"},hu=new WeakSet,by=async function(){var i,r,o;const e=a(this,Ls);if(!e)return;if(a(this,ui)){if(e.classList.toggle("done",!!a(this,yt)),e.setAttribute("data-l10n-id",a(en,io)[a(this,Ta,Ld)]),(i=a(this,cu))==null||i.setAttribute("data-l10n-id",a(en,io)[`${a(this,Ta,Ld)}-label`]),!a(this,yt)){(r=a(this,li))==null||r.remove();return}}else{if(!a(this,yt)&&!a(this,ai)){e.classList.remove("done"),(o=a(this,li))==null||o.remove();return}e.classList.add("done"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let t=a(this,li);if(!t){g(this,li,t=document.createElement("span")),t.className="tooltip",t.setAttribute("role","tooltip"),t.id=`alt-text-tooltip-${a(this,pn).id}`;const l=100,c=a(this,pn)._uiManager._signal;c.addEventListener("abort",()=>{clearTimeout(a(this,Ln)),g(this,Ln,null)},{once:!0}),e.addEventListener("mouseenter",()=>{g(this,Ln,setTimeout(()=>{g(this,Ln,null),a(this,li).classList.add("show"),a(this,pn)._reportTelemetry({action:"alt_text_tooltip"})},l))},{signal:c}),e.addEventListener("mouseleave",()=>{var u;a(this,Ln)&&(clearTimeout(a(this,Ln)),g(this,Ln,null)),(u=a(this,li))==null||u.classList.remove("show")},{signal:c})}a(this,ai)?t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(t.removeAttribute("data-l10n-id"),t.textContent=a(this,yt)),t.parentNode||e.append(t);const s=a(this,pn).getElementForAltText();s==null||s.setAttribute("aria-describedby",t.id)},p(en,io,null),O(en,"_l10n",null);let E0=en;var Rt,fs,ka,ke,tp,Pa,Ns,Ra,La,Na,np,ox;class Vm{constructor(e){p(this,np);p(this,Rt,null);p(this,fs,null);p(this,ka,!1);p(this,ke,null);p(this,tp,null);p(this,Pa,null);p(this,Ns,null);p(this,Ra,null);p(this,La,!1);p(this,Na,null);g(this,ke,e)}renderForToolbar(){const e=g(this,fs,document.createElement("button"));return e.className="comment",A(this,np,ox).call(this,e,!1)}renderForStandalone(){const e=g(this,Rt,document.createElement("button"));e.className="annotationCommentButton";const t=a(this,ke).commentButtonPosition;if(t){const{style:s}=e;s.insetInlineEnd=`calc(${100*(a(this,ke)._uiManager.direction==="ltr"?1-t[0]:t[0])}% - var(--comment-button-dim))`,s.top=`calc(${100*t[1]}% - var(--comment-button-dim))`;const i=a(this,ke).commentButtonColor;i&&(s.backgroundColor=i)}return A(this,np,ox).call(this,e,!0)}focusButton(){setTimeout(()=>{var e;(e=a(this,Rt)??a(this,fs))==null||e.focus()},0)}onUpdatedColor(){if(!a(this,Rt))return;const e=a(this,ke).commentButtonColor;e&&(a(this,Rt).style.backgroundColor=e),a(this,ke)._uiManager.updatePopupColor(a(this,ke))}get commentButtonWidth(){var e;return(((e=a(this,Rt))==null?void 0:e.getBoundingClientRect().width)??0)/a(this,ke).parent.boundingClientRect.width}get commentPopupPositionInLayer(){if(a(this,Na))return a(this,Na);if(!a(this,Rt))return null;const{x:e,y:t,height:s}=a(this,Rt).getBoundingClientRect(),{x:i,y:r,width:o,height:l}=a(this,ke).parent.boundingClientRect;return[(e-i)/o,(t+s-r)/l]}set commentPopupPositionInLayer(e){g(this,Na,e)}hasDefaultPopupPosition(){return a(this,Na)===null}removeStandaloneCommentButton(){var e;(e=a(this,Rt))==null||e.remove(),g(this,Rt,null)}removeToolbarCommentButton(){var e;(e=a(this,fs))==null||e.remove(),g(this,fs,null)}setCommentButtonStates({selected:e,hasPopup:t}){a(this,Rt)&&(a(this,Rt).classList.toggle("selected",e),a(this,Rt).ariaExpanded=t)}edit(e){const t=this.commentPopupPositionInLayer;let s,i;if(t)[s,i]=t;else{[s,i]=a(this,ke).commentButtonPosition;const{width:h,height:d,x:f,y:m}=a(this,ke);s=f+s*h,i=m+i*d}const r=a(this,ke).parent.boundingClientRect,{x:o,y:l,width:c,height:u}=r;a(this,ke)._uiManager.editComment(a(this,ke),o+s*c,l+i*u,{...e,parentDimensions:r})}finish(){a(this,fs)&&(a(this,fs).focus({focusVisible:a(this,ka)}),g(this,ka,!1))}isDeleted(){return a(this,La)||a(this,Ns)===""}isEmpty(){return a(this,Ns)===null}hasBeenEdited(){return this.isDeleted()||a(this,Ns)!==a(this,tp)}serialize(){return this.data}get data(){return{text:a(this,Ns),richText:a(this,Pa),date:a(this,Ra),deleted:this.isDeleted()}}set data(e){if(e!==a(this,Ns)&&g(this,Pa,null),e===null){g(this,Ns,""),g(this,La,!0);return}g(this,Ns,e),g(this,Ra,new Date),g(this,La,!1)}setInitialText(e,t=null){g(this,tp,e),this.data=e,g(this,Ra,null),g(this,Pa,t)}shown(){}destroy(){var e,t;(e=a(this,fs))==null||e.remove(),g(this,fs,null),(t=a(this,Rt))==null||t.remove(),g(this,Rt,null),g(this,Ns,""),g(this,Pa,null),g(this,Ra,null),g(this,ke,null),g(this,ka,!1),g(this,La,!1)}}Rt=new WeakMap,fs=new WeakMap,ka=new WeakMap,ke=new WeakMap,tp=new WeakMap,Pa=new WeakMap,Ns=new WeakMap,Ra=new WeakMap,La=new WeakMap,Na=new WeakMap,np=new WeakSet,ox=function(e,t){if(!a(this,ke)._uiManager.hasCommentManager())return null;e.tabIndex="0",e.ariaHasPopup="dialog",t?(e.ariaControls="commentPopup",e.setAttribute("data-l10n-id","pdfjs-show-comment-button")):(e.ariaControlsElements=[a(this,ke)._uiManager.getCommentDialogElement()],e.setAttribute("data-l10n-id","pdfjs-editor-edit-comment-button"));const s=a(this,ke)._uiManager._signal;if(!(s instanceof AbortSignal)||s.aborted)return e;e.addEventListener("contextmenu",ts,{signal:s}),t&&(e.addEventListener("focusin",r=>{a(this,ke)._focusEventsAllowed=!1,We(r)},{capture:!0,signal:s}),e.addEventListener("focusout",r=>{a(this,ke)._focusEventsAllowed=!0,We(r)},{capture:!0,signal:s})),e.addEventListener("pointerdown",r=>r.stopPropagation(),{signal:s});const i=r=>{r.preventDefault(),e===a(this,fs)?this.edit():a(this,ke).toggleComment(!0)};return e.addEventListener("click",i,{capture:!0,signal:s}),e.addEventListener("keydown",r=>{r.target===e&&r.key==="Enter"&&(g(this,ka,!0),i(r))},{signal:s}),e.addEventListener("pointerenter",()=>{a(this,ke).toggleComment(!1,!0)},{signal:s}),e.addEventListener("pointerleave",()=>{a(this,ke).toggleComment(!1,!1)},{signal:s}),e};var du,Ma,sp,ip,rp,op,ap,Wi,Da,Gi,Ia,qi,Z0,zP,ev,$P,tv,HP;const WA=class WA{constructor({container:e,isPinchingDisabled:t=null,isPinchingStopped:s=null,onPinchStart:i=null,onPinching:r=null,onPinchEnd:o=null,signal:l}){p(this,Z0);p(this,ev);p(this,tv);p(this,du,void 0);p(this,Ma,!1);p(this,sp,null);p(this,ip,void 0);p(this,rp,void 0);p(this,op,void 0);p(this,ap,void 0);p(this,Wi,null);p(this,Da,void 0);p(this,Gi,null);p(this,Ia,void 0);p(this,qi,null);g(this,du,e),g(this,sp,s),g(this,ip,t),g(this,rp,i),g(this,op,r),g(this,ap,o),g(this,Ia,new AbortController),g(this,Da,AbortSignal.any([l,a(this,Ia).signal])),e.addEventListener("touchstart",A(this,Z0,zP).bind(this),{passive:!1,signal:a(this,Da)})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/Ks.pixelRatio}destroy(){var e,t;(e=a(this,Ia))==null||e.abort(),g(this,Ia,null),(t=a(this,Wi))==null||t.abort(),g(this,Wi,null)}};du=new WeakMap,Ma=new WeakMap,sp=new WeakMap,ip=new WeakMap,rp=new WeakMap,op=new WeakMap,ap=new WeakMap,Wi=new WeakMap,Da=new WeakMap,Gi=new WeakMap,Ia=new WeakMap,qi=new WeakMap,Z0=new WeakSet,zP=function(e){var i,r,o;if((i=a(this,ip))!=null&&i.call(this))return;if(e.touches.length===1){if(a(this,Wi))return;const l=g(this,Wi,new AbortController),c=AbortSignal.any([a(this,Da),l.signal]),u=a(this,du),h={capture:!0,signal:c,passive:!1},d=f=>{var m;f.pointerType==="touch"&&((m=a(this,Wi))==null||m.abort(),g(this,Wi,null))};u.addEventListener("pointerdown",f=>{f.pointerType==="touch"&&(We(f),d(f))},h),u.addEventListener("pointerup",d,h),u.addEventListener("pointercancel",d,h);return}if(!a(this,qi)){g(this,qi,new AbortController);const l=AbortSignal.any([a(this,Da),a(this,qi).signal]),c=a(this,du),u={signal:l,capture:!1,passive:!1};c.addEventListener("touchmove",A(this,ev,$P).bind(this),u);const h=A(this,tv,HP).bind(this);c.addEventListener("touchend",h,u),c.addEventListener("touchcancel",h,u),u.capture=!0,c.addEventListener("pointerdown",We,u),c.addEventListener("pointermove",We,u),c.addEventListener("pointercancel",We,u),c.addEventListener("pointerup",We,u),(r=a(this,rp))==null||r.call(this)}if(We(e),e.touches.length!==2||(o=a(this,sp))!=null&&o.call(this)){g(this,Gi,null);return}let[t,s]=e.touches;t.identifier>s.identifier&&([t,s]=[s,t]),g(this,Gi,{touch0X:t.screenX,touch0Y:t.screenY,touch1X:s.screenX,touch1Y:s.screenY})},ev=new WeakSet,$P=function(e){var E;if(!a(this,Gi)||e.touches.length!==2)return;We(e);let[t,s]=e.touches;t.identifier>s.identifier&&([t,s]=[s,t]);const{screenX:i,screenY:r}=t,{screenX:o,screenY:l}=s,c=a(this,Gi),{touch0X:u,touch0Y:h,touch1X:d,touch1Y:f}=c,m=d-u,y=f-h,w=o-i,x=l-r,v=Math.hypot(w,x)||1,b=Math.hypot(m,y)||1;if(!a(this,Ma)&&Math.abs(b-v)<=WA.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(c.touch0X=i,c.touch0Y=r,c.touch1X=o,c.touch1Y=l,!a(this,Ma)){g(this,Ma,!0);return}const S=[(i+o)/2,(r+l)/2];(E=a(this,op))==null||E.call(this,S,b,v)},tv=new WeakSet,HP=function(e){var t;e.touches.length>=2||(a(this,qi)&&(a(this,qi).abort(),g(this,qi,null),(t=a(this,ap))==null||t.call(this)),a(this,Gi)&&(We(e),g(this,Gi,null),g(this,Ma,!1)))};let kf=WA;var Fa,Ms,Fe,Se,Xi,fu,ro,lp,Lt,Oa,Yi,hi,oo,cp,Ba,Nn,up,ja,Ki,di,pu,gu,ps,Ua,hp,nv,dp,ax,fp,lx,mu,xy,sv,VP,iv,WP,pp,cx,yu,Sy,gp,ux,rv,GP,ov,qP,av,XP,mp,hx,lv,YP,yp,dx,cv,KP,uv,QP,hv,JP,vp,fx,za,Nd;const ne=class ne{constructor(e){p(this,dp);p(this,mu);p(this,sv);p(this,iv);p(this,pp);p(this,yu);p(this,gp);p(this,rv);p(this,ov);p(this,av);p(this,mp);p(this,lv);p(this,yp);p(this,cv);p(this,uv);p(this,hv);p(this,vp);p(this,za);p(this,Fa,null);p(this,Ms,null);p(this,Fe,null);p(this,Se,null);p(this,Xi,null);p(this,fu,!1);p(this,ro,null);p(this,lp,"");p(this,Lt,null);p(this,Oa,null);p(this,Yi,null);p(this,hi,null);p(this,oo,null);p(this,cp,"");p(this,Ba,!1);p(this,Nn,null);p(this,up,!1);p(this,ja,!1);p(this,Ki,!1);p(this,di,null);p(this,pu,0);p(this,gu,0);p(this,ps,null);p(this,Ua,null);O(this,"isSelected",!1);O(this,"_isCopy",!1);O(this,"_editToolbar",null);O(this,"_initialOptions",Object.create(null));O(this,"_initialData",null);O(this,"_isVisible",!0);O(this,"_uiManager",null);O(this,"_focusEventsAllowed",!0);p(this,hp,!1);p(this,nv,ne._zIndex++);this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null,this.annotationElementId=e.annotationElementId||null,this.creationDate=e.creationDate||new Date,this.modificationDate=e.modificationDate||null;const{rotation:t,rawDims:{pageWidth:s,pageHeight:i,pageX:r,pageY:o}}=this.parent.viewport;this.rotation=t,this.pageRotation=(360+t-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[s,i],this.pageTranslation=[r,o];const[l,c]=this.parentDimensions;this.x=e.x/l,this.y=e.y/c,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const e=ne.prototype._resizeWithKeyboard,t=sa.TRANSLATE_SMALL,s=sa.TRANSLATE_BIG;return ie(this,"_resizerKeyboardManager",new bm([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-t,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-s,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[t,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[s,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-t]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-s]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,t]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,s]}],[["Escape","mac+Escape"],ne.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return ie(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){const t=new YF({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});t.annotationElementId=e.annotationElementId,t.deleted=!0,t._uiManager.addToAnnotationStorage(t)}static initialize(e,t){if(ne._l10n??(ne._l10n=e),ne._l10nResizer||(ne._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),ne._borderLineWidth!==-1)return;const s=getComputedStyle(document.documentElement);ne._borderLineWidth=parseFloat(s.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,t){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,t){_e("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return a(this,hp)}set _isDraggable(e){var t;g(this,hp,e),(t=this.div)==null||t.classList.toggle("draggable",e)}get uid(){return this.annotationElementId||this.id}get isEnterHandled(){return!0}center(){const[e,t]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*t/(e*2),this.y+=this.width*e/(t*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*t/(e*2),this.y-=this.width*e/(t*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=a(this,nv)}setParent(e){var t;e!==null?(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions):(A(this,za,Nd).call(this),(t=a(this,hi))==null||t.remove(),g(this,hi,null)),this.parent=e}focusin(e){this._focusEventsAllowed&&(a(this,Ba)?g(this,Ba,!1):this.parent.setSelected(this))}focusout(e){var s;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const t=e.relatedTarget;t!=null&&t.closest(`#${this.id}`)||(e.preventDefault(),(s=this.parent)!=null&&s.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,t,s,i){const[r,o]=this.parentDimensions;[s,i]=this.screenToPageTranslation(s,i),this.x=(e+s)/r,this.y=(t+i)/o,this.fixAndSetPosition()}_moveAfterPaste(e,t){const[s,i]=this.parentDimensions;this.setAt(e*s,t*i,this.width*s,this.height*i),this._onTranslated()}translate(e,t){A(this,dp,ax).call(this,this.parentDimensions,e,t)}translateInPage(e,t){a(this,Nn)||g(this,Nn,[this.x,this.y,this.width,this.height]),A(this,dp,ax).call(this,this.pageDimensions,e,t),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(e,t){a(this,Nn)||g(this,Nn,[this.x,this.y,this.width,this.height]);const{div:s,parentDimensions:[i,r]}=this;if(this.x+=e/i,this.y+=t/r,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:d,y:f}=this.div.getBoundingClientRect();this.parent.findNewParent(this,d,f)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:o,y:l}=this;const[c,u]=this.getBaseTranslation();o+=c,l+=u;const{style:h}=s;h.left=`${(100*o).toFixed(2)}%`,h.top=`${(100*l).toFixed(2)}%`,this._onTranslating(o,l),s.scrollIntoView({block:"nearest"})}_onTranslating(e,t){}_onTranslated(e,t){}get _hasBeenMoved(){return!!a(this,Nn)&&(a(this,Nn)[0]!==this.x||a(this,Nn)[1]!==this.y)}get _hasBeenResized(){return!!a(this,Nn)&&(a(this,Nn)[2]!==this.width||a(this,Nn)[3]!==this.height)}getBaseTranslation(){const[e,t]=this.parentDimensions,{_borderLineWidth:s}=ne,i=s/e,r=s/t;switch(this.rotation){case 90:return[-i,r];case 180:return[i,r];case 270:return[i,-r];default:return[-i,-r]}}get _mustFixPosition(){return!0}fixAndSetPosition(e=this.rotation){const{div:{style:t},pageDimensions:[s,i]}=this;let{x:r,y:o,width:l,height:c}=this;if(l*=s,c*=i,r*=s,o*=i,this._mustFixPosition)switch(e){case 0:r=Xt(r,0,s-l),o=Xt(o,0,i-c);break;case 90:r=Xt(r,0,s-c),o=Xt(o,l,i);break;case 180:r=Xt(r,l,s),o=Xt(o,c,i);break;case 270:r=Xt(r,c,s),o=Xt(o,0,i-l);break}this.x=r/=s,this.y=o/=i;const[u,h]=this.getBaseTranslation();r+=u,o+=h,t.left=`${(100*r).toFixed(2)}%`,t.top=`${(100*o).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(e,t){var s;return A(s=ne,fp,lx).call(s,e,t,this.parentRotation)}pageTranslationToScreen(e,t){var s;return A(s=ne,fp,lx).call(s,e,t,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:e,pageDimensions:[t,s]}=this;return[t*e,s*e]}setDims(){const{div:{style:e},width:t,height:s}=this;e.width=`${(100*t).toFixed(2)}%`,e.height=`${(100*s).toFixed(2)}%`}getInitialTranslation(){return[0,0]}_onResized(){}static _round(e){return Math.round(e*1e4)/1e4}_onResizing(){}altTextFinish(){var e;(e=a(this,Fe))==null||e.finish()}get toolbarButtons(){return null}async addEditToolbar(){if(this._editToolbar||a(this,ja))return this._editToolbar;this._editToolbar=new Kb(this),this.div.append(this._editToolbar.render());const{toolbarButtons:e}=this;if(e)for(const[t,s]of e)await this._editToolbar.addButton(t,s);return this.hasComment||this._editToolbar.addButton("comment",this.addCommentButton()),this._editToolbar.addButton("delete"),this._editToolbar}addCommentButtonInToolbar(){var e;(e=this._editToolbar)==null||e.addButtonBefore("comment",this.addCommentButton(),".deleteButton")}removeCommentButtonFromToolbar(){var e;(e=this._editToolbar)==null||e.removeButton("comment")}removeEditToolbar(){var e,t;(e=this._editToolbar)==null||e.remove(),this._editToolbar=null,(t=a(this,Fe))==null||t.destroy()}addContainer(e){var s;const t=(s=this._editToolbar)==null?void 0:s.div;t?t.before(e):this.div.append(e)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return a(this,Fe)||(E0.initialize(ne._l10n),g(this,Fe,new E0(this)),a(this,Fa)&&(a(this,Fe).data=a(this,Fa),g(this,Fa,null))),a(this,Fe)}get altTextData(){var e;return(e=a(this,Fe))==null?void 0:e.data}set altTextData(e){a(this,Fe)&&(a(this,Fe).data=e)}get guessedAltText(){var e;return(e=a(this,Fe))==null?void 0:e.guessedText}async setGuessedAltText(e){var t;await((t=a(this,Fe))==null?void 0:t.setGuessedText(e))}serializeAltText(e){var t;return(t=a(this,Fe))==null?void 0:t.serialize(e)}hasAltText(){return!!a(this,Fe)&&!a(this,Fe).isEmpty()}hasAltTextData(){var e;return((e=a(this,Fe))==null?void 0:e.hasData())??!1}focusCommentButton(){var e;(e=a(this,Se))==null||e.focusButton()}addCommentButton(){return a(this,Se)||g(this,Se,new Vm(this))}addStandaloneCommentButton(){if(a(this,Xi)){this._uiManager.isEditingMode()&&a(this,Xi).classList.remove("hidden");return}this.hasComment&&(g(this,Xi,a(this,Se).renderForStandalone()),this.div.append(a(this,Xi)))}removeStandaloneCommentButton(){a(this,Se).removeStandaloneCommentButton(),g(this,Xi,null)}hideStandaloneCommentButton(){var e;(e=a(this,Xi))==null||e.classList.add("hidden")}get comment(){const{data:{richText:e,text:t,date:s,deleted:i}}=a(this,Se);return{text:t,richText:e,date:s,deleted:i,color:this.getNonHCMColor(),opacity:this.opacity??1}}set comment(e){a(this,Se)||g(this,Se,new Vm(this)),a(this,Se).data=e,this.hasComment?(this.removeCommentButtonFromToolbar(),this.addStandaloneCommentButton(),this._uiManager.updateComment(this)):(this.addCommentButtonInToolbar(),this.removeStandaloneCommentButton(),this._uiManager.removeComment(this))}setCommentData({comment:e,popupRef:t,richText:s}){if(!t||(a(this,Se)||g(this,Se,new Vm(this)),a(this,Se).setInitialText(e,s),!this.annotationElementId))return;const i=this._uiManager.getAndRemoveDataFromAnnotationStorage(this.annotationElementId);i&&this.updateFromAnnotationLayer(i)}get hasEditedComment(){var e;return(e=a(this,Se))==null?void 0:e.hasBeenEdited()}get hasDeletedComment(){var e;return(e=a(this,Se))==null?void 0:e.isDeleted()}get hasComment(){return!!a(this,Se)&&!a(this,Se).isEmpty()&&!a(this,Se).isDeleted()}async editComment(e){a(this,Se)||g(this,Se,new Vm(this)),a(this,Se).edit(e)}toggleComment(e,t=void 0){this.hasComment&&this._uiManager.toggleComment(this,e,t)}setSelectedCommentButton(e){a(this,Se).setSelectedButton(e)}addComment(e){if(this.hasEditedComment){const[,,,i]=e.rect,[r]=this.pageDimensions,[o]=this.pageTranslation,l=o+r+1,c=i-100,u=l+180;e.popup={contents:this.comment.text,deleted:this.comment.deleted,rect:[l,c,u,i]}}}updateFromAnnotationLayer({popup:{contents:e,deleted:t}}){a(this,Se).data=t?null:e}get parentBoundingClientRect(){return this.parent.boundingClientRect}render(){var o;const e=this.div=document.createElement("div");e.setAttribute("data-editor-rotation",(360-this.rotation)%360),e.className=this.name,e.setAttribute("id",this.id),e.tabIndex=a(this,fu)?-1:0,e.setAttribute("role","application"),this.defaultL10nId&&e.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||e.classList.add("hidden"),this.setInForeground(),A(this,yp,dx).call(this);const[t,s]=this.parentDimensions;this.parentRotation%180!==0&&(e.style.maxWidth=`${(100*s/t).toFixed(2)}%`,e.style.maxHeight=`${(100*t/s).toFixed(2)}%`);const[i,r]=this.getInitialTranslation();return this.translate(i,r),PP(this,e,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(a(this,Ua)||g(this,Ua,new kf({container:e,isPinchingDisabled:()=>!this.isSelected,onPinchStart:A(this,rv,GP).bind(this),onPinching:A(this,ov,qP).bind(this),onPinchEnd:A(this,av,XP).bind(this),signal:this._uiManager._signal}))),this.addStandaloneCommentButton(),(o=this._uiManager._editorUndoBar)==null||o.hide(),e}pointerdown(e){const{isMac:t}=Tt.platform;if(e.button!==0||e.ctrlKey&&t){e.preventDefault();return}if(g(this,Ba,!0),this._isDraggable){A(this,lv,YP).call(this,e);return}A(this,mp,hx).call(this,e)}_onStartDragging(){}_onStopDragging(){}moveInDOM(){a(this,di)&&clearTimeout(a(this,di)),g(this,di,setTimeout(()=>{var e;g(this,di,null),(e=this.parent)==null||e.moveEditorInDOM(this)},0))}_setParentAndPosition(e,t,s){e.changeParent(this),this.x=t,this.y=s,this.fixAndSetPosition(),this._onTranslated()}getRect(e,t,s=this.rotation){const i=this.parentScale,[r,o]=this.pageDimensions,[l,c]=this.pageTranslation,u=e/i,h=t/i,d=this.x*r,f=this.y*o,m=this.width*r,y=this.height*o;switch(s){case 0:return[d+u+l,o-f-h-y+c,d+u+m+l,o-f-h+c];case 90:return[d+h+l,o-f+u+c,d+h+y+l,o-f+u+m+c];case 180:return[d-u-m+l,o-f+h+c,d-u+l,o-f+h+y+c];case 270:return[d-h-y+l,o-f-u-m+c,d-h+l,o-f-u+c];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(e,t){const[s,i,r,o]=e,l=r-s,c=o-i;switch(this.rotation){case 0:return[s,t-o,l,c];case 90:return[s,t-i,c,l];case 180:return[r,t-i,l,c];case 270:return[r,t-o,c,l];default:throw new Error("Invalid rotation")}}getPDFRect(){return this.getRect(0,0)}getNonHCMColor(){return this.color&&ne._colorManager.convert(this._uiManager.getNonHCMColor(this.color))}onUpdatedColor(){var e;(e=a(this,Se))==null||e.onUpdatedColor()}getData(){const{comment:{text:e,color:t,date:s,opacity:i,deleted:r,richText:o},uid:l,pageIndex:c,creationDate:u,modificationDate:h}=this;return{id:l,pageIndex:c,rect:this.getPDFRect(),richText:o,contentsObj:{str:e},creationDate:u,modificationDate:s||h,popupRef:!r,color:t,opacity:i}}onceAdded(e){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),g(this,ja,!0),!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),g(this,ja,!1),!0):!1}isInEditMode(){return a(this,ja)}shouldGetKeyboardEvents(){return a(this,Ki)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:e,left:t,bottom:s,right:i}=this.getClientDimensions(),{innerHeight:r,innerWidth:o}=window;return t<o&&i>0&&e<r&&s>0}rebuild(){A(this,yp,dx).call(this)}rotate(e){}resize(){}serializeDeleted(){var e;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:((e=this._initialData)==null?void 0:e.popupRef)||""}}serialize(e=!1,t=null){var s;return{annotationType:this.mode,pageIndex:this.pageIndex,rect:this.getPDFRect(),rotation:this.rotation,structTreeParentId:this._structTreeParentId,popupRef:((s=this._initialData)==null?void 0:s.popupRef)||""}}static async deserialize(e,t,s){const i=new this.prototype.constructor({parent:t,id:t.getNextId(),uiManager:s,annotationElementId:e.annotationElementId,creationDate:e.creationDate,modificationDate:e.modificationDate});i.rotation=e.rotation,g(i,Fa,e.accessibilityData),i._isCopy=e.isCopy||!1;const[r,o]=i.pageDimensions,[l,c,u,h]=i.getRectInCurrentCoords(e.rect,o);return i.x=l/r,i.y=c/o,i.width=u/r,i.height=h/o,i}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){var e,t;if((e=a(this,oo))==null||e.abort(),g(this,oo,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),a(this,di)&&(clearTimeout(a(this,di)),g(this,di,null)),A(this,za,Nd).call(this),this.removeEditToolbar(),a(this,ps)){for(const s of a(this,ps).values())clearTimeout(s);g(this,ps,null)}this.parent=null,(t=a(this,Ua))==null||t.destroy(),g(this,Ua,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(A(this,sv,VP).call(this),a(this,Lt).classList.remove("hidden"))}get toolbarPosition(){return null}get commentButtonPosition(){return this._uiManager.direction==="ltr"?[1,0]:[0,0]}get commentButtonPositionInPage(){const{commentButtonPosition:[e,t]}=this,[s,i,r,o]=this.getPDFRect();return[ne._round(s+(r-s)*e),ne._round(i+(o-i)*(1-t))]}get commentButtonColor(){return this._uiManager.makeCommentColor(this.getNonHCMColor(),this.opacity)}get commentPopupPosition(){return a(this,Se).commentPopupPositionInLayer}set commentPopupPosition(e){a(this,Se).commentPopupPositionInLayer=e}hasDefaultPopupPosition(){return a(this,Se).hasDefaultPopupPosition()}get commentButtonWidth(){return a(this,Se).commentButtonWidth}get elementBeforePopup(){return this.div}setCommentButtonStates(e){a(this,Se).setCommentButtonStates(e)}keydown(e){if(!this.isResizable||e.target!==this.div||e.key!=="Enter")return;this._uiManager.setSelected(this),g(this,Yi,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const t=a(this,Lt).children;if(!a(this,Ms)){g(this,Ms,Array.from(t));const o=A(this,cv,KP).bind(this),l=A(this,uv,QP).bind(this),c=this._uiManager._signal;for(const u of a(this,Ms)){const h=u.getAttribute("data-resizer-name");u.setAttribute("role","spinbutton"),u.addEventListener("keydown",o,{signal:c}),u.addEventListener("blur",l,{signal:c}),u.addEventListener("focus",A(this,hv,JP).bind(this,h),{signal:c}),u.setAttribute("data-l10n-id",ne._l10nResizer[h])}}const s=a(this,Ms)[0];let i=0;for(const o of t){if(o===s)break;i++}const r=(360-this.rotation+this.parentRotation)%360/90*(a(this,Ms).length/4);if(r!==i){if(r<i)for(let l=0;l<i-r;l++)a(this,Lt).append(a(this,Lt).firstChild);else if(r>i)for(let l=0;l<r-i;l++)a(this,Lt).firstChild.before(a(this,Lt).lastChild);let o=0;for(const l of t){const u=a(this,Ms)[o++].getAttribute("data-resizer-name");l.setAttribute("data-l10n-id",ne._l10nResizer[u])}}A(this,vp,fx).call(this,0),g(this,Ki,!0),a(this,Lt).firstChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}_resizeWithKeyboard(e,t){a(this,Ki)&&A(this,gp,ux).call(this,a(this,cp),{deltaX:e,deltaY:t,fromKeyboard:!0})}_stopResizingWithKeyboard(){A(this,za,Nd).call(this),this.div.focus()}select(){var e,t,s;if(this.isSelected&&this._editToolbar){this._editToolbar.show();return}if(this.isSelected=!0,this.makeResizable(),(e=this.div)==null||e.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{var i,r;(i=this.div)!=null&&i.classList.contains("selectedEditor")&&((r=this._editToolbar)==null||r.show())});return}(t=this._editToolbar)==null||t.show(),(s=a(this,Fe))==null||s.toggleAltTextBadge(!1)}focus(){this.div&&!this.div.contains(document.activeElement)&&setTimeout(()=>{var e;return(e=this.div)==null?void 0:e.focus({preventScroll:!0})},0)}unselect(){var e,t,s,i,r;this.isSelected&&(this.isSelected=!1,(e=a(this,Lt))==null||e.classList.add("hidden"),(t=this.div)==null||t.classList.remove("selectedEditor"),(s=this.div)!=null&&s.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(i=this._editToolbar)==null||i.hide(),(r=a(this,Fe))==null||r.toggleAltTextBadge(!0),this.hasComment&&this._uiManager.toggleComment(this,!1,!1))}updateParams(e,t){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(e){e.target.nodeName!=="BUTTON"&&(this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.id}))}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return a(this,up)}set isEditing(e){g(this,up,e),this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(e,t=!1){if(t){a(this,ps)||g(this,ps,new Map);const{action:s}=e;let i=a(this,ps).get(s);i&&clearTimeout(i),i=setTimeout(()=>{this._reportTelemetry(e),a(this,ps).delete(s),a(this,ps).size===0&&g(this,ps,null)},ne._telemetryTimeout),a(this,ps).set(s,i);return}e.type||(e.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:e}})}show(e=this._isVisible){this.div.classList.toggle("hidden",!e),this._isVisible=e}enable(){this.div&&(this.div.tabIndex=0),g(this,fu,!1)}disable(){this.div&&(this.div.tabIndex=-1),g(this,fu,!0)}updateFakeAnnotationElement(e){if(!a(this,hi)&&!this.deleted){g(this,hi,e.addFakeAnnotation(this));return}if(this.deleted){a(this,hi).remove(),g(this,hi,null);return}(this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized)&&a(this,hi).updateEdited({rect:this.getPDFRect(),popup:this.comment})}renderAnnotationElement(e){if(this.deleted)return e.hide(),null;let t=e.container.querySelector(".annotationContent");if(!t)t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),e.container.prepend(t);else if(t.nodeName==="CANVAS"){const s=t;t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),s.before(t)}return t}resetAnnotationElement(e){const{firstChild:t}=e.container;(t==null?void 0:t.nodeName)==="DIV"&&t.classList.contains("annotationContent")&&t.remove()}};Fa=new WeakMap,Ms=new WeakMap,Fe=new WeakMap,Se=new WeakMap,Xi=new WeakMap,fu=new WeakMap,ro=new WeakMap,lp=new WeakMap,Lt=new WeakMap,Oa=new WeakMap,Yi=new WeakMap,hi=new WeakMap,oo=new WeakMap,cp=new WeakMap,Ba=new WeakMap,Nn=new WeakMap,up=new WeakMap,ja=new WeakMap,Ki=new WeakMap,di=new WeakMap,pu=new WeakMap,gu=new WeakMap,ps=new WeakMap,Ua=new WeakMap,hp=new WeakMap,nv=new WeakMap,dp=new WeakSet,ax=function([e,t],s,i){[s,i]=this.screenToPageTranslation(s,i),this.x+=s/e,this.y+=i/t,this._onTranslating(this.x,this.y),this.fixAndSetPosition()},fp=new WeakSet,lx=function(e,t,s){switch(s){case 90:return[t,-e];case 180:return[-e,-t];case 270:return[-t,e];default:return[e,t]}},mu=new WeakSet,xy=function(e){switch(e){case 90:{const[t,s]=this.pageDimensions;return[0,-t/s,s/t,0]}case 180:return[-1,0,0,-1];case 270:{const[t,s]=this.pageDimensions;return[0,t/s,-s/t,0]}default:return[1,0,0,1]}},sv=new WeakSet,VP=function(){if(a(this,Lt))return;g(this,Lt,document.createElement("div")),a(this,Lt).classList.add("resizers");const e=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],t=this._uiManager._signal;for(const s of e){const i=document.createElement("div");a(this,Lt).append(i),i.classList.add("resizer",s),i.setAttribute("data-resizer-name",s),i.addEventListener("pointerdown",A(this,iv,WP).bind(this,s),{signal:t}),i.addEventListener("contextmenu",ts,{signal:t}),i.tabIndex=-1}this.div.prepend(a(this,Lt))},iv=new WeakSet,WP=function(e,t){var h;t.preventDefault();const{isMac:s}=Tt.platform;if(t.button!==0||t.ctrlKey&&s)return;(h=a(this,Fe))==null||h.toggle(!1);const i=this._isDraggable;this._isDraggable=!1,g(this,Oa,[t.screenX,t.screenY]);const r=new AbortController,o=this._uiManager.combinedSignal(r);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",A(this,gp,ux).bind(this,e),{passive:!0,capture:!0,signal:o}),window.addEventListener("touchmove",We,{passive:!1,signal:o}),window.addEventListener("contextmenu",ts,{signal:o}),g(this,Yi,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const l=this.parent.div.style.cursor,c=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(t.target).cursor;const u=()=>{var d;r.abort(),this.parent.togglePointerEvents(!0),(d=a(this,Fe))==null||d.toggle(!0),this._isDraggable=i,this.parent.div.style.cursor=l,this.div.style.cursor=c,A(this,yu,Sy).call(this)};window.addEventListener("pointerup",u,{signal:o}),window.addEventListener("blur",u,{signal:o})},pp=new WeakSet,cx=function(e,t,s,i){this.width=s,this.height=i,this.x=e,this.y=t,this.setDims(),this.fixAndSetPosition(),this._onResized()},yu=new WeakSet,Sy=function(){if(!a(this,Yi))return;const{savedX:e,savedY:t,savedWidth:s,savedHeight:i}=a(this,Yi);g(this,Yi,null);const r=this.x,o=this.y,l=this.width,c=this.height;r===e&&o===t&&l===s&&c===i||this.addCommands({cmd:A(this,pp,cx).bind(this,r,o,l,c),undo:A(this,pp,cx).bind(this,e,t,s,i),mustExec:!0})},gp=new WeakSet,ux=function(e,t){const[s,i]=this.parentDimensions,r=this.x,o=this.y,l=this.width,c=this.height,u=ne.MIN_SIZE/s,h=ne.MIN_SIZE/i,d=A(this,mu,xy).call(this,this.rotation),f=(F,$)=>[d[0]*F+d[2]*$,d[1]*F+d[3]*$],m=A(this,mu,xy).call(this,360-this.rotation),y=(F,$)=>[m[0]*F+m[2]*$,m[1]*F+m[3]*$];let w,x,v=!1,b=!1;switch(e){case"topLeft":v=!0,w=(F,$)=>[0,0],x=(F,$)=>[F,$];break;case"topMiddle":w=(F,$)=>[F/2,0],x=(F,$)=>[F/2,$];break;case"topRight":v=!0,w=(F,$)=>[F,0],x=(F,$)=>[0,$];break;case"middleRight":b=!0,w=(F,$)=>[F,$/2],x=(F,$)=>[0,$/2];break;case"bottomRight":v=!0,w=(F,$)=>[F,$],x=(F,$)=>[0,0];break;case"bottomMiddle":w=(F,$)=>[F/2,$],x=(F,$)=>[F/2,0];break;case"bottomLeft":v=!0,w=(F,$)=>[0,$],x=(F,$)=>[F,0];break;case"middleLeft":b=!0,w=(F,$)=>[0,$/2],x=(F,$)=>[F,$/2];break}const S=w(l,c),E=x(l,c);let C=f(...E);const T=ne._round(r+C[0]),k=ne._round(o+C[1]);let P=1,N=1,M,I;if(t.fromKeyboard)({deltaX:M,deltaY:I}=t);else{const{screenX:F,screenY:$}=t,[L,U]=a(this,Oa);[M,I]=this.screenToPageTranslation(F-L,$-U),a(this,Oa)[0]=F,a(this,Oa)[1]=$}if([M,I]=y(M/s,I/i),v){const F=Math.hypot(l,c);P=N=Math.max(Math.min(Math.hypot(E[0]-S[0]-M,E[1]-S[1]-I)/F,1/l,1/c),u/l,h/c)}else b?P=Xt(Math.abs(E[0]-S[0]-M),u,1)/l:N=Xt(Math.abs(E[1]-S[1]-I),h,1)/c;const j=ne._round(l*P),H=ne._round(c*N);C=f(...x(j,H));const z=T-C[0],Q=k-C[1];a(this,Nn)||g(this,Nn,[this.x,this.y,this.width,this.height]),this.width=j,this.height=H,this.x=z,this.y=Q,this.setDims(),this.fixAndSetPosition(),this._onResizing()},rv=new WeakSet,GP=function(){var e;g(this,Yi,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height}),(e=a(this,Fe))==null||e.toggle(!1),this.parent.togglePointerEvents(!1)},ov=new WeakSet,qP=function(e,t,s){let r=.7*(s/t)+1-.7;if(r===1)return;const o=A(this,mu,xy).call(this,this.rotation),l=(T,k)=>[o[0]*T+o[2]*k,o[1]*T+o[3]*k],[c,u]=this.parentDimensions,h=this.x,d=this.y,f=this.width,m=this.height,y=ne.MIN_SIZE/c,w=ne.MIN_SIZE/u;r=Math.max(Math.min(r,1/f,1/m),y/f,w/m);const x=ne._round(f*r),v=ne._round(m*r);if(x===f&&v===m)return;a(this,Nn)||g(this,Nn,[h,d,f,m]);const b=l(f/2,m/2),S=ne._round(h+b[0]),E=ne._round(d+b[1]),C=l(x/2,v/2);this.x=S-C[0],this.y=E-C[1],this.width=x,this.height=v,this.setDims(),this.fixAndSetPosition(),this._onResizing()},av=new WeakSet,XP=function(){var e;(e=a(this,Fe))==null||e.toggle(!0),this.parent.togglePointerEvents(!0),A(this,yu,Sy).call(this)},mp=new WeakSet,hx=function(e){const{isMac:t}=Tt.platform;e.ctrlKey&&!t||e.shiftKey||e.metaKey&&t?this.parent.toggleSelected(this):this.parent.setSelected(this)},lv=new WeakSet,YP=function(e){const{isSelected:t}=this;this._uiManager.setUpDragSession();let s=!1;const i=new AbortController,r=this._uiManager.combinedSignal(i),o={capture:!0,passive:!1,signal:r},l=u=>{i.abort(),g(this,ro,null),g(this,Ba,!1),this._uiManager.endDragSession()||A(this,mp,hx).call(this,u),s&&this._onStopDragging()};t&&(g(this,pu,e.clientX),g(this,gu,e.clientY),g(this,ro,e.pointerId),g(this,lp,e.pointerType),window.addEventListener("pointermove",u=>{s||(s=!0,this._uiManager.toggleComment(this,!0,!1),this._onStartDragging());const{clientX:h,clientY:d,pointerId:f}=u;if(f!==a(this,ro)){We(u);return}const[m,y]=this.screenToPageTranslation(h-a(this,pu),d-a(this,gu));g(this,pu,h),g(this,gu,d),this._uiManager.dragSelectedEditors(m,y)},o),window.addEventListener("touchmove",We,o),window.addEventListener("pointerdown",u=>{u.pointerType===a(this,lp)&&(a(this,Ua)||u.isPrimary)&&l(u),We(u)},o));const c=u=>{if(!a(this,ro)||a(this,ro)===u.pointerId){l(u);return}We(u)};window.addEventListener("pointerup",c,{signal:r}),window.addEventListener("blur",c,{signal:r})},yp=new WeakSet,dx=function(){if(a(this,oo)||!this.div)return;g(this,oo,new AbortController);const e=this._uiManager.combinedSignal(a(this,oo));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:e}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:e})},cv=new WeakSet,KP=function(e){ne._resizerKeyboardManager.exec(this,e)},uv=new WeakSet,QP=function(e){var t;a(this,Ki)&&((t=e.relatedTarget)==null?void 0:t.parentNode)!==a(this,Lt)&&A(this,za,Nd).call(this)},hv=new WeakSet,JP=function(e){g(this,cp,a(this,Ki)?e:"")},vp=new WeakSet,fx=function(e){if(a(this,Ms))for(const t of a(this,Ms))t.tabIndex=e},za=new WeakSet,Nd=function(){g(this,Ki,!1),A(this,vp,fx).call(this,-1),A(this,yu,Sy).call(this)},p(ne,fp),O(ne,"_l10n",null),O(ne,"_l10nResizer",null),O(ne,"_borderLineWidth",-1),O(ne,"_colorManager",new Zb),O(ne,"_zIndex",1),O(ne,"_telemetryTimeout",1e3);let Re=ne;class YF extends Re{constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const U_=3285377520,rs=4294901760,ei=65535;class ZP{constructor(e){this.h1=e?e&4294967295:U_,this.h2=e?e&4294967295:U_}update(e){let t,s;if(typeof e=="string"){t=new Uint8Array(e.length*2),s=0;for(let w=0,x=e.length;w<x;w++){const v=e.charCodeAt(w);v<=255?t[s++]=v:(t[s++]=v>>>8,t[s++]=v&255)}}else if(ArrayBuffer.isView(e))t=e.slice(),s=t.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const i=s>>2,r=s-i*4,o=new Uint32Array(t.buffer,0,i);let l=0,c=0,u=this.h1,h=this.h2;const d=3432918353,f=461845907,m=d&ei,y=f&ei;for(let w=0;w<i;w++)w&1?(l=o[w],l=l*d&rs|l*m&ei,l=l<<15|l>>>17,l=l*f&rs|l*y&ei,u^=l,u=u<<13|u>>>19,u=u*5+3864292196):(c=o[w],c=c*d&rs|c*m&ei,c=c<<15|c>>>17,c=c*f&rs|c*y&ei,h^=c,h=h<<13|h>>>19,h=h*5+3864292196);switch(l=0,r){case 3:l^=t[i*4+2]<<16;case 2:l^=t[i*4+1]<<8;case 1:l^=t[i*4],l=l*d&rs|l*m&ei,l=l<<15|l>>>17,l=l*f&rs|l*y&ei,i&1?u^=l:h^=l}this.h1=u,this.h2=h}hexdigest(){let e=this.h1,t=this.h2;return e^=t>>>1,e=e*3981806797&rs|e*36045&ei,t=t*4283543511&rs|((t<<16|e>>>16)*2950163797&rs)>>>16,e^=t>>>1,e=e*444984403&rs|e*60499&ei,t=t*3301882366&rs|((t<<16|e>>>16)*3120437893&rs)>>>16,e^=t>>>1,(e>>>0).toString(16).padStart(8,"0")+(t>>>0).toString(16).padStart(8,"0")}}const px=Object.freeze({map:null,hash:"",transfer:void 0});var $a,Ha,Qi,Nt,dv,eR;class DA{constructor(){p(this,dv);p(this,$a,!1);p(this,Ha,null);p(this,Qi,null);p(this,Nt,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,t){const s=a(this,Nt).get(e);return s===void 0?t:Object.assign(t,s)}getRawValue(e){return a(this,Nt).get(e)}remove(e){const t=a(this,Nt).get(e);if(t!==void 0&&(t instanceof Re&&a(this,Qi).delete(t.annotationElementId),a(this,Nt).delete(e),a(this,Nt).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function")){for(const s of a(this,Nt).values())if(s instanceof Re)return;this.onAnnotationEditor(null)}}setValue(e,t){const s=a(this,Nt).get(e);let i=!1;if(s!==void 0)for(const[r,o]of Object.entries(t))s[r]!==o&&(i=!0,s[r]=o);else i=!0,a(this,Nt).set(e,t);i&&A(this,dv,eR).call(this),t instanceof Re&&((a(this,Qi)||g(this,Qi,new Map)).set(t.annotationElementId,t),typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(t.constructor._type))}has(e){return a(this,Nt).has(e)}get size(){return a(this,Nt).size}resetModified(){a(this,$a)&&(g(this,$a,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new tR(this)}get serializable(){if(a(this,Nt).size===0)return px;const e=new Map,t=new ZP,s=[],i=Object.create(null);let r=!1;for(const[o,l]of a(this,Nt)){const c=l instanceof Re?l.serialize(!1,i):l;c&&(e.set(o,c),t.update(`${o}:${JSON.stringify(c)}`),r||(r=!!c.bitmap))}if(r)for(const o of e.values())o.bitmap&&s.push(o.bitmap);return e.size>0?{map:e,hash:t.hexdigest(),transfer:s}:px}get editorStats(){let e=null;const t=new Map;let s=0,i=0;for(const r of a(this,Nt).values()){if(!(r instanceof Re)){r.popup&&(r.popup.deleted?i+=1:s+=1);continue}r.isCommentDeleted?i+=1:r.hasEditedComment&&(s+=1);const o=r.telemetryFinalData;if(!o)continue;const{type:l}=o;t.has(l)||t.set(l,Object.getPrototypeOf(r).constructor),e||(e=Object.create(null));const c=e[l]||(e[l]=new Map);for(const[u,h]of Object.entries(o)){if(u==="type")continue;let d=c.get(u);d||(d=new Map,c.set(u,d));const f=d.get(h)??0;d.set(h,f+1)}}if((i>0||s>0)&&(e||(e=Object.create(null)),e.comments={deleted:i,edited:s}),!e)return null;for(const[r,o]of t)e[r]=o.computeTelemetryFinalData(e[r]);return e}resetModifiedIds(){g(this,Ha,null)}updateEditor(e,t){var i;const s=(i=a(this,Qi))==null?void 0:i.get(e);return s?(s.updateFromAnnotationLayer(t),!0):!1}getEditor(e){var t;return((t=a(this,Qi))==null?void 0:t.get(e))||null}get modifiedIds(){if(a(this,Ha))return a(this,Ha);const e=[];if(a(this,Qi))for(const t of a(this,Qi).values())t.serialize()&&e.push(t.annotationElementId);return g(this,Ha,{ids:new Set(e),hash:e.join(",")})}[Symbol.iterator](){return a(this,Nt).entries()}}$a=new WeakMap,Ha=new WeakMap,Qi=new WeakMap,Nt=new WeakMap,dv=new WeakSet,eR=function(){a(this,$a)||(g(this,$a,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var wp;class tR extends DA{constructor(t){super();p(this,wp,void 0);const{map:s,hash:i,transfer:r}=t.serializable,o=structuredClone(s,r?{transfer:r}:null);g(this,wp,{map:o,hash:i,transfer:r})}get print(){_e("Should not call PrintAnnotationStorage.print")}get serializable(){return a(this,wp)}get modifiedIds(){return ie(this,"modifiedIds",{ids:new Set,hash:""})}}wp=new WeakMap;var vu;class KF{constructor({ownerDocument:e=globalThis.document,styleElement:t=null}){p(this,vu,new Set);this._document=e,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const t=this.styleElement.sheet;t.insertRule(e,t.cssRules.length)}clear(){for(const e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),a(this,vu).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:e,disableFontFace:t,_inspectFont:s}){if(!(!e||a(this,vu).has(e.loadedName))){if(ce(!t,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:i,src:r,style:o}=e,l=new FontFace(i,r,o);this.addNativeFontFace(l);try{await l.load(),a(this,vu).add(i),s==null||s(e)}catch{ee(`Cannot load system font: ${e.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(l)}return}_e("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(e){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo){await this.loadSystemFont(e);return}if(this.isFontLoadingAPISupported){const s=e.createNativeFontFace();if(s){this.addNativeFontFace(s);try{await s.loaded}catch(i){throw ee(`Failed to load font '${s.family}': '${i}'.`),e.disableFontFace=!0,i}}return}const t=e.createFontFaceRule();if(t){if(this.insertRule(t),this.isSyncFontLoadingSupported)return;await new Promise(s=>{const i=this._queueLoadingCallback(s);this._prepareFontLoadEvent(e,i)})}}get isFontLoadingAPISupported(){var t;const e=!!((t=this._document)!=null&&t.fonts);return ie(this,"isFontLoadingAPISupported",e)}get isSyncFontLoadingSupported(){return ie(this,"isSyncFontLoadingSupported",rn||Tt.platform.isFirefox)}_queueLoadingCallback(e){function t(){for(ce(!i.done,"completeRequest() cannot be called twice."),i.done=!0;s.length>0&&s[0].done;){const r=s.shift();setTimeout(r.callback,0)}}const{loadingRequests:s}=this,i={done:!1,complete:t,callback:e};return s.push(i),i}get _loadTestFont(){const e=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return ie(this,"_loadTestFont",e)}_prepareFontLoadEvent(e,t){function s(E,C){return E.charCodeAt(C)<<24|E.charCodeAt(C+1)<<16|E.charCodeAt(C+2)<<8|E.charCodeAt(C+3)&255}function i(E,C,T,k){const P=E.substring(0,C),N=E.substring(C+T);return P+k+N}let r,o;const l=this._document.createElement("canvas");l.width=1,l.height=1;const c=l.getContext("2d");let u=0;function h(E,C){if(++u>30){ee("Load test font never loaded."),C();return}if(c.font="30px "+E,c.fillText(".",0,20),c.getImageData(0,0,1,1).data[3]>0){C();return}setTimeout(h.bind(null,E,C))}const d=`lt${Date.now()}${this.loadTestFontId++}`;let f=this._loadTestFont;f=i(f,976,d.length,d);const y=16,w=1482184792;let x=s(f,y);for(r=0,o=d.length-3;r<o;r+=4)x=x-w+s(d,r)|0;r<d.length&&(x=x-w+s(d+"XXX",r)|0),f=i(f,y,4,OF(x));const v=`url(data:font/opentype;base64,${btoa(f)});`,b=`@font-face {font-family:"${d}";src:${v}}`;this.insertRule(b);const S=this._document.createElement("div");S.style.visibility="hidden",S.style.width=S.style.height="10px",S.style.position="absolute",S.style.top=S.style.left="0px";for(const E of[e.loadedName,d]){const C=this._document.createElement("span");C.textContent="Hi",C.style.fontFamily=E,S.append(C)}this._document.body.append(S),h(d,()=>{S.remove(),t.complete()})}}vu=new WeakMap;var ve;class QF{constructor(e,t=null,s,i){p(this,ve,void 0);this.compiledGlyphs=Object.create(null),g(this,ve,e),this._inspectFont=t,s&&Object.assign(this,s),i&&(this.charProcOperatorList=i)}createNativeFontFace(){var t;if(!this.data||this.disableFontFace)return null;let e;if(!this.cssFontInfo)e=new FontFace(this.loadedName,this.data,{});else{const s={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(s.style=`oblique ${this.cssFontInfo.italicAngle}deg`),e=new FontFace(this.cssFontInfo.fontFamily,this.data,s)}return(t=this._inspectFont)==null||t.call(this,this),e}createFontFaceRule(){var s;if(!this.data||this.disableFontFace)return null;const e=`url(data:${this.mimetype};base64,${yP(this.data)});`;let t;if(!this.cssFontInfo)t=`@font-face {font-family:"${this.loadedName}";src:${e}}`;else{let i=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(i+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),t=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${i}src:${e}}`}return(s=this._inspectFont)==null||s.call(this,this,e),t}getPathGenerator(e,t){if(this.compiledGlyphs[t]!==void 0)return this.compiledGlyphs[t];const s=this.loadedName+"_path_"+t;let i;try{i=e.get(s)}catch(o){ee(`getPathGenerator - ignoring character: "${o}".`)}const r=new Path2D(i||"");return this.fontExtraProperties||e.delete(s),this.compiledGlyphs[t]=r}get black(){return a(this,ve).black}get bold(){return a(this,ve).bold}get disableFontFace(){return a(this,ve).disableFontFace??!1}get fontExtraProperties(){return a(this,ve).fontExtraProperties??!1}get isInvalidPDFjsFont(){return a(this,ve).isInvalidPDFjsFont}get isType3Font(){return a(this,ve).isType3Font}get italic(){return a(this,ve).italic}get missingFile(){return a(this,ve).missingFile}get remeasure(){return a(this,ve).remeasure}get vertical(){return a(this,ve).vertical}get ascent(){return a(this,ve).ascent}get defaultWidth(){return a(this,ve).defaultWidth}get descent(){return a(this,ve).descent}get bbox(){return a(this,ve).bbox}get fontMatrix(){return a(this,ve).fontMatrix}get fallbackName(){return a(this,ve).fallbackName}get loadedName(){return a(this,ve).loadedName}get mimetype(){return a(this,ve).mimetype}get name(){return a(this,ve).name}get data(){return a(this,ve).data}clearData(){a(this,ve).clearData()}get cssFontInfo(){return a(this,ve).cssFontInfo}get systemFontInfo(){return a(this,ve).systemFontInfo}get defaultVMetrics(){return a(this,ve).defaultVMetrics}}ve=new WeakMap;function JF(n){if(n instanceof URL)return n.href;if(typeof n=="string"){if(rn)return n;const e=URL.parse(n,window.location);if(e)return e.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function ZF(n){if(rn&&typeof Buffer<"u"&&n instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(n instanceof Uint8Array&&n.byteLength===n.buffer.byteLength)return n;if(typeof n=="string")return ym(n);if(n instanceof ArrayBuffer||ArrayBuffer.isView(n)||typeof n=="object"&&!isNaN(n==null?void 0:n.length))return new Uint8Array(n);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function Wm(n){if(typeof n!="string")return null;if(n.endsWith("/"))return n;throw new Error(`Invalid factory url: "${n}" must include trailing slash.`)}const gx=n=>typeof n=="object"&&Number.isInteger(n==null?void 0:n.num)&&n.num>=0&&Number.isInteger(n==null?void 0:n.gen)&&n.gen>=0,eO=n=>typeof n=="object"&&typeof(n==null?void 0:n.name)=="string",nR=zF.bind(null,gx,eO);var Ji,fv;class tO{constructor(){p(this,Ji,new Map);p(this,fv,Promise.resolve())}postMessage(e,t){const s={data:structuredClone(e,t?{transfer:t}:null)};a(this,fv).then(()=>{for(const[i]of a(this,Ji))i.call(this,s)})}addEventListener(e,t,s=null){let i=null;if((s==null?void 0:s.signal)instanceof AbortSignal){const{signal:r}=s;if(r.aborted){ee("LoopbackPort - cannot use an `aborted` signal.");return}const o=()=>this.removeEventListener(e,t);i=()=>r.removeEventListener("abort",o),r.addEventListener("abort",o)}a(this,Ji).set(t,i)}removeEventListener(e,t){const s=a(this,Ji).get(t);s==null||s(),a(this,Ji).delete(t)}terminate(){for(const[,e]of a(this,Ji))e==null||e();a(this,Ji).clear()}}Ji=new WeakMap,fv=new WeakMap;const Gm={DATA:1,ERROR:2},it={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function z_(){}function dn(n){if(n instanceof Lr||n instanceof S0||n instanceof M_||n instanceof _f||n instanceof U1)return n;switch(n instanceof Error||typeof n=="object"&&n!==null||_e('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),n.name){case"AbortException":return new Lr(n.message);case"InvalidPDFException":return new S0(n.message);case"PasswordException":return new M_(n.message,n.code);case"ResponseException":return new _f(n.message,n.status,n.missing);case"UnknownErrorException":return new U1(n.message,n.details)}return new U1(n.message,n.toString())}var wu,pv,sR,gv,iR,mv,rR,bu,Ay;class Md{constructor(e,t,s){p(this,pv);p(this,gv);p(this,mv);p(this,bu);p(this,wu,new AbortController);this.sourceName=e,this.targetName=t,this.comObj=s,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),s.addEventListener("message",A(this,pv,sR).bind(this),{signal:a(this,wu).signal})}on(e,t){const s=this.actionHandler;if(s[e])throw new Error(`There is already an actionName called "${e}"`);s[e]=t}send(e,t,s){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:t},s)}sendWithPromise(e,t,s){const i=this.callbackId++,r=Promise.withResolvers();this.callbackCapabilities[i]=r;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:i,data:t},s)}catch(o){r.reject(o)}return r.promise}sendWithStream(e,t,s,i){const r=this.streamId++,o=this.sourceName,l=this.targetName,c=this.comObj;return new ReadableStream({start:u=>{const h=Promise.withResolvers();return this.streamControllers[r]={controller:u,startCall:h,pullCall:null,cancelCall:null,isClosed:!1},c.postMessage({sourceName:o,targetName:l,action:e,streamId:r,data:t,desiredSize:u.desiredSize},i),h.promise},pull:u=>{const h=Promise.withResolvers();return this.streamControllers[r].pullCall=h,c.postMessage({sourceName:o,targetName:l,stream:it.PULL,streamId:r,desiredSize:u.desiredSize}),h.promise},cancel:u=>{ce(u instanceof Error,"cancel must have a valid reason");const h=Promise.withResolvers();return this.streamControllers[r].cancelCall=h,this.streamControllers[r].isClosed=!0,c.postMessage({sourceName:o,targetName:l,stream:it.CANCEL,streamId:r,reason:dn(u)}),h.promise}},s)}destroy(){var e;(e=a(this,wu))==null||e.abort(),g(this,wu,null)}}wu=new WeakMap,pv=new WeakSet,sR=function({data:e}){if(e.targetName!==this.sourceName)return;if(e.stream){A(this,mv,rR).call(this,e);return}if(e.callback){const s=e.callbackId,i=this.callbackCapabilities[s];if(!i)throw new Error(`Cannot resolve callback ${s}`);if(delete this.callbackCapabilities[s],e.callback===Gm.DATA)i.resolve(e.data);else if(e.callback===Gm.ERROR)i.reject(dn(e.reason));else throw new Error("Unexpected callback case");return}const t=this.actionHandler[e.action];if(!t)throw new Error(`Unknown action from worker: ${e.action}`);if(e.callbackId){const s=this.sourceName,i=e.sourceName,r=this.comObj;Promise.try(t,e.data).then(function(o){r.postMessage({sourceName:s,targetName:i,callback:Gm.DATA,callbackId:e.callbackId,data:o})},function(o){r.postMessage({sourceName:s,targetName:i,callback:Gm.ERROR,callbackId:e.callbackId,reason:dn(o)})});return}if(e.streamId){A(this,gv,iR).call(this,e);return}t(e.data)},gv=new WeakSet,iR=function(e){const t=e.streamId,s=this.sourceName,i=e.sourceName,r=this.comObj,o=this,l=this.actionHandler[e.action],c={enqueue(u,h=1,d){if(this.isCancelled)return;const f=this.desiredSize;this.desiredSize-=h,f>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),r.postMessage({sourceName:s,targetName:i,stream:it.ENQUEUE,streamId:t,chunk:u},d)},close(){this.isCancelled||(this.isCancelled=!0,r.postMessage({sourceName:s,targetName:i,stream:it.CLOSE,streamId:t}),delete o.streamSinks[t])},error(u){ce(u instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,r.postMessage({sourceName:s,targetName:i,stream:it.ERROR,streamId:t,reason:dn(u)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};c.sinkCapability.resolve(),c.ready=c.sinkCapability.promise,this.streamSinks[t]=c,Promise.try(l,e.data,c).then(function(){r.postMessage({sourceName:s,targetName:i,stream:it.START_COMPLETE,streamId:t,success:!0})},function(u){r.postMessage({sourceName:s,targetName:i,stream:it.START_COMPLETE,streamId:t,reason:dn(u)})})},mv=new WeakSet,rR=function(e){const t=e.streamId,s=this.sourceName,i=e.sourceName,r=this.comObj,o=this.streamControllers[t],l=this.streamSinks[t];switch(e.stream){case it.START_COMPLETE:e.success?o.startCall.resolve():o.startCall.reject(dn(e.reason));break;case it.PULL_COMPLETE:e.success?o.pullCall.resolve():o.pullCall.reject(dn(e.reason));break;case it.PULL:if(!l){r.postMessage({sourceName:s,targetName:i,stream:it.PULL_COMPLETE,streamId:t,success:!0});break}l.desiredSize<=0&&e.desiredSize>0&&l.sinkCapability.resolve(),l.desiredSize=e.desiredSize,Promise.try(l.onPull||z_).then(function(){r.postMessage({sourceName:s,targetName:i,stream:it.PULL_COMPLETE,streamId:t,success:!0})},function(u){r.postMessage({sourceName:s,targetName:i,stream:it.PULL_COMPLETE,streamId:t,reason:dn(u)})});break;case it.ENQUEUE:if(ce(o,"enqueue should have stream controller"),o.isClosed)break;o.controller.enqueue(e.chunk);break;case it.CLOSE:if(ce(o,"close should have stream controller"),o.isClosed)break;o.isClosed=!0,o.controller.close(),A(this,bu,Ay).call(this,o,t);break;case it.ERROR:ce(o,"error should have stream controller"),o.controller.error(dn(e.reason)),A(this,bu,Ay).call(this,o,t);break;case it.CANCEL_COMPLETE:e.success?o.cancelCall.resolve():o.cancelCall.reject(dn(e.reason)),A(this,bu,Ay).call(this,o,t);break;case it.CANCEL:if(!l)break;const c=dn(e.reason);Promise.try(l.onCancel||z_,c).then(function(){r.postMessage({sourceName:s,targetName:i,stream:it.CANCEL_COMPLETE,streamId:t,success:!0})},function(u){r.postMessage({sourceName:s,targetName:i,stream:it.CANCEL_COMPLETE,streamId:t,reason:dn(u)})}),l.sinkCapability.reject(c),l.isCancelled=!0,delete this.streamSinks[t];break;default:throw new Error("Unexpected stream case")}},bu=new WeakSet,Ay=async function(e,t){var s,i,r;await Promise.allSettled([(s=e.startCall)==null?void 0:s.promise,(i=e.pullCall)==null?void 0:i.promise,(r=e.cancelCall)==null?void 0:r.promise]),delete this.streamControllers[t]};var bp;class oR{constructor({enableHWA:e=!1}){p(this,bp,!1);g(this,bp,e)}create(e,t){if(e<=0||t<=0)throw new Error("Invalid canvas size");const s=this._createCanvas(e,t);return{canvas:s,context:s.getContext("2d",{willReadFrequently:!a(this,bp)})}}reset(e,t,s){if(!e.canvas)throw new Error("Canvas is not specified");if(t<=0||s<=0)throw new Error("Invalid canvas size");e.canvas.width=t,e.canvas.height=s}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,t){_e("Abstract method `_createCanvas` called.")}}bp=new WeakMap;class nO extends oR{constructor({ownerDocument:e=globalThis.document,enableHWA:t=!1}){super({enableHWA:t}),this._document=e}_createCanvas(e,t){const s=this._document.createElement("canvas");return s.width=e,s.height=t,s}}class aR{constructor({baseUrl:e=null,isCompressed:t=!0}){this.baseUrl=e,this.isCompressed=t}async fetch({name:e}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!e)throw new Error("CMap name must be specified.");const t=this.baseUrl+e+(this.isCompressed?".bcmap":"");return this._fetch(t).then(s=>({cMapData:s,isCompressed:this.isCompressed})).catch(s=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${t}`)})}async _fetch(e){_e("Abstract method `_fetch` called.")}}class $_ extends aR{async _fetch(e){const t=await ld(e,this.isCompressed?"arraybuffer":"text");return t instanceof ArrayBuffer?new Uint8Array(t):ym(t)}}class lR{addFilter(e){return"none"}addHCMFilter(e,t){return"none"}addAlphaFilter(e){return"none"}addLuminosityFilter(e){return"none"}addHighlightHCMFilter(e,t,s,i,r){return"none"}destroy(e=!1){}}var Va,xu,Zi,er,Vt,Wa,Ga,vt,zt,qa,Dd,ao,gc,Su,Ey,lo,mc,yv,cR,xp,mx,co,yc,Xa,Id,Ya,Fd,Sp,yx,Ka,Od;class sO extends lR{constructor({docId:t,ownerDocument:s=globalThis.document}){super();p(this,vt);p(this,qa);p(this,ao);p(this,Su);p(this,lo);p(this,yv);p(this,xp);p(this,co);p(this,Xa);p(this,Ya);p(this,Sp);p(this,Ka);p(this,Va,void 0);p(this,xu,void 0);p(this,Zi,void 0);p(this,er,void 0);p(this,Vt,void 0);p(this,Wa,void 0);p(this,Ga,0);g(this,er,t),g(this,Vt,s)}addFilter(t){if(!t)return"none";let s=a(this,vt,zt).get(t);if(s)return s;const[i,r,o]=A(this,Su,Ey).call(this,t),l=t.length===1?i:`${i}${r}${o}`;if(s=a(this,vt,zt).get(l),s)return a(this,vt,zt).set(t,s),s;const c=`g_${a(this,er)}_transfer_map_${ct(this,Ga)._++}`,u=A(this,lo,mc).call(this,c);a(this,vt,zt).set(t,u),a(this,vt,zt).set(l,u);const h=A(this,co,yc).call(this,c);return A(this,Ya,Fd).call(this,i,r,o,h),u}addHCMFilter(t,s){var y;const i=`${t}-${s}`,r="base";let o=a(this,qa,Dd).get(r);if((o==null?void 0:o.key)===i||(o?((y=o.filter)==null||y.remove(),o.key=i,o.url="none",o.filter=null):(o={key:i,url:"none",filter:null},a(this,qa,Dd).set(r,o)),!t||!s))return o.url;const l=A(this,Ka,Od).call(this,t);t=V.makeHexColor(...l);const c=A(this,Ka,Od).call(this,s);if(s=V.makeHexColor(...c),a(this,ao,gc).style.color="",t==="#000000"&&s==="#ffffff"||t===s)return o.url;const u=new Array(256);for(let w=0;w<=255;w++){const x=w/255;u[w]=x<=.03928?x/12.92:((x+.055)/1.055)**2.4}const h=u.join(","),d=`g_${a(this,er)}_hcm_filter`,f=o.filter=A(this,co,yc).call(this,d);A(this,Ya,Fd).call(this,h,h,h,f),A(this,xp,mx).call(this,f);const m=(w,x)=>{const v=l[w]/255,b=c[w]/255,S=new Array(x+1);for(let E=0;E<=x;E++)S[E]=v+E/x*(b-v);return S.join(",")};return A(this,Ya,Fd).call(this,m(0,5),m(1,5),m(2,5),f),o.url=A(this,lo,mc).call(this,d),o.url}addAlphaFilter(t){let s=a(this,vt,zt).get(t);if(s)return s;const[i]=A(this,Su,Ey).call(this,[t]),r=`alpha_${i}`;if(s=a(this,vt,zt).get(r),s)return a(this,vt,zt).set(t,s),s;const o=`g_${a(this,er)}_alpha_map_${ct(this,Ga)._++}`,l=A(this,lo,mc).call(this,o);a(this,vt,zt).set(t,l),a(this,vt,zt).set(r,l);const c=A(this,co,yc).call(this,o);return A(this,Sp,yx).call(this,i,c),l}addLuminosityFilter(t){let s=a(this,vt,zt).get(t||"luminosity");if(s)return s;let i,r;if(t?([i]=A(this,Su,Ey).call(this,[t]),r=`luminosity_${i}`):r="luminosity",s=a(this,vt,zt).get(r),s)return a(this,vt,zt).set(t,s),s;const o=`g_${a(this,er)}_luminosity_map_${ct(this,Ga)._++}`,l=A(this,lo,mc).call(this,o);a(this,vt,zt).set(t,l),a(this,vt,zt).set(r,l);const c=A(this,co,yc).call(this,o);return A(this,yv,cR).call(this,c),t&&A(this,Sp,yx).call(this,i,c),l}addHighlightHCMFilter(t,s,i,r,o){var b;const l=`${s}-${i}-${r}-${o}`;let c=a(this,qa,Dd).get(t);if((c==null?void 0:c.key)===l||(c?((b=c.filter)==null||b.remove(),c.key=l,c.url="none",c.filter=null):(c={key:l,url:"none",filter:null},a(this,qa,Dd).set(t,c)),!s||!i))return c.url;const[u,h]=[s,i].map(A(this,Ka,Od).bind(this));let d=Math.round(.2126*u[0]+.7152*u[1]+.0722*u[2]),f=Math.round(.2126*h[0]+.7152*h[1]+.0722*h[2]),[m,y]=[r,o].map(A(this,Ka,Od).bind(this));f<d&&([d,f,m,y]=[f,d,y,m]),a(this,ao,gc).style.color="";const w=(S,E,C)=>{const T=new Array(256),k=(f-d)/C,P=S/255,N=(E-S)/(255*C);let M=0;for(let I=0;I<=C;I++){const j=Math.round(d+I*k),H=P+I*N;for(let z=M;z<=j;z++)T[z]=H;M=j+1}for(let I=M;I<256;I++)T[I]=T[M-1];return T.join(",")},x=`g_${a(this,er)}_hcm_${t}_filter`,v=c.filter=A(this,co,yc).call(this,x);return A(this,xp,mx).call(this,v),A(this,Ya,Fd).call(this,w(m[0],y[0],5),w(m[1],y[1],5),w(m[2],y[2],5),v),c.url=A(this,lo,mc).call(this,x),c.url}destroy(t=!1){var s,i,r,o;t&&((s=a(this,Wa))!=null&&s.size)||((i=a(this,Zi))==null||i.parentNode.parentNode.remove(),g(this,Zi,null),(r=a(this,xu))==null||r.clear(),g(this,xu,null),(o=a(this,Wa))==null||o.clear(),g(this,Wa,null),g(this,Ga,0))}}Va=new WeakMap,xu=new WeakMap,Zi=new WeakMap,er=new WeakMap,Vt=new WeakMap,Wa=new WeakMap,Ga=new WeakMap,vt=new WeakSet,zt=function(){return a(this,xu)||g(this,xu,new Map)},qa=new WeakSet,Dd=function(){return a(this,Wa)||g(this,Wa,new Map)},ao=new WeakSet,gc=function(){if(!a(this,Zi)){const t=a(this,Vt).createElement("div"),{style:s}=t;s.visibility="hidden",s.contain="strict",s.width=s.height=0,s.position="absolute",s.top=s.left=0,s.zIndex=-1;const i=a(this,Vt).createElementNS(Di,"svg");i.setAttribute("width",0),i.setAttribute("height",0),g(this,Zi,a(this,Vt).createElementNS(Di,"defs")),t.append(i),i.append(a(this,Zi)),a(this,Vt).body.append(t)}return a(this,Zi)},Su=new WeakSet,Ey=function(t){if(t.length===1){const u=t[0],h=new Array(256);for(let f=0;f<256;f++)h[f]=u[f]/255;const d=h.join(",");return[d,d,d]}const[s,i,r]=t,o=new Array(256),l=new Array(256),c=new Array(256);for(let u=0;u<256;u++)o[u]=s[u]/255,l[u]=i[u]/255,c[u]=r[u]/255;return[o.join(","),l.join(","),c.join(",")]},lo=new WeakSet,mc=function(t){if(a(this,Va)===void 0){g(this,Va,"");const s=a(this,Vt).URL;s!==a(this,Vt).baseURI&&(wm(s)?ee('#createUrl: ignore "data:"-URL for performance reasons.'):g(this,Va,PA(s,"")))}return`url(${a(this,Va)}#${t})`},yv=new WeakSet,cR=function(t){const s=a(this,Vt).createElementNS(Di,"feColorMatrix");s.setAttribute("type","matrix"),s.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),t.append(s)},xp=new WeakSet,mx=function(t){const s=a(this,Vt).createElementNS(Di,"feColorMatrix");s.setAttribute("type","matrix"),s.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(s)},co=new WeakSet,yc=function(t){const s=a(this,Vt).createElementNS(Di,"filter");return s.setAttribute("color-interpolation-filters","sRGB"),s.setAttribute("id",t),a(this,ao,gc).append(s),s},Xa=new WeakSet,Id=function(t,s,i){const r=a(this,Vt).createElementNS(Di,s);r.setAttribute("type","discrete"),r.setAttribute("tableValues",i),t.append(r)},Ya=new WeakSet,Fd=function(t,s,i,r){const o=a(this,Vt).createElementNS(Di,"feComponentTransfer");r.append(o),A(this,Xa,Id).call(this,o,"feFuncR",t),A(this,Xa,Id).call(this,o,"feFuncG",s),A(this,Xa,Id).call(this,o,"feFuncB",i)},Sp=new WeakSet,yx=function(t,s){const i=a(this,Vt).createElementNS(Di,"feComponentTransfer");s.append(i),A(this,Xa,Id).call(this,i,"feFuncA",t)},Ka=new WeakSet,Od=function(t){return a(this,ao,gc).style.color=t,cd(getComputedStyle(a(this,ao,gc)).getPropertyValue("color"))};class uR{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!e)throw new Error("Font filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(s=>{throw new Error(`Unable to load font data at: ${t}`)})}async _fetch(e){_e("Abstract method `_fetch` called.")}}class H_ extends uR{async _fetch(e){const t=await ld(e,"arraybuffer");return new Uint8Array(t)}}class hR{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!e)throw new Error("Wasm filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(s=>{throw new Error(`Unable to load wasm data at: ${t}`)})}async _fetch(e){_e("Abstract method `_fetch` called.")}}class V_ extends hR{async _fetch(e){const t=await ld(e,"arraybuffer");return new Uint8Array(t)}}rn&&ee("Please use the `legacy` build in Node.js environments.");async function IA(n){const t=await process.getBuiltinModule("fs").promises.readFile(n);return new Uint8Array(t)}class iO extends lR{}class rO extends oR{_createCanvas(e,t){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(e,t)}}class oO extends aR{async _fetch(e){return IA(e)}}class aO extends uR{async _fetch(e){return IA(e)}}class lO extends hR{async _fetch(e){return IA(e)}}const dc="__forcedDependency",{floor:W_,ceil:G_}=Math;function qm(n,e,t,s,i,r){n[e*4+0]=Math.min(n[e*4+0],t),n[e*4+1]=Math.min(n[e*4+1],s),n[e*4+2]=Math.max(n[e*4+2],i),n[e*4+3]=Math.max(n[e*4+3],r)}const vx=new Uint32Array(new Uint8Array([255,255,0,0]).buffer)[0];var Au,uo;class cO{constructor(e,t){p(this,Au,void 0);p(this,uo,void 0);g(this,Au,e),g(this,uo,t)}get length(){return a(this,Au).length}isEmpty(e){return a(this,Au)[e]===vx}minX(e){return a(this,uo)[e*4+0]/256}minY(e){return a(this,uo)[e*4+1]/256}maxX(e){return(a(this,uo)[e*4+2]+1)/256}maxY(e){return(a(this,uo)[e*4+3]+1)/256}}Au=new WeakMap,uo=new WeakMap;const Xm=(n,e)=>{if(!n)return;let t=n.get(e);return t||(t={dependencies:new Set,isRenderingOperation:!1},n.set(e,t)),t};var gn,mn,Qa,Ds,Ja,tr,me,we,nr,yn,Ap,Eu,Za,el,sr,Wt,fi,Ep,wx;class uO{constructor(e,t,s=!1){p(this,Ep);p(this,gn,{__proto__:null});p(this,mn,{__proto__:null,transform:[],moveText:[],sameLineText:[],[dc]:[]});p(this,Qa,new Map);p(this,Ds,[]);p(this,Ja,[]);p(this,tr,[[1,0,0,1,0,0]]);p(this,me,[-1/0,-1/0,1/0,1/0]);p(this,we,new Float64Array([1/0,1/0,-1/0,-1/0]));p(this,nr,-1);p(this,yn,new Set);p(this,Ap,new Map);p(this,Eu,new Map);p(this,Za,void 0);p(this,el,void 0);p(this,sr,void 0);p(this,Wt,void 0);p(this,fi,void 0);g(this,Za,e.width),g(this,el,e.height),A(this,Ep,wx).call(this,t),s&&g(this,fi,new Map)}growOperationsCount(e){e>=a(this,Wt).length&&A(this,Ep,wx).call(this,e,a(this,Wt))}save(e){return g(this,gn,{__proto__:a(this,gn)}),g(this,mn,{__proto__:a(this,mn),transform:{__proto__:a(this,mn).transform},moveText:{__proto__:a(this,mn).moveText},sameLineText:{__proto__:a(this,mn).sameLineText},[dc]:{__proto__:a(this,mn)[dc]}}),g(this,me,{__proto__:a(this,me)}),a(this,Ds).push(e),this}restore(e){var i;const t=Object.getPrototypeOf(a(this,gn));if(t===null)return this;g(this,gn,t),g(this,mn,Object.getPrototypeOf(a(this,mn))),g(this,me,Object.getPrototypeOf(a(this,me)));const s=a(this,Ds).pop();return s!==void 0&&((i=Xm(a(this,fi),e))==null||i.dependencies.add(s),a(this,Wt)[e]=a(this,Wt)[s]),this}recordOpenMarker(e){return a(this,Ds).push(e),this}getOpenMarker(){return a(this,Ds).length===0?null:a(this,Ds).at(-1)}recordCloseMarker(e){var s;const t=a(this,Ds).pop();return t!==void 0&&((s=Xm(a(this,fi),e))==null||s.dependencies.add(t),a(this,Wt)[e]=a(this,Wt)[t]),this}beginMarkedContent(e){return a(this,Ja).push(e),this}endMarkedContent(e){var s;const t=a(this,Ja).pop();return t!==void 0&&((s=Xm(a(this,fi),e))==null||s.dependencies.add(t),a(this,Wt)[e]=a(this,Wt)[t]),this}pushBaseTransform(e){return a(this,tr).push(V.multiplyByDOMMatrix(a(this,tr).at(-1),e.getTransform())),this}popBaseTransform(){return a(this,tr).length>1&&a(this,tr).pop(),this}recordSimpleData(e,t){return a(this,gn)[e]=t,this}recordIncrementalData(e,t){return a(this,mn)[e].push(t),this}resetIncrementalData(e,t){return a(this,mn)[e].length=0,this}recordNamedData(e,t){return a(this,Qa).set(e,t),this}recordSimpleDataFromNamed(e,t,s){a(this,gn)[e]=a(this,Qa).get(t)??s}recordFutureForcedDependency(e,t){return this.recordIncrementalData(dc,t),this}inheritSimpleDataAsFutureForcedDependencies(e){for(const t of e)t in a(this,gn)&&this.recordFutureForcedDependency(t,a(this,gn)[t]);return this}inheritPendingDependenciesAsFutureForcedDependencies(){for(const e of a(this,yn))this.recordFutureForcedDependency(dc,e);return this}resetBBox(e){return a(this,nr)!==e&&(g(this,nr,e),a(this,we)[0]=1/0,a(this,we)[1]=1/0,a(this,we)[2]=-1/0,a(this,we)[3]=-1/0),this}recordClipBox(e,t,s,i,r,o){const l=V.multiplyByDOMMatrix(a(this,tr).at(-1),t.getTransform()),c=[1/0,1/0,-1/0,-1/0];V.axialAlignedBoundingBox([s,r,i,o],l,c);const u=V.intersect(a(this,me),c);return u?(a(this,me)[0]=u[0],a(this,me)[1]=u[1],a(this,me)[2]=u[2],a(this,me)[3]=u[3]):(a(this,me)[0]=a(this,me)[1]=1/0,a(this,me)[2]=a(this,me)[3]=-1/0),this}recordBBox(e,t,s,i,r,o){const l=a(this,me);if(l[0]===1/0)return this;const c=V.multiplyByDOMMatrix(a(this,tr).at(-1),t.getTransform());if(l[0]===-1/0)return V.axialAlignedBoundingBox([s,r,i,o],c,a(this,we)),this;const u=[1/0,1/0,-1/0,-1/0];return V.axialAlignedBoundingBox([s,r,i,o],c,u),a(this,we)[0]=Math.min(a(this,we)[0],Math.max(u[0],l[0])),a(this,we)[1]=Math.min(a(this,we)[1],Math.max(u[1],l[1])),a(this,we)[2]=Math.max(a(this,we)[2],Math.min(u[2],l[2])),a(this,we)[3]=Math.max(a(this,we)[3],Math.min(u[3],l[3])),this}recordCharacterBBox(e,t,s,i=1,r=0,o=0,l){const c=s.bbox;let u,h;if(c&&(u=c[2]!==c[0]&&c[3]!==c[1]&&a(this,Eu).get(s),u!==!1&&(h=[0,0,0,0],V.axialAlignedBoundingBox(c,s.fontMatrix,h),(i!==1||r!==0||o!==0)&&V.scaleMinMax([i,0,0,-i,r,o],h),u)))return this.recordBBox(e,t,h[0],h[2],h[1],h[3]);if(!l)return this.recordFullPageBBox(e);const d=l();return c&&h&&u===void 0&&(u=h[0]<=r-d.actualBoundingBoxLeft&&h[2]>=r+d.actualBoundingBoxRight&&h[1]<=o-d.actualBoundingBoxAscent&&h[3]>=o+d.actualBoundingBoxDescent,a(this,Eu).set(s,u),u)?this.recordBBox(e,t,h[0],h[2],h[1],h[3]):this.recordBBox(e,t,r-d.actualBoundingBoxLeft,r+d.actualBoundingBoxRight,o-d.actualBoundingBoxAscent,o+d.actualBoundingBoxDescent)}recordFullPageBBox(e){return a(this,we)[0]=Math.max(0,a(this,me)[0]),a(this,we)[1]=Math.max(0,a(this,me)[1]),a(this,we)[2]=Math.min(a(this,Za),a(this,me)[2]),a(this,we)[3]=Math.min(a(this,el),a(this,me)[3]),this}getSimpleIndex(e){return a(this,gn)[e]}recordDependencies(e,t){const s=a(this,yn),i=a(this,gn),r=a(this,mn);for(const o of t)o in a(this,gn)?s.add(i[o]):o in r&&r[o].forEach(s.add,s);return this}recordNamedDependency(e,t){return a(this,Qa).has(t)&&a(this,yn).add(a(this,Qa).get(t)),this}recordOperation(e,t=!1){if(this.recordDependencies(e,[dc]),a(this,fi)){const s=Xm(a(this,fi),e),{dependencies:i}=s;a(this,yn).forEach(i.add,i),a(this,Ds).forEach(i.add,i),a(this,Ja).forEach(i.add,i),i.delete(e),s.isRenderingOperation=!0}if(a(this,nr)===e){const s=W_(a(this,we)[0]*256/a(this,Za)),i=W_(a(this,we)[1]*256/a(this,el)),r=G_(a(this,we)[2]*256/a(this,Za)),o=G_(a(this,we)[3]*256/a(this,el));qm(a(this,sr),e,s,i,r,o);for(const l of a(this,yn))l!==e&&qm(a(this,sr),l,s,i,r,o);for(const l of a(this,Ds))l!==e&&qm(a(this,sr),l,s,i,r,o);for(const l of a(this,Ja))l!==e&&qm(a(this,sr),l,s,i,r,o);t||(a(this,yn).clear(),g(this,nr,-1))}return this}recordShowTextOperation(e,t=!1){const s=Array.from(a(this,yn));this.recordOperation(e,t),this.recordIncrementalData("sameLineText",e);for(const i of s)this.recordIncrementalData("sameLineText",i);return this}bboxToClipBoxDropOperation(e,t=!1){return a(this,nr)===e&&(g(this,nr,-1),a(this,me)[0]=Math.max(a(this,me)[0],a(this,we)[0]),a(this,me)[1]=Math.max(a(this,me)[1],a(this,we)[1]),a(this,me)[2]=Math.min(a(this,me)[2],a(this,we)[2]),a(this,me)[3]=Math.min(a(this,me)[3],a(this,we)[3]),t||a(this,yn).clear()),this}_takePendingDependencies(){const e=a(this,yn);return g(this,yn,new Set),e}_extractOperation(e){const t=a(this,Ap).get(e);return a(this,Ap).delete(e),t}_pushPendingDependencies(e){for(const t of e)a(this,yn).add(t)}take(){return a(this,Eu).clear(),new cO(a(this,Wt),a(this,sr))}takeDebugMetadata(){return a(this,fi)}}gn=new WeakMap,mn=new WeakMap,Qa=new WeakMap,Ds=new WeakMap,Ja=new WeakMap,tr=new WeakMap,me=new WeakMap,we=new WeakMap,nr=new WeakMap,yn=new WeakMap,Ap=new WeakMap,Eu=new WeakMap,Za=new WeakMap,el=new WeakMap,sr=new WeakMap,Wt=new WeakMap,fi=new WeakMap,Ep=new WeakSet,wx=function(e,t){const s=new ArrayBuffer(e*4);g(this,sr,new Uint8ClampedArray(s)),g(this,Wt,new Uint32Array(s)),t&&t.length>0?(a(this,Wt).set(t),a(this,Wt).fill(vx,t.length)):a(this,Wt).fill(vx)};var Ae,Ke,Is,_u,Cu;const GA=class GA{constructor(e,t,s){p(this,Ae,void 0);p(this,Ke,void 0);p(this,Is,void 0);p(this,_u,0);p(this,Cu,0);if(e instanceof GA&&a(e,Is)===!!s)return e;g(this,Ae,e),g(this,Ke,t),g(this,Is,!!s)}growOperationsCount(){throw new Error("Unreachable")}save(e){return ct(this,Cu)._++,a(this,Ae).save(a(this,Ke)),this}restore(e){return a(this,Cu)>0&&(a(this,Ae).restore(a(this,Ke)),ct(this,Cu)._--),this}recordOpenMarker(e){return ct(this,_u)._++,this}getOpenMarker(){return a(this,_u)>0?a(this,Ke):a(this,Ae).getOpenMarker()}recordCloseMarker(e){return ct(this,_u)._--,this}beginMarkedContent(e){return this}endMarkedContent(e){return this}pushBaseTransform(e){return a(this,Ae).pushBaseTransform(e),this}popBaseTransform(){return a(this,Ae).popBaseTransform(),this}recordSimpleData(e,t){return a(this,Ae).recordSimpleData(e,a(this,Ke)),this}recordIncrementalData(e,t){return a(this,Ae).recordIncrementalData(e,a(this,Ke)),this}resetIncrementalData(e,t){return a(this,Ae).resetIncrementalData(e,a(this,Ke)),this}recordNamedData(e,t){return this}recordSimpleDataFromNamed(e,t,s){return a(this,Ae).recordSimpleDataFromNamed(e,t,a(this,Ke)),this}recordFutureForcedDependency(e,t){return a(this,Ae).recordFutureForcedDependency(e,a(this,Ke)),this}inheritSimpleDataAsFutureForcedDependencies(e){return a(this,Ae).inheritSimpleDataAsFutureForcedDependencies(e),this}inheritPendingDependenciesAsFutureForcedDependencies(){return a(this,Ae).inheritPendingDependenciesAsFutureForcedDependencies(),this}resetBBox(e){return a(this,Is)||a(this,Ae).resetBBox(a(this,Ke)),this}recordClipBox(e,t,s,i,r,o){return a(this,Is)||a(this,Ae).recordClipBox(a(this,Ke),t,s,i,r,o),this}recordBBox(e,t,s,i,r,o){return a(this,Is)||a(this,Ae).recordBBox(a(this,Ke),t,s,i,r,o),this}recordCharacterBBox(e,t,s,i,r,o,l){return a(this,Is)||a(this,Ae).recordCharacterBBox(a(this,Ke),t,s,i,r,o,l),this}recordFullPageBBox(e){return a(this,Is)||a(this,Ae).recordFullPageBBox(a(this,Ke)),this}getSimpleIndex(e){return a(this,Ae).getSimpleIndex(e)}recordDependencies(e,t){return a(this,Ae).recordDependencies(a(this,Ke),t),this}recordNamedDependency(e,t){return a(this,Ae).recordNamedDependency(a(this,Ke),t),this}recordOperation(e){return a(this,Ae).recordOperation(a(this,Ke),!0),this}recordShowTextOperation(e){return a(this,Ae).recordShowTextOperation(a(this,Ke),!0),this}bboxToClipBoxDropOperation(e){return a(this,Is)||a(this,Ae).bboxToClipBoxDropOperation(a(this,Ke),!0),this}take(){throw new Error("Unreachable")}takeDebugMetadata(){throw new Error("Unreachable")}};Ae=new WeakMap,Ke=new WeakMap,Is=new WeakMap,_u=new WeakMap,Cu=new WeakMap;let _0=GA;const os={stroke:["path","transform","filter","strokeColor","strokeAlpha","lineWidth","lineCap","lineJoin","miterLimit","dash"],fill:["path","transform","filter","fillColor","fillAlpha","globalCompositeOperation","SMask"],imageXObject:["transform","SMask","filter","fillAlpha","strokeAlpha","globalCompositeOperation"],rawFillPath:["filter","fillColor","fillAlpha"],showText:["transform","leading","charSpacing","wordSpacing","hScale","textRise","moveText","textMatrix","font","fontObj","filter","fillColor","textRenderingMode","SMask","fillAlpha","strokeAlpha","globalCompositeOperation","sameLineText"],transform:["transform"],transformAndFill:["transform","fillColor"]},Ft={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function bx(n,e){if(!e)return;const t=e[2]-e[0],s=e[3]-e[1],i=new Path2D;i.rect(e[0],e[1],t,s),n.clip(i)}class FA{isModifyingCurrentTransform(){return!1}getPattern(){_e("Abstract method `getPattern` called.")}}class hO extends FA{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}_createGradient(e){let t;this._type==="axial"?t=e.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(t=e.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const s of this._colorStops)t.addColorStop(s[0],s[1]);return t}getPattern(e,t,s,i){let r;if(i===Ft.STROKE||i===Ft.FILL){const o=t.current.getClippedPathBoundingBox(i,He(e))||[0,0,0,0],l=Math.ceil(o[2]-o[0])||1,c=Math.ceil(o[3]-o[1])||1,u=t.cachedCanvases.getCanvas("pattern",l,c),h=u.context;h.clearRect(0,0,h.canvas.width,h.canvas.height),h.beginPath(),h.rect(0,0,h.canvas.width,h.canvas.height),h.translate(-o[0],-o[1]),s=V.transform(s,[1,0,0,1,o[0],o[1]]),h.transform(...t.baseTransform),this.matrix&&h.transform(...this.matrix),bx(h,this._bbox),h.fillStyle=this._createGradient(h),h.fill(),r=e.createPattern(u.canvas,"no-repeat");const d=new DOMMatrix(s);r.setTransform(d)}else bx(e,this._bbox),r=this._createGradient(e);return r}}function H1(n,e,t,s,i,r,o,l){const c=e.coords,u=e.colors,h=n.data,d=n.width*4;let f;c[t+1]>c[s+1]&&(f=t,t=s,s=f,f=r,r=o,o=f),c[s+1]>c[i+1]&&(f=s,s=i,i=f,f=o,o=l,l=f),c[t+1]>c[s+1]&&(f=t,t=s,s=f,f=r,r=o,o=f);const m=(c[t]+e.offsetX)*e.scaleX,y=(c[t+1]+e.offsetY)*e.scaleY,w=(c[s]+e.offsetX)*e.scaleX,x=(c[s+1]+e.offsetY)*e.scaleY,v=(c[i]+e.offsetX)*e.scaleX,b=(c[i+1]+e.offsetY)*e.scaleY;if(y>=b)return;const S=u[r],E=u[r+1],C=u[r+2],T=u[o],k=u[o+1],P=u[o+2],N=u[l],M=u[l+1],I=u[l+2],j=Math.round(y),H=Math.round(b);let z,Q,F,$,L,U,K,J;for(let X=j;X<=H;X++){if(X<x){const ue=X<y?0:(y-X)/(y-x);z=m-(m-w)*ue,Q=S-(S-T)*ue,F=E-(E-k)*ue,$=C-(C-P)*ue}else{let ue;X>b?ue=1:x===b?ue=0:ue=(x-X)/(x-b),z=w-(w-v)*ue,Q=T-(T-N)*ue,F=k-(k-M)*ue,$=P-(P-I)*ue}let te;X<y?te=0:X>b?te=1:te=(y-X)/(y-b),L=m-(m-v)*te,U=S-(S-N)*te,K=E-(E-M)*te,J=C-(C-I)*te;const fe=Math.round(Math.min(z,L)),Le=Math.round(Math.max(z,L));let ze=d*X+fe*4;for(let ue=fe;ue<=Le;ue++)te=(z-ue)/(z-L),te<0?te=0:te>1&&(te=1),h[ze++]=Q-(Q-U)*te|0,h[ze++]=F-(F-K)*te|0,h[ze++]=$-($-J)*te|0,h[ze++]=255}}function dO(n,e,t){const s=e.coords,i=e.colors;let r,o;switch(e.type){case"lattice":const l=e.verticesPerRow,c=Math.floor(s.length/l)-1,u=l-1;for(r=0;r<c;r++){let h=r*l;for(let d=0;d<u;d++,h++)H1(n,t,s[h],s[h+1],s[h+l],i[h],i[h+1],i[h+l]),H1(n,t,s[h+l+1],s[h+1],s[h+l],i[h+l+1],i[h+1],i[h+l])}break;case"triangles":for(r=0,o=s.length;r<o;r+=3)H1(n,t,s[r],s[r+1],s[r+2],i[r],i[r+1],i[r+2]);break;default:throw new Error("illegal figure")}}class fO extends FA{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[6],this._background=e[7],this.matrix=null}_createMeshCanvas(e,t,s){const l=Math.floor(this._bounds[0]),c=Math.floor(this._bounds[1]),u=Math.ceil(this._bounds[2])-l,h=Math.ceil(this._bounds[3])-c,d=Math.min(Math.ceil(Math.abs(u*e[0]*1.1)),3e3),f=Math.min(Math.ceil(Math.abs(h*e[1]*1.1)),3e3),m=u/d,y=h/f,w={coords:this._coords,colors:this._colors,offsetX:-l,offsetY:-c,scaleX:1/m,scaleY:1/y},x=d+2*2,v=f+2*2,b=s.getCanvas("mesh",x,v),S=b.context,E=S.createImageData(d,f);if(t){const T=E.data;for(let k=0,P=T.length;k<P;k+=4)T[k]=t[0],T[k+1]=t[1],T[k+2]=t[2],T[k+3]=255}for(const T of this._figures)dO(E,T,w);return S.putImageData(E,2,2),{canvas:b.canvas,offsetX:l-2*m,offsetY:c-2*y,scaleX:m,scaleY:y}}isModifyingCurrentTransform(){return!0}getPattern(e,t,s,i){bx(e,this._bbox);const r=new Float32Array(2);if(i===Ft.SHADING)V.singularValueDecompose2dScale(He(e),r);else if(this.matrix){V.singularValueDecompose2dScale(this.matrix,r);const[l,c]=r;V.singularValueDecompose2dScale(t.baseTransform,r),r[0]*=l,r[1]*=c}else V.singularValueDecompose2dScale(t.baseTransform,r);const o=this._createMeshCanvas(r,i===Ft.SHADING?null:this._background,t.cachedCanvases);return i!==Ft.SHADING&&(e.setTransform(...t.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(o.offsetX,o.offsetY),e.scale(o.scaleX,o.scaleY),e.createPattern(o.canvas,"no-repeat")}}class pO extends FA{getPattern(){return"hotpink"}}function gO(n){switch(n[0]){case"RadialAxial":return new hO(n);case"Mesh":return new fO(n);case"Dummy":return new pO}throw new Error(`Unknown IR type: ${n[0]}`)}const q_={COLORED:1,UNCOLORED:2},vv=class vv{constructor(e,t,s,i){this.color=e[1],this.operatorList=e[2],this.matrix=e[3],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.ctx=t,this.canvasGraphicsFactory=s,this.baseTransform=i}createPatternCanvas(e,t){var U,K;const{bbox:s,operatorList:i,paintType:r,tilingType:o,color:l,canvasGraphicsFactory:c}=this;let{xstep:u,ystep:h}=this;u=Math.abs(u),h=Math.abs(h),Kw("TilingType: "+o);const d=s[0],f=s[1],m=s[2],y=s[3],w=m-d,x=y-f,v=new Float32Array(2);V.singularValueDecompose2dScale(this.matrix,v);const[b,S]=v;V.singularValueDecompose2dScale(this.baseTransform,v);const E=b*v[0],C=S*v[1];let T=w,k=x,P=!1,N=!1;const M=Math.ceil(u*E),I=Math.ceil(h*C),j=Math.ceil(w*E),H=Math.ceil(x*C);M>=j?T=u:P=!0,I>=H?k=h:N=!0;const z=this.getSizeAndScale(T,this.ctx.canvas.width,E),Q=this.getSizeAndScale(k,this.ctx.canvas.height,C),F=e.cachedCanvases.getCanvas("pattern",z.size,Q.size),$=F.context,L=c.createCanvasGraphics($,t);if(L.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext(L,r,l),$.translate(-z.scale*d,-Q.scale*f),L.transform(0,z.scale,0,0,Q.scale,0,0),$.save(),(U=L.dependencyTracker)==null||U.save(),this.clipBbox(L,d,f,m,y),L.baseTransform=He(L.ctx),L.executeOperatorList(i),L.endDrawing(),(K=L.dependencyTracker)==null||K.restore(),$.restore(),P||N){const J=F.canvas;P&&(T=u),N&&(k=h);const X=this.getSizeAndScale(T,this.ctx.canvas.width,E),te=this.getSizeAndScale(k,this.ctx.canvas.height,C),fe=X.size,Le=te.size,ze=e.cachedCanvases.getCanvas("pattern-workaround",fe,Le),ue=ze.context,Li=P?Math.floor(w/u):0,Ni=N?Math.floor(x/h):0;for(let kn=0;kn<=Li;kn++)for(let pe=0;pe<=Ni;pe++)ue.drawImage(J,fe*kn,Le*pe,fe,Le,0,0,fe,Le);return{canvas:ze.canvas,scaleX:X.scale,scaleY:te.scale,offsetX:d,offsetY:f}}return{canvas:F.canvas,scaleX:z.scale,scaleY:Q.scale,offsetX:d,offsetY:f}}getSizeAndScale(e,t,s){const i=Math.max(vv.MAX_PATTERN_SIZE,t);let r=Math.ceil(e*s);return r>=i?r=i:s=r/e,{scale:s,size:r}}clipBbox(e,t,s,i,r){const o=i-t,l=r-s;e.ctx.rect(t,s,o,l),V.axialAlignedBoundingBox([t,s,i,r],He(e.ctx),e.current.minMax),e.clip(),e.endPath()}setFillAndStrokeStyleToContext(e,t,s){const i=e.ctx,r=e.current;switch(t){case q_.COLORED:const{fillStyle:o,strokeStyle:l}=this.ctx;i.fillStyle=r.fillColor=o,i.strokeStyle=r.strokeColor=l;break;case q_.UNCOLORED:i.fillStyle=i.strokeStyle=s,r.fillColor=r.strokeColor=s;break;default:throw new FF(`Unsupported paint type: ${t}`)}}isModifyingCurrentTransform(){return!1}getPattern(e,t,s,i,r){let o=s;i!==Ft.SHADING&&(o=V.transform(o,t.baseTransform),this.matrix&&(o=V.transform(o,this.matrix)));const l=this.createPatternCanvas(t,r);let c=new DOMMatrix(o);c=c.translate(l.offsetX,l.offsetY),c=c.scale(1/l.scaleX,1/l.scaleY);const u=e.createPattern(l.canvas,"repeat");return u.setTransform(c),u}};O(vv,"MAX_PATTERN_SIZE",3e3);let xx=vv;function mO({src:n,srcPos:e=0,dest:t,width:s,height:i,nonBlackColor:r=4294967295,inverseDecode:o=!1}){const l=Tt.isLittleEndian?4278190080:255,[c,u]=o?[r,l]:[l,r],h=s>>3,d=s&7,f=n.length;t=new Uint32Array(t.buffer);let m=0;for(let y=0;y<i;y++){for(const x=e+h;e<x;e++){const v=e<f?n[e]:255;t[m++]=v&128?u:c,t[m++]=v&64?u:c,t[m++]=v&32?u:c,t[m++]=v&16?u:c,t[m++]=v&8?u:c,t[m++]=v&4?u:c,t[m++]=v&2?u:c,t[m++]=v&1?u:c}if(d===0)continue;const w=e<f?n[e++]:255;for(let x=0;x<d;x++)t[m++]=w&1<<7-x?u:c}return{srcPos:e,destPos:m}}const X_=16,Y_=100,yO=15,K_=10,xn=16,V1=new DOMMatrix,Kn=new Float32Array(2),Mc=new Float32Array([1/0,1/0,-1/0,-1/0]);function vO(n,e){if(n._removeMirroring)throw new Error("Context is already forwarding operations.");n.__originalSave=n.save,n.__originalRestore=n.restore,n.__originalRotate=n.rotate,n.__originalScale=n.scale,n.__originalTranslate=n.translate,n.__originalTransform=n.transform,n.__originalSetTransform=n.setTransform,n.__originalResetTransform=n.resetTransform,n.__originalClip=n.clip,n.__originalMoveTo=n.moveTo,n.__originalLineTo=n.lineTo,n.__originalBezierCurveTo=n.bezierCurveTo,n.__originalRect=n.rect,n.__originalClosePath=n.closePath,n.__originalBeginPath=n.beginPath,n._removeMirroring=()=>{n.save=n.__originalSave,n.restore=n.__originalRestore,n.rotate=n.__originalRotate,n.scale=n.__originalScale,n.translate=n.__originalTranslate,n.transform=n.__originalTransform,n.setTransform=n.__originalSetTransform,n.resetTransform=n.__originalResetTransform,n.clip=n.__originalClip,n.moveTo=n.__originalMoveTo,n.lineTo=n.__originalLineTo,n.bezierCurveTo=n.__originalBezierCurveTo,n.rect=n.__originalRect,n.closePath=n.__originalClosePath,n.beginPath=n.__originalBeginPath,delete n._removeMirroring},n.save=function(){e.save(),this.__originalSave()},n.restore=function(){e.restore(),this.__originalRestore()},n.translate=function(t,s){e.translate(t,s),this.__originalTranslate(t,s)},n.scale=function(t,s){e.scale(t,s),this.__originalScale(t,s)},n.transform=function(t,s,i,r,o,l){e.transform(t,s,i,r,o,l),this.__originalTransform(t,s,i,r,o,l)},n.setTransform=function(t,s,i,r,o,l){e.setTransform(t,s,i,r,o,l),this.__originalSetTransform(t,s,i,r,o,l)},n.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},n.rotate=function(t){e.rotate(t),this.__originalRotate(t)},n.clip=function(t){e.clip(t),this.__originalClip(t)},n.moveTo=function(t,s){e.moveTo(t,s),this.__originalMoveTo(t,s)},n.lineTo=function(t,s){e.lineTo(t,s),this.__originalLineTo(t,s)},n.bezierCurveTo=function(t,s,i,r,o,l){e.bezierCurveTo(t,s,i,r,o,l),this.__originalBezierCurveTo(t,s,i,r,o,l)},n.rect=function(t,s,i,r){e.rect(t,s,i,r),this.__originalRect(t,s,i,r)},n.closePath=function(){e.closePath(),this.__originalClosePath()},n.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}class wO{constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,t,s){let i;return this.cache[e]!==void 0?(i=this.cache[e],this.canvasFactory.reset(i,t,s)):(i=this.canvasFactory.create(t,s),this.cache[e]=i),i}delete(e){delete this.cache[e]}clear(){for(const e in this.cache){const t=this.cache[e];this.canvasFactory.destroy(t),delete this.cache[e]}}}function Ym(n,e,t,s,i,r,o,l,c,u){const[h,d,f,m,y,w]=He(n);if(d===0&&f===0){const b=o*h+y,S=Math.round(b),E=l*m+w,C=Math.round(E),T=(o+c)*h+y,k=Math.abs(Math.round(T)-S)||1,P=(l+u)*m+w,N=Math.abs(Math.round(P)-C)||1;return n.setTransform(Math.sign(h),0,0,Math.sign(m),S,C),n.drawImage(e,t,s,i,r,0,0,k,N),n.setTransform(h,d,f,m,y,w),[k,N]}if(h===0&&m===0){const b=l*f+y,S=Math.round(b),E=o*d+w,C=Math.round(E),T=(l+u)*f+y,k=Math.abs(Math.round(T)-S)||1,P=(o+c)*d+w,N=Math.abs(Math.round(P)-C)||1;return n.setTransform(0,Math.sign(d),Math.sign(f),0,S,C),n.drawImage(e,t,s,i,r,0,0,N,k),n.setTransform(h,d,f,m,y,w),[N,k]}n.drawImage(e,t,s,i,r,o,l,c,u);const x=Math.hypot(h,d),v=Math.hypot(f,m);return[x*c,v*u]}class Q_{constructor(e,t,s){O(this,"alphaIsShape",!1);O(this,"fontSize",0);O(this,"fontSizeScale",1);O(this,"textMatrix",null);O(this,"textMatrixScale",1);O(this,"fontMatrix",qb);O(this,"leading",0);O(this,"x",0);O(this,"y",0);O(this,"lineX",0);O(this,"lineY",0);O(this,"charSpacing",0);O(this,"wordSpacing",0);O(this,"textHScale",1);O(this,"textRenderingMode",kt.FILL);O(this,"textRise",0);O(this,"fillColor","#000000");O(this,"strokeColor","#000000");O(this,"patternFill",!1);O(this,"patternStroke",!1);O(this,"fillAlpha",1);O(this,"strokeAlpha",1);O(this,"lineWidth",1);O(this,"activeSMask",null);O(this,"transferMaps","none");s==null||s(this),this.clipBox=new Float32Array([0,0,e,t]),this.minMax=Mc.slice()}clone(){const e=Object.create(this);return e.clipBox=this.clipBox.slice(),e.minMax=this.minMax.slice(),e}getPathBoundingBox(e=Ft.FILL,t=null){const s=this.minMax.slice();if(e===Ft.STROKE){t||_e("Stroke bounding box must include transform."),V.singularValueDecompose2dScale(t,Kn);const i=Kn[0]*this.lineWidth/2,r=Kn[1]*this.lineWidth/2;s[0]-=i,s[1]-=r,s[2]+=i,s[3]+=r}return s}updateClipFromPath(){const e=V.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(e){this.clipBox.set(e,0),this.minMax.set(Mc,0)}getClippedPathBoundingBox(e=Ft.FILL,t=null){return V.intersect(this.clipBox,this.getPathBoundingBox(e,t))}}function J_(n,e){if(e instanceof ImageData){n.putImageData(e,0,0);return}const t=e.height,s=e.width,i=t%xn,r=(t-i)/xn,o=i===0?r:r+1,l=n.createImageData(s,xn);let c=0,u;const h=e.data,d=l.data;let f,m,y,w;if(e.kind===sf.GRAYSCALE_1BPP){const x=h.byteLength,v=new Uint32Array(d.buffer,0,d.byteLength>>2),b=v.length,S=s+7>>3,E=4294967295,C=Tt.isLittleEndian?4278190080:255;for(f=0;f<o;f++){for(y=f<r?xn:i,u=0,m=0;m<y;m++){const T=x-c;let k=0;const P=T>S?s:T*8-7,N=P&-8;let M=0,I=0;for(;k<N;k+=8)I=h[c++],v[u++]=I&128?E:C,v[u++]=I&64?E:C,v[u++]=I&32?E:C,v[u++]=I&16?E:C,v[u++]=I&8?E:C,v[u++]=I&4?E:C,v[u++]=I&2?E:C,v[u++]=I&1?E:C;for(;k<P;k++)M===0&&(I=h[c++],M=128),v[u++]=I&M?E:C,M>>=1}for(;u<b;)v[u++]=0;n.putImageData(l,0,f*xn)}}else if(e.kind===sf.RGBA_32BPP){for(m=0,w=s*xn*4,f=0;f<r;f++)d.set(h.subarray(c,c+w)),c+=w,n.putImageData(l,0,m),m+=xn;f<o&&(w=s*i*4,d.set(h.subarray(c,c+w)),n.putImageData(l,0,m))}else if(e.kind===sf.RGB_24BPP)for(y=xn,w=s*y,f=0;f<o;f++){for(f>=r&&(y=i,w=s*y),u=0,m=w;m--;)d[u++]=h[c++],d[u++]=h[c++],d[u++]=h[c++],d[u++]=255;n.putImageData(l,0,f*xn)}else throw new Error(`bad image kind: ${e.kind}`)}function Z_(n,e){if(e.bitmap){n.drawImage(e.bitmap,0,0);return}const t=e.height,s=e.width,i=t%xn,r=(t-i)/xn,o=i===0?r:r+1,l=n.createImageData(s,xn);let c=0;const u=e.data,h=l.data;for(let d=0;d<o;d++){const f=d<r?xn:i;({srcPos:c}=mO({src:u,srcPos:c,dest:h,width:s,height:f,nonBlackColor:0})),n.putImageData(l,0,d*xn)}}function wd(n,e){const t=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const s of t)n[s]!==void 0&&(e[s]=n[s]);n.setLineDash!==void 0&&(e.setLineDash(n.getLineDash()),e.lineDashOffset=n.lineDashOffset)}function Km(n){n.strokeStyle=n.fillStyle="#000000",n.fillRule="nonzero",n.globalAlpha=1,n.lineWidth=1,n.lineCap="butt",n.lineJoin="miter",n.miterLimit=10,n.globalCompositeOperation="source-over",n.font="10px sans-serif",n.setLineDash!==void 0&&(n.setLineDash([]),n.lineDashOffset=0);const{filter:e}=n;e!=="none"&&e!==""&&(n.filter="none")}function eC(n,e){if(e)return!0;V.singularValueDecompose2dScale(n,Kn);const t=Math.fround(Ks.pixelRatio*Nr.PDF_TO_CSS_UNITS);return Kn[0]<=t&&Kn[1]<=t}const bO=["butt","round","square"],xO=["miter","round","bevel"],SO={},tC={};var _p,Sx,Cp,Ax,Tp,Ex;const qA=class qA{constructor(e,t,s,i,r,{optionalContentConfig:o,markedContentStack:l=null},c,u,h){p(this,_p);p(this,Cp);p(this,Tp);this.ctx=e,this.current=new Q_(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=t,this.objs=s,this.canvasFactory=i,this.filterFactory=r,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=l||[],this.optionalContentConfig=o,this.cachedCanvases=new wO(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=c,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=u,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map,this.dependencyTracker=h??null}getObject(e,t,s=null){var i;return typeof t=="string"?((i=this.dependencyTracker)==null||i.recordNamedDependency(e,t),t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t)):s}beginDrawing({transform:e,viewport:t,transparency:s=!1,background:i=null}){const r=this.ctx.canvas.width,o=this.ctx.canvas.height,l=this.ctx.fillStyle;if(this.ctx.fillStyle=i||"#ffffff",this.ctx.fillRect(0,0,r,o),this.ctx.fillStyle=l,s){const c=this.cachedCanvases.getCanvas("transparent",r,o);this.compositeCtx=this.ctx,this.transparentCanvas=c.canvas,this.ctx=c.context,this.ctx.save(),this.ctx.transform(...He(this.compositeCtx))}this.ctx.save(),Km(this.ctx),e&&(this.ctx.transform(...e),this.outputScaleX=e[0],this.outputScaleY=e[0]),this.ctx.transform(...t.transform),this.viewportScale=t.scale,this.baseTransform=He(this.ctx)}executeOperatorList(e,t,s,i,r){var v;const o=e.argsArray,l=e.fnArray;let c=t||0;const u=o.length;if(u===c)return c;const h=u-c>K_&&typeof s=="function",d=h?Date.now()+yO:0;let f=0;const m=this.commonObjs,y=this.objs;let w,x;for(;;){if(i!==void 0&&c===i.nextBreakPoint)return i.breakIt(c,s),c;if(!r||r(c))if(w=l[c],x=o[c]??null,w!==ed.dependency)x===null?this[w](c):this[w](c,...x);else for(const b of x){(v=this.dependencyTracker)==null||v.recordNamedData(b,c);const S=b.startsWith("g_")?m:y;if(!S.has(b))return S.get(b,s),c}if(c++,c===u)return c;if(h&&++f>K_){if(Date.now()>d)return s(),c;f=0}}}endDrawing(){A(this,_p,Sx).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const e of this._cachedBitmapsMap.values()){for(const t of e.values())typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement&&(t.width=t.height=0);e.clear()}this._cachedBitmapsMap.clear(),A(this,Cp,Ax).call(this)}_scaleImage(e,t){const s=e.width??e.displayWidth,i=e.height??e.displayHeight;let r=Math.max(Math.hypot(t[0],t[1]),1),o=Math.max(Math.hypot(t[2],t[3]),1),l=s,c=i,u="prescale1",h,d;for(;r>2&&l>1||o>2&&c>1;){let f=l,m=c;r>2&&l>1&&(f=l>=16384?Math.floor(l/2)-1||1:Math.ceil(l/2),r/=l/f),o>2&&c>1&&(m=c>=16384?Math.floor(c/2)-1||1:Math.ceil(c)/2,o/=c/m),h=this.cachedCanvases.getCanvas(u,f,m),d=h.context,d.clearRect(0,0,f,m),d.drawImage(e,0,0,l,c,0,0,f,m),e=h.canvas,l=f,c=m,u=u==="prescale1"?"prescale2":"prescale1"}return{img:e,paintWidth:l,paintHeight:c}}_createMaskCanvas(e,t){var M,I;const s=this.ctx,{width:i,height:r}=t,o=this.current.fillColor,l=this.current.patternFill,c=He(s);let u,h,d,f;if((t.bitmap||t.data)&&t.count>1){const j=t.bitmap||t.data.buffer;h=JSON.stringify(l?c:[c.slice(0,4),o]),u=this._cachedBitmapsMap.get(j),u||(u=new Map,this._cachedBitmapsMap.set(j,u));const H=u.get(h);if(H&&!l){const z=Math.round(Math.min(c[0],c[2])+c[4]),Q=Math.round(Math.min(c[1],c[3])+c[5]);return(M=this.dependencyTracker)==null||M.recordDependencies(e,os.transformAndFill),{canvas:H,offsetX:z,offsetY:Q}}d=H}d||(f=this.cachedCanvases.getCanvas("maskCanvas",i,r),Z_(f.context,t));let m=V.transform(c,[1/i,0,0,-1/r,0,0]);m=V.transform(m,[1,0,0,1,0,-r]);const y=Mc.slice();V.axialAlignedBoundingBox([0,0,i,r],m,y);const[w,x,v,b]=y,S=Math.round(v-w)||1,E=Math.round(b-x)||1,C=this.cachedCanvases.getCanvas("fillCanvas",S,E),T=C.context,k=w,P=x;T.translate(-k,-P),T.transform(...m),d||(d=this._scaleImage(f.canvas,Zs(T)),d=d.img,u&&l&&u.set(h,d)),T.imageSmoothingEnabled=eC(He(T),t.interpolate),Ym(T,d,0,0,d.width,d.height,0,0,i,r),T.globalCompositeOperation="source-in";const N=V.transform(Zs(T),[1,0,0,1,-k,-P]);return T.fillStyle=l?o.getPattern(s,this,N,Ft.FILL,e):o,T.fillRect(0,0,i,r),u&&!l&&(this.cachedCanvases.delete("fillCanvas"),u.set(h,C.canvas)),(I=this.dependencyTracker)==null||I.recordDependencies(e,os.transformAndFill),{canvas:C.canvas,offsetX:Math.round(k),offsetY:Math.round(P)}}setLineWidth(e,t){var s;(s=this.dependencyTracker)==null||s.recordSimpleData("lineWidth",e),t!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=t,this.ctx.lineWidth=t}setLineCap(e,t){var s;(s=this.dependencyTracker)==null||s.recordSimpleData("lineCap",e),this.ctx.lineCap=bO[t]}setLineJoin(e,t){var s;(s=this.dependencyTracker)==null||s.recordSimpleData("lineJoin",e),this.ctx.lineJoin=xO[t]}setMiterLimit(e,t){var s;(s=this.dependencyTracker)==null||s.recordSimpleData("miterLimit",e),this.ctx.miterLimit=t}setDash(e,t,s){var r;(r=this.dependencyTracker)==null||r.recordSimpleData("dash",e);const i=this.ctx;i.setLineDash!==void 0&&(i.setLineDash(t),i.lineDashOffset=s)}setRenderingIntent(e,t){}setFlatness(e,t){}setGState(e,t){var s,i,r,o,l;for(const[c,u]of t)switch(c){case"LW":this.setLineWidth(e,u);break;case"LC":this.setLineCap(e,u);break;case"LJ":this.setLineJoin(e,u);break;case"ML":this.setMiterLimit(e,u);break;case"D":this.setDash(e,u[0],u[1]);break;case"RI":this.setRenderingIntent(e,u);break;case"FL":this.setFlatness(e,u);break;case"Font":this.setFont(e,u[0],u[1]);break;case"CA":(s=this.dependencyTracker)==null||s.recordSimpleData("strokeAlpha",e),this.current.strokeAlpha=u;break;case"ca":(i=this.dependencyTracker)==null||i.recordSimpleData("fillAlpha",e),this.ctx.globalAlpha=this.current.fillAlpha=u;break;case"BM":(r=this.dependencyTracker)==null||r.recordSimpleData("globalCompositeOperation",e),this.ctx.globalCompositeOperation=u;break;case"SMask":(o=this.dependencyTracker)==null||o.recordSimpleData("SMask",e),this.current.activeSMask=u?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":(l=this.dependencyTracker)==null||l.recordSimpleData("filter",e),this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(u);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(e){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const t=this.ctx.canvas.width,s=this.ctx.canvas.height,i="smaskGroupAt"+this.groupLevel,r=this.cachedCanvases.getCanvas(i,t,s);this.suspendedCtx=this.ctx;const o=this.ctx=r.context;o.setTransform(this.suspendedCtx.getTransform()),wd(this.suspendedCtx,o),vO(o,this.suspendedCtx),this.setGState(e,[["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),wd(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const t=this.current.activeSMask,s=this.suspendedCtx;this.composeSMask(s,t,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(e,t,s,i){const r=i[0],o=i[1],l=i[2]-r,c=i[3]-o;l===0||c===0||(this.genericComposeSMask(t.context,s,l,c,t.subtype,t.backdrop,t.transferMap,r,o,t.offsetX,t.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(s.canvas,0,0),e.restore())}genericComposeSMask(e,t,s,i,r,o,l,c,u,h,d){let f=e.canvas,m=c-h,y=u-d;if(o)if(m<0||y<0||m+s>f.width||y+i>f.height){const x=this.cachedCanvases.getCanvas("maskExtension",s,i),v=x.context;v.drawImage(f,-m,-y),v.globalCompositeOperation="destination-atop",v.fillStyle=o,v.fillRect(0,0,s,i),v.globalCompositeOperation="source-over",f=x.canvas,m=y=0}else{e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0);const x=new Path2D;x.rect(m,y,s,i),e.clip(x),e.globalCompositeOperation="destination-atop",e.fillStyle=o,e.fillRect(m,y,s,i),e.restore()}t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0),r==="Alpha"&&l?t.filter=this.filterFactory.addAlphaFilter(l):r==="Luminosity"&&(t.filter=this.filterFactory.addLuminosityFilter(l));const w=new Path2D;w.rect(c,u,s,i),t.clip(w),t.globalCompositeOperation="destination-in",t.drawImage(f,m,y,s,i,c,u,s,i),t.restore()}save(e){var s;this.inSMaskMode&&wd(this.ctx,this.suspendedCtx),this.ctx.save();const t=this.current;this.stateStack.push(t),this.current=t.clone(),(s=this.dependencyTracker)==null||s.save(e)}restore(e){var t;if((t=this.dependencyTracker)==null||t.restore(e),this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&wd(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(e,t,s,i,r,o,l){var c;(c=this.dependencyTracker)==null||c.recordIncrementalData("transform",e),this.ctx.transform(t,s,i,r,o,l),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,t,s,i){let[r]=s;if(!i){r||(r=s[0]=new Path2D),this[t](e,r);return}if(this.dependencyTracker!==null){const o=t===ed.stroke?this.current.lineWidth/2:0;this.dependencyTracker.resetBBox(e).recordBBox(e,this.ctx,i[0]-o,i[2]+o,i[1]-o,i[3]+o).recordDependencies(e,["transform"])}if(!(r instanceof Path2D)){const o=s[0]=new Path2D;for(let l=0,c=r.length;l<c;)switch(r[l++]){case Hm.moveTo:o.moveTo(r[l++],r[l++]);break;case Hm.lineTo:o.lineTo(r[l++],r[l++]);break;case Hm.curveTo:o.bezierCurveTo(r[l++],r[l++],r[l++],r[l++],r[l++],r[l++]);break;case Hm.closePath:o.closePath();break;default:ee(`Unrecognized drawing path operator: ${r[l-1]}`);break}r=o}V.axialAlignedBoundingBox(i,He(this.ctx),this.current.minMax),this[t](e,r),this._pathStartIdx=e}closePath(e){this.ctx.closePath()}stroke(e,t,s=!0){var o;const i=this.ctx,r=this.current.strokeColor;if(i.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof r=="object"&&(r!=null&&r.getPattern)){const l=r.isModifyingCurrentTransform()?i.getTransform():null;if(i.save(),i.strokeStyle=r.getPattern(i,this,Zs(i),Ft.STROKE,e),l){const c=new Path2D;c.addPath(t,i.getTransform().invertSelf().multiplySelf(l)),t=c}this.rescaleAndStroke(t,!1),i.restore()}else this.rescaleAndStroke(t,!0);(o=this.dependencyTracker)==null||o.recordDependencies(e,os.stroke),s&&this.consumePath(e,t,this.current.getClippedPathBoundingBox(Ft.STROKE,He(this.ctx))),i.globalAlpha=this.current.fillAlpha}closeStroke(e,t){this.stroke(e,t)}fill(e,t,s=!0){var u,h,d;const i=this.ctx,r=this.current.fillColor,o=this.current.patternFill;let l=!1;if(o){const f=r.isModifyingCurrentTransform()?i.getTransform():null;if((u=this.dependencyTracker)==null||u.save(e),i.save(),i.fillStyle=r.getPattern(i,this,Zs(i),Ft.FILL,e),f){const m=new Path2D;m.addPath(t,i.getTransform().invertSelf().multiplySelf(f)),t=m}l=!0}const c=this.current.getClippedPathBoundingBox();this.contentVisible&&c!==null&&(this.pendingEOFill?(i.fill(t,"evenodd"),this.pendingEOFill=!1):i.fill(t)),(h=this.dependencyTracker)==null||h.recordDependencies(e,os.fill),l&&(i.restore(),(d=this.dependencyTracker)==null||d.restore(e)),s&&this.consumePath(e,t,c)}eoFill(e,t){this.pendingEOFill=!0,this.fill(e,t)}fillStroke(e,t){this.fill(e,t,!1),this.stroke(e,t,!1),this.consumePath(e,t)}eoFillStroke(e,t){this.pendingEOFill=!0,this.fillStroke(e,t)}closeFillStroke(e,t){this.fillStroke(e,t)}closeEOFillStroke(e,t){this.pendingEOFill=!0,this.fillStroke(e,t)}endPath(e,t){this.consumePath(e,t)}rawFillPath(e,t){var s;this.ctx.fill(t),(s=this.dependencyTracker)==null||s.recordDependencies(e,os.rawFillPath).recordOperation(e)}clip(e){var t;(t=this.dependencyTracker)==null||t.recordFutureForcedDependency("clipMode",e),this.pendingClip=SO}eoClip(e){var t;(t=this.dependencyTracker)==null||t.recordFutureForcedDependency("clipMode",e),this.pendingClip=tC}beginText(e){var t;this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0,(t=this.dependencyTracker)==null||t.recordOpenMarker(e).resetIncrementalData("sameLineText").resetIncrementalData("moveText",e)}endText(e){const t=this.pendingTextPaths,s=this.ctx;if(this.dependencyTracker){const{dependencyTracker:i}=this;t!==void 0&&i.recordFutureForcedDependency("textClip",i.getOpenMarker()).recordFutureForcedDependency("textClip",e),i.recordCloseMarker(e)}if(t!==void 0){const i=new Path2D,r=s.getTransform().invertSelf();for(const{transform:o,x:l,y:c,fontSize:u,path:h}of t)h&&i.addPath(h,new DOMMatrix(o).preMultiplySelf(r).translate(l,c).scale(u,-u));s.clip(i)}delete this.pendingTextPaths}setCharSpacing(e,t){var s;(s=this.dependencyTracker)==null||s.recordSimpleData("charSpacing",e),this.current.charSpacing=t}setWordSpacing(e,t){var s;(s=this.dependencyTracker)==null||s.recordSimpleData("wordSpacing",e),this.current.wordSpacing=t}setHScale(e,t){var s;(s=this.dependencyTracker)==null||s.recordSimpleData("hScale",e),this.current.textHScale=t/100}setLeading(e,t){var s;(s=this.dependencyTracker)==null||s.recordSimpleData("leading",e),this.current.leading=-t}setFont(e,t,s){var d,f;(d=this.dependencyTracker)==null||d.recordSimpleData("font",e).recordSimpleDataFromNamed("fontObj",t,e);const i=this.commonObjs.get(t),r=this.current;if(!i)throw new Error(`Can't find font for ${t}`);if(r.fontMatrix=i.fontMatrix||qb,(r.fontMatrix[0]===0||r.fontMatrix[3]===0)&&ee("Invalid font matrix for font "+t),s<0?(s=-s,r.fontDirection=-1):r.fontDirection=1,this.current.font=i,this.current.fontSize=s,i.isType3Font)return;const o=i.loadedName||"sans-serif",l=((f=i.systemFontInfo)==null?void 0:f.css)||`"${o}", ${i.fallbackName}`;let c="normal";i.black?c="900":i.bold&&(c="bold");const u=i.italic?"italic":"normal";let h=s;s<X_?h=X_:s>Y_&&(h=Y_),this.current.fontSizeScale=s/h,this.ctx.font=`${u} ${c} ${h}px ${l}`}setTextRenderingMode(e,t){var s;(s=this.dependencyTracker)==null||s.recordSimpleData("textRenderingMode",e),this.current.textRenderingMode=t}setTextRise(e,t){var s;(s=this.dependencyTracker)==null||s.recordSimpleData("textRise",e),this.current.textRise=t}moveText(e,t,s){var i;(i=this.dependencyTracker)==null||i.resetIncrementalData("sameLineText").recordIncrementalData("moveText",e),this.current.x=this.current.lineX+=t,this.current.y=this.current.lineY+=s}setLeadingMoveText(e,t,s){this.setLeading(e,-s),this.moveText(e,t,s)}setTextMatrix(e,t){var i;(i=this.dependencyTracker)==null||i.recordSimpleData("textMatrix",e);const{current:s}=this;s.textMatrix=t,s.textMatrixScale=Math.hypot(t[0],t[1]),s.x=s.lineX=0,s.y=s.lineY=0}nextLine(e){var t;this.moveText(e,0,this.current.leading),(t=this.dependencyTracker)==null||t.recordIncrementalData("moveText",this.dependencyTracker.getSimpleIndex("leading")??e)}paintChar(e,t,s,i,r,o){var v,b,S,E;const l=this.ctx,c=this.current,u=c.font,h=c.textRenderingMode,d=c.fontSize/c.fontSizeScale,f=h&kt.FILL_STROKE_MASK,m=!!(h&kt.ADD_TO_PATH_FLAG),y=c.patternFill&&!u.missingFile,w=c.patternStroke&&!u.missingFile;let x;if((u.disableFontFace||m||y||w)&&!u.missingFile&&(x=u.getPathGenerator(this.commonObjs,t)),x&&(u.disableFontFace||y||w)){l.save(),l.translate(s,i),l.scale(d,-d),(v=this.dependencyTracker)==null||v.recordCharacterBBox(e,l,u);let C;if(f===kt.FILL||f===kt.FILL_STROKE)if(r){C=l.getTransform(),l.setTransform(...r);const T=A(this,Tp,Ex).call(this,x,C,r);l.fill(T)}else l.fill(x);if(f===kt.STROKE||f===kt.FILL_STROKE)if(o){C||(C=l.getTransform()),l.setTransform(...o);const{a:T,b:k,c:P,d:N}=C,M=V.inverseTransform(o),I=V.transform([T,k,P,N,0,0],M);V.singularValueDecompose2dScale(I,Kn),l.lineWidth*=Math.max(Kn[0],Kn[1])/d,l.stroke(A(this,Tp,Ex).call(this,x,C,o))}else l.lineWidth/=d,l.stroke(x);l.restore()}else(f===kt.FILL||f===kt.FILL_STROKE)&&(l.fillText(t,s,i),(b=this.dependencyTracker)==null||b.recordCharacterBBox(e,l,u,d,s,i,()=>l.measureText(t))),(f===kt.STROKE||f===kt.FILL_STROKE)&&(this.dependencyTracker&&((S=this.dependencyTracker)==null||S.recordCharacterBBox(e,l,u,d,s,i,()=>l.measureText(t)).recordDependencies(e,os.stroke)),l.strokeText(t,s,i));m&&((this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:He(l),x:s,y:i,fontSize:d,path:x}),(E=this.dependencyTracker)==null||E.recordCharacterBBox(e,l,u,d,s,i))}get isFontSubpixelAAEnabled(){const{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);const t=e.getImageData(0,0,10,10).data;let s=!1;for(let i=3;i<t.length;i+=4)if(t[i]>0&&t[i]<255){s=!0;break}return ie(this,"isFontSubpixelAAEnabled",s)}showText(e,t){var P,N,M,I;this.dependencyTracker&&(this.dependencyTracker.recordDependencies(e,os.showText).resetBBox(e),this.current.textRenderingMode&kt.ADD_TO_PATH_FLAG&&this.dependencyTracker.recordFutureForcedDependency("textClip",e).inheritPendingDependenciesAsFutureForcedDependencies());const s=this.current,i=s.font;if(i.isType3Font){this.showType3Text(e,t),(P=this.dependencyTracker)==null||P.recordShowTextOperation(e);return}const r=s.fontSize;if(r===0){(N=this.dependencyTracker)==null||N.recordOperation(e);return}const o=this.ctx,l=s.fontSizeScale,c=s.charSpacing,u=s.wordSpacing,h=s.fontDirection,d=s.textHScale*h,f=t.length,m=i.vertical,y=m?1:-1,w=i.defaultVMetrics,x=r*s.fontMatrix[0],v=s.textRenderingMode===kt.FILL&&!i.disableFontFace&&!s.patternFill;o.save(),s.textMatrix&&o.transform(...s.textMatrix),o.translate(s.x,s.y+s.textRise),h>0?o.scale(d,-1):o.scale(d,1);let b,S;if(s.patternFill){o.save();const j=s.fillColor.getPattern(o,this,Zs(o),Ft.FILL,e);b=He(o),o.restore(),o.fillStyle=j}if(s.patternStroke){o.save();const j=s.strokeColor.getPattern(o,this,Zs(o),Ft.STROKE,e);S=He(o),o.restore(),o.strokeStyle=j}let E=s.lineWidth;const C=s.textMatrixScale;if(C===0||E===0){const j=s.textRenderingMode&kt.FILL_STROKE_MASK;(j===kt.STROKE||j===kt.FILL_STROKE)&&(E=this.getSinglePixelWidth())}else E/=C;if(l!==1&&(o.scale(l,l),E/=l),o.lineWidth=E,i.isInvalidPDFjsFont){const j=[];let H=0;for(const Q of t)j.push(Q.unicode),H+=Q.width;const z=j.join("");if(o.fillText(z,0,0),this.dependencyTracker!==null){const Q=o.measureText(z);this.dependencyTracker.recordBBox(e,this.ctx,-Q.actualBoundingBoxLeft,Q.actualBoundingBoxRight,-Q.actualBoundingBoxAscent,Q.actualBoundingBoxDescent).recordShowTextOperation(e)}s.x+=H*x*d,o.restore(),this.compose();return}let T=0,k;for(k=0;k<f;++k){const j=t[k];if(typeof j=="number"){T+=y*j*r/1e3;continue}let H=!1;const z=(j.isSpace?u:0)+c,Q=j.fontChar,F=j.accent;let $,L,U=j.width;if(m){const X=j.vmetric||w,te=-(j.vmetric?X[1]:U*.5)*x,fe=X[2]*x;U=X?-X[0]:U,$=te/l,L=(T+fe)/l}else $=T/l,L=0;let K;if(i.remeasure&&U>0){K=o.measureText(Q);const X=K.width*1e3/r*l;if(U<X&&this.isFontSubpixelAAEnabled){const te=U/X;H=!0,o.save(),o.scale(te,1),$/=te}else U!==X&&($+=(U-X)/2e3*r/l)}if(this.contentVisible&&(j.isInFont||i.missingFile)){if(v&&!F)o.fillText(Q,$,L),(M=this.dependencyTracker)==null||M.recordCharacterBBox(e,o,K?{bbox:null}:i,r/l,$,L,()=>K??o.measureText(Q));else if(this.paintChar(e,Q,$,L,b,S),F){const X=$+r*F.offset.x/l,te=L-r*F.offset.y/l;this.paintChar(e,F.fontChar,X,te,b,S)}}const J=m?U*x-z*h:U*x+z*h;T+=J,H&&o.restore()}m?s.y-=T:s.x+=T*d,o.restore(),this.compose(),(I=this.dependencyTracker)==null||I.recordShowTextOperation(e)}showType3Text(e,t){const s=this.ctx,i=this.current,r=i.font,o=i.fontSize,l=i.fontDirection,c=r.vertical?1:-1,u=i.charSpacing,h=i.wordSpacing,d=i.textHScale*l,f=i.fontMatrix||qb,m=t.length,y=i.textRenderingMode===kt.INVISIBLE;let w,x,v,b;if(y||o===0)return;this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,s.save(),i.textMatrix&&s.transform(...i.textMatrix),s.translate(i.x,i.y+i.textRise),s.scale(d,l);const S=this.dependencyTracker;for(this.dependencyTracker=S?new _0(S,e):null,w=0;w<m;++w){if(x=t[w],typeof x=="number"){b=c*x*o/1e3,this.ctx.translate(b,0),i.x+=b*d;continue}const E=(x.isSpace?h:0)+u,C=r.charProcOperatorList[x.operatorListId];C?this.contentVisible&&(this.save(),s.scale(o,o),s.transform(...f),this.executeOperatorList(C),this.restore()):ee(`Type3 character "${x.operatorListId}" is not available.`);const T=[x.width,0];V.applyTransform(T,f),v=T[0]*o+E,s.translate(v,0),i.x+=v*d}s.restore(),S&&(this.dependencyTracker=S)}setCharWidth(e,t,s){}setCharWidthAndBounds(e,t,s,i,r,o,l){var u;const c=new Path2D;c.rect(i,r,o-i,l-r),this.ctx.clip(c),(u=this.dependencyTracker)==null||u.recordBBox(e,this.ctx,i,o,r,l).recordClipBox(e,this.ctx,i,o,r,l),this.endPath(e)}getColorN_Pattern(e,t){let s;if(t[0]==="TilingPattern"){const i=this.baseTransform||He(this.ctx),r={createCanvasGraphics:(o,l)=>new qA(o,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack},void 0,void 0,this.dependencyTracker?new _0(this.dependencyTracker,l,!0):null)};s=new xx(t,this.ctx,r,i)}else s=this._getPattern(e,t[1],t[2]);return s}setStrokeColorN(e,...t){var s;(s=this.dependencyTracker)==null||s.recordSimpleData("strokeColor",e),this.current.strokeColor=this.getColorN_Pattern(e,t),this.current.patternStroke=!0}setFillColorN(e,...t){var s;(s=this.dependencyTracker)==null||s.recordSimpleData("fillColor",e),this.current.fillColor=this.getColorN_Pattern(e,t),this.current.patternFill=!0}setStrokeRGBColor(e,t){var s;(s=this.dependencyTracker)==null||s.recordSimpleData("strokeColor",e),this.ctx.strokeStyle=this.current.strokeColor=t,this.current.patternStroke=!1}setStrokeTransparent(e){var t;(t=this.dependencyTracker)==null||t.recordSimpleData("strokeColor",e),this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(e,t){var s;(s=this.dependencyTracker)==null||s.recordSimpleData("fillColor",e),this.ctx.fillStyle=this.current.fillColor=t,this.current.patternFill=!1}setFillTransparent(e){var t;(t=this.dependencyTracker)==null||t.recordSimpleData("fillColor",e),this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(e,t,s=null){let i;return this.cachedPatterns.has(t)?i=this.cachedPatterns.get(t):(i=gO(this.getObject(e,t)),this.cachedPatterns.set(t,i)),s&&(i.matrix=s),i}shadingFill(e,t){var o;if(!this.contentVisible)return;const s=this.ctx;this.save(e);const i=this._getPattern(e,t);s.fillStyle=i.getPattern(s,this,Zs(s),Ft.SHADING,e);const r=Zs(s);if(r){const{width:l,height:c}=s.canvas,u=Mc.slice();V.axialAlignedBoundingBox([0,0,l,c],r,u);const[h,d,f,m]=u;this.ctx.fillRect(h,d,f-h,m-d)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);(o=this.dependencyTracker)==null||o.resetBBox(e).recordFullPageBBox(e).recordDependencies(e,os.transform).recordDependencies(e,os.fill).recordOperation(e),this.compose(this.current.getClippedPathBoundingBox()),this.restore(e)}beginInlineImage(){_e("Should not call beginInlineImage")}beginImageData(){_e("Should not call beginImageData")}paintFormXObjectBegin(e,t,s){var i;if(this.contentVisible&&(this.save(e),this.baseTransformStack.push(this.baseTransform),t&&this.transform(e,...t),this.baseTransform=He(this.ctx),s)){V.axialAlignedBoundingBox(s,this.baseTransform,this.current.minMax);const[r,o,l,c]=s,u=new Path2D;u.rect(r,o,l-r,c-o),this.ctx.clip(u),(i=this.dependencyTracker)==null||i.recordClipBox(e,this.ctx,r,l,o,c),this.endPath(e)}}paintFormXObjectEnd(e){this.contentVisible&&(this.restore(e),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e,t){var S;if(!this.contentVisible)return;this.save(e),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const s=this.ctx;t.isolated||Kw("TODO: Support non-isolated groups."),t.knockout&&ee("Knockout groups not supported.");const i=He(s);if(t.matrix&&s.transform(...t.matrix),!t.bbox)throw new Error("Bounding box is required.");let r=Mc.slice();V.axialAlignedBoundingBox(t.bbox,He(s),r);const o=[0,0,s.canvas.width,s.canvas.height];r=V.intersect(r,o)||[0,0,0,0];const l=Math.floor(r[0]),c=Math.floor(r[1]),u=Math.max(Math.ceil(r[2])-l,1),h=Math.max(Math.ceil(r[3])-c,1);this.current.startNewPathAndClipBox([0,0,u,h]);let d="groupAt"+this.groupLevel;t.smask&&(d+="_smask_"+this.smaskCounter++%2);const f=this.cachedCanvases.getCanvas(d,u,h),m=f.context;m.translate(-l,-c),m.transform(...i);let y=new Path2D;const[w,x,v,b]=t.bbox;if(y.rect(w,x,v-w,b-x),t.matrix){const E=new Path2D;E.addPath(y,new DOMMatrix(t.matrix)),y=E}m.clip(y),t.smask&&this.smaskStack.push({canvas:f.canvas,context:m,offsetX:l,offsetY:c,subtype:t.smask.subtype,backdrop:t.smask.backdrop,transferMap:t.smask.transferMap||null,startTransformInverse:null}),(!t.smask||this.dependencyTracker)&&(s.setTransform(1,0,0,1,0,0),s.translate(l,c),s.save()),wd(s,m),this.ctx=m,(S=this.dependencyTracker)==null||S.inheritSimpleDataAsFutureForcedDependencies(["fillAlpha","strokeAlpha","globalCompositeOperation"]).pushBaseTransform(s),this.setGState(e,[["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(s),this.groupLevel++}endGroup(e,t){var r;if(!this.contentVisible)return;this.groupLevel--;const s=this.ctx,i=this.groupStack.pop();if(this.ctx=i,this.ctx.imageSmoothingEnabled=!1,(r=this.dependencyTracker)==null||r.popBaseTransform(),t.smask)this.tempSMask=this.smaskStack.pop(),this.restore(e),this.dependencyTracker&&this.ctx.restore();else{this.ctx.restore();const o=He(this.ctx);this.restore(e),this.ctx.save(),this.ctx.setTransform(...o);const l=Mc.slice();V.axialAlignedBoundingBox([0,0,s.canvas.width,s.canvas.height],o,l),this.ctx.drawImage(s.canvas,0,0),this.ctx.restore(),this.compose(l)}}beginAnnotation(e,t,s,i,r,o){if(A(this,_p,Sx).call(this),Km(this.ctx),this.ctx.save(),this.save(e),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),s){const l=s[2]-s[0],c=s[3]-s[1];if(o&&this.annotationCanvasMap){i=i.slice(),i[4]-=s[0],i[5]-=s[1],s=s.slice(),s[0]=s[1]=0,s[2]=l,s[3]=c,V.singularValueDecompose2dScale(He(this.ctx),Kn);const{viewportScale:u}=this,h=Math.ceil(l*this.outputScaleX*u),d=Math.ceil(c*this.outputScaleY*u);this.annotationCanvas=this.canvasFactory.create(h,d);const{canvas:f,context:m}=this.annotationCanvas;this.annotationCanvasMap.set(t,f),this.annotationCanvas.savedCtx=this.ctx,this.ctx=m,this.ctx.save(),this.ctx.setTransform(Kn[0],0,0,-Kn[1],0,c*Kn[1]),Km(this.ctx)}else{Km(this.ctx),this.endPath(e);const u=new Path2D;u.rect(s[0],s[1],l,c),this.ctx.clip(u)}}this.current=new Q_(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(e,...i),this.transform(e,...r)}endAnnotation(e){this.annotationCanvas&&(this.ctx.restore(),A(this,Cp,Ax).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e,t){var l;if(!this.contentVisible)return;const s=t.count;t=this.getObject(e,t.data,t),t.count=s;const i=this.ctx,r=this._createMaskCanvas(e,t),o=r.canvas;i.save(),i.setTransform(1,0,0,1,0,0),i.drawImage(o,r.offsetX,r.offsetY),(l=this.dependencyTracker)==null||l.resetBBox(e).recordBBox(e,this.ctx,r.offsetX,r.offsetX+o.width,r.offsetY,r.offsetY+o.height).recordOperation(e),i.restore(),this.compose()}paintImageMaskXObjectRepeat(e,t,s,i=0,r=0,o,l){var d,f,m;if(!this.contentVisible)return;t=this.getObject(e,t.data,t);const c=this.ctx;c.save();const u=He(c);c.transform(s,i,r,o,0,0);const h=this._createMaskCanvas(e,t);c.setTransform(1,0,0,1,h.offsetX-u[4],h.offsetY-u[5]),(d=this.dependencyTracker)==null||d.resetBBox(e);for(let y=0,w=l.length;y<w;y+=2){const x=V.transform(u,[s,i,r,o,l[y],l[y+1]]);c.drawImage(h.canvas,x[4],x[5]),(f=this.dependencyTracker)==null||f.recordBBox(e,this.ctx,x[4],x[4]+h.canvas.width,x[5],x[5]+h.canvas.height)}c.restore(),this.compose(),(m=this.dependencyTracker)==null||m.recordOperation(e)}paintImageMaskXObjectGroup(e,t){var o,l,c;if(!this.contentVisible)return;const s=this.ctx,i=this.current.fillColor,r=this.current.patternFill;(o=this.dependencyTracker)==null||o.resetBBox(e).recordDependencies(e,os.transformAndFill);for(const u of t){const{data:h,width:d,height:f,transform:m}=u,y=this.cachedCanvases.getCanvas("maskCanvas",d,f),w=y.context;w.save();const x=this.getObject(e,h,u);Z_(w,x),w.globalCompositeOperation="source-in",w.fillStyle=r?i.getPattern(w,this,Zs(s),Ft.FILL,e):i,w.fillRect(0,0,d,f),w.restore(),s.save(),s.transform(...m),s.scale(1,-1),Ym(s,y.canvas,0,0,d,f,0,-1,1,1),(l=this.dependencyTracker)==null||l.recordBBox(e,s,0,d,0,f),s.restore()}this.compose(),(c=this.dependencyTracker)==null||c.recordOperation(e)}paintImageXObject(e,t){if(!this.contentVisible)return;const s=this.getObject(e,t);if(!s){ee("Dependent image isn't ready yet");return}this.paintInlineImageXObject(e,s)}paintImageXObjectRepeat(e,t,s,i,r){if(!this.contentVisible)return;const o=this.getObject(e,t);if(!o){ee("Dependent image isn't ready yet");return}const l=o.width,c=o.height,u=[];for(let h=0,d=r.length;h<d;h+=2)u.push({transform:[s,0,0,i,r[h],r[h+1]],x:0,y:0,w:l,h:c});this.paintInlineImageXObjectGroup(e,o,u)}applyTransferMapsToCanvas(e){return this.current.transferMaps!=="none"&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if(this.current.transferMaps==="none")return e.bitmap;const{bitmap:t,width:s,height:i}=e,r=this.cachedCanvases.getCanvas("inlineImage",s,i),o=r.context;return o.filter=this.current.transferMaps,o.drawImage(t,0,0),o.filter="none",r.canvas}paintInlineImageXObject(e,t){var u;if(!this.contentVisible)return;const s=t.width,i=t.height,r=this.ctx;this.save(e);const{filter:o}=r;o!=="none"&&o!==""&&(r.filter="none"),r.scale(1/s,-1/i);let l;if(t.bitmap)l=this.applyTransferMapsToBitmap(t);else if(typeof HTMLElement=="function"&&t instanceof HTMLElement||!t.data)l=t;else{const d=this.cachedCanvases.getCanvas("inlineImage",s,i).context;J_(d,t),l=this.applyTransferMapsToCanvas(d)}const c=this._scaleImage(l,Zs(r));r.imageSmoothingEnabled=eC(He(r),t.interpolate),(u=this.dependencyTracker)==null||u.resetBBox(e).recordBBox(e,r,0,s,-i,0).recordDependencies(e,os.imageXObject).recordOperation(e),Ym(r,c.img,0,0,c.paintWidth,c.paintHeight,0,-i,s,i),this.compose(),this.restore(e)}paintInlineImageXObjectGroup(e,t,s){var o,l,c;if(!this.contentVisible)return;const i=this.ctx;let r;if(t.bitmap)r=t.bitmap;else{const u=t.width,h=t.height,f=this.cachedCanvases.getCanvas("inlineImage",u,h).context;J_(f,t),r=this.applyTransferMapsToCanvas(f)}(o=this.dependencyTracker)==null||o.resetBBox(e);for(const u of s)i.save(),i.transform(...u.transform),i.scale(1,-1),Ym(i,r,u.x,u.y,u.w,u.h,0,-1,1,1),(l=this.dependencyTracker)==null||l.recordBBox(e,i,0,1,-1,0),i.restore();(c=this.dependencyTracker)==null||c.recordOperation(e),this.compose()}paintSolidColorImageMask(e){var t;this.contentVisible&&((t=this.dependencyTracker)==null||t.resetBBox(e).recordBBox(e,this.ctx,0,1,0,1).recordDependencies(e,os.fill).recordOperation(e),this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e,t){}markPointProps(e,t,s){}beginMarkedContent(e,t){var s;(s=this.dependencyTracker)==null||s.beginMarkedContent(e),this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,t,s){var i;(i=this.dependencyTracker)==null||i.beginMarkedContent(e),t==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(s)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(e){var t;(t=this.dependencyTracker)==null||t.endMarkedContent(e),this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(e){}endCompat(e){}consumePath(e,t,s){var o,l;const i=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(s);const r=this.ctx;this.pendingClip?(i||(this.pendingClip===tC?r.clip(t,"evenodd"):r.clip(t)),this.pendingClip=null,(o=this.dependencyTracker)==null||o.bboxToClipBoxDropOperation(e).recordFutureForcedDependency("clipPath",e)):(l=this.dependencyTracker)==null||l.recordOperation(e),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const e=He(this.ctx);if(e[1]===0&&e[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{const t=Math.abs(e[0]*e[3]-e[2]*e[1]),s=Math.hypot(e[0],e[2]),i=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(s,i)/t}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:e}=this.current,{a:t,b:s,c:i,d:r}=this.ctx.getTransform();let o,l;if(s===0&&i===0){const c=Math.abs(t),u=Math.abs(r);if(c===u)if(e===0)o=l=1/c;else{const h=c*e;o=l=h<1?1/h:1}else if(e===0)o=1/c,l=1/u;else{const h=c*e,d=u*e;o=h<1?1/h:1,l=d<1?1/d:1}}else{const c=Math.abs(t*r-s*i),u=Math.hypot(t,s),h=Math.hypot(i,r);if(e===0)o=h/c,l=u/c;else{const d=e*c;o=h>d?h/d:1,l=u>d?u/d:1}}this._cachedScaleForStroking[0]=o,this._cachedScaleForStroking[1]=l}return this._cachedScaleForStroking}rescaleAndStroke(e,t){const{ctx:s,current:{lineWidth:i}}=this,[r,o]=this.getScaleForStroking();if(r===o){s.lineWidth=(i||1)*r,s.stroke(e);return}const l=s.getLineDash();t&&s.save(),s.scale(r,o),V1.a=1/r,V1.d=1/o;const c=new Path2D;if(c.addPath(e,V1),l.length>0){const u=Math.max(r,o);s.setLineDash(l.map(h=>h/u)),s.lineDashOffset/=u}s.lineWidth=i||1,s.stroke(c),t&&s.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}};_p=new WeakSet,Sx=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},Cp=new WeakSet,Ax=function(){if(this.pageColors){const e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(e!=="none"){const t=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=t}}},Tp=new WeakSet,Ex=function(e,t,s){const i=new Path2D;return i.addPath(e,new DOMMatrix(s).invertSelf().multiplySelf(t)),i};let Vc=qA;for(const n in ed)Vc.prototype[n]!==void 0&&(Vc.prototype[ed[n]]=Vc.prototype[n]);var Tu,ku,kp,Pu,_y;const Ic=class Ic{constructor(e){p(this,Pu);p(this,Tu,void 0);p(this,ku,void 0);p(this,kp,void 0);g(this,Tu,e),g(this,ku,new DataView(a(this,Tu))),g(this,kp,new TextDecoder)}static write(e){const t=new TextEncoder,s={};let i=0;for(const u of Ic.strings){const h=t.encode(e[u]);s[u]=h,i+=4+h.length}const r=new ArrayBuffer(i),o=new Uint8Array(r),l=new DataView(r);let c=0;for(const u of Ic.strings){const h=s[u],d=h.length;l.setUint32(c,d),o.set(h,c+4),c+=4+d}return ce(c===r.byteLength,"CssFontInfo.write: Buffer overflow"),r}get fontFamily(){return A(this,Pu,_y).call(this,0)}get fontWeight(){return A(this,Pu,_y).call(this,1)}get italicAngle(){return A(this,Pu,_y).call(this,2)}};Tu=new WeakMap,ku=new WeakMap,kp=new WeakMap,Pu=new WeakSet,_y=function(e){ce(e<Ic.strings.length,"Invalid string index");let t=0;for(let i=0;i<e;i++)t+=a(this,ku).getUint32(t)+4;const s=a(this,ku).getUint32(t);return a(this,kp).decode(new Uint8Array(a(this,Tu),t+4,s))},O(Ic,"strings",["fontFamily","fontWeight","italicAngle"]);let C0=Ic;var ho,pi,tl,nl,Bd;const Fc=class Fc{constructor(e){p(this,nl);p(this,ho,void 0);p(this,pi,void 0);p(this,tl,void 0);g(this,ho,e),g(this,pi,new DataView(a(this,ho))),g(this,tl,new TextDecoder)}static write(e){const t=new TextEncoder,s={};let i=0;for(const f of Fc.strings){const m=t.encode(e[f]);s[f]=m,i+=4+m.length}i+=4;let r,o,l=1+i;e.style&&(r=t.encode(e.style.style),o=t.encode(e.style.weight),l+=4+r.length+4+o.length);const c=new ArrayBuffer(l),u=new Uint8Array(c),h=new DataView(c);let d=0;h.setUint8(d++,e.guessFallback?1:0),h.setUint32(d,0),d+=4,i=0;for(const f of Fc.strings){const m=s[f],y=m.length;i+=4+y,h.setUint32(d,y),u.set(m,d+4),d+=4+y}return h.setUint32(d-i-4,i),e.style&&(h.setUint32(d,r.length),u.set(r,d+4),d+=4+r.length,h.setUint32(d,o.length),u.set(o,d+4),d+=4+o.length),ce(d<=c.byteLength,"SubstitionInfo.write: Buffer overflow"),c.transferToFixedLength(d)}get guessFallback(){return a(this,pi).getUint8(0)!==0}get css(){return A(this,nl,Bd).call(this,0)}get loadedName(){return A(this,nl,Bd).call(this,1)}get baseFontName(){return A(this,nl,Bd).call(this,2)}get src(){return A(this,nl,Bd).call(this,3)}get style(){let e=1;e+=4+a(this,pi).getUint32(e);const t=a(this,pi).getUint32(e),s=a(this,tl).decode(new Uint8Array(a(this,ho),e+4,t));e+=4+t;const i=a(this,pi).getUint32(e),r=a(this,tl).decode(new Uint8Array(a(this,ho),e+4,i));return{style:s,weight:r}}};ho=new WeakMap,pi=new WeakMap,tl=new WeakMap,nl=new WeakSet,Bd=function(e){ce(e<Fc.strings.length,"Invalid string index");let t=5;for(let i=0;i<e;i++)t+=a(this,pi).getUint32(t)+4;const s=a(this,pi).getUint32(t);return a(this,tl).decode(new Uint8Array(a(this,ho),t+4,s))},O(Fc,"strings",["css","loadedName","baseFontName","src"]);let T0=Fc;var Ru,Lu,Nu,Mu,Mn,gi,Pp,be,Dn,Ts,Du,Cy,sl,jd;const se=class se{constructor({data:e,extra:t}){p(this,Dn);p(this,Du);p(this,sl);p(this,gi,void 0);p(this,Pp,void 0);p(this,be,void 0);g(this,gi,e),g(this,Pp,new TextDecoder),g(this,be,new DataView(a(this,gi))),t&&Object.assign(this,t)}get black(){return A(this,Dn,Ts).call(this,0)}get bold(){return A(this,Dn,Ts).call(this,1)}get disableFontFace(){return A(this,Dn,Ts).call(this,2)}get fontExtraProperties(){return A(this,Dn,Ts).call(this,3)}get isInvalidPDFjsFont(){return A(this,Dn,Ts).call(this,4)}get isType3Font(){return A(this,Dn,Ts).call(this,5)}get italic(){return A(this,Dn,Ts).call(this,6)}get missingFile(){return A(this,Dn,Ts).call(this,7)}get remeasure(){return A(this,Dn,Ts).call(this,8)}get vertical(){return A(this,Dn,Ts).call(this,9)}get ascent(){return A(this,Du,Cy).call(this,0)}get defaultWidth(){return A(this,Du,Cy).call(this,1)}get descent(){return A(this,Du,Cy).call(this,2)}get bbox(){let e=a(se,Lu);if(a(this,be).getUint8(e)===0)return;e+=1;const s=[];for(let i=0;i<4;i++)s.push(a(this,be).getInt16(e,!0)),e+=2;return s}get fontMatrix(){let e=a(se,Nu);if(a(this,be).getUint8(e)===0)return;e+=1;const s=[];for(let i=0;i<6;i++)s.push(a(this,be).getFloat64(e,!0)),e+=8;return s}get defaultVMetrics(){let e=a(se,Mu);if(a(this,be).getUint8(e)===0)return;e+=1;const s=[];for(let i=0;i<3;i++)s.push(a(this,be).getInt16(e,!0)),e+=2;return s}get fallbackName(){return A(this,sl,jd).call(this,0)}get loadedName(){return A(this,sl,jd).call(this,1)}get mimetype(){return A(this,sl,jd).call(this,2)}get name(){return A(this,sl,jd).call(this,3)}get data(){let e=a(se,Mn);const t=a(this,be).getUint32(e);e+=4+t;const s=a(this,be).getUint32(e);e+=4+s;const i=a(this,be).getUint32(e);e+=4+i;const r=a(this,be).getUint32(e);if(r!==0)return new Uint8Array(a(this,gi),e+4,r)}clearData(){let e=a(se,Mn);const t=a(this,be).getUint32(e);e+=4+t;const s=a(this,be).getUint32(e);e+=4+s;const i=a(this,be).getUint32(e);e+=4+i;const r=a(this,be).getUint32(e);new Uint8Array(a(this,gi),e+4,r).fill(0),a(this,be).setUint32(e,0)}get cssFontInfo(){let e=a(se,Mn);const t=a(this,be).getUint32(e);e+=4+t;const s=a(this,be).getUint32(e);e+=4+s;const i=a(this,be).getUint32(e);if(i===0)return null;const r=new Uint8Array(i);return r.set(new Uint8Array(a(this,gi),e+4,i)),new C0(r.buffer)}get systemFontInfo(){let e=a(se,Mn);const t=a(this,be).getUint32(e);e+=4+t;const s=a(this,be).getUint32(e);if(s===0)return null;const i=new Uint8Array(s);return i.set(new Uint8Array(a(this,gi),e+4,s)),new T0(i.buffer)}static write(e){const t=e.systemFontInfo?T0.write(e.systemFontInfo):null,s=e.cssFontInfo?C0.write(e.cssFontInfo):null,i=new TextEncoder,r={};let o=0;for(const w of se.strings)r[w]=i.encode(e[w]),o+=4+r[w].length;const l=a(se,Mn)+4+o+4+(t?t.byteLength:0)+4+(s?s.byteLength:0)+4+(e.data?e.data.length:0),c=new ArrayBuffer(l),u=new Uint8Array(c),h=new DataView(c);let d=0;const f=se.bools.length;let m=0,y=0;for(let w=0;w<f;w++){const x=e[se.bools[w]];m|=(x===void 0?0:x?2:1)<<y,y+=2,(y===8||w===f-1)&&(h.setUint8(d++,m),m=0,y=0)}ce(d===a(se,Ru),"FontInfo.write: Boolean properties offset mismatch");for(const w of se.numbers)h.setFloat64(d,e[w]),d+=8;if(ce(d===a(se,Lu),"FontInfo.write: Number properties offset mismatch"),e.bbox){h.setUint8(d++,4);for(const w of e.bbox)h.setInt16(d,w,!0),d+=2}else h.setUint8(d++,0),d+=2*4;if(ce(d===a(se,Nu),"FontInfo.write: BBox properties offset mismatch"),e.fontMatrix){h.setUint8(d++,6);for(const w of e.fontMatrix)h.setFloat64(d,w,!0),d+=8}else h.setUint8(d++,0),d+=8*6;if(ce(d===a(se,Mu),"FontInfo.write: FontMatrix properties offset mismatch"),e.defaultVMetrics){h.setUint8(d++,1);for(const w of e.defaultVMetrics)h.setInt16(d,w,!0),d+=2}else h.setUint8(d++,0),d+=3*2;ce(d===a(se,Mn),"FontInfo.write: DefaultVMetrics properties offset mismatch"),h.setUint32(a(se,Mn),0),d+=4;for(const w of se.strings){const x=r[w],v=x.length;h.setUint32(d,v),u.set(x,d+4),d+=4+v}if(h.setUint32(a(se,Mn),d-a(se,Mn)-4),!t)h.setUint32(d,0),d+=4;else{const w=t.byteLength;h.setUint32(d,w),ce(d+4+w<=c.byteLength,"FontInfo.write: Buffer overflow at systemFontInfo"),u.set(new Uint8Array(t),d+4),d+=4+w}if(!s)h.setUint32(d,0),d+=4;else{const w=s.byteLength;h.setUint32(d,w),ce(d+4+w<=c.byteLength,"FontInfo.write: Buffer overflow at cssFontInfo"),u.set(new Uint8Array(s),d+4),d+=4+w}return e.data===void 0?(h.setUint32(d,0),d+=4):(h.setUint32(d,e.data.length),u.set(e.data,d+4),d+=4+e.data.length),ce(d<=c.byteLength,"FontInfo.write: Buffer overflow"),c.transferToFixedLength(d)}};Ru=new WeakMap,Lu=new WeakMap,Nu=new WeakMap,Mu=new WeakMap,Mn=new WeakMap,gi=new WeakMap,Pp=new WeakMap,be=new WeakMap,Dn=new WeakSet,Ts=function(e){ce(e<se.bools.length,"Invalid boolean index");const t=Math.floor(e/4),s=e*2%8,i=a(this,be).getUint8(t)>>s&3;return i===0?void 0:i===2},Du=new WeakSet,Cy=function(e){return ce(e<se.numbers.length,"Invalid number index"),a(this,be).getFloat64(a(se,Ru)+e*8)},sl=new WeakSet,jd=function(e){ce(e<se.strings.length,"Invalid string index");let t=a(se,Mn)+4;for(let r=0;r<e;r++)t+=a(this,be).getUint32(t)+4;const s=a(this,be).getUint32(t),i=new Uint8Array(s);return i.set(new Uint8Array(a(this,gi),t+4,s)),a(this,Pp).decode(i)},O(se,"bools",["black","bold","disableFontFace","fontExtraProperties","isInvalidPDFjsFont","isType3Font","italic","missingFile","remeasure","vertical"]),O(se,"numbers",["ascent","defaultWidth","descent"]),O(se,"strings",["fallbackName","loadedName","mimetype","name"]),p(se,Ru,Math.ceil(se.bools.length*2/8)),p(se,Lu,a(se,Ru)+se.numbers.length*8),p(se,Nu,a(se,Lu)+1+2*4),p(se,Mu,a(se,Nu)+1+8*6),p(se,Mn,a(se,Mu)+1+2*3);let _x=se;var Rp,Lp;class Qn{static get workerPort(){return a(this,Rp)}static set workerPort(e){if(!(typeof Worker<"u"&&e instanceof Worker)&&e!==null)throw new Error("Invalid `workerPort` type.");g(this,Rp,e)}static get workerSrc(){return a(this,Lp)}static set workerSrc(e){if(typeof e!="string")throw new Error("Invalid `workerSrc` type.");g(this,Lp,e)}}Rp=new WeakMap,Lp=new WeakMap,p(Qn,Rp,null),p(Qn,Lp,"");var Iu,Np;class AO{constructor({parsedData:e,rawData:t}){p(this,Iu,void 0);p(this,Np,void 0);g(this,Iu,e),g(this,Np,t)}getRaw(){return a(this,Np)}get(e){return a(this,Iu).get(e)??null}[Symbol.iterator](){return a(this,Iu).entries()}}Iu=new WeakMap,Np=new WeakMap;const vc=Symbol("INTERNAL");var Mp,Dp,Ip,Fu;class EO{constructor(e,{name:t,intent:s,usage:i,rbGroups:r}){p(this,Mp,!1);p(this,Dp,!1);p(this,Ip,!1);p(this,Fu,!0);g(this,Mp,!!(e&Xn.DISPLAY)),g(this,Dp,!!(e&Xn.PRINT)),this.name=t,this.intent=s,this.usage=i,this.rbGroups=r}get visible(){if(a(this,Ip))return a(this,Fu);if(!a(this,Fu))return!1;const{print:e,view:t}=this.usage;return a(this,Mp)?(t==null?void 0:t.viewState)!=="OFF":a(this,Dp)?(e==null?void 0:e.printState)!=="OFF":!0}_setVisible(e,t,s=!1){e!==vc&&_e("Internal method `_setVisible` called."),g(this,Ip,s),g(this,Fu,t)}}Mp=new WeakMap,Dp=new WeakMap,Ip=new WeakMap,Fu=new WeakMap;var fo,xe,Ou,Bu,Fp,Cx;class _O{constructor(e,t=Xn.DISPLAY){p(this,Fp);p(this,fo,null);p(this,xe,new Map);p(this,Ou,null);p(this,Bu,null);if(this.renderingIntent=t,this.name=null,this.creator=null,e!==null){this.name=e.name,this.creator=e.creator,g(this,Bu,e.order);for(const s of e.groups)a(this,xe).set(s.id,new EO(t,s));if(e.baseState==="OFF")for(const s of a(this,xe).values())s._setVisible(vc,!1);for(const s of e.on)a(this,xe).get(s)._setVisible(vc,!0);for(const s of e.off)a(this,xe).get(s)._setVisible(vc,!1);g(this,Ou,this.getHash())}}isVisible(e){if(a(this,xe).size===0)return!0;if(!e)return Kw("Optional content group not defined."),!0;if(e.type==="OCG")return a(this,xe).has(e.id)?a(this,xe).get(e.id).visible:(ee(`Optional content group not found: ${e.id}`),!0);if(e.type==="OCMD"){if(e.expression)return A(this,Fp,Cx).call(this,e.expression);if(!e.policy||e.policy==="AnyOn"){for(const t of e.ids){if(!a(this,xe).has(t))return ee(`Optional content group not found: ${t}`),!0;if(a(this,xe).get(t).visible)return!0}return!1}else if(e.policy==="AllOn"){for(const t of e.ids){if(!a(this,xe).has(t))return ee(`Optional content group not found: ${t}`),!0;if(!a(this,xe).get(t).visible)return!1}return!0}else if(e.policy==="AnyOff"){for(const t of e.ids){if(!a(this,xe).has(t))return ee(`Optional content group not found: ${t}`),!0;if(!a(this,xe).get(t).visible)return!0}return!1}else if(e.policy==="AllOff"){for(const t of e.ids){if(!a(this,xe).has(t))return ee(`Optional content group not found: ${t}`),!0;if(a(this,xe).get(t).visible)return!1}return!0}return ee(`Unknown optional content policy ${e.policy}.`),!0}return ee(`Unknown group type ${e.type}.`),!0}setVisibility(e,t=!0,s=!0){var r;const i=a(this,xe).get(e);if(!i){ee(`Optional content group not found: ${e}`);return}if(s&&t&&i.rbGroups.length)for(const o of i.rbGroups)for(const l of o)l!==e&&((r=a(this,xe).get(l))==null||r._setVisible(vc,!1,!0));i._setVisible(vc,!!t,!0),g(this,fo,null)}setOCGState({state:e,preserveRB:t}){let s;for(const i of e){switch(i){case"ON":case"OFF":case"Toggle":s=i;continue}const r=a(this,xe).get(i);if(r)switch(s){case"ON":this.setVisibility(i,!0,t);break;case"OFF":this.setVisibility(i,!1,t);break;case"Toggle":this.setVisibility(i,!r.visible,t);break}}g(this,fo,null)}get hasInitialVisibility(){return a(this,Ou)===null||this.getHash()===a(this,Ou)}getOrder(){return a(this,xe).size?a(this,Bu)?a(this,Bu).slice():[...a(this,xe).keys()]:null}getGroup(e){return a(this,xe).get(e)||null}getHash(){if(a(this,fo)!==null)return a(this,fo);const e=new ZP;for(const[t,s]of a(this,xe))e.update(`${t}:${s.visible}`);return g(this,fo,e.hexdigest())}[Symbol.iterator](){return a(this,xe).entries()}}fo=new WeakMap,xe=new WeakMap,Ou=new WeakMap,Bu=new WeakMap,Fp=new WeakSet,Cx=function(e){const t=e.length;if(t<2)return!0;const s=e[0];for(let i=1;i<t;i++){const r=e[i];let o;if(Array.isArray(r))o=A(this,Fp,Cx).call(this,r);else if(a(this,xe).has(r))o=a(this,xe).get(r).visible;else return ee(`Optional content group not found: ${r}`),!0;switch(s){case"And":if(!o)return!1;break;case"Or":if(o)return!0;break;case"Not":return!o;default:return!0}}return s==="And"};class CO{constructor(e,{disableRange:t=!1,disableStream:s=!1}){ce(e,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:i,initialData:r,progressiveDone:o,contentDispositionFilename:l}=e;if(this._queuedChunks=[],this._progressiveDone=o,this._contentDispositionFilename=l,(r==null?void 0:r.length)>0){const c=r instanceof Uint8Array&&r.byteLength===r.buffer.byteLength?r.buffer:new Uint8Array(r).buffer;this._queuedChunks.push(c)}this._pdfDataRangeTransport=e,this._isStreamingSupported=!s,this._isRangeSupported=!t,this._contentLength=i,this._fullRequestReader=null,this._rangeReaders=[],e.addRangeListener((c,u)=>{this._onReceiveData({begin:c,chunk:u})}),e.addProgressListener((c,u)=>{this._onProgress({loaded:c,total:u})}),e.addProgressiveReadListener(c=>{this._onReceiveData({chunk:c})}),e.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),e.transportReady()}_onReceiveData({begin:e,chunk:t}){const s=t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength?t.buffer:new Uint8Array(t).buffer;if(e===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(s):this._queuedChunks.push(s);else{const i=this._rangeReaders.some(function(r){return r._begin!==e?!1:(r._enqueue(s),!0)});ce(i,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}_onProgress(e){var t,s,i,r;e.total===void 0?(s=(t=this._rangeReaders[0])==null?void 0:t.onProgress)==null||s.call(t,{loaded:e.loaded}):(r=(i=this._fullRequestReader)==null?void 0:i.onProgress)==null||r.call(i,{loaded:e.loaded,total:e.total})}_onProgressiveDone(){var e;(e=this._fullRequestReader)==null||e.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(e){const t=this._rangeReaders.indexOf(e);t>=0&&this._rangeReaders.splice(t,1)}getFullReader(){ce(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const e=this._queuedChunks;return this._queuedChunks=null,new TO(this,e,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const s=new kO(this,e,t);return this._pdfDataRangeTransport.requestDataRange(e,t),this._rangeReaders.push(s),s}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const s of this._rangeReaders.slice(0))s.cancel(e);this._pdfDataRangeTransport.abort()}}class TO{constructor(e,t,s=!1,i=null){this._stream=e,this._done=s||!1,this._filename=Jw(i)?i:null,this._queuedChunks=t||[],this._loaded=0;for(const r of this._queuedChunks)this._loaded+=r.byteLength;this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}_enqueue(e){this._done||(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunks.push(e),this._loaded+=e.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class kO{constructor(e,t,s){this._stream=e,this._begin=t,this._end=s,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(e){if(!this._done){if(this._requests.length===0)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function PO(n){let e=!0,t=s("filename\\*","i").exec(n);if(t){t=t[1];let h=l(t);return h=unescape(h),h=c(h),h=u(h),r(h)}if(t=o(n),t){const h=u(t);return r(h)}if(t=s("filename","i").exec(n),t){t=t[1];let h=l(t);return h=u(h),r(h)}function s(h,d){return new RegExp("(?:^|;)\\s*"+h+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',d)}function i(h,d){if(h){if(!/^[\x00-\xFF]+$/.test(d))return d;try{const f=new TextDecoder(h,{fatal:!0}),m=ym(d);d=f.decode(m),e=!1}catch{}}return d}function r(h){return e&&/[\x80-\xff]/.test(h)&&(h=i("utf-8",h),e&&(h=i("iso-8859-1",h))),h}function o(h){const d=[];let f;const m=s("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(f=m.exec(h))!==null;){let[,w,x,v]=f;if(w=parseInt(w,10),w in d){if(w===0)break;continue}d[w]=[x,v]}const y=[];for(let w=0;w<d.length&&w in d;++w){let[x,v]=d[w];v=l(v),x&&(v=unescape(v),w===0&&(v=c(v))),y.push(v)}return y.join("")}function l(h){if(h.startsWith('"')){const d=h.slice(1).split('\\"');for(let f=0;f<d.length;++f){const m=d[f].indexOf('"');m!==-1&&(d[f]=d[f].slice(0,m),d.length=f+1),d[f]=d[f].replaceAll(/\\(.)/g,"$1")}h=d.join('"')}return h}function c(h){const d=h.indexOf("'");if(d===-1)return h;const f=h.slice(0,d),y=h.slice(d+1).replace(/^[^']*'/,"");return i(f,y)}function u(h){return!h.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(h)?h:h.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(d,f,m,y){if(m==="q"||m==="Q")return y=y.replaceAll("_"," "),y=y.replaceAll(/=([0-9a-fA-F]{2})/g,function(w,x){return String.fromCharCode(parseInt(x,16))}),i(f,y);try{y=atob(y)}catch{}return i(f,y)})}return""}function dR(n,e){const t=new Headers;if(!n||!e||typeof e!="object")return t;for(const s in e){const i=e[s];i!==void 0&&t.append(s,i)}return t}function Zw(n){var e;return((e=URL.parse(n))==null?void 0:e.origin)??null}function fR({responseHeaders:n,isHttp:e,rangeChunkSize:t,disableRange:s}){const i={allowRangeRequests:!1,suggestedLength:void 0},r=parseInt(n.get("Content-Length"),10);return!Number.isInteger(r)||(i.suggestedLength=r,r<=2*t)||s||!e||n.get("Accept-Ranges")!=="bytes"||(n.get("Content-Encoding")||"identity")!=="identity"||(i.allowRangeRequests=!0),i}function pR(n){const e=n.get("Content-Disposition");if(e){let t=PO(e);if(t.includes("%"))try{t=decodeURIComponent(t)}catch{}if(Jw(t))return t}return null}function xm(n,e){return new _f(`Unexpected server response (${n}) while retrieving PDF "${e}".`,n,n===404||n===0&&e.startsWith("file:"))}function gR(n){return n===200||n===206}function mR(n,e,t){return{method:"GET",headers:n,signal:t.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"}}function yR(n){return n instanceof Uint8Array?n.buffer:n instanceof ArrayBuffer?n:(ee(`getArrayBuffer - unexpected data format: ${n}`),new Uint8Array(n).buffer)}class RO{constructor(e){O(this,"_responseOrigin",null);this.source=e,this.isHttp=/^https?:/i.test(e.url),this.headers=dR(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return ce(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new LO(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const s=new NO(this,e,t);return this._rangeRequestReaders.push(s),s}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const s of this._rangeRequestReaders.slice(0))s.cancel(e)}}class LO{constructor(e){this._stream=e,this._reader=null,this._loaded=0,this._filename=null;const t=e.source;this._withCredentials=t.withCredentials||!1,this._contentLength=t.length,this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange;const s=new Headers(e.headers),i=t.url;fetch(i,mR(s,this._withCredentials,this._abortController)).then(r=>{if(e._responseOrigin=Zw(r.url),!gR(r.status))throw xm(r.status,i);this._reader=r.body.getReader(),this._headersCapability.resolve();const o=r.headers,{allowRangeRequests:l,suggestedLength:c}=fR({responseHeaders:o,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=l,this._contentLength=c||this._contentLength,this._filename=pR(o),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new Lr("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var s;await this._headersCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(s=this.onProgress)==null||s.call(this,{loaded:this._loaded,total:this._contentLength}),{value:yR(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}class NO{constructor(e,t,s){this._stream=e,this._reader=null,this._loaded=0;const i=e.source;this._withCredentials=i.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!i.disableStream,this._abortController=new AbortController;const r=new Headers(e.headers);r.append("Range",`bytes=${t}-${s-1}`);const o=i.url;fetch(o,mR(r,this._withCredentials,this._abortController)).then(l=>{const c=Zw(l.url);if(c!==e._responseOrigin)throw new Error(`Expected range response-origin "${c}" to match "${e._responseOrigin}".`);if(!gR(l.status))throw xm(l.status,o);this._readCapability.resolve(),this._reader=l.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var s;await this._readCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(s=this.onProgress)==null||s.call(this,{loaded:this._loaded}),{value:yR(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}const W1=200,G1=206;function MO(n){const e=n.response;return typeof e!="string"?e:ym(e).buffer}class DO{constructor({url:e,httpHeaders:t,withCredentials:s}){O(this,"_responseOrigin",null);this.url=e,this.isHttp=/^https?:/i.test(e),this.headers=dR(this.isHttp,t),this.withCredentials=s||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(e){const t=new XMLHttpRequest,s=this.currXhrId++,i=this.pendingRequests[s]={xhr:t};t.open("GET",this.url),t.withCredentials=this.withCredentials;for(const[r,o]of this.headers)t.setRequestHeader(r,o);return this.isHttp&&"begin"in e&&"end"in e?(t.setRequestHeader("Range",`bytes=${e.begin}-${e.end-1}`),i.expectedStatus=G1):i.expectedStatus=W1,t.responseType="arraybuffer",ce(e.onError,"Expected `onError` callback to be provided."),t.onerror=()=>{e.onError(t.status)},t.onreadystatechange=this.onStateChange.bind(this,s),t.onprogress=this.onProgress.bind(this,s),i.onHeadersReceived=e.onHeadersReceived,i.onDone=e.onDone,i.onError=e.onError,i.onProgress=e.onProgress,t.send(null),s}onProgress(e,t){var i;const s=this.pendingRequests[e];s&&((i=s.onProgress)==null||i.call(s,t))}onStateChange(e,t){const s=this.pendingRequests[e];if(!s)return;const i=s.xhr;if(i.readyState>=2&&s.onHeadersReceived&&(s.onHeadersReceived(),delete s.onHeadersReceived),i.readyState!==4||!(e in this.pendingRequests))return;if(delete this.pendingRequests[e],i.status===0&&this.isHttp){s.onError(i.status);return}const r=i.status||W1;if(!(r===W1&&s.expectedStatus===G1)&&r!==s.expectedStatus){s.onError(i.status);return}const l=MO(i);if(r===G1){const c=i.getResponseHeader("Content-Range"),u=/bytes (\d+)-(\d+)\/(\d+)/.exec(c);u?s.onDone({begin:parseInt(u[1],10),chunk:l}):(ee('Missing or invalid "Content-Range" header.'),s.onError(0))}else l?s.onDone({begin:0,chunk:l}):s.onError(i.status)}getRequestXhr(e){return this.pendingRequests[e].xhr}isPendingRequest(e){return e in this.pendingRequests}abortRequest(e){const t=this.pendingRequests[e].xhr;delete this.pendingRequests[e],t.abort()}}class IO{constructor(e){this._source=e,this._manager=new DO(e),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(e){const t=this._rangeRequestReaders.indexOf(e);t>=0&&this._rangeRequestReaders.splice(t,1)}getFullReader(){return ce(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new FO(this._manager,this._source),this._fullRequestReader}getRangeReader(e,t){const s=new OO(this._manager,e,t);return s.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(s),s}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const s of this._rangeRequestReaders.slice(0))s.cancel(e)}}class FO{constructor(e,t){this._manager=e,this._url=t.url,this._fullRequestId=e.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._contentLength=t.length,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const e=this._fullRequestId,t=this._manager.getRequestXhr(e);this._manager._responseOrigin=Zw(t.responseURL);const s=t.getAllResponseHeaders(),i=new Headers(s?s.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(l=>{const[c,...u]=l.split(": ");return[c,u.join(": ")]}):[]),{allowRangeRequests:r,suggestedLength:o}=fR({responseHeaders:i,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});r&&(this._isRangeSupported=!0),this._contentLength=o||this._contentLength,this._filename=pR(i),this._isRangeSupported&&this._manager.abortRequest(e),this._headersCapability.resolve()}_onDone(e){if(e&&(this._requests.length>0?this._requests.shift().resolve({value:e.chunk,done:!1}):this._cachedChunks.push(e.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(e){this._storedError=xm(e,this._url),this._headersCapability.reject(this._storedError);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(e){var t;(t=this.onProgress)==null||t.call(this,{loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0,this._headersCapability.reject(e);for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class OO{constructor(e,t,s){this._manager=e,this._url=e.url,this._requestId=e.request({begin:t,end:s,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){var t;const e=Zw((t=this._manager.getRequestXhr(this._requestId))==null?void 0:t.responseURL);e!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${e}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){var e;(e=this.onClosed)==null||e.call(this,this)}_onDone(e){const t=e.chunk;this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunk=t,this._done=!0;for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(e){this._storedError??(this._storedError=xm(e,this._url));for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(e){var t;this.isStreamingSupported||(t=this.onProgress)==null||t.call(this,{loaded:e.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const BO=/^[a-z][a-z0-9\-+.]+:/i;function jO(n){if(BO.test(n))return new URL(n);const e=process.getBuiltinModule("url");return new URL(e.pathToFileURL(n))}class UO{constructor(e){this.source=e,this.url=jO(e.url),ce(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return ce(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new zO(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const s=new $O(this,e,t);return this._rangeRequestReaders.push(s),s}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const s of this._rangeRequestReaders.slice(0))s.cancel(e)}}class zO{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;const t=e.source;this._contentLength=t.length,this._loaded=0,this._filename=null,this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const s=process.getBuiltinModule("fs");s.promises.lstat(this._url).then(i=>{this._contentLength=i.size,this._setReadableStream(s.createReadStream(this._url)),this._headersCapability.resolve()},i=>{i.code==="ENOENT"&&(i=xm(0,this._url.href)),this._storedError=i,this._headersCapability.reject(i)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var s;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(s=this.onProgress)==null||s.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new Lr("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class $O{constructor(e,t,s){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const i=e.source;this._isStreamingSupported=!i.disableStream;const r=process.getBuiltinModule("fs");this._setReadableStream(r.createReadStream(this._url,{start:t,end:s-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){var s;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(s=this.onProgress)==null||s.call(this,{loaded:this._loaded}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const bd=Symbol("INITIAL_DATA");var In,Op,Tx;class vR{constructor(){p(this,Op);p(this,In,Object.create(null))}get(e,t=null){if(t){const i=A(this,Op,Tx).call(this,e);return i.promise.then(()=>t(i.data)),null}const s=a(this,In)[e];if(!s||s.data===bd)throw new Error(`Requesting object that isn't resolved yet ${e}.`);return s.data}has(e){const t=a(this,In)[e];return!!t&&t.data!==bd}delete(e){const t=a(this,In)[e];return!t||t.data===bd?!1:(delete a(this,In)[e],!0)}resolve(e,t=null){const s=A(this,Op,Tx).call(this,e);s.data=t,s.resolve()}clear(){var e;for(const t in a(this,In)){const{data:s}=a(this,In)[t];(e=s==null?void 0:s.bitmap)==null||e.close()}g(this,In,Object.create(null))}*[Symbol.iterator](){for(const e in a(this,In)){const{data:t}=a(this,In)[e];t!==bd&&(yield[e,t])}}}In=new WeakMap,Op=new WeakSet,Tx=function(e){var t;return(t=a(this,In))[e]||(t[e]={...Promise.withResolvers(),data:bd})};const HO=1e5,nC=30;var gC,po,vn,Bp,jp,il,ir,Up,zp,rl,ju,Uu,go,zu,$p,$u,ol,Hp,Vp,Be,Hu,al,Wp,mo,Vu,wv,wR,bv,bR,Gp,kx,Wu,Ty,qp,Px,xv,xR,Sv,SR;let Pf=(Be=class{constructor({textContentSource:e,container:t,viewport:s}){p(this,wv);p(this,bv);p(this,Gp);p(this,po,Promise.withResolvers());p(this,vn,null);p(this,Bp,!1);p(this,jp,!!((gC=globalThis.FontInspector)!=null&&gC.enabled));p(this,il,null);p(this,ir,null);p(this,Up,0);p(this,zp,0);p(this,rl,null);p(this,ju,null);p(this,Uu,0);p(this,go,0);p(this,zu,Object.create(null));p(this,$p,[]);p(this,$u,null);p(this,ol,[]);p(this,Hp,new WeakMap);p(this,Vp,null);var c;if(e instanceof ReadableStream)g(this,$u,e);else if(typeof e=="object")g(this,$u,new ReadableStream({start(u){u.enqueue(e),u.close()}}));else throw new Error('No "textContentSource" parameter specified.');g(this,vn,g(this,ju,t)),g(this,go,s.scale*Ks.pixelRatio),g(this,Uu,s.rotation),g(this,ir,{div:null,properties:null,ctx:null});const{pageWidth:i,pageHeight:r,pageX:o,pageY:l}=s.rawDims;g(this,Vp,[1,0,0,-1,-o,l+r]),g(this,zp,i),g(this,Up,r),A(c=Be,xv,xR).call(c),na(t,s),a(this,po).promise.finally(()=>{a(Be,Vu).delete(this),g(this,ir,null),g(this,zu,null)}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:e,isFirefox:t}=Tt.platform;return ie(this,"fontFamilyMap",new Map([["sans-serif",`${e&&t?"Calibri, ":""}sans-serif`],["monospace",`${e&&t?"Lucida Console, ":""}monospace`]]))}render(){const e=()=>{a(this,rl).read().then(({value:t,done:s})=>{if(s){a(this,po).resolve();return}a(this,il)??g(this,il,t.lang),Object.assign(a(this,zu),t.styles),A(this,wv,wR).call(this,t.items),e()},a(this,po).reject)};return g(this,rl,a(this,$u).getReader()),a(Be,Vu).add(this),e(),a(this,po).promise}update({viewport:e,onBefore:t=null}){var r;const s=e.scale*Ks.pixelRatio,i=e.rotation;if(i!==a(this,Uu)&&(t==null||t(),g(this,Uu,i),na(a(this,ju),{rotation:i})),s!==a(this,go)){t==null||t(),g(this,go,s);const o={div:null,properties:null,ctx:A(r=Be,Wu,Ty).call(r,a(this,il))};for(const l of a(this,ol))o.properties=a(this,Hp).get(l),o.div=l,A(this,Gp,kx).call(this,o)}}cancel(){var t;const e=new Lr("TextLayer task cancelled.");(t=a(this,rl))==null||t.cancel(e).catch(()=>{}),g(this,rl,null),a(this,po).reject(e)}get textDivs(){return a(this,ol)}get textContentItemsStr(){return a(this,$p)}static cleanup(){if(!(a(this,Vu).size>0)){a(this,Hu).clear();for(const{canvas:e}of a(this,al).values())e.remove();a(this,al).clear()}}},po=new WeakMap,vn=new WeakMap,Bp=new WeakMap,jp=new WeakMap,il=new WeakMap,ir=new WeakMap,Up=new WeakMap,zp=new WeakMap,rl=new WeakMap,ju=new WeakMap,Uu=new WeakMap,go=new WeakMap,zu=new WeakMap,$p=new WeakMap,$u=new WeakMap,ol=new WeakMap,Hp=new WeakMap,Vp=new WeakMap,Hu=new WeakMap,al=new WeakMap,Wp=new WeakMap,mo=new WeakMap,Vu=new WeakMap,wv=new WeakSet,wR=function(e){var i,r;if(a(this,Bp))return;(r=a(this,ir)).ctx??(r.ctx=A(i=Be,Wu,Ty).call(i,a(this,il)));const t=a(this,ol),s=a(this,$p);for(const o of e){if(t.length>HO){ee("Ignoring additional textDivs for performance reasons."),g(this,Bp,!0);return}if(o.str===void 0){if(o.type==="beginMarkedContentProps"||o.type==="beginMarkedContent"){const l=a(this,vn);g(this,vn,document.createElement("span")),a(this,vn).classList.add("markedContent"),o.id&&a(this,vn).setAttribute("id",`${o.id}`),l.append(a(this,vn))}else o.type==="endMarkedContent"&&g(this,vn,a(this,vn).parentNode);continue}s.push(o.str),A(this,bv,bR).call(this,o)}},bv=new WeakSet,bR=function(e){var w;const t=document.createElement("span"),s={angle:0,canvasWidth:0,hasText:e.str!=="",hasEOL:e.hasEOL,fontSize:0};a(this,ol).push(t);const i=V.transform(a(this,Vp),e.transform);let r=Math.atan2(i[1],i[0]);const o=a(this,zu)[e.fontName];o.vertical&&(r+=Math.PI/2);let l=a(this,jp)&&o.fontSubstitution||o.fontFamily;l=Be.fontFamilyMap.get(l)||l;const c=Math.hypot(i[2],i[3]),u=c*A(w=Be,Sv,SR).call(w,l,o,a(this,il));let h,d;r===0?(h=i[4],d=i[5]-u):(h=i[4]+u*Math.sin(r),d=i[5]-u*Math.cos(r));const f="calc(var(--total-scale-factor) *",m=t.style;a(this,vn)===a(this,ju)?(m.left=`${(100*h/a(this,zp)).toFixed(2)}%`,m.top=`${(100*d/a(this,Up)).toFixed(2)}%`):(m.left=`${f}${h.toFixed(2)}px)`,m.top=`${f}${d.toFixed(2)}px)`),m.fontSize=`${f}${(a(Be,mo)*c).toFixed(2)}px)`,m.fontFamily=l,s.fontSize=c,t.setAttribute("role","presentation"),t.textContent=e.str,t.dir=e.dir,a(this,jp)&&(t.dataset.fontName=o.fontSubstitutionLoadedName||e.fontName),r!==0&&(s.angle=r*(180/Math.PI));let y=!1;if(e.str.length>1)y=!0;else if(e.str!==" "&&e.transform[0]!==e.transform[3]){const x=Math.abs(e.transform[0]),v=Math.abs(e.transform[3]);x!==v&&Math.max(x,v)/Math.min(x,v)>1.5&&(y=!0)}if(y&&(s.canvasWidth=o.vertical?e.height:e.width),a(this,Hp).set(t,s),a(this,ir).div=t,a(this,ir).properties=s,A(this,Gp,kx).call(this,a(this,ir)),s.hasText&&a(this,vn).append(t),s.hasEOL){const x=document.createElement("br");x.setAttribute("role","presentation"),a(this,vn).append(x)}},Gp=new WeakSet,kx=function(e){var l;const{div:t,properties:s,ctx:i}=e,{style:r}=t;let o="";if(a(Be,mo)>1&&(o=`scale(${1/a(Be,mo)})`),s.canvasWidth!==0&&s.hasText){const{fontFamily:c}=r,{canvasWidth:u,fontSize:h}=s;A(l=Be,qp,Px).call(l,i,h*a(this,go),c);const{width:d}=i.measureText(t.textContent);d>0&&(o=`scaleX(${u*a(this,go)/d}) ${o}`)}s.angle!==0&&(o=`rotate(${s.angle}deg) ${o}`),o.length>0&&(r.transform=o)},Wu=new WeakSet,Ty=function(e=null){let t=a(this,al).get(e||(e=""));if(!t){const s=document.createElement("canvas");s.className="hiddenCanvasElement",s.lang=e,document.body.append(s),t=s.getContext("2d",{alpha:!1,willReadFrequently:!0}),a(this,al).set(e,t),a(this,Wp).set(t,{size:0,family:""})}return t},qp=new WeakSet,Px=function(e,t,s){const i=a(this,Wp).get(e);t===i.size&&s===i.family||(e.font=`${t}px ${s}`,i.size=t,i.family=s)},xv=new WeakSet,xR=function(){if(a(this,mo)!==null)return;const e=document.createElement("div");e.style.opacity=0,e.style.lineHeight=1,e.style.fontSize="1px",e.style.position="absolute",e.textContent="X",document.body.append(e),g(this,mo,e.getBoundingClientRect().height),e.remove()},Sv=new WeakSet,SR=function(e,t,s){const i=a(this,Hu).get(e);if(i)return i;const r=A(this,Wu,Ty).call(this,s);r.canvas.width=r.canvas.height=nC,A(this,qp,Px).call(this,r,nC,e);const o=r.measureText(""),l=o.fontBoundingBoxAscent,c=Math.abs(o.fontBoundingBoxDescent);r.canvas.width=r.canvas.height=0;let u=.8;return l?u=l/(l+c):(Tt.platform.isFirefox&&ee("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),t.ascent?u=t.ascent:t.descent&&(u=1+t.descent)),a(this,Hu).set(e,u),u},p(Be,Wu),p(Be,qp),p(Be,xv),p(Be,Sv),p(Be,Hu,new Map),p(Be,al,new Map),p(Be,Wp,new WeakMap),p(Be,mo,null),p(Be,Vu,new Set),Be);const VO=100;function OA(n={}){typeof n=="string"||n instanceof URL?n={url:n}:(n instanceof ArrayBuffer||ArrayBuffer.isView(n))&&(n={data:n});const e=new Rx,{docId:t}=e,s=n.url?JF(n.url):null,i=n.data?ZF(n.data):null,r=n.httpHeaders||null,o=n.withCredentials===!0,l=n.password??null,c=n.range instanceof BA?n.range:null,u=Number.isInteger(n.rangeChunkSize)&&n.rangeChunkSize>0?n.rangeChunkSize:2**16;let h=n.worker instanceof td?n.worker:null;const d=n.verbosity,f=typeof n.docBaseUrl=="string"&&!wm(n.docBaseUrl)?n.docBaseUrl:null,m=Wm(n.cMapUrl),y=n.cMapPacked!==!1,w=n.CMapReaderFactory||(rn?oO:$_),x=Wm(n.iccUrl),v=Wm(n.standardFontDataUrl),b=n.StandardFontDataFactory||(rn?aO:H_),S=Wm(n.wasmUrl),E=n.WasmFactory||(rn?lO:V_),C=n.stopAtErrors!==!0,T=Number.isInteger(n.maxImageSize)&&n.maxImageSize>-1?n.maxImageSize:-1,k=n.isEvalSupported!==!1,P=typeof n.isOffscreenCanvasSupported=="boolean"?n.isOffscreenCanvasSupported:!rn,N=typeof n.isImageDecoderSupported=="boolean"?n.isImageDecoderSupported:!rn&&(Tt.platform.isFirefox||!globalThis.chrome),M=Number.isInteger(n.canvasMaxAreaInBytes)?n.canvasMaxAreaInBytes:-1,I=typeof n.disableFontFace=="boolean"?n.disableFontFace:rn,j=n.fontExtraProperties===!0,H=n.enableXfa===!0,z=n.ownerDocument||globalThis.document,Q=n.disableRange===!0,F=n.disableStream===!0,$=n.disableAutoFetch===!0,L=n.pdfBug===!0,U=n.CanvasFactory||(rn?rO:nO),K=n.FilterFactory||(rn?iO:sO),J=n.enableHWA===!0,X=n.useWasm!==!1,te=c?c.length:n.length??NaN,fe=typeof n.useSystemFonts=="boolean"?n.useSystemFonts:!rn&&!I,Le=typeof n.useWorkerFetch=="boolean"?n.useWorkerFetch:!!(w===$_&&b===H_&&E===V_&&m&&v&&S&&Td(m,document.baseURI)&&Td(v,document.baseURI)&&Td(S,document.baseURI)),ze=null;MF(d);const ue={canvasFactory:new U({ownerDocument:z,enableHWA:J}),filterFactory:new K({docId:t,ownerDocument:z}),cMapReaderFactory:Le?null:new w({baseUrl:m,isCompressed:y}),standardFontDataFactory:Le?null:new b({baseUrl:v}),wasmFactory:Le?null:new E({baseUrl:S})};h||(h=td.create({verbosity:d,port:Qn.workerPort}),e._worker=h);const Li={docId:t,apiVersion:"5.4.296",data:i,password:l,disableAutoFetch:$,rangeChunkSize:u,length:te,docBaseUrl:f,enableXfa:H,evaluatorOptions:{maxImageSize:T,disableFontFace:I,ignoreErrors:C,isEvalSupported:k,isOffscreenCanvasSupported:P,isImageDecoderSupported:N,canvasMaxAreaInBytes:M,fontExtraProperties:j,useSystemFonts:fe,useWasm:X,useWorkerFetch:Le,cMapUrl:m,iccUrl:x,standardFontDataUrl:v,wasmUrl:S}},Ni={ownerDocument:z,pdfBug:L,styleElement:ze,loadingParams:{disableAutoFetch:$,enableXfa:H}};return h.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");if(h.destroyed)throw new Error("Worker was destroyed");const kn=h.messageHandler.sendWithPromise("GetDocRequest",Li,i?[i.buffer]:null);let pe;if(c)pe=new CO(c,{disableRange:Q,disableStream:F});else if(!i){if(!s)throw new Error("getDocument - no `url` parameter provided.");const Mi=Td(s)?RO:rn?UO:IO;pe=new Mi({url:s,length:te,httpHeaders:r,withCredentials:o,rangeChunkSize:u,disableRange:Q,disableStream:F})}return kn.then(Mi=>{if(e.destroyed)throw new Error("Loading aborted");if(h.destroyed)throw new Error("Worker was destroyed");const De=new Md(t,Mi,h.port),Ce=new qO(De,e,pe,Ni,ue,J);e._transport=Ce,De.send("Ready",null)})}).catch(e._capability.reject),e}var Av;const Ev=class Ev{constructor(){O(this,"_capability",Promise.withResolvers());O(this,"_transport",null);O(this,"_worker",null);O(this,"docId",`d${ct(Ev,Av)._++}`);O(this,"destroyed",!1);O(this,"onPassword",null);O(this,"onProgress",null)}get promise(){return this._capability.promise}async destroy(){var e,t,s,i;this.destroyed=!0;try{(e=this._worker)!=null&&e.port&&(this._worker._pendingDestroy=!0),await((t=this._transport)==null?void 0:t.destroy())}catch(r){throw(s=this._worker)!=null&&s.port&&delete this._worker._pendingDestroy,r}this._transport=null,(i=this._worker)==null||i.destroy(),this._worker=null}async getData(){return this._transport.getData()}};Av=new WeakMap,p(Ev,Av,0);let Rx=Ev;var ll,Xp,Yp,Kp,Qp,mC;let BA=(mC=class{constructor(e,t,s=!1,i=null){p(this,ll,Promise.withResolvers());p(this,Xp,[]);p(this,Yp,[]);p(this,Kp,[]);p(this,Qp,[]);this.length=e,this.initialData=t,this.progressiveDone=s,this.contentDispositionFilename=i}addRangeListener(e){a(this,Qp).push(e)}addProgressListener(e){a(this,Kp).push(e)}addProgressiveReadListener(e){a(this,Yp).push(e)}addProgressiveDoneListener(e){a(this,Xp).push(e)}onDataRange(e,t){for(const s of a(this,Qp))s(e,t)}onDataProgress(e,t){a(this,ll).promise.then(()=>{for(const s of a(this,Kp))s(e,t)})}onDataProgressiveRead(e){a(this,ll).promise.then(()=>{for(const t of a(this,Yp))t(e)})}onDataProgressiveDone(){a(this,ll).promise.then(()=>{for(const e of a(this,Xp))e()})}transportReady(){a(this,ll).resolve()}requestDataRange(e,t){_e("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}},ll=new WeakMap,Xp=new WeakMap,Yp=new WeakMap,Kp=new WeakMap,Qp=new WeakMap,mC);class WO{constructor(e,t){this._pdfInfo=e,this._transport=t}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return ie(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getAnnotationsByType(e,t){return this._transport.getAnnotationsByType(e,t)}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getOptionalContentConfig(t)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(e){return this._transport.cachedPageNumber(e)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var rr,cl,Ud;class GO{constructor(e,t,s,i=!1){p(this,cl);p(this,rr,!1);this._pageIndex=e,this._pageInfo=t,this._transport=s,this._stats=i?new I_:null,this._pdfBug=i,this.commonObjs=s.commonObjs,this.objs=new vR,this._intentStates=new Map,this.destroyed=!1,this.recordedBBoxes=null}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:t=this.rotate,offsetX:s=0,offsetY:i=0,dontFlip:r=!1}={}){return new vm({viewBox:this.view,userUnit:this.userUnit,scale:e,rotation:t,offsetX:s,offsetY:i,dontFlip:r})}getAnnotations({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,t)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return ie(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var e;return((e=this._transport._htmlForXfa)==null?void 0:e.children[this._pageIndex])||null}render({canvasContext:e,canvas:t=e.canvas,viewport:s,intent:i="display",annotationMode:r=ki.ENABLE,transform:o=null,background:l=null,optionalContentConfigPromise:c=null,annotationCanvasMap:u=null,pageColors:h=null,printAnnotationStorage:d=null,isEditing:f=!1,recordOperations:m=!1,operationsFilter:y=null}){var N,M,I;(N=this._stats)==null||N.time("Overall");const w=this._transport.getRenderingIntent(i,r,d,f),{renderingIntent:x,cacheKey:v}=w;g(this,rr,!1),c||(c=this._transport.getOptionalContentConfig(x));let b=this._intentStates.get(v);b||(b=Object.create(null),this._intentStates.set(v,b)),b.streamReaderCancelTimeout&&(clearTimeout(b.streamReaderCancelTimeout),b.streamReaderCancelTimeout=null);const S=!!(x&Xn.PRINT);b.displayReadyCapability||(b.displayReadyCapability=Promise.withResolvers(),b.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(M=this._stats)==null||M.time("Page Request"),this._pumpOperatorList(w));const E=!!(this._pdfBug&&((I=globalThis.StepperManager)!=null&&I.enabled)),C=!this.recordedBBoxes&&(m||E),T=j=>{var H,z;if(b.renderTasks.delete(k),C){const Q=(H=k.gfx)==null?void 0:H.dependencyTracker.take();Q&&(k.stepper&&k.stepper.setOperatorBBoxes(Q,k.gfx.dependencyTracker.takeDebugMetadata()),m&&(this.recordedBBoxes=Q))}S&&g(this,rr,!0),A(this,cl,Ud).call(this),j?(k.capability.reject(j),this._abortOperatorList({intentState:b,reason:j instanceof Error?j:new Error(j)})):k.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(z=globalThis.Stats)!=null&&z.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},k=new Lx({callback:T,params:{canvas:t,canvasContext:e,dependencyTracker:C?new uO(t,b.operatorList.length,E):null,viewport:s,transform:o,background:l},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:u,operatorList:b.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!S,pdfBug:this._pdfBug,pageColors:h,enableHWA:this._transport.enableHWA,operationsFilter:y});(b.renderTasks||(b.renderTasks=new Set)).add(k);const P=k.task;return Promise.all([b.displayReadyCapability.promise,c]).then(([j,H])=>{var z;if(this.destroyed){T();return}if((z=this._stats)==null||z.time("Rendering"),!(H.renderingIntent&x))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");k.initializeGraphics({transparency:j,optionalContentConfig:H}),k.operatorListChanged()}).catch(T),P}getOperatorList({intent:e="display",annotationMode:t=ki.ENABLE,printAnnotationStorage:s=null,isEditing:i=!1}={}){var u;function r(){l.operatorList.lastChunk&&(l.opListReadCapability.resolve(l.operatorList),l.renderTasks.delete(c))}const o=this._transport.getRenderingIntent(e,t,s,i,!0);let l=this._intentStates.get(o.cacheKey);l||(l=Object.create(null),this._intentStates.set(o.cacheKey,l));let c;return l.opListReadCapability||(c=Object.create(null),c.operatorListChanged=r,l.opListReadCapability=Promise.withResolvers(),(l.renderTasks||(l.renderTasks=new Set)).add(c),l.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(u=this._stats)==null||u.time("Page Request"),this._pumpOperatorList(o)),l.opListReadCapability.promise}streamTextContent({includeMarkedContent:e=!1,disableNormalization:t=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:e===!0,disableNormalization:t===!0},{highWaterMark:100,size(i){return i.items.length}})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then(s=>Cf.textContent(s));const t=this.streamTextContent(e);return new Promise(function(s,i){function r(){o.read().then(function({value:c,done:u}){if(u){s(l);return}l.lang??(l.lang=c.lang),Object.assign(l.styles,c.styles),l.items.push(...c.items),r()},i)}const o=t.getReader(),l={items:[],styles:Object.create(null),lang:null};r()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const t of this._intentStates.values())if(this._abortOperatorList({intentState:t,reason:new Error("Page was destroyed."),force:!0}),!t.opListReadCapability)for(const s of t.renderTasks)e.push(s.completed),s.cancel();return this.objs.clear(),g(this,rr,!1),Promise.all(e)}cleanup(e=!1){g(this,rr,!0);const t=A(this,cl,Ud).call(this);return e&&t&&this._stats&&(this._stats=new I_),t}_startRenderPage(e,t){var i,r;const s=this._intentStates.get(t);s&&((i=this._stats)==null||i.timeEnd("Page Request"),(r=s.displayReadyCapability)==null||r.resolve(e))}_renderPageChunk(e,t){for(let s=0,i=e.length;s<i;s++)t.operatorList.fnArray.push(e.fnArray[s]),t.operatorList.argsArray.push(e.argsArray[s]);t.operatorList.lastChunk=e.lastChunk,t.operatorList.separateAnnots=e.separateAnnots;for(const s of t.renderTasks)s.operatorListChanged();e.lastChunk&&A(this,cl,Ud).call(this)}_pumpOperatorList({renderingIntent:e,cacheKey:t,annotationStorageSerializable:s,modifiedIds:i}){const{map:r,transfer:o}=s,c=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:e,cacheKey:t,annotationStorage:r,modifiedIds:i},o).getReader(),u=this._intentStates.get(t);u.streamReader=c;const h=()=>{c.read().then(({value:d,done:f})=>{if(f){u.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(d,u),h())},d=>{if(u.streamReader=null,!this._transport.destroyed){if(u.operatorList){u.operatorList.lastChunk=!0;for(const f of u.renderTasks)f.operatorListChanged();A(this,cl,Ud).call(this)}if(u.displayReadyCapability)u.displayReadyCapability.reject(d);else if(u.opListReadCapability)u.opListReadCapability.reject(d);else throw d}})};h()}_abortOperatorList({intentState:e,reason:t,force:s=!1}){if(e.streamReader){if(e.streamReaderCancelTimeout&&(clearTimeout(e.streamReaderCancelTimeout),e.streamReaderCancelTimeout=null),!s){if(e.renderTasks.size>0)return;if(t instanceof Qw){let i=VO;t.extraDelay>0&&t.extraDelay<1e3&&(i+=t.extraDelay),e.streamReaderCancelTimeout=setTimeout(()=>{e.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:e,reason:t,force:!0})},i);return}}if(e.streamReader.cancel(new Lr(t.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(const[i,r]of this._intentStates)if(r===e){this._intentStates.delete(i);break}this.cleanup()}}}get stats(){return this._stats}}rr=new WeakMap,cl=new WeakSet,Ud=function(){if(!a(this,rr)||this.destroyed)return!1;for(const{renderTasks:e,operatorList:t}of this._intentStates.values())if(e.size>0||!t.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),g(this,rr,!1),!0};var yo,Fs,or,ul,_v,hl,dl,Gu,ky,Cv,AR,Tv,ER,fl,zd,qu,Py;const Ie=class Ie{constructor({name:e=null,port:t=null,verbosity:s=DF()}={}){p(this,Gu);p(this,Cv);p(this,Tv);p(this,fl);p(this,yo,Promise.withResolvers());p(this,Fs,null);p(this,or,null);p(this,ul,null);if(this.name=e,this.destroyed=!1,this.verbosity=s,t){if(a(Ie,dl).has(t))throw new Error("Cannot use more than one PDFWorker per port.");a(Ie,dl).set(t,this),A(this,Cv,AR).call(this,t)}else A(this,Tv,ER).call(this)}get promise(){return a(this,yo).promise}get port(){return a(this,or)}get messageHandler(){return a(this,Fs)}destroy(){var e,t;this.destroyed=!0,(e=a(this,ul))==null||e.terminate(),g(this,ul,null),a(Ie,dl).delete(a(this,or)),g(this,or,null),(t=a(this,Fs))==null||t.destroy(),g(this,Fs,null)}static create(e){const t=a(this,dl).get(e==null?void 0:e.port);if(t){if(t._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return t}return new Ie(e)}static get workerSrc(){if(Qn.workerSrc)return Qn.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return ie(this,"_setupFakeWorkerGlobal",(async()=>a(this,qu,Py)?a(this,qu,Py):(await NF(()=>import(this.workerSrc),[])).WorkerMessageHandler)())}};yo=new WeakMap,Fs=new WeakMap,or=new WeakMap,ul=new WeakMap,_v=new WeakMap,hl=new WeakMap,dl=new WeakMap,Gu=new WeakSet,ky=function(){a(this,yo).resolve(),a(this,Fs).send("configure",{verbosity:this.verbosity})},Cv=new WeakSet,AR=function(e){g(this,or,e),g(this,Fs,new Md("main","worker",e)),a(this,Fs).on("ready",()=>{}),A(this,Gu,ky).call(this)},Tv=new WeakSet,ER=function(){if(a(Ie,hl)||a(Ie,qu,Py)){A(this,fl,zd).call(this);return}let{workerSrc:e}=Ie;try{Ie._isSameOrigin(window.location,e)||(e=Ie._createCDNWrapper(new URL(e,window.location).href));const t=new Worker(e,{type:"module"}),s=new Md("main","worker",t),i=()=>{r.abort(),s.destroy(),t.terminate(),this.destroyed?a(this,yo).reject(new Error("Worker was destroyed")):A(this,fl,zd).call(this)},r=new AbortController;t.addEventListener("error",()=>{a(this,ul)||i()},{signal:r.signal}),s.on("test",l=>{if(r.abort(),this.destroyed||!l){i();return}g(this,Fs,s),g(this,or,t),g(this,ul,t),A(this,Gu,ky).call(this)}),s.on("ready",l=>{if(r.abort(),this.destroyed){i();return}try{o()}catch{A(this,fl,zd).call(this)}});const o=()=>{const l=new Uint8Array;s.send("test",l,[l.buffer])};o();return}catch{Kw("The worker has been disabled.")}A(this,fl,zd).call(this)},fl=new WeakSet,zd=function(){a(Ie,hl)||(ee("Setting up fake worker."),g(Ie,hl,!0)),Ie._setupFakeWorkerGlobal.then(e=>{if(this.destroyed){a(this,yo).reject(new Error("Worker was destroyed"));return}const t=new tO;g(this,or,t);const s=`fake${ct(Ie,_v)._++}`,i=new Md(s+"_worker",s,t);e.setup(i,t),g(this,Fs,new Md(s,s+"_worker",t)),A(this,Gu,ky).call(this)}).catch(e=>{a(this,yo).reject(new Error(`Setting up fake worker failed: "${e.message}".`))})},qu=new WeakSet,Py=function(){var e;try{return((e=globalThis.pdfjsWorker)==null?void 0:e.WorkerMessageHandler)||null}catch{return null}},p(Ie,qu),p(Ie,_v,0),p(Ie,hl,!1),p(Ie,dl,new WeakMap),rn&&(g(Ie,hl,!0),Qn.workerSrc||(Qn.workerSrc="./pdf.worker.mjs")),Ie._isSameOrigin=(e,t)=>{const s=URL.parse(e);if(!(s!=null&&s.origin)||s.origin==="null")return!1;const i=new URL(t,s);return s.origin===i.origin},Ie._createCDNWrapper=e=>{const t=`await import("${e}");`;return URL.createObjectURL(new Blob([t],{type:"text/javascript"}))},Ie.fromPort=e=>{if(HF("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!(e!=null&&e.port))throw new Error("PDFWorker.fromPort - invalid method signature.");return Ie.create(e)};let td=Ie;var ar,mi,Xu,Yu,lr,pl,$d;class qO{constructor(e,t,s,i,r,o){p(this,pl);p(this,ar,new Map);p(this,mi,new Map);p(this,Xu,new Map);p(this,Yu,new Map);p(this,lr,null);this.messageHandler=e,this.loadingTask=t,this.commonObjs=new vR,this.fontLoader=new KF({ownerDocument:i.ownerDocument,styleElement:i.styleElement}),this.loadingParams=i.loadingParams,this._params=i,this.canvasFactory=r.canvasFactory,this.filterFactory=r.filterFactory,this.cMapReaderFactory=r.cMapReaderFactory,this.standardFontDataFactory=r.standardFontDataFactory,this.wasmFactory=r.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=s,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.enableHWA=o,this.setupMessageHandler()}get annotationStorage(){return ie(this,"annotationStorage",new DA)}getRenderingIntent(e,t=ki.ENABLE,s=null,i=!1,r=!1){let o=Xn.DISPLAY,l=px;switch(e){case"any":o=Xn.ANY;break;case"display":break;case"print":o=Xn.PRINT;break;default:ee(`getRenderingIntent - invalid intent: ${e}`)}const c=o&Xn.PRINT&&s instanceof tR?s:this.annotationStorage;switch(t){case ki.DISABLE:o+=Xn.ANNOTATIONS_DISABLE;break;case ki.ENABLE:break;case ki.ENABLE_FORMS:o+=Xn.ANNOTATIONS_FORMS;break;case ki.ENABLE_STORAGE:o+=Xn.ANNOTATIONS_STORAGE,l=c.serializable;break;default:ee(`getRenderingIntent - invalid annotationMode: ${t}`)}i&&(o+=Xn.IS_EDITING),r&&(o+=Xn.OPLIST);const{ids:u,hash:h}=c.modifiedIds,d=[o,l.hash,h];return{renderingIntent:o,cacheKey:d.join("_"),annotationStorageSerializable:l,modifiedIds:u}}destroy(){var s;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(s=a(this,lr))==null||s.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];for(const i of a(this,mi).values())e.push(i._destroy());a(this,mi).clear(),a(this,Xu).clear(),a(this,Yu).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const t=this.messageHandler.sendWithPromise("Terminate",null);return e.push(t),Promise.all(e).then(()=>{var i,r;this.commonObjs.clear(),this.fontLoader.clear(),a(this,ar).clear(),this.filterFactory.destroy(),Pf.cleanup(),(i=this._networkStream)==null||i.cancelAllRequests(new Lr("Worker was terminated.")),(r=this.messageHandler)==null||r.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:t}=this;e.on("GetReader",(s,i)=>{ce(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=r=>{this._lastProgress={loaded:r.loaded,total:r.total}},i.onPull=()=>{this._fullReader.read().then(function({value:r,done:o}){if(o){i.close();return}ce(r instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),i.enqueue(new Uint8Array(r),1,[r])}).catch(r=>{i.error(r)})},i.onCancel=r=>{this._fullReader.cancel(r),i.ready.catch(o=>{if(!this.destroyed)throw o})}}),e.on("ReaderHeadersReady",async s=>{var l;await this._fullReader.headersReady;const{isStreamingSupported:i,isRangeSupported:r,contentLength:o}=this._fullReader;return(!i||!r)&&(this._lastProgress&&((l=t.onProgress)==null||l.call(t,this._lastProgress)),this._fullReader.onProgress=c=>{var u;(u=t.onProgress)==null||u.call(t,{loaded:c.loaded,total:c.total})}),{isStreamingSupported:i,isRangeSupported:r,contentLength:o}}),e.on("GetRangeReader",(s,i)=>{ce(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const r=this._networkStream.getRangeReader(s.begin,s.end);if(!r){i.close();return}i.onPull=()=>{r.read().then(function({value:o,done:l}){if(l){i.close();return}ce(o instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),i.enqueue(new Uint8Array(o),1,[o])}).catch(o=>{i.error(o)})},i.onCancel=o=>{r.cancel(o),i.ready.catch(l=>{if(!this.destroyed)throw l})}}),e.on("GetDoc",({pdfInfo:s})=>{this._numPages=s.numPages,this._htmlForXfa=s.htmlForXfa,delete s.htmlForXfa,t._capability.resolve(new WO(s,this))}),e.on("DocException",s=>{t._capability.reject(dn(s))}),e.on("PasswordRequest",s=>{g(this,lr,Promise.withResolvers());try{if(!t.onPassword)throw dn(s);const i=r=>{r instanceof Error?a(this,lr).reject(r):a(this,lr).resolve({password:r})};t.onPassword(i,s.code)}catch(i){a(this,lr).reject(i)}return a(this,lr).promise}),e.on("DataLoaded",s=>{var i;(i=t.onProgress)==null||i.call(t,{loaded:s.length,total:s.length}),this.downloadInfoCapability.resolve(s)}),e.on("StartRenderPage",s=>{if(this.destroyed)return;a(this,mi).get(s.pageIndex)._startRenderPage(s.transparency,s.cacheKey)}),e.on("commonobj",([s,i,r])=>{var o;if(this.destroyed||this.commonObjs.has(s))return null;switch(i){case"Font":if("error"in r){const d=r.error;ee(`Error during font loading: ${d}`),this.commonObjs.resolve(s,d);break}const l=new _x(r),c=this._params.pdfBug&&((o=globalThis.FontInspector)!=null&&o.enabled)?(d,f)=>globalThis.FontInspector.fontAdded(d,f):null,u=new QF(l,c,r.extra,r.charProcOperatorList);this.fontLoader.bind(u).catch(()=>e.sendWithPromise("FontFallback",{id:s})).finally(()=>{!u.fontExtraProperties&&u.data&&u.clearData(),this.commonObjs.resolve(s,u)});break;case"CopyLocalImage":const{imageRef:h}=r;ce(h,"The imageRef must be defined.");for(const d of a(this,mi).values())for(const[,f]of d.objs)if((f==null?void 0:f.ref)===h)return f.dataLen?(this.commonObjs.resolve(s,structuredClone(f)),f.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(s,r);break;default:throw new Error(`Got unknown common object type ${i}`)}return null}),e.on("obj",([s,i,r,o])=>{var c;if(this.destroyed)return;const l=a(this,mi).get(i);if(!l.objs.has(s)){if(l._intentStates.size===0){(c=o==null?void 0:o.bitmap)==null||c.close();return}switch(r){case"Image":case"Pattern":l.objs.resolve(s,o);break;default:throw new Error(`Got unknown object type ${r}`)}}}),e.on("DocProgress",s=>{var i;this.destroyed||(i=t.onProgress)==null||i.call(t,{loaded:s.loaded,total:s.total})}),e.on("FetchBinaryData",async s=>{if(this.destroyed)throw new Error("Worker was destroyed.");const i=this[s.type];if(!i)throw new Error(`${s.type} not initialized, see the \`useWorkerFetch\` parameter.`);return i.fetch(s)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var s;this.annotationStorage.size<=0&&ee("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:e,transfer:t}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:e,filename:((s=this._fullReader)==null?void 0:s.filename)??null},t).finally(()=>{this.annotationStorage.resetModified()})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));const t=e-1,s=a(this,Xu).get(t);if(s)return s;const i=this.messageHandler.sendWithPromise("GetPage",{pageIndex:t}).then(r=>{if(this.destroyed)throw new Error("Transport destroyed");r.refStr&&a(this,Yu).set(r.refStr,e);const o=new GO(t,r,this,this._params.pdfBug);return a(this,mi).set(t,o),o});return a(this,Xu).set(t,i),i}getPageIndex(e){return gx(e)?this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(e,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:t})}getFieldObjects(){return A(this,pl,$d).call(this,"GetFieldObjects")}hasJSActions(){return A(this,pl,$d).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return typeof e!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getAnnotationsByType(e,t){return this.messageHandler.sendWithPromise("GetAnnotationsByType",{types:e,pageIndexesToSkip:t})}getDocJSActions(){return A(this,pl,$d).call(this,"GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(e){return A(this,pl,$d).call(this,"GetOptionalContentConfig").then(t=>new _O(t,e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const e="GetMetadata",t=a(this,ar).get(e);if(t)return t;const s=this.messageHandler.sendWithPromise(e,null).then(i=>{var r,o;return{info:i[0],metadata:i[1]?new AO(i[1]):null,contentDispositionFilename:((r=this._fullReader)==null?void 0:r.filename)??null,contentLength:((o=this._fullReader)==null?void 0:o.contentLength)??null}});return a(this,ar).set(e,s),s}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(e=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const t of a(this,mi).values())if(!t.cleanup())throw new Error(`startCleanup: Page ${t.pageNumber} is currently rendering.`);this.commonObjs.clear(),e||this.fontLoader.clear(),a(this,ar).clear(),this.filterFactory.destroy(!0),Pf.cleanup()}}cachedPageNumber(e){if(!gx(e))return null;const t=e.gen===0?`${e.num}R`:`${e.num}R${e.gen}`;return a(this,Yu).get(t)??null}}ar=new WeakMap,mi=new WeakMap,Xu=new WeakMap,Yu=new WeakMap,lr=new WeakMap,pl=new WeakSet,$d=function(e,t=null){const s=a(this,ar).get(e);if(s)return s;const i=this.messageHandler.sendWithPromise(e,t);return a(this,ar).set(e,i),i};var vo;class XO{constructor(e){p(this,vo,null);O(this,"onContinue",null);O(this,"onError",null);g(this,vo,e)}get promise(){return a(this,vo).capability.promise}cancel(e=0){a(this,vo).cancel(null,e)}get separateAnnots(){const{separateAnnots:e}=a(this,vo).operatorList;if(!e)return!1;const{annotationCanvasMap:t}=a(this,vo);return e.form||e.canvas&&(t==null?void 0:t.size)>0}}vo=new WeakMap;var wo,gl;const pa=class pa{constructor({callback:e,params:t,objs:s,commonObjs:i,annotationCanvasMap:r,operatorList:o,pageIndex:l,canvasFactory:c,filterFactory:u,useRequestAnimationFrame:h=!1,pdfBug:d=!1,pageColors:f=null,enableHWA:m=!1,operationsFilter:y=null}){p(this,wo,null);this.callback=e,this.params=t,this.objs=s,this.commonObjs=i,this.annotationCanvasMap=r,this.operatorListIdx=null,this.operatorList=o,this._pageIndex=l,this.canvasFactory=c,this.filterFactory=u,this._pdfBug=d,this.pageColors=f,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=h===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new XO(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=t.canvas,this._canvasContext=t.canvas?null:t.canvasContext,this._enableHWA=m,this._dependencyTracker=t.dependencyTracker,this._operationsFilter=y}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:t}){var c,u;if(this.cancelled)return;if(this._canvas){if(a(pa,gl).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");a(pa,gl).add(this._canvas)}this._pdfBug&&((c=globalThis.StepperManager)!=null&&c.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{viewport:s,transform:i,background:r,dependencyTracker:o}=this.params,l=this._canvasContext||this._canvas.getContext("2d",{alpha:!1,willReadFrequently:!this._enableHWA});this.gfx=new Vc(l,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:t},this.annotationCanvasMap,this.pageColors,o),this.gfx.beginDrawing({transform:i,viewport:s,transparency:e,background:r}),this.operatorListIdx=0,this.graphicsReady=!0,(u=this.graphicsReadyCallback)==null||u.call(this)}cancel(e=null,t=0){var s,i,r;this.running=!1,this.cancelled=!0,(s=this.gfx)==null||s.endDrawing(),a(this,wo)&&(window.cancelAnimationFrame(a(this,wo)),g(this,wo,null)),a(pa,gl).delete(this._canvas),e||(e=new Qw(`Rendering cancelled, page ${this._pageIndex+1}`,t)),this.callback(e),(r=(i=this.task).onError)==null||r.call(i,e)}operatorListChanged(){var e,t;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(e=this.gfx.dependencyTracker)==null||e.growOperationsCount(this.operatorList.fnArray.length),(t=this.stepper)==null||t.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?g(this,wo,window.requestAnimationFrame(()=>{g(this,wo,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper,this._operationsFilter),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),a(pa,gl).delete(this._canvas),this.callback())))}};wo=new WeakMap,gl=new WeakMap,p(pa,gl,new WeakSet);let Lx=pa;const _R="5.4.296",CR="f56dc8601";var Fn,ml,Ku,dt,Jp,Qu,cr,Zp,bo,Os,eg,tg,Nx,ng,Mx,sg,Dx,ur,ua,kv,TR,yi,Or;const fn=class fn{constructor({editor:e=null,uiManager:t=null}){p(this,tg);p(this,ng);p(this,sg);p(this,ur);p(this,kv);p(this,yi);p(this,Fn,null);p(this,ml,null);p(this,Ku,void 0);p(this,dt,null);p(this,Jp,!1);p(this,Qu,!1);p(this,cr,null);p(this,Zp,void 0);p(this,bo,null);p(this,Os,null);var s,i;e?(g(this,Qu,!1),g(this,cr,e)):g(this,Qu,!0),g(this,Os,(e==null?void 0:e._uiManager)||t),g(this,Zp,a(this,Os)._eventBus),g(this,Ku,((s=e==null?void 0:e.color)==null?void 0:s.toUpperCase())||((i=a(this,Os))==null?void 0:i.highlightColors.values().next().value)||"#FFFF98"),a(fn,eg)||g(fn,eg,Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}static get _keyboardManager(){return ie(this,"_keyboardManager",new bm([[["Escape","mac+Escape"],fn.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],fn.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],fn.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],fn.prototype._moveToPrevious],[["Home","mac+Home"],fn.prototype._moveToBeginning],[["End","mac+End"],fn.prototype._moveToEnd]]))}renderButton(){const e=g(this,Fn,document.createElement("button"));e.className="colorPicker",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),e.ariaHasPopup="true",a(this,cr)&&(e.ariaControls=`${a(this,cr).id}_colorpicker_dropdown`);const t=a(this,Os)._signal;e.addEventListener("click",A(this,ur,ua).bind(this),{signal:t}),e.addEventListener("keydown",A(this,sg,Dx).bind(this),{signal:t});const s=g(this,ml,document.createElement("span"));return s.className="swatch",s.ariaHidden="true",s.style.backgroundColor=a(this,Ku),e.append(s),e}renderMainDropdown(){const e=g(this,dt,A(this,tg,Nx).call(this));return e.ariaOrientation="horizontal",e.ariaLabelledBy="highlightColorPickerLabel",e}_colorSelectFromKeyboard(e){if(e.target===a(this,Fn)){A(this,ur,ua).call(this,e);return}const t=e.target.getAttribute("data-color");t&&A(this,ng,Mx).call(this,t,e)}_moveToNext(e){var t,s;if(!a(this,yi,Or)){A(this,ur,ua).call(this,e);return}if(e.target===a(this,Fn)){(t=a(this,dt).firstChild)==null||t.focus();return}(s=e.target.nextSibling)==null||s.focus()}_moveToPrevious(e){var t,s;if(e.target===((t=a(this,dt))==null?void 0:t.firstChild)||e.target===a(this,Fn)){a(this,yi,Or)&&this._hideDropdownFromKeyboard();return}a(this,yi,Or)||A(this,ur,ua).call(this,e),(s=e.target.previousSibling)==null||s.focus()}_moveToBeginning(e){var t;if(!a(this,yi,Or)){A(this,ur,ua).call(this,e);return}(t=a(this,dt).firstChild)==null||t.focus()}_moveToEnd(e){var t;if(!a(this,yi,Or)){A(this,ur,ua).call(this,e);return}(t=a(this,dt).lastChild)==null||t.focus()}hideDropdown(){var e,t;(e=a(this,dt))==null||e.classList.add("hidden"),a(this,Fn).ariaExpanded="false",(t=a(this,bo))==null||t.abort(),g(this,bo,null)}_hideDropdownFromKeyboard(){var e;if(!a(this,Qu)){if(!a(this,yi,Or)){(e=a(this,cr))==null||e.unselect();return}this.hideDropdown(),a(this,Fn).focus({preventScroll:!0,focusVisible:a(this,Jp)})}}updateColor(e){if(a(this,ml)&&(a(this,ml).style.backgroundColor=e),!a(this,dt))return;const t=a(this,Os).highlightColors.values();for(const s of a(this,dt).children)s.ariaSelected=t.next().value===e.toUpperCase()}destroy(){var e,t;(e=a(this,Fn))==null||e.remove(),g(this,Fn,null),g(this,ml,null),(t=a(this,dt))==null||t.remove(),g(this,dt,null)}};Fn=new WeakMap,ml=new WeakMap,Ku=new WeakMap,dt=new WeakMap,Jp=new WeakMap,Qu=new WeakMap,cr=new WeakMap,Zp=new WeakMap,bo=new WeakMap,Os=new WeakMap,eg=new WeakMap,tg=new WeakSet,Nx=function(){const e=document.createElement("div"),t=a(this,Os)._signal;e.addEventListener("contextmenu",ts,{signal:t}),e.className="dropdown",e.role="listbox",e.ariaMultiSelectable="false",e.ariaOrientation="vertical",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),a(this,cr)&&(e.id=`${a(this,cr).id}_colorpicker_dropdown`);for(const[s,i]of a(this,Os).highlightColors){const r=document.createElement("button");r.tabIndex="0",r.role="option",r.setAttribute("data-color",i),r.title=s,r.setAttribute("data-l10n-id",a(fn,eg)[s]);const o=document.createElement("span");r.append(o),o.className="swatch",o.style.backgroundColor=i,r.ariaSelected=i===a(this,Ku),r.addEventListener("click",A(this,ng,Mx).bind(this,i),{signal:t}),e.append(r)}return e.addEventListener("keydown",A(this,sg,Dx).bind(this),{signal:t}),e},ng=new WeakSet,Mx=function(e,t){t.stopPropagation(),a(this,Zp).dispatch("switchannotationeditorparams",{source:this,type:ae.HIGHLIGHT_COLOR,value:e}),this.updateColor(e)},sg=new WeakSet,Dx=function(e){fn._keyboardManager.exec(this,e)},ur=new WeakSet,ua=function(e){if(a(this,yi,Or)){this.hideDropdown();return}if(g(this,Jp,e.detail===0),a(this,bo)||(g(this,bo,new AbortController),window.addEventListener("pointerdown",A(this,kv,TR).bind(this),{signal:a(this,Os).combinedSignal(a(this,bo))})),a(this,Fn).ariaExpanded="true",a(this,dt)){a(this,dt).classList.remove("hidden");return}const t=g(this,dt,A(this,tg,Nx).call(this));a(this,Fn).append(t)},kv=new WeakSet,TR=function(e){var t;(t=a(this,dt))!=null&&t.contains(e.target)||this.hideDropdown()},yi=new WeakSet,Or=function(){return a(this,dt)&&!a(this,dt).classList.contains("hidden")},p(fn,eg,null);let Rf=fn;var vi,ig,Ju,rg;const ga=class ga{constructor(e){p(this,vi,null);p(this,ig,null);p(this,Ju,null);g(this,ig,e),g(this,Ju,e._uiManager),a(ga,rg)||g(ga,rg,Object.freeze({freetext:"pdfjs-editor-color-picker-free-text-input",ink:"pdfjs-editor-color-picker-ink-input"}))}renderButton(){if(a(this,vi))return a(this,vi);const{editorType:e,colorType:t,colorValue:s}=a(this,ig),i=g(this,vi,document.createElement("input"));return i.type="color",i.value=s||"#000000",i.className="basicColorPicker",i.tabIndex=0,i.setAttribute("data-l10n-id",a(ga,rg)[e]),i.addEventListener("input",()=>{a(this,Ju).updateParams(t,i.value)},{signal:a(this,Ju)._signal}),i}update(e){a(this,vi)&&(a(this,vi).value=e)}destroy(){var e;(e=a(this,vi))==null||e.remove(),g(this,vi,null)}hideDropdown(){}};vi=new WeakMap,ig=new WeakMap,Ju=new WeakMap,rg=new WeakMap,p(ga,rg,null);let k0=ga;function sC(n){return Math.floor(Math.max(0,Math.min(1,n))*255).toString(16).padStart(2,"0")}function xd(n){return Math.max(0,Math.min(255,255*n))}class iC{static CMYK_G([e,t,s,i]){return["G",1-Math.min(1,.3*e+.59*s+.11*t+i)]}static G_CMYK([e]){return["CMYK",0,0,0,1-e]}static G_RGB([e]){return["RGB",e,e,e]}static G_rgb([e]){return e=xd(e),[e,e,e]}static G_HTML([e]){const t=sC(e);return`#${t}${t}${t}`}static RGB_G([e,t,s]){return["G",.3*e+.59*t+.11*s]}static RGB_rgb(e){return e.map(xd)}static RGB_HTML(e){return`#${e.map(sC).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([e,t,s,i]){return["RGB",1-Math.min(1,e+i),1-Math.min(1,s+i),1-Math.min(1,t+i)]}static CMYK_rgb([e,t,s,i]){return[xd(1-Math.min(1,e+i)),xd(1-Math.min(1,s+i)),xd(1-Math.min(1,t+i))]}static CMYK_HTML(e){const t=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(t)}static RGB_CMYK([e,t,s]){const i=1-e,r=1-t,o=1-s,l=Math.min(i,r,o);return["CMYK",i,r,o,l]}}class YO{create(e,t,s=!1){if(e<=0||t<=0)throw new Error("Invalid SVG dimensions");const i=this._createSVG("svg:svg");return i.setAttribute("version","1.1"),s||(i.setAttribute("width",`${e}px`),i.setAttribute("height",`${t}px`)),i.setAttribute("preserveAspectRatio","none"),i.setAttribute("viewBox",`0 0 ${e} ${t}`),i}createElement(e){if(typeof e!="string")throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){_e("Abstract method `_createSVG` called.")}}class Lf extends YO{_createSVG(e){return document.createElementNS(Di,e)}}const KO=9,sc=new WeakSet,QO=new Date().getTimezoneOffset()*60*1e3;class rC{static create(e){switch(e.data.annotationType){case et.LINK:return new jA(e);case et.TEXT:return new ZO(e);case et.WIDGET:switch(e.data.fieldType){case"Tx":return new eB(e);case"Btn":return e.data.radioButton?new RR(e):e.data.checkBox?new nB(e):new sB(e);case"Ch":return new iB(e);case"Sig":return new tB(e)}return new cc(e);case et.POPUP:return new Fx(e);case et.FREETEXT:return new IR(e);case et.LINE:return new oB(e);case et.SQUARE:return new aB(e);case et.CIRCLE:return new lB(e);case et.POLYLINE:return new FR(e);case et.CARET:return new uB(e);case et.INK:return new UA(e);case et.POLYGON:return new cB(e);case et.HIGHLIGHT:return new OR(e);case et.UNDERLINE:return new hB(e);case et.SQUIGGLY:return new dB(e);case et.STRIKEOUT:return new fB(e);case et.STAMP:return new BR(e);case et.FILEATTACHMENT:return new pB(e);default:return new qe(e)}}}var yl,Zu,gs,og,Ix;const XA=class XA{constructor(e,{isRenderable:t=!1,ignoreBorder:s=!1,createQuadrilaterals:i=!1}={}){p(this,og);p(this,yl,null);p(this,Zu,!1);p(this,gs,null);this.isRenderable=t,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableComment=e.enableComment,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,t&&(this.container=this._createContainer(s)),i&&this._createQuadrilaterals()}static _hasPopupData({contentsObj:e,richText:t}){return!!(e!=null&&e.str||t!=null&&t.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return XA._hasPopupData(this.data)||this.enableComment&&!!this.commentText}get commentData(){var s;const{data:e}=this,t=(s=this.annotationStorage)==null?void 0:s.getEditor(e.id);return t?t.getData():e}get hasCommentButton(){return this.enableComment&&this.hasPopupElement}get commentButtonPosition(){var l;const e=(l=this.annotationStorage)==null?void 0:l.getEditor(this.data.id);if(e)return e.commentButtonPositionInPage;const{quadPoints:t,inkLists:s,rect:i}=this.data;let r=-1/0,o=-1/0;if((t==null?void 0:t.length)>=8){for(let c=0;c<t.length;c+=8)t[c+1]>o?(o=t[c+1],r=t[c+2]):t[c+1]===o&&(r=Math.max(r,t[c+2]));return[r,o]}if((s==null?void 0:s.length)>=1){for(const c of s)for(let u=0,h=c.length;u<h;u+=2)c[u+1]>o?(o=c[u+1],r=c[u]):c[u+1]===o&&(r=Math.max(r,c[u]));if(r!==1/0)return[r,o]}return i?[i[2],i[3]]:null}_normalizePoint(e){const{page:{view:t},viewport:{rawDims:{pageWidth:s,pageHeight:i,pageX:r,pageY:o}}}=this.parent;return e[1]=t[3]-e[1]+t[1],e[0]=100*(e[0]-r)/s,e[1]=100*(e[1]-o)/i,e}get commentText(){var t,s,i;const{data:e}=this;return((s=(t=this.annotationStorage.getRawValue(`${Ef}${e.id}`))==null?void 0:t.popup)==null?void 0:s.contents)||((i=e.contentsObj)==null?void 0:i.str)||""}set commentText(e){const{data:t}=this,s={deleted:!e,contents:e||""};this.annotationStorage.updateEditor(t.id,{popup:s})||this.annotationStorage.setValue(`${Ef}${t.id}`,{id:t.id,annotationType:t.annotationType,pageIndex:this.parent.page._pageIndex,popup:s,popupRef:t.popupRef,modificationDate:new Date}),e||this.removePopup()}removePopup(){var e,t;(t=((e=a(this,gs))==null?void 0:e.popup)||this.popup)==null||t.remove(),g(this,gs,this.popup=null)}updateEdited(e){var r;if(!this.container)return;e.rect&&(a(this,yl)||g(this,yl,{rect:this.data.rect.slice(0)}));const{rect:t,popup:s}=e;t&&A(this,og,Ix).call(this,t);let i=((r=a(this,gs))==null?void 0:r.popup)||this.popup;!i&&(s!=null&&s.text)&&(this._createPopup(s),i=a(this,gs).popup),i&&(i.updateEdited(e),s!=null&&s.deleted&&(i.remove(),g(this,gs,null),this.popup=null))}resetEdited(){var e;a(this,yl)&&(A(this,og,Ix).call(this,a(this,yl).rect),(e=a(this,gs))==null||e.popup.resetEdited(),g(this,yl,null))}_createContainer(e){const{data:t,parent:{page:s,viewport:i}}=this,r=document.createElement("section");r.setAttribute("data-annotation-id",t.id),!(this instanceof cc)&&!(this instanceof jA)&&(r.tabIndex=0);const{style:o}=r;if(o.zIndex=this.parent.zIndex,this.parent.zIndex+=2,t.alternativeText&&(r.title=t.alternativeText),t.noRotate&&r.classList.add("norotate"),!t.rect||this instanceof Fx){const{rotation:w}=t;return!t.hasOwnCanvas&&w!==0&&this.setRotation(w,r),r}const{width:l,height:c}=this;if(!e&&t.borderStyle.width>0){o.borderWidth=`${t.borderStyle.width}px`;const w=t.borderStyle.horizontalCornerRadius,x=t.borderStyle.verticalCornerRadius;if(w>0||x>0){const b=`calc(${w}px * var(--total-scale-factor)) / calc(${x}px * var(--total-scale-factor))`;o.borderRadius=b}else if(this instanceof RR){const b=`calc(${l}px * var(--total-scale-factor)) / calc(${c}px * var(--total-scale-factor))`;o.borderRadius=b}switch(t.borderStyle.style){case fc.SOLID:o.borderStyle="solid";break;case fc.DASHED:o.borderStyle="dashed";break;case fc.BEVELED:ee("Unimplemented border style: beveled");break;case fc.INSET:ee("Unimplemented border style: inset");break;case fc.UNDERLINE:o.borderBottomStyle="solid";break}const v=t.borderColor||null;v?(g(this,Zu,!0),o.borderColor=V.makeHexColor(v[0]|0,v[1]|0,v[2]|0)):o.borderWidth=0}const u=V.normalizeRect([t.rect[0],s.view[3]-t.rect[1]+s.view[1],t.rect[2],s.view[3]-t.rect[3]+s.view[1]]),{pageWidth:h,pageHeight:d,pageX:f,pageY:m}=i.rawDims;o.left=`${100*(u[0]-f)/h}%`,o.top=`${100*(u[1]-m)/d}%`;const{rotation:y}=t;return t.hasOwnCanvas||y===0?(o.width=`${100*l/h}%`,o.height=`${100*c/d}%`):this.setRotation(y,r),r}setRotation(e,t=this.container){if(!this.data.rect)return;const{pageWidth:s,pageHeight:i}=this.parent.viewport.rawDims;let{width:r,height:o}=this;e%180!==0&&([r,o]=[o,r]),t.style.width=`${100*r/s}%`,t.style.height=`${100*o/i}%`,t.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){const e=(t,s,i)=>{const r=i.detail[t],o=r[0],l=r.slice(1);i.target.style[s]=iC[`${o}_HTML`](l),this.annotationStorage.setValue(this.data.id,{[s]:iC[`${o}_rgb`](l)})};return ie(this,"_commonActions",{display:t=>{const{display:s}=t.detail,i=s%2===1;this.container.style.visibility=i?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:i,noPrint:s===1||s===2})},print:t=>{this.annotationStorage.setValue(this.data.id,{noPrint:!t.detail.print})},hidden:t=>{const{hidden:s}=t.detail;this.container.style.visibility=s?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:s,noView:s})},focus:t=>{setTimeout(()=>t.target.focus({preventScroll:!1}),0)},userName:t=>{t.target.title=t.detail.userName},readonly:t=>{t.target.disabled=t.detail.readonly},required:t=>{this._setRequired(t.target,t.detail.required)},bgColor:t=>{e("bgColor","backgroundColor",t)},fillColor:t=>{e("fillColor","backgroundColor",t)},fgColor:t=>{e("fgColor","color",t)},textColor:t=>{e("textColor","color",t)},borderColor:t=>{e("borderColor","borderColor",t)},strokeColor:t=>{e("strokeColor","borderColor",t)},rotation:t=>{const s=t.detail.rotation;this.setRotation(s),this.annotationStorage.setValue(this.data.id,{rotation:s})}})}_dispatchEventFromSandbox(e,t){const s=this._commonActions;for(const i of Object.keys(t.detail)){const r=e[i]||s[i];r==null||r(t)}}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;const t=this.annotationStorage.getRawValue(this.data.id);if(!t)return;const s=this._commonActions;for(const[i,r]of Object.entries(t)){const o=s[i];if(o){const l={detail:{[i]:r},target:e};o(l),delete t[i]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:e}=this.data;if(!e)return;const[t,s,i,r]=this.data.rect.map(w=>Math.fround(w));if(e.length===8){const[w,x,v,b]=e.subarray(2,6);if(i===w&&r===x&&t===v&&s===b)return}const{style:o}=this.container;let l;if(a(this,Zu)){const{borderColor:w,borderWidth:x}=o;o.borderWidth=0,l=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${w}" stroke-width="${x}">`],this.container.classList.add("hasBorder")}const c=i-t,u=r-s,{svgFactory:h}=this,d=h.createElement("svg");d.classList.add("quadrilateralsContainer"),d.setAttribute("width",0),d.setAttribute("height",0),d.role="none";const f=h.createElement("defs");d.append(f);const m=h.createElement("clipPath"),y=`clippath_${this.data.id}`;m.setAttribute("id",y),m.setAttribute("clipPathUnits","objectBoundingBox"),f.append(m);for(let w=2,x=e.length;w<x;w+=8){const v=e[w],b=e[w+1],S=e[w+2],E=e[w+3],C=h.createElement("rect"),T=(S-t)/c,k=(r-b)/u,P=(v-S)/c,N=(b-E)/u;C.setAttribute("x",T),C.setAttribute("y",k),C.setAttribute("width",P),C.setAttribute("height",N),m.append(C),l==null||l.push(`<rect vector-effect="non-scaling-stroke" x="${T}" y="${k}" width="${P}" height="${N}"/>`)}a(this,Zu)&&(l.push("</g></svg>')"),o.backgroundImage=l.join("")),this.container.append(d),this.container.style.clipPath=`url(#${y})`}_createPopup(e=null){const{data:t}=this;let s,i;e?(s={str:e.text},i=e.date):(s=t.contentsObj,i=t.modificationDate);const r=g(this,gs,new Fx({data:{color:t.color,titleObj:t.titleObj,modificationDate:i,contentsObj:s,richText:t.richText,parentRect:t.rect,borderStyle:0,id:`popup_${t.id}`,rotation:t.rotation,noRotate:!0},linkService:this.linkService,parent:this.parent,elements:[this]}));this.parent._commentManager||this.parent.div.append(r.render())}get hasPopupElement(){return!!(a(this,gs)||this.popup||this.data.popupRef)}get extraPopupElement(){return a(this,gs)}render(){_e("Abstract method `AnnotationElement.render` called")}_getElementsByName(e,t=null){const s=[];if(this._fieldObjects){const i=this._fieldObjects[e];if(i)for(const{page:r,id:o,exportValues:l}of i){if(r===-1||o===t)continue;const c=typeof l=="string"?l:null,u=document.querySelector(`[data-element-id="${o}"]`);if(u&&!sc.has(u)){ee(`_getElementsByName - element not allowed: ${o}`);continue}s.push({id:o,exportValue:c,domElement:u})}return s}for(const i of document.getElementsByName(e)){const{exportValue:r}=i,o=i.getAttribute("data-element-id");o!==t&&sc.has(i)&&s.push({id:o,exportValue:r,domElement:i})}return s}show(){var e;this.container&&(this.container.hidden=!1),(e=this.popup)==null||e.maybeShow()}hide(){var e;this.container&&(this.container.hidden=!0),(e=this.popup)==null||e.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(const t of e)t.classList.add("highlightArea");else e.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:e,data:{id:t}}=this;this.container.addEventListener("dblclick",()=>{var s;(s=this.linkService.eventBus)==null||s.dispatch("switchannotationeditormode",{source:this,mode:e,editId:t,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}};yl=new WeakMap,Zu=new WeakMap,gs=new WeakMap,og=new WeakSet,Ix=function(e){const{container:{style:t},data:{rect:s,rotation:i},parent:{viewport:{rawDims:{pageWidth:r,pageHeight:o,pageX:l,pageY:c}}}}=this;s==null||s.splice(0,4,...e),t.left=`${100*(e[0]-l)/r}%`,t.top=`${100*(o-e[3]+c)/o}%`,i===0?(t.width=`${100*(e[2]-e[0])/r}%`,t.height=`${100*(e[3]-e[1])/o}%`):this.setRotation(i)};let qe=XA;class JO extends qe{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.editor=e.editor}render(){return this.container.className="editorAnnotation",this.container}createOrUpdatePopup(){const{editor:e}=this;e.hasComment&&(this._createPopup(e.comment),this.extraPopupElement.popup.renderCommentButton())}get hasCommentButton(){return this.enableComment&&this.editor.hasComment}get commentButtonPosition(){return this.editor.commentButtonPositionInPage}get commentText(){return this.editor.comment.text}set commentText(e){this.editor.comment=e,e||this.removePopup()}get commentData(){return this.editor.getData()}remove(){this.container.remove(),this.container=null,this.removePopup()}}var hr,ha,Pv,kR,Rv,PR;class jA extends qe{constructor(t,s=null){super(t,{isRenderable:!0,ignoreBorder:!!(s!=null&&s.ignoreBorder),createQuadrilaterals:!0});p(this,hr);p(this,Pv);p(this,Rv);this.isTooltipOnly=t.data.isTooltipOnly}render(){const{data:t,linkService:s}=this,i=document.createElement("a");i.setAttribute("data-element-id",t.id);let r=!1;return t.url?(s.addLinkAttributes(i,t.url,t.newWindow),r=!0):t.action?(this._bindNamedAction(i,t.action,t.overlaidText),r=!0):t.attachment?(A(this,Pv,kR).call(this,i,t.attachment,t.overlaidText,t.attachmentDest),r=!0):t.setOCGState?(A(this,Rv,PR).call(this,i,t.setOCGState,t.overlaidText),r=!0):t.dest?(this._bindLink(i,t.dest,t.overlaidText),r=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(i,t),r=!0),t.resetForm?(this._bindResetFormAction(i,t.resetForm),r=!0):this.isTooltipOnly&&!r&&(this._bindLink(i,""),r=!0)),this.container.classList.add("linkAnnotation"),r&&this.container.append(i),this.container}_bindLink(t,s,i=""){t.href=this.linkService.getDestinationHash(s),t.onclick=()=>(s&&this.linkService.goToDestination(s),!1),(s||s==="")&&A(this,hr,ha).call(this),i&&(t.title=i)}_bindNamedAction(t,s,i=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(s),!1),i&&(t.title=i),A(this,hr,ha).call(this)}_bindJSAction(t,s){t.href=this.linkService.getAnchorUrl("");const i=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const r of Object.keys(s.actions)){const o=i.get(r);o&&(t[o]=()=>{var l;return(l=this.linkService.eventBus)==null||l.dispatch("dispatcheventinsandbox",{source:this,detail:{id:s.id,name:r}}),!1})}s.overlaidText&&(t.title=s.overlaidText),t.onclick||(t.onclick=()=>!1),A(this,hr,ha).call(this)}_bindResetFormAction(t,s){const i=t.onclick;if(i||(t.href=this.linkService.getAnchorUrl("")),A(this,hr,ha).call(this),!this._fieldObjects){ee('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),i||(t.onclick=()=>!1);return}t.onclick=()=>{var d;i==null||i();const{fields:r,refs:o,include:l}=s,c=[];if(r.length!==0||o.length!==0){const f=new Set(o);for(const m of r){const y=this._fieldObjects[m]||[];for(const{id:w}of y)f.add(w)}for(const m of Object.values(this._fieldObjects))for(const y of m)f.has(y.id)===l&&c.push(y)}else for(const f of Object.values(this._fieldObjects))c.push(...f);const u=this.annotationStorage,h=[];for(const f of c){const{id:m}=f;switch(h.push(m),f.type){case"text":{const w=f.defaultValue||"";u.setValue(m,{value:w});break}case"checkbox":case"radiobutton":{const w=f.defaultValue===f.exportValues;u.setValue(m,{value:w});break}case"combobox":case"listbox":{const w=f.defaultValue||"";u.setValue(m,{value:w});break}default:continue}const y=document.querySelector(`[data-element-id="${m}"]`);if(y){if(!sc.has(y)){ee(`_bindResetFormAction - element not allowed: ${m}`);continue}}else continue;y.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((d=this.linkService.eventBus)==null||d.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:h,name:"ResetForm"}})),!1}}}hr=new WeakSet,ha=function(){this.container.setAttribute("data-internal-link","")},Pv=new WeakSet,kR=function(t,s,i="",r=null){t.href=this.linkService.getAnchorUrl(""),s.description?t.title=s.description:i&&(t.title=i),t.onclick=()=>{var o;return(o=this.downloadManager)==null||o.openOrDownloadData(s.content,s.filename,r),!1},A(this,hr,ha).call(this)},Rv=new WeakSet,PR=function(t,s,i=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(s),!1),i&&(t.title=i),A(this,hr,ha).call(this)};class ZO extends qe{constructor(e){super(e,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),e.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(e),this.container}}class cc extends qe{render(){return this.container}showElementAndHideCanvas(e){var t;this.data.hasOwnCanvas&&(((t=e.previousSibling)==null?void 0:t.nodeName)==="CANVAS"&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){return Tt.platform.isMac?e.metaKey:e.ctrlKey}_setEventListener(e,t,s,i,r){s.includes("mouse")?e.addEventListener(s,o=>{var l;(l=this.linkService.eventBus)==null||l.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:r(o),shift:o.shiftKey,modifier:this._getKeyModifier(o)}})}):e.addEventListener(s,o=>{var l;if(s==="blur"){if(!t.focused||!o.relatedTarget)return;t.focused=!1}else if(s==="focus"){if(t.focused)return;t.focused=!0}r&&((l=this.linkService.eventBus)==null||l.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:r(o)}}))})}_setEventListeners(e,t,s,i){var r,o,l;for(const[c,u]of s)(u==="Action"||(r=this.data.actions)!=null&&r[u])&&((u==="Focus"||u==="Blur")&&(t||(t={focused:!1})),this._setEventListener(e,t,c,u,i),u==="Focus"&&!((o=this.data.actions)!=null&&o.Blur)?this._setEventListener(e,t,"blur","Blur",null):u==="Blur"&&!((l=this.data.actions)!=null&&l.Focus)&&this._setEventListener(e,t,"focus","Focus",null))}_setBackgroundColor(e){const t=this.data.backgroundColor||null;e.style.backgroundColor=t===null?"transparent":V.makeHexColor(t[0],t[1],t[2])}_setTextStyle(e){const t=["left","center","right"],{fontColor:s}=this.data.defaultAppearanceData,i=this.data.defaultAppearanceData.fontSize||KO,r=e.style;let o;const l=2,c=u=>Math.round(10*u)/10;if(this.data.multiLine){const u=Math.abs(this.data.rect[3]-this.data.rect[1]-l),h=Math.round(u/(j1*i))||1,d=u/h;o=Math.min(i,c(d/j1))}else{const u=Math.abs(this.data.rect[3]-this.data.rect[1]-l);o=Math.min(i,c(u/j1))}r.fontSize=`calc(${o}px * var(--total-scale-factor))`,r.color=V.makeHexColor(s[0],s[1],s[2]),this.data.textAlignment!==null&&(r.textAlign=t[this.data.textAlignment])}_setRequired(e,t){t?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",t)}}class eB extends cc{constructor(e){const t=e.renderForms||e.data.hasOwnCanvas||!e.data.hasAppearance&&!!e.data.fieldValue;super(e,{isRenderable:t})}setPropertyOnSiblings(e,t,s,i){const r=this.annotationStorage;for(const o of this._getElementsByName(e.name,e.id))o.domElement&&(o.domElement[t]=s),r.setValue(o.id,{[i]:s})}render(){var i,r;const e=this.annotationStorage,t=this.data.id;this.container.classList.add("textWidgetAnnotation");let s=null;if(this.renderForms){const o=e.getValue(t,{value:this.data.fieldValue});let l=o.value||"";const c=e.getValue(t,{charLimit:this.data.maxLen}).charLimit;c&&l.length>c&&(l=l.slice(0,c));let u=o.formattedValue||((i=this.data.textContent)==null?void 0:i.join(`
`))||null;u&&this.data.comb&&(u=u.replaceAll(/\s+/g,""));const h={userValue:l,formattedValue:u,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(s=document.createElement("textarea"),s.textContent=u??l,this.data.doNotScroll&&(s.style.overflowY="hidden")):(s=document.createElement("input"),s.type=this.data.password?"password":"text",s.setAttribute("value",u??l),this.data.doNotScroll&&(s.style.overflowX="hidden")),this.data.hasOwnCanvas&&(s.hidden=!0),sc.add(s),s.setAttribute("data-element-id",t),s.disabled=this.data.readOnly,s.name=this.data.fieldName,s.tabIndex=0;const{datetimeFormat:d,datetimeType:f,timeStep:m}=this.data,y=!!f&&this.enableScripting;d&&(s.title=d),this._setRequired(s,this.data.required),c&&(s.maxLength=c),s.addEventListener("input",x=>{e.setValue(t,{value:x.target.value}),this.setPropertyOnSiblings(s,"value",x.target.value,"value"),h.formattedValue=null}),s.addEventListener("resetform",x=>{const v=this.data.defaultFieldValue??"";s.value=h.userValue=v,h.formattedValue=null});let w=x=>{const{formattedValue:v}=h;v!=null&&(x.target.value=v),x.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){s.addEventListener("focus",v=>{var S;if(h.focused)return;const{target:b}=v;if(y&&(b.type=f,m&&(b.step=m)),h.userValue){const E=h.userValue;if(y)if(f==="time"){const C=new Date(E),T=[C.getHours(),C.getMinutes(),C.getSeconds()];b.value=T.map(k=>k.toString().padStart(2,"0")).join(":")}else b.value=new Date(E-QO).toISOString().split(f==="date"?"T":".",1)[0];else b.value=E}h.lastCommittedValue=b.value,h.commitKey=1,(S=this.data.actions)!=null&&S.Focus||(h.focused=!0)}),s.addEventListener("updatefromsandbox",v=>{this.showElementAndHideCanvas(v.target);const b={value(S){h.userValue=S.detail.value??"",y||e.setValue(t,{value:h.userValue.toString()}),S.target.value=h.userValue},formattedValue(S){const{formattedValue:E}=S.detail;h.formattedValue=E,E!=null&&S.target!==document.activeElement&&(S.target.value=E);const C={formattedValue:E};y&&(C.value=E),e.setValue(t,C)},selRange(S){S.target.setSelectionRange(...S.detail.selRange)},charLimit:S=>{var k;const{charLimit:E}=S.detail,{target:C}=S;if(E===0){C.removeAttribute("maxLength");return}C.setAttribute("maxLength",E);let T=h.userValue;!T||T.length<=E||(T=T.slice(0,E),C.value=h.userValue=T,e.setValue(t,{value:T}),(k=this.linkService.eventBus)==null||k.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:T,willCommit:!0,commitKey:1,selStart:C.selectionStart,selEnd:C.selectionEnd}}))}};this._dispatchEventFromSandbox(b,v)}),s.addEventListener("keydown",v=>{var E;h.commitKey=1;let b=-1;if(v.key==="Escape"?b=0:v.key==="Enter"&&!this.data.multiLine?b=2:v.key==="Tab"&&(h.commitKey=3),b===-1)return;const{value:S}=v.target;h.lastCommittedValue!==S&&(h.lastCommittedValue=S,h.userValue=S,(E=this.linkService.eventBus)==null||E.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:S,willCommit:!0,commitKey:b,selStart:v.target.selectionStart,selEnd:v.target.selectionEnd}}))});const x=w;w=null,s.addEventListener("blur",v=>{var E,C;if(!h.focused||!v.relatedTarget)return;(E=this.data.actions)!=null&&E.Blur||(h.focused=!1);const{target:b}=v;let{value:S}=b;if(y){if(S&&f==="time"){const T=S.split(":").map(k=>parseInt(k,10));S=new Date(2e3,0,1,T[0],T[1],T[2]||0).valueOf(),b.step=""}else S.includes("T")||(S=`${S}T00:00`),S=new Date(S).valueOf();b.type="text"}h.userValue=S,h.lastCommittedValue!==S&&((C=this.linkService.eventBus)==null||C.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:S,willCommit:!0,commitKey:h.commitKey,selStart:v.target.selectionStart,selEnd:v.target.selectionEnd}})),x(v)}),(r=this.data.actions)!=null&&r.Keystroke&&s.addEventListener("beforeinput",v=>{var N;h.lastCommittedValue=null;const{data:b,target:S}=v,{value:E,selectionStart:C,selectionEnd:T}=S;let k=C,P=T;switch(v.inputType){case"deleteWordBackward":{const M=E.substring(0,C).match(/\w*[^\w]*$/);M&&(k-=M[0].length);break}case"deleteWordForward":{const M=E.substring(C).match(/^[^\w]*\w*/);M&&(P+=M[0].length);break}case"deleteContentBackward":C===T&&(k-=1);break;case"deleteContentForward":C===T&&(P+=1);break}v.preventDefault(),(N=this.linkService.eventBus)==null||N.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:E,change:b||"",willCommit:!1,selStart:k,selEnd:P}})}),this._setEventListeners(s,h,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],v=>v.target.value)}if(w&&s.addEventListener("blur",w),this.data.comb){const v=(this.data.rect[2]-this.data.rect[0])/c;s.classList.add("comb"),s.style.letterSpacing=`calc(${v}px * var(--total-scale-factor) - 1ch)`}}else s=document.createElement("div"),s.textContent=this.data.fieldValue,s.style.verticalAlign="middle",s.style.display="table-cell",this.data.hasOwnCanvas&&(s.hidden=!0);return this._setTextStyle(s),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class tB extends cc{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}}class nB extends cc{constructor(e){super(e,{isRenderable:e.renderForms})}render(){const e=this.annotationStorage,t=this.data,s=t.id;let i=e.getValue(s,{value:t.exportValue===t.fieldValue}).value;typeof i=="string"&&(i=i!=="Off",e.setValue(s,{value:i})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const r=document.createElement("input");return sc.add(r),r.setAttribute("data-element-id",s),r.disabled=t.readOnly,this._setRequired(r,this.data.required),r.type="checkbox",r.name=t.fieldName,i&&r.setAttribute("checked",!0),r.setAttribute("exportValue",t.exportValue),r.tabIndex=0,r.addEventListener("change",o=>{const{name:l,checked:c}=o.target;for(const u of this._getElementsByName(l,s)){const h=c&&u.exportValue===t.exportValue;u.domElement&&(u.domElement.checked=h),e.setValue(u.id,{value:h})}e.setValue(s,{value:c})}),r.addEventListener("resetform",o=>{const l=t.defaultFieldValue||"Off";o.target.checked=l===t.exportValue}),this.enableScripting&&this.hasJSActions&&(r.addEventListener("updatefromsandbox",o=>{const l={value(c){c.target.checked=c.detail.value!=="Off",e.setValue(s,{value:c.target.checked})}};this._dispatchEventFromSandbox(l,o)}),this._setEventListeners(r,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],o=>o.target.checked)),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class RR extends cc{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const e=this.annotationStorage,t=this.data,s=t.id;let i=e.getValue(s,{value:t.fieldValue===t.buttonValue}).value;if(typeof i=="string"&&(i=i!==t.buttonValue,e.setValue(s,{value:i})),i)for(const o of this._getElementsByName(t.fieldName,s))e.setValue(o.id,{value:!1});const r=document.createElement("input");if(sc.add(r),r.setAttribute("data-element-id",s),r.disabled=t.readOnly,this._setRequired(r,this.data.required),r.type="radio",r.name=t.fieldName,i&&r.setAttribute("checked",!0),r.tabIndex=0,r.addEventListener("change",o=>{const{name:l,checked:c}=o.target;for(const u of this._getElementsByName(l,s))e.setValue(u.id,{value:!1});e.setValue(s,{value:c})}),r.addEventListener("resetform",o=>{const l=t.defaultFieldValue;o.target.checked=l!=null&&l===t.buttonValue}),this.enableScripting&&this.hasJSActions){const o=t.buttonValue;r.addEventListener("updatefromsandbox",l=>{const c={value:u=>{const h=o===u.detail.value;for(const d of this._getElementsByName(u.target.name)){const f=h&&d.id===s;d.domElement&&(d.domElement.checked=f),e.setValue(d.id,{value:f})}}};this._dispatchEventFromSandbox(c,l)}),this._setEventListeners(r,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],l=>l.target.checked)}return this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class sB extends jA{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){const e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton");const t=e.lastChild;return this.enableScripting&&this.hasJSActions&&t&&(this._setDefaultPropertiesFromJS(t),t.addEventListener("updatefromsandbox",s=>{this._dispatchEventFromSandbox({},s)})),e}}class iB extends cc{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const e=this.annotationStorage,t=this.data.id,s=e.getValue(t,{value:this.data.fieldValue}),i=document.createElement("select");sc.add(i),i.setAttribute("data-element-id",t),i.disabled=this.data.readOnly,this._setRequired(i,this.data.required),i.name=this.data.fieldName,i.tabIndex=0;let r=this.data.combo&&this.data.options.length>0;this.data.combo||(i.size=this.data.options.length,this.data.multiSelect&&(i.multiple=!0)),i.addEventListener("resetform",h=>{const d=this.data.defaultFieldValue;for(const f of i.options)f.selected=f.value===d});for(const h of this.data.options){const d=document.createElement("option");d.textContent=h.displayValue,d.value=h.exportValue,s.value.includes(h.exportValue)&&(d.setAttribute("selected",!0),r=!1),i.append(d)}let o=null;if(r){const h=document.createElement("option");h.value=" ",h.setAttribute("hidden",!0),h.setAttribute("selected",!0),i.prepend(h),o=()=>{h.remove(),i.removeEventListener("input",o),o=null},i.addEventListener("input",o)}const l=h=>{const d=h?"value":"textContent",{options:f,multiple:m}=i;return m?Array.prototype.filter.call(f,y=>y.selected).map(y=>y[d]):f.selectedIndex===-1?null:f[f.selectedIndex][d]};let c=l(!1);const u=h=>{const d=h.target.options;return Array.prototype.map.call(d,f=>({displayValue:f.textContent,exportValue:f.value}))};return this.enableScripting&&this.hasJSActions?(i.addEventListener("updatefromsandbox",h=>{const d={value(f){o==null||o();const m=f.detail.value,y=new Set(Array.isArray(m)?m:[m]);for(const w of i.options)w.selected=y.has(w.value);e.setValue(t,{value:l(!0)}),c=l(!1)},multipleSelection(f){i.multiple=!0},remove(f){const m=i.options,y=f.detail.remove;m[y].selected=!1,i.remove(y),m.length>0&&Array.prototype.findIndex.call(m,x=>x.selected)===-1&&(m[0].selected=!0),e.setValue(t,{value:l(!0),items:u(f)}),c=l(!1)},clear(f){for(;i.length!==0;)i.remove(0);e.setValue(t,{value:null,items:[]}),c=l(!1)},insert(f){const{index:m,displayValue:y,exportValue:w}=f.detail.insert,x=i.children[m],v=document.createElement("option");v.textContent=y,v.value=w,x?x.before(v):i.append(v),e.setValue(t,{value:l(!0),items:u(f)}),c=l(!1)},items(f){const{items:m}=f.detail;for(;i.length!==0;)i.remove(0);for(const y of m){const{displayValue:w,exportValue:x}=y,v=document.createElement("option");v.textContent=w,v.value=x,i.append(v)}i.options.length>0&&(i.options[0].selected=!0),e.setValue(t,{value:l(!0),items:u(f)}),c=l(!1)},indices(f){const m=new Set(f.detail.indices);for(const y of f.target.options)y.selected=m.has(y.index);e.setValue(t,{value:l(!0)}),c=l(!1)},editable(f){f.target.disabled=!f.detail.editable}};this._dispatchEventFromSandbox(d,h)}),i.addEventListener("input",h=>{var m;const d=l(!0),f=l(!1);e.setValue(t,{value:d}),h.preventDefault(),(m=this.linkService.eventBus)==null||m.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:c,change:f,changeEx:d,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(i,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],h=>h.target.value)):i.addEventListener("input",function(h){e.setValue(t,{value:l(!0)})}),this.data.combo&&this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}var ag,Ox;class Fx extends qe{constructor(t){const{data:s,elements:i,parent:r}=t,o=!!r._commentManager;super(t,{isRenderable:!o&&qe._hasPopupData(s)});p(this,ag);if(this.elements=i,o&&qe._hasPopupData(s)){const l=this.popup=A(this,ag,Ox).call(this);for(const c of i)c.popup=l}else this.popup=null}render(){const{container:t}=this;t.classList.add("popupAnnotation"),t.role="comment";const s=this.popup=A(this,ag,Ox).call(this),i=[];for(const r of this.elements)r.popup=s,r.container.ariaHasPopup="dialog",i.push(r.data.id),r.addHighlightArea();return this.container.setAttribute("aria-controls",i.map(r=>`${LA}${r}`).join(",")),this.container}}ag=new WeakSet,Ox=function(){return new rB({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate||this.data.creationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open,commentManager:this.parent._commentManager})};var On,xo,Lv,Nv,eh,th,Qe,wi,So,vl,nh,sh,bi,Bn,dr,fr,wt,pr,Ao,lg,gr,ih,wl,Eo,Gt,_o,rh,Ry,cg,Bx,ug,jx,hg,Ux,oh,Ly,dg,zx,Mv,LR,Dv,NR,Iv,MR,Fv,DR,ah,Ny,lh,My,fg,$x;class rB{constructor({container:e,color:t,elements:s,titleObj:i,modificationDate:r,contentsObj:o,richText:l,parent:c,rect:u,parentRect:h,open:d,commentManager:f=null}){p(this,rh);p(this,cg);p(this,ug);p(this,hg);p(this,oh);p(this,dg);p(this,Mv);p(this,Dv);p(this,Iv);p(this,Fv);p(this,ah);p(this,lh);p(this,fg);p(this,On,null);p(this,xo,A(this,Iv,MR).bind(this));p(this,Lv,A(this,fg,$x).bind(this));p(this,Nv,A(this,lh,My).bind(this));p(this,eh,A(this,ah,Ny).bind(this));p(this,th,null);p(this,Qe,null);p(this,wi,null);p(this,So,null);p(this,vl,null);p(this,nh,null);p(this,sh,null);p(this,bi,!1);p(this,Bn,null);p(this,dr,null);p(this,fr,null);p(this,wt,null);p(this,pr,null);p(this,Ao,null);p(this,lg,null);p(this,gr,null);p(this,ih,null);p(this,wl,null);p(this,Eo,!1);p(this,Gt,null);p(this,_o,null);g(this,Qe,e),g(this,ih,i),g(this,wi,o),g(this,gr,l),g(this,nh,c),g(this,th,t),g(this,lg,u),g(this,sh,h),g(this,vl,s),g(this,On,f),g(this,Gt,s[0]),g(this,So,Tf.toDateObject(r)),this.trigger=s.flatMap(m=>m.getElementsToTriggerPopup()),f?this.renderCommentButton():(A(this,rh,Ry).call(this),a(this,Qe).hidden=!0,d&&A(this,ah,Ny).call(this))}renderCommentButton(){if(a(this,wt)||(a(this,pr)||A(this,cg,Bx).call(this),!a(this,pr)))return;const{signal:e}=g(this,dr,new AbortController),t=!!a(this,Gt).extraPopupElement,s=()=>{a(this,On).toggleCommentPopup(this,!0,void 0,!t)},i=()=>{a(this,On).toggleCommentPopup(this,!1,!0,!t)},r=()=>{a(this,On).toggleCommentPopup(this,!1,!1)};if(t){g(this,wt,a(this,Gt).container);for(const o of this.trigger)o.ariaHasPopup="dialog",o.ariaControls="commentPopup",o.addEventListener("keydown",a(this,xo),{signal:e}),o.addEventListener("click",s,{signal:e}),o.addEventListener("pointerenter",i,{signal:e}),o.addEventListener("pointerleave",r,{signal:e}),o.classList.add("popupTriggerArea")}else{const o=g(this,wt,document.createElement("button"));o.className="annotationCommentButton";const l=a(this,Gt).container;o.style.zIndex=l.style.zIndex+1,o.tabIndex=0,o.ariaHasPopup="dialog",o.ariaControls="commentPopup",o.setAttribute("data-l10n-id","pdfjs-show-comment-button"),A(this,hg,Ux).call(this),A(this,ug,jx).call(this),o.addEventListener("keydown",a(this,xo),{signal:e}),o.addEventListener("click",s,{signal:e}),o.addEventListener("pointerenter",i,{signal:e}),o.addEventListener("pointerleave",r,{signal:e}),l.after(o)}}get commentButtonColor(){const{color:e,opacity:t}=a(this,Gt).commentData;return e?a(this,nh)._commentManager.makeCommentColor(e,t):null}focusCommentButton(){setTimeout(()=>{var e;(e=a(this,wt))==null||e.focus()},0)}getData(){const{richText:e,color:t,opacity:s,creationDate:i,modificationDate:r}=a(this,Gt).commentData;return{contentsObj:{str:this.comment},richText:e,color:t,opacity:s,creationDate:i,modificationDate:r}}get elementBeforePopup(){return a(this,wt)}get comment(){return a(this,_o)||g(this,_o,a(this,Gt).commentText),a(this,_o)}set comment(e){e!==this.comment&&(a(this,Gt).commentText=g(this,_o,e))}get parentBoundingClientRect(){return a(this,Gt).layer.getBoundingClientRect()}setCommentButtonStates({selected:e,hasPopup:t}){a(this,wt)&&(a(this,wt).classList.toggle("selected",e),a(this,wt).ariaExpanded=t)}setSelectedCommentButton(e){a(this,wt).classList.toggle("selected",e)}get commentPopupPosition(){if(a(this,Ao))return a(this,Ao);const{x:e,y:t,height:s}=a(this,wt).getBoundingClientRect(),{x:i,y:r,width:o,height:l}=a(this,Gt).layer.getBoundingClientRect();return[(e-i)/o,(t+s-r)/l]}set commentPopupPosition(e){g(this,Ao,e)}hasDefaultPopupPosition(){return a(this,Ao)===null}get commentButtonPosition(){return a(this,pr)}get commentButtonWidth(){return a(this,wt).getBoundingClientRect().width/this.parentBoundingClientRect.width}editComment(e){const[t,s]=a(this,Ao)||this.commentButtonPosition.map(u=>u/100),i=this.parentBoundingClientRect,{x:r,y:o,width:l,height:c}=i;a(this,On).showDialog(null,this,r+t*l,o+s*c,{...e,parentDimensions:i})}render(){var s,i;if(a(this,Bn))return;const e=g(this,Bn,document.createElement("div"));if(e.className="popup",a(this,th)){const r=e.style.outlineColor=V.makeHexColor(...a(this,th));e.style.backgroundColor=`color-mix(in srgb, ${r} 30%, white)`}const t=document.createElement("span");if(t.className="header",(s=a(this,ih))!=null&&s.str){const r=document.createElement("span");r.className="title",t.append(r),{dir:r.dir,str:r.textContent}=a(this,ih)}if(e.append(t),a(this,So)){const r=document.createElement("time");r.className="popupDate",r.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),r.setAttribute("data-l10n-args",JSON.stringify({dateObj:a(this,So).valueOf()})),r.dateTime=a(this,So).toISOString(),t.append(r)}MA({html:a(this,oh,Ly)||a(this,wi).str,dir:(i=a(this,wi))==null?void 0:i.dir,className:"popupContent"},e),a(this,Qe).append(e)}updateEdited({rect:e,popup:t,deleted:s}){var i;if(a(this,On)){s?(this.remove(),g(this,_o,null)):t&&(t.deleted?this.remove():(A(this,hg,Ux).call(this),g(this,_o,t.text))),e&&(g(this,pr,null),A(this,cg,Bx).call(this),A(this,ug,jx).call(this));return}if(s||t!=null&&t.deleted){this.remove();return}A(this,rh,Ry).call(this),a(this,wl)||g(this,wl,{contentsObj:a(this,wi),richText:a(this,gr)}),e&&g(this,fr,null),t&&t.text&&(g(this,gr,A(this,Dv,NR).call(this,t.text)),g(this,So,Tf.toDateObject(t.date)),g(this,wi,null)),(i=a(this,Bn))==null||i.remove(),g(this,Bn,null)}resetEdited(){var e;a(this,wl)&&({contentsObj:ct(this,wi)._,richText:ct(this,gr)._}=a(this,wl),g(this,wl,null),(e=a(this,Bn))==null||e.remove(),g(this,Bn,null),g(this,fr,null))}remove(){var e,t,s;if((e=a(this,dr))==null||e.abort(),g(this,dr,null),(t=a(this,Bn))==null||t.remove(),g(this,Bn,null),g(this,Eo,!1),g(this,bi,!1),(s=a(this,wt))==null||s.remove(),g(this,wt,null),this.trigger)for(const i of this.trigger)i.classList.remove("popupTriggerArea")}forceHide(){g(this,Eo,this.isVisible),a(this,Eo)&&(a(this,Qe).hidden=!0)}maybeShow(){a(this,On)||(A(this,rh,Ry).call(this),a(this,Eo)&&(a(this,Bn)||A(this,lh,My).call(this),g(this,Eo,!1),a(this,Qe).hidden=!1))}get isVisible(){return a(this,On)?!1:a(this,Qe).hidden===!1}}On=new WeakMap,xo=new WeakMap,Lv=new WeakMap,Nv=new WeakMap,eh=new WeakMap,th=new WeakMap,Qe=new WeakMap,wi=new WeakMap,So=new WeakMap,vl=new WeakMap,nh=new WeakMap,sh=new WeakMap,bi=new WeakMap,Bn=new WeakMap,dr=new WeakMap,fr=new WeakMap,wt=new WeakMap,pr=new WeakMap,Ao=new WeakMap,lg=new WeakMap,gr=new WeakMap,ih=new WeakMap,wl=new WeakMap,Eo=new WeakMap,Gt=new WeakMap,_o=new WeakMap,rh=new WeakSet,Ry=function(){var t;if(a(this,dr))return;g(this,dr,new AbortController);const{signal:e}=a(this,dr);for(const s of this.trigger)s.addEventListener("click",a(this,eh),{signal:e}),s.addEventListener("pointerenter",a(this,Nv),{signal:e}),s.addEventListener("pointerleave",a(this,Lv),{signal:e}),s.classList.add("popupTriggerArea");for(const s of a(this,vl))(t=s.container)==null||t.addEventListener("keydown",a(this,xo),{signal:e})},cg=new WeakSet,Bx=function(){const e=a(this,vl).find(t=>t.hasCommentButton);e&&g(this,pr,e._normalizePoint(e.commentButtonPosition))},ug=new WeakSet,jx=function(){if(a(this,Gt).extraPopupElement&&!a(this,Gt).editor)return;this.renderCommentButton();const[e,t]=a(this,pr),{style:s}=a(this,wt);s.left=`calc(${e}%)`,s.top=`calc(${t}% - var(--comment-button-dim))`},hg=new WeakSet,Ux=function(){a(this,Gt).extraPopupElement||(this.renderCommentButton(),a(this,wt).style.backgroundColor=this.commentButtonColor||"")},oh=new WeakSet,Ly=function(){const e=a(this,gr),t=a(this,wi);return e!=null&&e.str&&(!(t!=null&&t.str)||t.str===e.str)&&a(this,gr).html||null},dg=new WeakSet,zx=function(){var e,t,s;return((s=(t=(e=a(this,oh,Ly))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:s.fontSize)||0},Mv=new WeakSet,LR=function(){var e,t,s;return((s=(t=(e=a(this,oh,Ly))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:s.color)||null},Dv=new WeakSet,NR=function(e){const t=[],s={str:e,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:t}]}},i={style:{color:a(this,Mv,LR),fontSize:a(this,dg,zx)?`calc(${a(this,dg,zx)}px * var(--total-scale-factor))`:""}};for(const r of e.split(`
`))t.push({name:"span",value:r,attributes:i});return s},Iv=new WeakSet,MR=function(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||(e.key==="Enter"||e.key==="Escape"&&a(this,bi))&&A(this,ah,Ny).call(this)},Fv=new WeakSet,DR=function(){if(a(this,fr)!==null)return;const{page:{view:e},viewport:{rawDims:{pageWidth:t,pageHeight:s,pageX:i,pageY:r}}}=a(this,nh);let o=!!a(this,sh),l=o?a(this,sh):a(this,lg);for(const y of a(this,vl))if(!l||V.intersect(y.data.rect,l)!==null){l=y.data.rect,o=!0;break}const c=V.normalizeRect([l[0],e[3]-l[1]+e[1],l[2],e[3]-l[3]+e[1]]),u=5,h=o?l[2]-l[0]+u:0,d=c[0]+h,f=c[1];g(this,fr,[100*(d-i)/t,100*(f-r)/s]);const{style:m}=a(this,Qe);m.left=`${a(this,fr)[0]}%`,m.top=`${a(this,fr)[1]}%`},ah=new WeakSet,Ny=function(){if(a(this,On)){a(this,On).toggleCommentPopup(this,!1);return}g(this,bi,!a(this,bi)),a(this,bi)?(A(this,lh,My).call(this),a(this,Qe).addEventListener("click",a(this,eh)),a(this,Qe).addEventListener("keydown",a(this,xo))):(A(this,fg,$x).call(this),a(this,Qe).removeEventListener("click",a(this,eh)),a(this,Qe).removeEventListener("keydown",a(this,xo)))},lh=new WeakSet,My=function(){a(this,Bn)||this.render(),this.isVisible?a(this,bi)&&a(this,Qe).classList.add("focused"):(A(this,Fv,DR).call(this),a(this,Qe).hidden=!1,a(this,Qe).style.zIndex=parseInt(a(this,Qe).style.zIndex)+1e3)},fg=new WeakSet,$x=function(){a(this,Qe).classList.remove("focused"),!(a(this,bi)||!this.isVisible)&&(a(this,Qe).hidden=!0,a(this,Qe).style.zIndex=parseInt(a(this,Qe).style.zIndex)-1e3)};class IR extends qe{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=Z.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const e=document.createElement("div");e.classList.add("annotationTextContent"),e.setAttribute("role","comment");for(const t of this.textContent){const s=document.createElement("span");s.textContent=t,e.append(s)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var pg;class oB extends qe{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});p(this,pg,null)}render(){this.container.classList.add("lineAnnotation");const{data:t,width:s,height:i}=this,r=this.svgFactory.create(s,i,!0),o=g(this,pg,this.svgFactory.createElement("svg:line"));return o.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),o.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),o.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),o.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),o.setAttribute("stroke-width",t.borderStyle.width||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),r.append(o),this.container.append(r),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return a(this,pg)}addHighlightArea(){this.container.classList.add("highlightArea")}}pg=new WeakMap;var gg;class aB extends qe{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});p(this,gg,null)}render(){this.container.classList.add("squareAnnotation");const{data:t,width:s,height:i}=this,r=this.svgFactory.create(s,i,!0),o=t.borderStyle.width,l=g(this,gg,this.svgFactory.createElement("svg:rect"));return l.setAttribute("x",o/2),l.setAttribute("y",o/2),l.setAttribute("width",s-o),l.setAttribute("height",i-o),l.setAttribute("stroke-width",o||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),r.append(l),this.container.append(r),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return a(this,gg)}addHighlightArea(){this.container.classList.add("highlightArea")}}gg=new WeakMap;var mg;class lB extends qe{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});p(this,mg,null)}render(){this.container.classList.add("circleAnnotation");const{data:t,width:s,height:i}=this,r=this.svgFactory.create(s,i,!0),o=t.borderStyle.width,l=g(this,mg,this.svgFactory.createElement("svg:ellipse"));return l.setAttribute("cx",s/2),l.setAttribute("cy",i/2),l.setAttribute("rx",s/2-o/2),l.setAttribute("ry",i/2-o/2),l.setAttribute("stroke-width",o||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),r.append(l),this.container.append(r),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return a(this,mg)}addHighlightArea(){this.container.classList.add("highlightArea")}}mg=new WeakMap;var yg;class FR extends qe{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});p(this,yg,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,vertices:s,borderStyle:i,popupRef:r},width:o,height:l}=this;if(!s)return this.container;const c=this.svgFactory.create(o,l,!0);let u=[];for(let d=0,f=s.length;d<f;d+=2){const m=s[d]-t[0],y=t[3]-s[d+1];u.push(`${m},${y}`)}u=u.join(" ");const h=g(this,yg,this.svgFactory.createElement(this.svgElementName));return h.setAttribute("points",u),h.setAttribute("stroke-width",i.width||1),h.setAttribute("stroke","transparent"),h.setAttribute("fill","transparent"),c.append(h),this.container.append(c),!r&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return a(this,yg)}addHighlightArea(){this.container.classList.add("highlightArea")}}yg=new WeakMap;class cB extends FR{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class uB extends qe{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var vg,bl,wg,Hx;class UA extends qe{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});p(this,wg);p(this,vg,null);p(this,bl,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?Z.HIGHLIGHT:Z.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,rotation:s,inkLists:i,borderStyle:r,popupRef:o}}=this,{transform:l,width:c,height:u}=A(this,wg,Hx).call(this,s,t),h=this.svgFactory.create(c,u,!0),d=g(this,vg,this.svgFactory.createElement("svg:g"));h.append(d),d.setAttribute("stroke-width",r.width||1),d.setAttribute("stroke-linecap","round"),d.setAttribute("stroke-linejoin","round"),d.setAttribute("stroke-miterlimit",10),d.setAttribute("stroke","transparent"),d.setAttribute("fill","transparent"),d.setAttribute("transform",l);for(let f=0,m=i.length;f<m;f++){const y=this.svgFactory.createElement(this.svgElementName);a(this,bl).push(y),y.setAttribute("points",i[f].join(",")),d.append(y)}return!o&&this.hasPopupData&&this._createPopup(),this.container.append(h),this._editOnDoubleClick(),this.container}updateEdited(t){super.updateEdited(t);const{thickness:s,points:i,rect:r}=t,o=a(this,vg);if(s>=0&&o.setAttribute("stroke-width",s||1),i)for(let l=0,c=a(this,bl).length;l<c;l++)a(this,bl)[l].setAttribute("points",i[l].join(","));if(r){const{transform:l,width:c,height:u}=A(this,wg,Hx).call(this,this.data.rotation,r);o.parentElement.setAttribute("viewBox",`0 0 ${c} ${u}`),o.setAttribute("transform",l)}}getElementsToTriggerPopup(){return a(this,bl)}addHighlightArea(){this.container.classList.add("highlightArea")}}vg=new WeakMap,bl=new WeakMap,wg=new WeakSet,Hx=function(t,s){switch(t){case 90:return{transform:`rotate(90) translate(${-s[0]},${s[1]}) scale(1,-1)`,width:s[3]-s[1],height:s[2]-s[0]};case 180:return{transform:`rotate(180) translate(${-s[2]},${s[1]}) scale(1,-1)`,width:s[2]-s[0],height:s[3]-s[1]};case 270:return{transform:`rotate(270) translate(${-s[2]},${s[3]}) scale(1,-1)`,width:s[3]-s[1],height:s[2]-s[0]};default:return{transform:`translate(${-s[0]},${s[3]}) scale(1,-1)`,width:s[2]-s[0],height:s[3]-s[1]}}};class OR extends qe{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=Z.HIGHLIGHT}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),e){const s=document.createElement("mark");s.classList.add("overlaidText"),s.textContent=e,this.container.append(s)}return this.container}}class hB extends qe{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),e){const s=document.createElement("u");s.classList.add("overlaidText"),s.textContent=e,this.container.append(s)}return this.container}}class dB extends qe{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),e){const s=document.createElement("u");s.classList.add("overlaidText"),s.textContent=e,this.container.append(s)}return this.container}}class fB extends qe{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),e){const s=document.createElement("s");s.classList.add("overlaidText"),s.textContent=e,this.container.append(s)}return this.container}}class BR extends qe{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=Z.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var bg,xg,Vx;class pB extends qe{constructor(t){var i;super(t,{isRenderable:!0});p(this,xg);p(this,bg,null);const{file:s}=this.data;this.filename=s.filename,this.content=s.content,(i=this.linkService.eventBus)==null||i.dispatch("fileattachmentannotation",{source:this,...s})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:t,data:s}=this;let i;s.hasAppearance||s.fillAlpha===0?i=document.createElement("div"):(i=document.createElement("img"),i.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(s.name)?"paperclip":"pushpin"}.svg`,s.fillAlpha&&s.fillAlpha<1&&(i.style=`filter: opacity(${Math.round(s.fillAlpha*100)}%);`)),i.addEventListener("dblclick",A(this,xg,Vx).bind(this)),g(this,bg,i);const{isMac:r}=Tt.platform;return t.addEventListener("keydown",o=>{o.key==="Enter"&&(r?o.metaKey:o.ctrlKey)&&A(this,xg,Vx).call(this)}),!s.popupRef&&this.hasPopupData?this._createPopup():i.classList.add("popupTriggerArea"),t.append(i),t}getElementsToTriggerPopup(){return a(this,bg)}addHighlightArea(){this.container.classList.add("highlightArea")}}bg=new WeakMap,xg=new WeakSet,Vx=function(){var t;(t=this.downloadManager)==null||t.openOrDownloadData(this.content,this.filename)};var ch,xl,uh,Co,Sg,Sl,Ag,Wx,Eg,Gx,_g;let zA=(_g=class{constructor({div:e,accessibilityManager:t,annotationCanvasMap:s,annotationEditorUIManager:i,page:r,viewport:o,structTreeLayer:l,commentManager:c,linkService:u,annotationStorage:h}){p(this,Ag);p(this,Eg);p(this,ch,null);p(this,xl,null);p(this,uh,null);p(this,Co,new Map);p(this,Sg,null);p(this,Sl,null);this.div=e,g(this,ch,t),g(this,xl,s),g(this,Sg,l||null),g(this,Sl,u||null),g(this,uh,h||new DA),this.page=r,this.viewport=o,this.zIndex=0,this._annotationEditorUIManager=i,this._commentManager=c||null}hasEditableAnnotations(){return a(this,Co).size>0}async render(e){var o,l,c;const{annotations:t}=e,s=this.div;na(s,this.viewport);const i=new Map,r={data:null,layer:s,linkService:a(this,Sl),downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:e.renderForms!==!1,svgFactory:new Lf,annotationStorage:a(this,uh),enableComment:e.enableComment===!0,enableScripting:e.enableScripting===!0,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:this,elements:null};for(const u of t){if(u.noHTML)continue;const h=u.annotationType===et.POPUP;if(h){const m=i.get(u.id);if(!m)continue;r.elements=m}else if(u.rect[2]===u.rect[0]||u.rect[3]===u.rect[1])continue;r.data=u;const d=rC.create(r);if(!d.isRenderable)continue;if(!h&&u.popupRef){const m=i.get(u.popupRef);m?m.push(d):i.set(u.popupRef,[d])}const f=d.render();u.hidden&&(f.style.visibility="hidden"),await A(this,Ag,Wx).call(this,f,u.id,r.elements),(l=(o=d.extraPopupElement)==null?void 0:o.popup)==null||l.renderCommentButton(),d._isEditable&&(a(this,Co).set(d.data.id,d),(c=this._annotationEditorUIManager)==null||c.renderAnnotationElement(d))}A(this,Eg,Gx).call(this)}async addLinkAnnotations(e){const t={data:null,layer:this.div,linkService:a(this,Sl),svgFactory:new Lf,parent:this};for(const s of e){s.borderStyle||(s.borderStyle=_g._defaultBorderStyle),t.data=s;const i=rC.create(t);if(!i.isRenderable)continue;const r=i.render();await A(this,Ag,Wx).call(this,r,s.id,null)}}update({viewport:e}){const t=this.div;this.viewport=e,na(t,{rotation:e.rotation}),A(this,Eg,Gx).call(this),t.hidden=!1}getEditableAnnotations(){return Array.from(a(this,Co).values())}getEditableAnnotation(e){return a(this,Co).get(e)}addFakeAnnotation(e){var l;const{div:t}=this,{id:s,rotation:i}=e,r=new JO({data:{id:s,rect:e.getPDFRect(),rotation:i},editor:e,layer:t,parent:this,enableComment:!!this._commentManager,linkService:a(this,Sl),annotationStorage:a(this,uh)}),o=r.render();return t.append(o),(l=a(this,ch))==null||l.moveElementInDOM(t,o,o,!1),r.createOrUpdatePopup(),r}static get _defaultBorderStyle(){return ie(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:fc.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}},ch=new WeakMap,xl=new WeakMap,uh=new WeakMap,Co=new WeakMap,Sg=new WeakMap,Sl=new WeakMap,Ag=new WeakSet,Wx=async function(e,t,s){var l,c;const i=e.firstChild||e,r=i.id=`${LA}${t}`,o=await((l=a(this,Sg))==null?void 0:l.getAriaAttributes(r));if(o)for(const[u,h]of o)i.setAttribute(u,h);s?s.at(-1).container.after(e):(this.div.append(e),(c=a(this,ch))==null||c.moveElementInDOM(this.div,e,i,!1))},Eg=new WeakSet,Gx=function(){var t;if(!a(this,xl))return;const e=this.div;for(const[s,i]of a(this,xl)){const r=e.querySelector(`[data-annotation-id="${s}"]`);if(!r)continue;i.className="annotationContent";const{firstChild:o}=r;o?o.nodeName==="CANVAS"?o.replaceWith(i):o.classList.contains("annotationContent")?o.after(i):o.before(i):r.append(i);const l=a(this,Co).get(s);l&&(l._hasNoCanvas?((t=this._annotationEditorUIManager)==null||t.setMissingCanvas(s,r.id,i),l._hasNoCanvas=!1):l.canvas=i)}a(this,xl).clear()},_g);const Qm=/\r\n?|\n/g;var jn,Cg,Al,Un,Ov,jR,Bv,UR,jv,zR,hh,Dy,dh,Iy,fh,Fy,Uv,$R,Tg,Xx,zv,HR;const Te=class Te extends Re{constructor(t){super({...t,name:"freeTextEditor"});p(this,Ov);p(this,Bv);p(this,jv);p(this,hh);p(this,fh);p(this,Uv);p(this,zv);p(this,jn,"");p(this,Cg,`${this.id}-editor`);p(this,Al,null);p(this,Un,void 0);O(this,"_colorPicker",null);this.color=t.color||Te._defaultColor||Re._defaultLineColor,g(this,Un,t.fontSize||Te._defaultFontSize),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert")}static get _keyboardManager(){const t=Te.prototype,s=o=>o.isEmpty(),i=sa.TRANSLATE_SMALL,r=sa.TRANSLATE_BIG;return ie(this,"_keyboardManager",new bm([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-i,0],checker:s}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-r,0],checker:s}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[i,0],checker:s}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[r,0],checker:s}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-i],checker:s}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-r],checker:s}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,i],checker:s}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,r],checker:s}]]))}static initialize(t,s){Re.initialize(t,s);const i=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(i.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,s){switch(t){case ae.FREETEXT_SIZE:Te._defaultFontSize=s;break;case ae.FREETEXT_COLOR:Te._defaultColor=s;break}}updateParams(t,s){switch(t){case ae.FREETEXT_SIZE:A(this,Ov,jR).call(this,s);break;case ae.FREETEXT_COLOR:A(this,Bv,UR).call(this,s);break}}static get defaultPropertiesToUpdate(){return[[ae.FREETEXT_SIZE,Te._defaultFontSize],[ae.FREETEXT_COLOR,Te._defaultColor||Re._defaultLineColor]]}get propertiesToUpdate(){return[[ae.FREETEXT_SIZE,a(this,Un)],[ae.FREETEXT_COLOR,this.color]]}get toolbarButtons(){return this._colorPicker||(this._colorPicker=new k0(this)),[["colorPicker",this._colorPicker]]}get colorType(){return ae.FREETEXT_COLOR}onUpdatedColor(){var t;this.editorDiv.style.color=this.color,(t=this._colorPicker)==null||t.update(this.color),super.onUpdatedColor()}_translateEmpty(t,s){this._uiManager.translateSelectedEditors(t,s,!0)}getInitialTranslation(){const t=this.parentScale;return[-Te._internalPadding*t,-(Te._internalPadding+a(this,Un))*t]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),g(this,Al,new AbortController);const t=this._uiManager.combinedSignal(a(this,Al));return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:t}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:t}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:t}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:t}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:t}),!0}disableEditMode(){var t;return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",a(this,Cg)),this._isDraggable=!0,(t=a(this,Al))==null||t.abort(),g(this,Al,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(t){var s;this.width||(this.enableEditMode(),t&&this.editorDiv.focus(),(s=this._initialOptions)!=null&&s.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const t=a(this,jn),s=g(this,jn,A(this,jv,zR).call(this).trimEnd());if(t===s)return;const i=r=>{if(g(this,jn,r),!r){this.remove();return}A(this,fh,Fy).call(this),this._uiManager.rebuild(this),A(this,hh,Dy).call(this)};this.addCommands({cmd:()=>{i(s)},undo:()=>{i(t)},mustExec:!1}),A(this,hh,Dy).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(t){t.target===this.div&&t.key==="Enter"&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(t){Te._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let t,s;(this._isCopy||this.annotationElementId)&&(t=this.x,s=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",a(this,Cg)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:i}=this.editorDiv;if(i.fontSize=`calc(${a(this,Un)}px * var(--total-scale-factor))`,i.color=this.color,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[r,o]=this.parentDimensions;if(this.annotationElementId){const{position:l}=this._initialData;let[c,u]=this.getInitialTranslation();[c,u]=this.pageTranslationToScreen(c,u);const[h,d]=this.pageDimensions,[f,m]=this.pageTranslation;let y,w;switch(this.rotation){case 0:y=t+(l[0]-f)/h,w=s+this.height-(l[1]-m)/d;break;case 90:y=t+(l[0]-f)/h,w=s-(l[1]-m)/d,[c,u]=[u,-c];break;case 180:y=t-this.width+(l[0]-f)/h,w=s-(l[1]-m)/d,[c,u]=[-c,-u];break;case 270:y=t+(l[0]-f-this.height*d)/h,w=s+(l[1]-m-this.width*h)/d,[c,u]=[-u,c];break}this.setAt(y*r,w*o,c,u)}else this._moveAfterPaste(t,s);A(this,fh,Fy).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(t){var y,w,x;const s=t.clipboardData||window.clipboardData,{types:i}=s;if(i.length===1&&i[0]==="text/plain")return;t.preventDefault();const r=A(y=Te,Tg,Xx).call(y,s.getData("text")||"").replaceAll(Qm,`
`);if(!r)return;const o=window.getSelection();if(!o.rangeCount)return;this.editorDiv.normalize(),o.deleteFromDocument();const l=o.getRangeAt(0);if(!r.includes(`
`)){l.insertNode(document.createTextNode(r)),this.editorDiv.normalize(),o.collapseToStart();return}const{startContainer:c,startOffset:u}=l,h=[],d=[];if(c.nodeType===Node.TEXT_NODE){const v=c.parentElement;if(d.push(c.nodeValue.slice(u).replaceAll(Qm,"")),v!==this.editorDiv){let b=h;for(const S of this.editorDiv.childNodes){if(S===v){b=d;continue}b.push(A(w=Te,dh,Iy).call(w,S))}}h.push(c.nodeValue.slice(0,u).replaceAll(Qm,""))}else if(c===this.editorDiv){let v=h,b=0;for(const S of this.editorDiv.childNodes)b++===u&&(v=d),v.push(A(x=Te,dh,Iy).call(x,S))}g(this,jn,`${h.join(`
`)}${r}${d.join(`
`)}`),A(this,fh,Fy).call(this);const f=new Range;let m=Math.sumPrecise(h.map(v=>v.length));for(const{firstChild:v}of this.editorDiv.childNodes)if(v.nodeType===Node.TEXT_NODE){const b=v.nodeValue.length;if(m<=b){f.setStart(v,m),f.setEnd(v,m);break}m-=b}o.removeAllRanges(),o.addRange(f)}get contentDiv(){return this.editorDiv}getPDFRect(){const t=Te._internalPadding*this.parentScale;return this.getRect(t,t)}static async deserialize(t,s,i){var l;let r=null;if(t instanceof IR){const{data:{defaultAppearanceData:{fontSize:c,fontColor:u},rect:h,rotation:d,id:f,popupRef:m,richText:y,contentsObj:w,creationDate:x,modificationDate:v},textContent:b,textPosition:S,parent:{page:{pageNumber:E}}}=t;if(!b||b.length===0)return null;r=t={annotationType:Z.FREETEXT,color:Array.from(u),fontSize:c,value:b.join(`
`),position:S,pageIndex:E-1,rect:h.slice(0),rotation:d,annotationElementId:f,id:f,deleted:!1,popupRef:m,comment:(w==null?void 0:w.str)||null,richText:y,creationDate:x,modificationDate:v}}const o=await super.deserialize(t,s,i);return g(o,Un,t.fontSize),o.color=V.makeHexColor(...t.color),g(o,jn,A(l=Te,Tg,Xx).call(l,t.value)),o._initialData=r,t.comment&&o.setCommentData(t),o}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const s=Re._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.color),i=Object.assign(super.serialize(t),{color:s,fontSize:a(this,Un),value:A(this,Uv,$R).call(this)});return this.addComment(i),t?(i.isCopy=!0,i):this.annotationElementId&&!A(this,zv,HR).call(this,i)?null:(i.id=this.annotationElementId,i)}renderAnnotationElement(t){const s=super.renderAnnotationElement(t);if(!s)return null;const{style:i}=s;i.fontSize=`calc(${a(this,Un)}px * var(--total-scale-factor))`,i.color=this.color,s.replaceChildren();for(const r of a(this,jn).split(`
`)){const o=document.createElement("div");o.append(r?document.createTextNode(r):document.createElement("br")),s.append(o)}return t.updateEdited({rect:this.getPDFRect(),popup:this._uiManager.hasCommentManager()||this.hasEditedComment?this.comment:{text:a(this,jn)}}),s}resetAnnotationElement(t){super.resetAnnotationElement(t),t.resetEdited()}};jn=new WeakMap,Cg=new WeakMap,Al=new WeakMap,Un=new WeakMap,Ov=new WeakSet,jR=function(t){const s=r=>{this.editorDiv.style.fontSize=`calc(${r}px * var(--total-scale-factor))`,this.translate(0,-(r-a(this,Un))*this.parentScale),g(this,Un,r),A(this,hh,Dy).call(this)},i=a(this,Un);this.addCommands({cmd:s.bind(this,t),undo:s.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ae.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},Bv=new WeakSet,UR=function(t){const s=r=>{this.color=r,this.onUpdatedColor()},i=this.color;this.addCommands({cmd:s.bind(this,t),undo:s.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ae.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},jv=new WeakSet,zR=function(){var i;const t=[];this.editorDiv.normalize();let s=null;for(const r of this.editorDiv.childNodes)(s==null?void 0:s.nodeType)===Node.TEXT_NODE&&r.nodeName==="BR"||(t.push(A(i=Te,dh,Iy).call(i,r)),s=r);return t.join(`
`)},hh=new WeakSet,Dy=function(){const[t,s]=this.parentDimensions;let i;if(this.isAttachedToDOM)i=this.div.getBoundingClientRect();else{const{currentLayer:r,div:o}=this,l=o.style.display,c=o.classList.contains("hidden");o.classList.remove("hidden"),o.style.display="hidden",r.div.append(this.div),i=o.getBoundingClientRect(),o.remove(),o.style.display=l,o.classList.toggle("hidden",c)}this.rotation%180===this.parentRotation%180?(this.width=i.width/t,this.height=i.height/s):(this.width=i.height/t,this.height=i.width/s),this.fixAndSetPosition()},dh=new WeakSet,Iy=function(t){return(t.nodeType===Node.TEXT_NODE?t.nodeValue:t.innerText).replaceAll(Qm,"")},fh=new WeakSet,Fy=function(){if(this.editorDiv.replaceChildren(),!!a(this,jn))for(const t of a(this,jn).split(`
`)){const s=document.createElement("div");s.append(t?document.createTextNode(t):document.createElement("br")),this.editorDiv.append(s)}},Uv=new WeakSet,$R=function(){return a(this,jn).replaceAll(""," ")},Tg=new WeakSet,Xx=function(t){return t.replaceAll(" ","")},zv=new WeakSet,HR=function(t){const{value:s,fontSize:i,color:r,pageIndex:o}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||t.value!==s||t.fontSize!==i||t.color.some((l,c)=>l!==r[c])||t.pageIndex!==o},p(Te,dh),p(Te,Tg),O(Te,"_freeTextDefaultContent",""),O(Te,"_internalPadding",0),O(Te,"_defaultColor",null),O(Te,"_defaultFontSize",10),O(Te,"_type","freetext"),O(Te,"_editorType",Z.FREETEXT);let qx=Te;class W{toSVGPath(){_e("Abstract method `toSVGPath` must be implemented.")}get box(){_e("Abstract getter `box` must be implemented.")}serialize(e,t){_e("Abstract method `serialize` must be implemented.")}static _rescale(e,t,s,i,r,o){o||(o=new Float32Array(e.length));for(let l=0,c=e.length;l<c;l+=2)o[l]=t+e[l]*i,o[l+1]=s+e[l+1]*r;return o}static _rescaleAndSwap(e,t,s,i,r,o){o||(o=new Float32Array(e.length));for(let l=0,c=e.length;l<c;l+=2)o[l]=t+e[l+1]*i,o[l+1]=s+e[l]*r;return o}static _translate(e,t,s,i){i||(i=new Float32Array(e.length));for(let r=0,o=e.length;r<o;r+=2)i[r]=t+e[r],i[r+1]=s+e[r+1];return i}static svgRound(e){return Math.round(e*1e4)}static _normalizePoint(e,t,s,i,r){switch(r){case 90:return[1-t/s,e/i];case 180:return[1-e/s,1-t/i];case 270:return[t/s,1-e/i];default:return[e/s,t/i]}}static _normalizePagePoint(e,t,s){switch(s){case 90:return[1-t,e];case 180:return[1-e,1-t];case 270:return[t,1-e];default:return[e,t]}}static createBezierPoints(e,t,s,i,r,o){return[(e+5*s)/6,(t+5*i)/6,(5*s+r)/6,(5*i+o)/6,(s+r)/2,(i+o)/2]}}O(W,"PRECISION",1e-4);var zn,Bs,ph,gh,xi,re,El,_l,kg,Pg,mh,yh,To,Rg,$v,Hv,Cl,Hd,Vv,VR,Wv,WR,Gv,GR,qv,qR,Xv,XR,Yv,YR;const ji=class ji{constructor({x:e,y:t},s,i,r,o,l=0){p(this,Cl);p(this,Vv);p(this,Wv);p(this,Gv);p(this,qv);p(this,Xv);p(this,Yv);p(this,zn,void 0);p(this,Bs,[]);p(this,ph,void 0);p(this,gh,void 0);p(this,xi,[]);p(this,re,new Float32Array(18));p(this,El,void 0);p(this,_l,void 0);p(this,kg,void 0);p(this,Pg,void 0);p(this,mh,void 0);p(this,yh,void 0);p(this,To,[]);g(this,zn,s),g(this,yh,r*i),g(this,gh,o),a(this,re).set([NaN,NaN,NaN,NaN,e,t],6),g(this,ph,l),g(this,Pg,a(ji,Rg)*i),g(this,kg,a(ji,Hv)*i),g(this,mh,i),a(this,To).push(e,t)}isEmpty(){return isNaN(a(this,re)[8])}add({x:e,y:t}){var N;g(this,El,e),g(this,_l,t);const[s,i,r,o]=a(this,zn);let[l,c,u,h]=a(this,re).subarray(8,12);const d=e-u,f=t-h,m=Math.hypot(d,f);if(m<a(this,kg))return!1;const y=m-a(this,Pg),w=y/m,x=w*d,v=w*f;let b=l,S=c;l=u,c=h,u+=x,h+=v,(N=a(this,To))==null||N.push(e,t);const E=-v/y,C=x/y,T=E*a(this,yh),k=C*a(this,yh);return a(this,re).set(a(this,re).subarray(2,8),0),a(this,re).set([u+T,h+k],4),a(this,re).set(a(this,re).subarray(14,18),12),a(this,re).set([u-T,h-k],16),isNaN(a(this,re)[6])?(a(this,xi).length===0&&(a(this,re).set([l+T,c+k],2),a(this,xi).push(NaN,NaN,NaN,NaN,(l+T-s)/r,(c+k-i)/o),a(this,re).set([l-T,c-k],14),a(this,Bs).push(NaN,NaN,NaN,NaN,(l-T-s)/r,(c-k-i)/o)),a(this,re).set([b,S,l,c,u,h],6),!this.isEmpty()):(a(this,re).set([b,S,l,c,u,h],6),Math.abs(Math.atan2(S-c,b-l)-Math.atan2(v,x))<Math.PI/2?([l,c,u,h]=a(this,re).subarray(2,6),a(this,xi).push(NaN,NaN,NaN,NaN,((l+u)/2-s)/r,((c+h)/2-i)/o),[l,c,b,S]=a(this,re).subarray(14,18),a(this,Bs).push(NaN,NaN,NaN,NaN,((b+l)/2-s)/r,((S+c)/2-i)/o),!0):([b,S,l,c,u,h]=a(this,re).subarray(0,6),a(this,xi).push(((b+5*l)/6-s)/r,((S+5*c)/6-i)/o,((5*l+u)/6-s)/r,((5*c+h)/6-i)/o,((l+u)/2-s)/r,((c+h)/2-i)/o),[u,h,l,c,b,S]=a(this,re).subarray(12,18),a(this,Bs).push(((b+5*l)/6-s)/r,((S+5*c)/6-i)/o,((5*l+u)/6-s)/r,((5*c+h)/6-i)/o,((l+u)/2-s)/r,((c+h)/2-i)/o),!0))}toSVGPath(){if(this.isEmpty())return"";const e=a(this,xi),t=a(this,Bs);if(isNaN(a(this,re)[6])&&!this.isEmpty())return A(this,Vv,VR).call(this);const s=[];s.push(`M${e[4]} ${e[5]}`);for(let i=6;i<e.length;i+=6)isNaN(e[i])?s.push(`L${e[i+4]} ${e[i+5]}`):s.push(`C${e[i]} ${e[i+1]} ${e[i+2]} ${e[i+3]} ${e[i+4]} ${e[i+5]}`);A(this,Gv,GR).call(this,s);for(let i=t.length-6;i>=6;i-=6)isNaN(t[i])?s.push(`L${t[i+4]} ${t[i+5]}`):s.push(`C${t[i]} ${t[i+1]} ${t[i+2]} ${t[i+3]} ${t[i+4]} ${t[i+5]}`);return A(this,Wv,WR).call(this,s),s.join(" ")}newFreeDrawOutline(e,t,s,i,r,o){return new KR(e,t,s,i,r,o)}getOutlines(){var d;const e=a(this,xi),t=a(this,Bs),s=a(this,re),[i,r,o,l]=a(this,zn),c=new Float32Array((((d=a(this,To))==null?void 0:d.length)??0)+2);for(let f=0,m=c.length-2;f<m;f+=2)c[f]=(a(this,To)[f]-i)/o,c[f+1]=(a(this,To)[f+1]-r)/l;if(c[c.length-2]=(a(this,El)-i)/o,c[c.length-1]=(a(this,_l)-r)/l,isNaN(s[6])&&!this.isEmpty())return A(this,qv,qR).call(this,c);const u=new Float32Array(a(this,xi).length+24+a(this,Bs).length);let h=e.length;for(let f=0;f<h;f+=2){if(isNaN(e[f])){u[f]=u[f+1]=NaN;continue}u[f]=e[f],u[f+1]=e[f+1]}h=A(this,Yv,YR).call(this,u,h);for(let f=t.length-6;f>=6;f-=6)for(let m=0;m<6;m+=2){if(isNaN(t[f+m])){u[h]=u[h+1]=NaN,h+=2;continue}u[h]=t[f+m],u[h+1]=t[f+m+1],h+=2}return A(this,Xv,XR).call(this,u,h),this.newFreeDrawOutline(u,c,a(this,zn),a(this,mh),a(this,ph),a(this,gh))}};zn=new WeakMap,Bs=new WeakMap,ph=new WeakMap,gh=new WeakMap,xi=new WeakMap,re=new WeakMap,El=new WeakMap,_l=new WeakMap,kg=new WeakMap,Pg=new WeakMap,mh=new WeakMap,yh=new WeakMap,To=new WeakMap,Rg=new WeakMap,$v=new WeakMap,Hv=new WeakMap,Cl=new WeakSet,Hd=function(){const e=a(this,re).subarray(4,6),t=a(this,re).subarray(16,18),[s,i,r,o]=a(this,zn);return[(a(this,El)+(e[0]-t[0])/2-s)/r,(a(this,_l)+(e[1]-t[1])/2-i)/o,(a(this,El)+(t[0]-e[0])/2-s)/r,(a(this,_l)+(t[1]-e[1])/2-i)/o]},Vv=new WeakSet,VR=function(){const[e,t,s,i]=a(this,zn),[r,o,l,c]=A(this,Cl,Hd).call(this);return`M${(a(this,re)[2]-e)/s} ${(a(this,re)[3]-t)/i} L${(a(this,re)[4]-e)/s} ${(a(this,re)[5]-t)/i} L${r} ${o} L${l} ${c} L${(a(this,re)[16]-e)/s} ${(a(this,re)[17]-t)/i} L${(a(this,re)[14]-e)/s} ${(a(this,re)[15]-t)/i} Z`},Wv=new WeakSet,WR=function(e){const t=a(this,Bs);e.push(`L${t[4]} ${t[5]} Z`)},Gv=new WeakSet,GR=function(e){const[t,s,i,r]=a(this,zn),o=a(this,re).subarray(4,6),l=a(this,re).subarray(16,18),[c,u,h,d]=A(this,Cl,Hd).call(this);e.push(`L${(o[0]-t)/i} ${(o[1]-s)/r} L${c} ${u} L${h} ${d} L${(l[0]-t)/i} ${(l[1]-s)/r}`)},qv=new WeakSet,qR=function(e){const t=a(this,re),[s,i,r,o]=a(this,zn),[l,c,u,h]=A(this,Cl,Hd).call(this),d=new Float32Array(36);return d.set([NaN,NaN,NaN,NaN,(t[2]-s)/r,(t[3]-i)/o,NaN,NaN,NaN,NaN,(t[4]-s)/r,(t[5]-i)/o,NaN,NaN,NaN,NaN,l,c,NaN,NaN,NaN,NaN,u,h,NaN,NaN,NaN,NaN,(t[16]-s)/r,(t[17]-i)/o,NaN,NaN,NaN,NaN,(t[14]-s)/r,(t[15]-i)/o],0),this.newFreeDrawOutline(d,e,a(this,zn),a(this,mh),a(this,ph),a(this,gh))},Xv=new WeakSet,XR=function(e,t){const s=a(this,Bs);return e.set([NaN,NaN,NaN,NaN,s[4],s[5]],t),t+=6},Yv=new WeakSet,YR=function(e,t){const s=a(this,re).subarray(4,6),i=a(this,re).subarray(16,18),[r,o,l,c]=a(this,zn),[u,h,d,f]=A(this,Cl,Hd).call(this);return e.set([NaN,NaN,NaN,NaN,(s[0]-r)/l,(s[1]-o)/c,NaN,NaN,NaN,NaN,u,h,NaN,NaN,NaN,NaN,d,f,NaN,NaN,NaN,NaN,(i[0]-r)/l,(i[1]-o)/c],t),t+=24},p(ji,Rg,8),p(ji,$v,2),p(ji,Hv,a(ji,Rg)+a(ji,$v));let P0=ji;var vh,Tl,mr,Lg,$n,Ng,nt,Kv,QR;class KR extends W{constructor(t,s,i,r,o,l){super();p(this,Kv);p(this,vh,void 0);p(this,Tl,new Float32Array(4));p(this,mr,void 0);p(this,Lg,void 0);p(this,$n,void 0);p(this,Ng,void 0);p(this,nt,void 0);g(this,nt,t),g(this,$n,s),g(this,vh,i),g(this,Ng,r),g(this,mr,o),g(this,Lg,l),this.firstPoint=[NaN,NaN],this.lastPoint=[NaN,NaN],A(this,Kv,QR).call(this,l);const[c,u,h,d]=a(this,Tl);for(let f=0,m=t.length;f<m;f+=2)t[f]=(t[f]-c)/h,t[f+1]=(t[f+1]-u)/d;for(let f=0,m=s.length;f<m;f+=2)s[f]=(s[f]-c)/h,s[f+1]=(s[f+1]-u)/d}toSVGPath(){const t=[`M${a(this,nt)[4]} ${a(this,nt)[5]}`];for(let s=6,i=a(this,nt).length;s<i;s+=6){if(isNaN(a(this,nt)[s])){t.push(`L${a(this,nt)[s+4]} ${a(this,nt)[s+5]}`);continue}t.push(`C${a(this,nt)[s]} ${a(this,nt)[s+1]} ${a(this,nt)[s+2]} ${a(this,nt)[s+3]} ${a(this,nt)[s+4]} ${a(this,nt)[s+5]}`)}return t.push("Z"),t.join(" ")}serialize([t,s,i,r],o){const l=i-t,c=r-s;let u,h;switch(o){case 0:u=W._rescale(a(this,nt),t,r,l,-c),h=W._rescale(a(this,$n),t,r,l,-c);break;case 90:u=W._rescaleAndSwap(a(this,nt),t,s,l,c),h=W._rescaleAndSwap(a(this,$n),t,s,l,c);break;case 180:u=W._rescale(a(this,nt),i,s,-l,c),h=W._rescale(a(this,$n),i,s,-l,c);break;case 270:u=W._rescaleAndSwap(a(this,nt),i,r,-l,-c),h=W._rescaleAndSwap(a(this,$n),i,r,-l,-c);break}return{outline:Array.from(u),points:[Array.from(h)]}}get box(){return a(this,Tl)}newOutliner(t,s,i,r,o,l=0){return new P0(t,s,i,r,o,l)}getNewOutline(t,s){const[i,r,o,l]=a(this,Tl),[c,u,h,d]=a(this,vh),f=o*h,m=l*d,y=i*h+c,w=r*d+u,x=this.newOutliner({x:a(this,$n)[0]*f+y,y:a(this,$n)[1]*m+w},a(this,vh),a(this,Ng),t,a(this,Lg),s??a(this,mr));for(let v=2;v<a(this,$n).length;v+=2)x.add({x:a(this,$n)[v]*f+y,y:a(this,$n)[v+1]*m+w});return x.getOutlines()}}vh=new WeakMap,Tl=new WeakMap,mr=new WeakMap,Lg=new WeakMap,$n=new WeakMap,Ng=new WeakMap,nt=new WeakMap,Kv=new WeakSet,QR=function(t){const s=a(this,nt);let i=s[4],r=s[5];const o=[i,r,i,r];let l=i,c=r,u=i,h=r;const d=t?Math.max:Math.min,f=new Float32Array(4);for(let y=6,w=s.length;y<w;y+=6){const x=s[y+4],v=s[y+5];isNaN(s[y])?(V.pointBoundingBox(x,v,o),c>v?(l=x,c=v):c===v&&(l=d(l,x)),h<v?(u=x,h=v):h===v&&(u=d(u,x))):(f[0]=f[1]=1/0,f[2]=f[3]=-1/0,V.bezierBoundingBox(i,r,...s.slice(y,y+6),f),V.rectBoundingBox(f[0],f[1],f[2],f[3],o),c>f[1]?(l=f[0],c=f[1]):c===f[1]&&(l=d(l,f[0])),h<f[3]?(u=f[2],h=f[3]):h===f[3]&&(u=d(u,f[2]))),i=x,r=v}const m=a(this,Tl);m[0]=o[0]-a(this,mr),m[1]=o[1]-a(this,mr),m[2]=o[2]-o[0]+2*a(this,mr),m[3]=o[3]-o[1]+2*a(this,mr),this.firstPoint=[l,c],this.lastPoint=[u,h]};var Mg,Dg,Ig,ko,js,Qv,JR,wh,Oy,Jv,ZR,Zv,e2,Fg,Kx;class Yx{constructor(e,t=0,s=0,i=!0){p(this,Qv);p(this,wh);p(this,Jv);p(this,Zv);p(this,Fg);p(this,Mg,void 0);p(this,Dg,void 0);p(this,Ig,void 0);p(this,ko,[]);p(this,js,[]);const r=[1/0,1/0,-1/0,-1/0],l=10**-4;for(const{x,y:v,width:b,height:S}of e){const E=Math.floor((x-t)/l)*l,C=Math.ceil((x+b+t)/l)*l,T=Math.floor((v-t)/l)*l,k=Math.ceil((v+S+t)/l)*l,P=[E,T,k,!0],N=[C,T,k,!1];a(this,ko).push(P,N),V.rectBoundingBox(E,T,C,k,r)}const c=r[2]-r[0]+2*s,u=r[3]-r[1]+2*s,h=r[0]-s,d=r[1]-s;let f=i?-1/0:1/0,m=1/0;const y=a(this,ko).at(i?-1:-2),w=[y[0],y[2]];for(const x of a(this,ko)){const[v,b,S,E]=x;!E&&i?b<m?(m=b,f=v):b===m&&(f=Math.max(f,v)):E&&!i&&(b<m?(m=b,f=v):b===m&&(f=Math.min(f,v))),x[0]=(v-h)/c,x[1]=(b-d)/u,x[2]=(S-d)/u}g(this,Mg,new Float32Array([h,d,c,u])),g(this,Dg,[f,m]),g(this,Ig,w)}getOutlines(){a(this,ko).sort((t,s)=>t[0]-s[0]||t[1]-s[1]||t[2]-s[2]);const e=[];for(const t of a(this,ko))t[3]?(e.push(...A(this,Fg,Kx).call(this,t)),A(this,Jv,ZR).call(this,t)):(A(this,Zv,e2).call(this,t),e.push(...A(this,Fg,Kx).call(this,t)));return A(this,Qv,JR).call(this,e)}}Mg=new WeakMap,Dg=new WeakMap,Ig=new WeakMap,ko=new WeakMap,js=new WeakMap,Qv=new WeakSet,JR=function(e){const t=[],s=new Set;for(const o of e){const[l,c,u]=o;t.push([l,c,o],[l,u,o])}t.sort((o,l)=>o[1]-l[1]||o[0]-l[0]);for(let o=0,l=t.length;o<l;o+=2){const c=t[o][2],u=t[o+1][2];c.push(u),u.push(c),s.add(c),s.add(u)}const i=[];let r;for(;s.size>0;){const o=s.values().next().value;let[l,c,u,h,d]=o;s.delete(o);let f=l,m=c;for(r=[l,u],i.push(r);;){let y;if(s.has(h))y=h;else if(s.has(d))y=d;else break;s.delete(y),[l,c,u,h,d]=y,f!==l&&(r.push(f,m,l,m===c?c:u),f=l),m=m===c?u:c}r.push(f,m)}return new gB(i,a(this,Mg),a(this,Dg),a(this,Ig))},wh=new WeakSet,Oy=function(e){const t=a(this,js);let s=0,i=t.length-1;for(;s<=i;){const r=s+i>>1,o=t[r][0];if(o===e)return r;o<e?s=r+1:i=r-1}return i+1},Jv=new WeakSet,ZR=function([,e,t]){const s=A(this,wh,Oy).call(this,e);a(this,js).splice(s,0,[e,t])},Zv=new WeakSet,e2=function([,e,t]){const s=A(this,wh,Oy).call(this,e);for(let i=s;i<a(this,js).length;i++){const[r,o]=a(this,js)[i];if(r!==e)break;if(r===e&&o===t){a(this,js).splice(i,1);return}}for(let i=s-1;i>=0;i--){const[r,o]=a(this,js)[i];if(r!==e)break;if(r===e&&o===t){a(this,js).splice(i,1);return}}},Fg=new WeakSet,Kx=function(e){const[t,s,i]=e,r=[[t,s,i]],o=A(this,wh,Oy).call(this,i);for(let l=0;l<o;l++){const[c,u]=a(this,js)[l];for(let h=0,d=r.length;h<d;h++){const[,f,m]=r[h];if(!(u<=f||m<=c)){if(f>=c){if(m>u)r[h][1]=u;else{if(d===1)return[];r.splice(h,1),h--,d--}continue}r[h][2]=c,m>u&&r.push([t,u,m])}}}return r};var Og,bh;class gB extends W{constructor(t,s,i,r){super();p(this,Og,void 0);p(this,bh,void 0);g(this,bh,t),g(this,Og,s),this.firstPoint=i,this.lastPoint=r}toSVGPath(){const t=[];for(const s of a(this,bh)){let[i,r]=s;t.push(`M${i} ${r}`);for(let o=2;o<s.length;o+=2){const l=s[o],c=s[o+1];l===i?(t.push(`V${c}`),r=c):c===r&&(t.push(`H${l}`),i=l)}t.push("Z")}return t.join(" ")}serialize([t,s,i,r],o){const l=[],c=i-t,u=r-s;for(const h of a(this,bh)){const d=new Array(h.length);for(let f=0;f<h.length;f+=2)d[f]=t+h[f]*c,d[f+1]=r-h[f+1]*u;l.push(d)}return l}get box(){return a(this,Og)}get classNamesForOutlining(){return["highlightOutline"]}}Og=new WeakMap,bh=new WeakMap;class Qx extends P0{newFreeDrawOutline(e,t,s,i,r,o){return new mB(e,t,s,i,r,o)}}class mB extends KR{newOutliner(e,t,s,i,r,o=0){return new Qx(e,t,s,i,r,o)}}var xh,Bg,yr,kl,jg,wn,Ug,zg,Pl,Hn,Vn,Mt,Sh,Ah,qt,Eh,ms,$g,Hg,Jx,_h,By,ew,t2,tw,n2,nw,s2,Vg,Zx,vr,da,Po,wc,sw,i2,Ch,jy,Th,Uy,iw,r2,rw,o2,ow,a2,aw,l2,lw,c2;const he=class he extends Re{constructor(t){super({...t,name:"highlightEditor"});p(this,Hg);p(this,_h);p(this,ew);p(this,tw);p(this,nw);p(this,Vg);p(this,vr);p(this,sw);p(this,Ch);p(this,Th);p(this,iw);p(this,rw);p(this,lw);p(this,xh,null);p(this,Bg,0);p(this,yr,void 0);p(this,kl,null);p(this,jg,null);p(this,wn,null);p(this,Ug,null);p(this,zg,0);p(this,Pl,null);p(this,Hn,null);p(this,Vn,null);p(this,Mt,!1);p(this,Sh,null);p(this,Ah,null);p(this,qt,null);p(this,Eh,"");p(this,ms,void 0);p(this,$g,"");this.color=t.color||he._defaultColor,g(this,ms,t.thickness||he._defaultThickness),this.opacity=t.opacity||he._defaultOpacity,g(this,yr,t.boxes||null),g(this,$g,t.methodOfCreation||""),g(this,Eh,t.text||""),this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",t.highlightId>-1?(g(this,Mt,!0),A(this,_h,By).call(this,t),A(this,vr,da).call(this)):a(this,yr)&&(g(this,xh,t.anchorNode),g(this,Bg,t.anchorOffset),g(this,Ug,t.focusNode),g(this,zg,t.focusOffset),A(this,Hg,Jx).call(this),A(this,vr,da).call(this),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}static get _keyboardManager(){const t=he.prototype;return ie(this,"_keyboardManager",new bm([[["ArrowLeft","mac+ArrowLeft"],t._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],t._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],t._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],t._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:a(this,Mt)?"free_highlight":"highlight",color:this._uiManager.getNonHCMColorName(this.color),thickness:a(this,ms),methodOfCreation:a(this,$g)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.getNonHCMColorName(this.color)}}static computeTelemetryFinalData(t){return{numberOfColors:t.get("color").size}}static initialize(t,s){var i;Re.initialize(t,s),he._defaultColor||(he._defaultColor=((i=s.highlightColors)==null?void 0:i.values().next().value)||"#fff066")}static updateDefaultParams(t,s){switch(t){case ae.HIGHLIGHT_COLOR:he._defaultColor=s;break;case ae.HIGHLIGHT_THICKNESS:he._defaultThickness=s;break}}translateInPage(t,s){}get toolbarPosition(){return a(this,Ah)}get commentButtonPosition(){return a(this,Sh)}updateParams(t,s){switch(t){case ae.HIGHLIGHT_COLOR:A(this,ew,t2).call(this,s);break;case ae.HIGHLIGHT_THICKNESS:A(this,tw,n2).call(this,s);break}}static get defaultPropertiesToUpdate(){return[[ae.HIGHLIGHT_COLOR,he._defaultColor],[ae.HIGHLIGHT_THICKNESS,he._defaultThickness]]}get propertiesToUpdate(){return[[ae.HIGHLIGHT_COLOR,this.color||he._defaultColor],[ae.HIGHLIGHT_THICKNESS,a(this,ms)||he._defaultThickness],[ae.HIGHLIGHT_FREE,a(this,Mt)]]}onUpdatedColor(){var t,s;(t=this.parent)==null||t.drawLayer.updateProperties(a(this,Vn),{root:{fill:this.color,"fill-opacity":this.opacity}}),(s=a(this,jg))==null||s.updateColor(this.color),super.onUpdatedColor()}get toolbarButtons(){return this._uiManager.highlightColors?[["colorPicker",g(this,jg,new Rf({editor:this}))]]:super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(A(this,Th,Uy).call(this))}getBaseTranslation(){return[0,0]}getRect(t,s){return super.getRect(t,s,A(this,Th,Uy).call(this))}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),t&&this.div.focus()}remove(){A(this,Vg,Zx).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(A(this,vr,da).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){var i;let s=!1;this.parent&&!t?A(this,Vg,Zx).call(this):t&&(A(this,vr,da).call(this,t),s=!this.parent&&((i=this.div)==null?void 0:i.classList.contains("selectedEditor"))),super.setParent(t),this.show(this._isVisible),s&&this.select()}rotate(t){var r,o,l;const{drawLayer:s}=this.parent;let i;a(this,Mt)?(t=(t-this.rotation+360)%360,i=A(r=he,Po,wc).call(r,a(this,Hn).box,t)):i=A(o=he,Po,wc).call(o,[this.x,this.y,this.width,this.height],t),s.updateProperties(a(this,Vn),{bbox:i,root:{"data-main-rotation":t}}),s.updateProperties(a(this,qt),{bbox:A(l=he,Po,wc).call(l,a(this,wn).box,t),root:{"data-main-rotation":t}})}render(){if(this.div)return this.div;const t=super.render();a(this,Eh)&&(t.setAttribute("aria-label",a(this,Eh)),t.setAttribute("role","mark")),a(this,Mt)?t.classList.add("free"):this.div.addEventListener("keydown",A(this,sw,i2).bind(this),{signal:this._uiManager._signal});const s=g(this,Pl,document.createElement("div"));return t.append(s),s.setAttribute("aria-hidden","true"),s.className="internal",s.style.clipPath=a(this,kl),this.setDims(this.width,this.height),PP(this,a(this,Pl),["pointerover","pointerleave"]),this.enableEditing(),t}pointerover(){var t;this.isSelected||(t=this.parent)==null||t.drawLayer.updateProperties(a(this,qt),{rootClass:{hovered:!0}})}pointerleave(){var t;this.isSelected||(t=this.parent)==null||t.drawLayer.updateProperties(a(this,qt),{rootClass:{hovered:!1}})}_moveCaret(t){switch(this.parent.unselect(this),t){case 0:case 2:A(this,Ch,jy).call(this,!0);break;case 1:case 3:A(this,Ch,jy).call(this,!1);break}}select(){var t;super.select(),a(this,qt)&&((t=this.parent)==null||t.drawLayer.updateProperties(a(this,qt),{rootClass:{hovered:!1,selected:!0}}))}unselect(){var t;super.unselect(),a(this,qt)&&((t=this.parent)==null||t.drawLayer.updateProperties(a(this,qt),{rootClass:{selected:!1}}),a(this,Mt)||A(this,Ch,jy).call(this,!1))}get _mustFixPosition(){return!a(this,Mt)}show(t=this._isVisible){super.show(t),this.parent&&(this.parent.drawLayer.updateProperties(a(this,Vn),{rootClass:{hidden:!t}}),this.parent.drawLayer.updateProperties(a(this,qt),{rootClass:{hidden:!t}}))}static startHighlighting(t,s,{target:i,x:r,y:o}){const{x:l,y:c,width:u,height:h}=i.getBoundingClientRect(),d=new AbortController,f=t.combinedSignal(d),m=y=>{d.abort(),A(this,aw,l2).call(this,t,y)};window.addEventListener("blur",m,{signal:f}),window.addEventListener("pointerup",m,{signal:f}),window.addEventListener("pointerdown",We,{capture:!0,passive:!1,signal:f}),window.addEventListener("contextmenu",ts,{signal:f}),i.addEventListener("pointermove",A(this,ow,a2).bind(this,t),{signal:f}),this._freeHighlight=new Qx({x:r,y:o},[l,c,u,h],t.scale,this._defaultThickness/2,s,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static async deserialize(t,s,i){var w,x,v,b;let r=null;if(t instanceof OR){const{data:{quadPoints:S,rect:E,rotation:C,id:T,color:k,opacity:P,popupRef:N,richText:M,contentsObj:I,creationDate:j,modificationDate:H},parent:{page:{pageNumber:z}}}=t;r=t={annotationType:Z.HIGHLIGHT,color:Array.from(k),opacity:P,quadPoints:S,boxes:null,pageIndex:z-1,rect:E.slice(0),rotation:C,annotationElementId:T,id:T,deleted:!1,popupRef:N,richText:M,comment:(I==null?void 0:I.str)||null,creationDate:j,modificationDate:H}}else if(t instanceof UA){const{data:{inkLists:S,rect:E,rotation:C,id:T,color:k,borderStyle:{rawWidth:P},popupRef:N,richText:M,contentsObj:I,creationDate:j,modificationDate:H},parent:{page:{pageNumber:z}}}=t;r=t={annotationType:Z.HIGHLIGHT,color:Array.from(k),thickness:P,inkLists:S,boxes:null,pageIndex:z-1,rect:E.slice(0),rotation:C,annotationElementId:T,id:T,deleted:!1,popupRef:N,richText:M,comment:(I==null?void 0:I.str)||null,creationDate:j,modificationDate:H}}const{color:o,quadPoints:l,inkLists:c,opacity:u}=t,h=await super.deserialize(t,s,i);h.color=V.makeHexColor(...o),h.opacity=u||1,c&&g(h,ms,t.thickness),h._initialData=r,t.comment&&h.setCommentData(t);const[d,f]=h.pageDimensions,[m,y]=h.pageTranslation;if(l){const S=g(h,yr,[]);for(let E=0;E<l.length;E+=8)S.push({x:(l[E]-m)/d,y:1-(l[E+1]-y)/f,width:(l[E+2]-l[E])/d,height:(l[E+1]-l[E+5])/f});A(w=h,Hg,Jx).call(w),A(x=h,vr,da).call(x),h.rotate(h.rotation)}else if(c){g(h,Mt,!0);const S=c[0],E={x:S[0]-m,y:f-(S[1]-y)},C=new Qx(E,[0,0,d,f],1,a(h,ms)/2,!0,.001);for(let P=0,N=S.length;P<N;P+=2)E.x=S[P]-m,E.y=f-(S[P+1]-y),C.add(E);const{id:T,clipPathId:k}=s.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:h.color,"fill-opacity":h._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:C.toSVGPath()}},!0,!0);A(v=h,_h,By).call(v,{highlightOutlines:C.getOutlines(),highlightId:T,clipPathId:k}),A(b=h,vr,da).call(b),h.rotate(h.parentRotation)}return h}serialize(t=!1){if(this.isEmpty()||t)return null;if(this.deleted)return this.serializeDeleted();const s=Re._colorManager.convert(this._uiManager.getNonHCMColor(this.color)),i=super.serialize(t);return Object.assign(i,{color:s,opacity:this.opacity,thickness:a(this,ms),quadPoints:A(this,iw,r2).call(this),outlines:A(this,rw,o2).call(this,i.rect)}),this.addComment(i),this.annotationElementId&&!A(this,lw,c2).call(this,i)?null:(i.id=this.annotationElementId,i)}renderAnnotationElement(t){return this.deleted?(t.hide(),null):(t.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}static canCreateNewEmptyEditor(){return!1}};xh=new WeakMap,Bg=new WeakMap,yr=new WeakMap,kl=new WeakMap,jg=new WeakMap,wn=new WeakMap,Ug=new WeakMap,zg=new WeakMap,Pl=new WeakMap,Hn=new WeakMap,Vn=new WeakMap,Mt=new WeakMap,Sh=new WeakMap,Ah=new WeakMap,qt=new WeakMap,Eh=new WeakMap,ms=new WeakMap,$g=new WeakMap,Hg=new WeakSet,Jx=function(){const t=new Yx(a(this,yr),.001);g(this,Hn,t.getOutlines()),[this.x,this.y,this.width,this.height]=a(this,Hn).box;const s=new Yx(a(this,yr),.0025,.001,this._uiManager.direction==="ltr");g(this,wn,s.getOutlines());const{firstPoint:i}=a(this,Hn);g(this,Sh,[(i[0]-this.x)/this.width,(i[1]-this.y)/this.height]);const{lastPoint:r}=a(this,wn);g(this,Ah,[(r[0]-this.x)/this.width,(r[1]-this.y)/this.height])},_h=new WeakSet,By=function({highlightOutlines:t,highlightId:s,clipPathId:i}){var f,m;g(this,Hn,t);const r=1.5;if(g(this,wn,t.getNewOutline(a(this,ms)/2+r,.0025)),s>=0)g(this,Vn,s),g(this,kl,i),this.parent.drawLayer.finalizeDraw(s,{bbox:t.box,path:{d:t.toSVGPath()}}),g(this,qt,this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:a(this,wn).box,path:{d:a(this,wn).toSVGPath()}},!0));else if(this.parent){const y=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(a(this,Vn),{bbox:A(f=he,Po,wc).call(f,a(this,Hn).box,(y-this.rotation+360)%360),path:{d:t.toSVGPath()}}),this.parent.drawLayer.updateProperties(a(this,qt),{bbox:A(m=he,Po,wc).call(m,a(this,wn).box,y),path:{d:a(this,wn).toSVGPath()}})}const[o,l,c,u]=t.box;switch(this.rotation){case 0:this.x=o,this.y=l,this.width=c,this.height=u;break;case 90:{const[y,w]=this.parentDimensions;this.x=l,this.y=1-o,this.width=c*w/y,this.height=u*y/w;break}case 180:this.x=1-o,this.y=1-l,this.width=c,this.height=u;break;case 270:{const[y,w]=this.parentDimensions;this.x=1-l,this.y=o,this.width=c*w/y,this.height=u*y/w;break}}const{firstPoint:h}=t;g(this,Sh,[(h[0]-o)/c,(h[1]-l)/u]);const{lastPoint:d}=a(this,wn);g(this,Ah,[(d[0]-o)/c,(d[1]-l)/u])},ew=new WeakSet,t2=function(t){const s=(o,l)=>{this.color=o,this.opacity=l,this.onUpdatedColor()},i=this.color,r=this.opacity;this.addCommands({cmd:s.bind(this,t,he._defaultOpacity),undo:s.bind(this,i,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ae.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.getNonHCMColorName(t)},!0)},tw=new WeakSet,n2=function(t){const s=a(this,ms),i=r=>{g(this,ms,r),A(this,nw,s2).call(this,r)};this.addCommands({cmd:i.bind(this,t),undo:i.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ae.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:t},!0)},nw=new WeakSet,s2=function(t){a(this,Mt)&&(A(this,_h,By).call(this,{highlightOutlines:a(this,Hn).getNewOutline(t/2)}),this.fixAndSetPosition(),this.setDims(this.width,this.height))},Vg=new WeakSet,Zx=function(){a(this,Vn)===null||!this.parent||(this.parent.drawLayer.remove(a(this,Vn)),g(this,Vn,null),this.parent.drawLayer.remove(a(this,qt)),g(this,qt,null))},vr=new WeakSet,da=function(t=this.parent){a(this,Vn)===null&&({id:ct(this,Vn)._,clipPathId:ct(this,kl)._}=t.drawLayer.draw({bbox:a(this,Hn).box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":this.opacity},rootClass:{highlight:!0,free:a(this,Mt)},path:{d:a(this,Hn).toSVGPath()}},!1,!0),g(this,qt,t.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:a(this,Mt)},bbox:a(this,wn).box,path:{d:a(this,wn).toSVGPath()}},a(this,Mt))),a(this,Pl)&&(a(this,Pl).style.clipPath=a(this,kl)))},Po=new WeakSet,wc=function([t,s,i,r],o){switch(o){case 90:return[1-s-r,t,r,i];case 180:return[1-t-i,1-s-r,i,r];case 270:return[s,1-t-i,r,i]}return[t,s,i,r]},sw=new WeakSet,i2=function(t){he._keyboardManager.exec(this,t)},Ch=new WeakSet,jy=function(t){if(!a(this,xh))return;const s=window.getSelection();t?s.setPosition(a(this,xh),a(this,Bg)):s.setPosition(a(this,Ug),a(this,zg))},Th=new WeakSet,Uy=function(){return a(this,Mt)?this.rotation:0},iw=new WeakSet,r2=function(){if(a(this,Mt))return null;const[t,s]=this.pageDimensions,[i,r]=this.pageTranslation,o=a(this,yr),l=new Float32Array(o.length*8);let c=0;for(const{x:u,y:h,width:d,height:f}of o){const m=u*t+i,y=(1-h)*s+r;l[c]=l[c+4]=m,l[c+1]=l[c+3]=y,l[c+2]=l[c+6]=m+d*t,l[c+5]=l[c+7]=y-f*s,c+=8}return l},rw=new WeakSet,o2=function(t){return a(this,Hn).serialize(t,A(this,Th,Uy).call(this))},ow=new WeakSet,a2=function(t,s){this._freeHighlight.add(s)&&t.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})},aw=new WeakSet,l2=function(t,s){this._freeHighlight.isEmpty()?t.drawLayer.remove(this._freeHighlightId):t.createAndAddNewEditor(s,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},lw=new WeakSet,c2=function(t){const{color:s}=this._initialData;return this.hasEditedComment||t.color.some((i,r)=>i!==s[r])},p(he,Po),p(he,ow),p(he,aw),O(he,"_defaultColor",null),O(he,"_defaultOpacity",1),O(he,"_defaultThickness",12),O(he,"_type","highlight"),O(he,"_editorType",Z.HIGHLIGHT),O(he,"_freeHighlightId",-1),O(he,"_freeHighlight",null),O(he,"_freeHighlightClipId","");let R0=he;var Rl;class u2{constructor(){p(this,Rl,Object.create(null))}updateProperty(e,t){this[e]=t,this.updateSVGProperty(e,t)}updateProperties(e){if(e)for(const[t,s]of Object.entries(e))t.startsWith("_")||this.updateProperty(t,s)}updateSVGProperty(e,t){a(this,Rl)[e]=t}toSVGProperties(){const e=a(this,Rl);return g(this,Rl,Object.create(null)),{root:e}}reset(){g(this,Rl,Object.create(null))}updateAll(e=this){this.updateProperties(e)}clone(){_e("Not implemented")}}Rl=new WeakMap;var Wn,kh,bt,Ll,Nl,Ro,Lo,No,Ml,Wg,eS,Gg,tS,qg,nS,Dl,Vd,cw,h2,Ph,zy,Il,Wd,Mo,bc;const q=class q extends Re{constructor(t){super(t);p(this,Wg);p(this,Gg);p(this,qg);p(this,Dl);p(this,cw);p(this,Ph);p(this,Il);p(this,Mo);p(this,Wn,null);p(this,kh,void 0);O(this,"_colorPicker",null);O(this,"_drawId",null);g(this,kh,t.mustBeCommitted||!1),this._addOutlines(t)}onUpdatedColor(){var t;(t=this._colorPicker)==null||t.update(this.color),super.onUpdatedColor()}_addOutlines(t){t.drawOutlines&&(A(this,Wg,eS).call(this,t),A(this,Dl,Vd).call(this))}static _mergeSVGProperties(t,s){const i=new Set(Object.keys(t));for(const[r,o]of Object.entries(s))i.has(r)?Object.assign(t[r],o):t[r]=o;return t}static getDefaultDrawingOptions(t){_e("Not implemented")}static get typesMap(){_e("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(t,s){const i=this.typesMap.get(t);i&&this._defaultDrawingOptions.updateProperty(i,s),this._currentParent&&(a(q,bt).updateProperty(i,s),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(t,s){const i=this.constructor.typesMap.get(t);i&&this._updateProperty(t,i,s)}static get defaultPropertiesToUpdate(){const t=[],s=this._defaultDrawingOptions;for(const[i,r]of this.typesMap)t.push([i,s[r]]);return t}get propertiesToUpdate(){const t=[],{_drawingOptions:s}=this;for(const[i,r]of this.constructor.typesMap)t.push([i,s[r]]);return t}_updateProperty(t,s,i){const r=this._drawingOptions,o=r[s],l=c=>{var h;r.updateProperty(s,c);const u=a(this,Wn).updateProperty(s,c);u&&A(this,Il,Wd).call(this,u),(h=this.parent)==null||h.drawLayer.updateProperties(this._drawId,r.toSVGProperties()),t===this.colorType&&this.onUpdatedColor()};this.addCommands({cmd:l.bind(this,i),undo:l.bind(this,o),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:t,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,q._mergeSVGProperties(a(this,Wn).getPathResizingSVGProperties(A(this,Ph,zy).call(this)),{bbox:A(this,Mo,bc).call(this)}))}_onResized(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,q._mergeSVGProperties(a(this,Wn).getPathResizedSVGProperties(A(this,Ph,zy).call(this)),{bbox:A(this,Mo,bc).call(this)}))}_onTranslating(t,s){var i;(i=this.parent)==null||i.drawLayer.updateProperties(this._drawId,{bbox:A(this,Mo,bc).call(this)})}_onTranslated(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,q._mergeSVGProperties(a(this,Wn).getPathTranslatedSVGProperties(A(this,Ph,zy).call(this),this.parentDimensions),{bbox:A(this,Mo,bc).call(this)}))}_onStartDragging(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,a(this,kh)&&(g(this,kh,!1),this.commit(),this.parent.setSelected(this),t&&this.isOnScreen&&this.div.focus())}remove(){A(this,qg,nS).call(this),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(A(this,Dl,Vd).call(this),A(this,Il,Wd).call(this,a(this,Wn).box),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){var i;let s=!1;this.parent&&!t?(this._uiManager.removeShouldRescale(this),A(this,qg,nS).call(this)):t&&(this._uiManager.addShouldRescale(this),A(this,Dl,Vd).call(this,t),s=!this.parent&&((i=this.div)==null?void 0:i.classList.contains("selectedEditor"))),super.setParent(t),s&&this.select()}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,q._mergeSVGProperties({bbox:A(this,Mo,bc).call(this)},a(this,Wn).updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&A(this,Il,Wd).call(this,a(this,Wn).updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let t,s;this._isCopy&&(t=this.x,s=this.y);const i=super.render();i.classList.add("draw");const r=document.createElement("div");return i.append(r),r.setAttribute("aria-hidden","true"),r.className="internal",this.setDims(),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(t,s),i}static createDrawerInstance(t,s,i,r,o){_e("Not implemented")}static startDrawing(t,s,i,r){var x;const{target:o,offsetX:l,offsetY:c,pointerId:u,pointerType:h}=r;if(a(q,Lo)&&a(q,Lo)!==h)return;const{viewport:{rotation:d}}=t,{width:f,height:m}=o.getBoundingClientRect(),y=g(q,Ll,new AbortController),w=t.combinedSignal(y);if(a(q,Ro)||g(q,Ro,u),a(q,Lo)??g(q,Lo,h),window.addEventListener("pointerup",v=>{var b;a(q,Ro)===v.pointerId?this._endDraw(v):(b=a(q,No))==null||b.delete(v.pointerId)},{signal:w}),window.addEventListener("pointercancel",v=>{var b;a(q,Ro)===v.pointerId?this._currentParent.endDrawingSession():(b=a(q,No))==null||b.delete(v.pointerId)},{signal:w}),window.addEventListener("pointerdown",v=>{a(q,Lo)===v.pointerType&&((a(q,No)||g(q,No,new Set)).add(v.pointerId),a(q,bt).isCancellable()&&(a(q,bt).removeLastElement(),a(q,bt).isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:w}),window.addEventListener("contextmenu",ts,{signal:w}),o.addEventListener("pointermove",this._drawMove.bind(this),{signal:w}),o.addEventListener("touchmove",v=>{v.timeStamp===a(q,Ml)&&We(v)},{signal:w}),t.toggleDrawing(),(x=s._editorUndoBar)==null||x.hide(),a(q,bt)){t.drawLayer.updateProperties(this._currentDrawId,a(q,bt).startNew(l,c,f,m,d));return}s.updateUIForDefaultProperties(this),g(q,bt,this.createDrawerInstance(l,c,f,m,d)),g(q,Nl,this.getDefaultDrawingOptions()),this._currentParent=t,{id:this._currentDrawId}=t.drawLayer.draw(this._mergeSVGProperties(a(q,Nl).toSVGProperties(),a(q,bt).defaultSVGProperties),!0,!1)}static _drawMove(t){var o;if(g(q,Ml,-1),!a(q,bt))return;const{offsetX:s,offsetY:i,pointerId:r}=t;if(a(q,Ro)===r){if(((o=a(q,No))==null?void 0:o.size)>=1){this._endDraw(t);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,a(q,bt).add(s,i)),g(q,Ml,t.timeStamp),We(t)}}static _cleanup(t){t&&(this._currentDrawId=-1,this._currentParent=null,g(q,bt,null),g(q,Nl,null),g(q,Lo,null),g(q,Ml,NaN)),a(q,Ll)&&(a(q,Ll).abort(),g(q,Ll,null),g(q,Ro,NaN),g(q,No,null))}static _endDraw(t){const s=this._currentParent;if(s){if(s.toggleDrawing(!0),this._cleanup(!1),(t==null?void 0:t.target)===s.div&&s.drawLayer.updateProperties(this._currentDrawId,a(q,bt).end(t.offsetX,t.offsetY)),this.supportMultipleDrawings){const i=a(q,bt),r=this._currentDrawId,o=i.getLastElement();s.addCommands({cmd:()=>{s.drawLayer.updateProperties(r,i.setLastElement(o))},undo:()=>{s.drawLayer.updateProperties(r,i.removeLastElement())},mustExec:!1,type:ae.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(t){const s=this._currentParent;if(!s)return null;if(s.toggleDrawing(!0),s.cleanUndoStack(ae.DRAW_STEP),!a(q,bt).isEmpty()){const{pageDimensions:[i,r],scale:o}=s,l=s.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:a(q,bt).getOutlines(i*o,r*o,o,this._INNER_MARGIN),drawingOptions:a(q,Nl),mustBeCommitted:!t});return this._cleanup(!0),l}return s.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(t){}static deserializeDraw(t,s,i,r,o,l){_e("Not implemented")}static async deserialize(t,s,i){var d,f;const{rawDims:{pageWidth:r,pageHeight:o,pageX:l,pageY:c}}=s.viewport,u=this.deserializeDraw(l,c,r,o,this._INNER_MARGIN,t),h=await super.deserialize(t,s,i);return h.createDrawingOptions(t),A(d=h,Wg,eS).call(d,{drawOutlines:u}),A(f=h,Dl,Vd).call(f),h.onScaleChanging(),h.rotate(),h}serializeDraw(t){const[s,i]=this.pageTranslation,[r,o]=this.pageDimensions;return a(this,Wn).serialize([s,i,r,o],t)}renderAnnotationElement(t){return t.updateEdited({rect:this.getPDFRect()}),null}static canCreateNewEmptyEditor(){return!1}};Wn=new WeakMap,kh=new WeakMap,bt=new WeakMap,Ll=new WeakMap,Nl=new WeakMap,Ro=new WeakMap,Lo=new WeakMap,No=new WeakMap,Ml=new WeakMap,Wg=new WeakSet,eS=function({drawOutlines:t,drawId:s,drawingOptions:i}){g(this,Wn,t),this._drawingOptions||(this._drawingOptions=i),this.annotationElementId||this._uiManager.a11yAlert(`pdfjs-editor-${this.editorType}-added-alert`),s>=0?(this._drawId=s,this.parent.drawLayer.finalizeDraw(s,t.defaultProperties)):this._drawId=A(this,Gg,tS).call(this,t,this.parent),A(this,Il,Wd).call(this,t.box)},Gg=new WeakSet,tS=function(t,s){const{id:i}=s.drawLayer.draw(q._mergeSVGProperties(this._drawingOptions.toSVGProperties(),t.defaultSVGProperties),!1,!1);return i},qg=new WeakSet,nS=function(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())},Dl=new WeakSet,Vd=function(t=this.parent){if(!(this._drawId!==null&&this.parent===t)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,t.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=A(this,Gg,tS).call(this,a(this,Wn),t)}},cw=new WeakSet,h2=function([t,s,i,r]){const{parentDimensions:[o,l],rotation:c}=this;switch(c){case 90:return[s,1-t,i*(l/o),r*(o/l)];case 180:return[1-t,1-s,i,r];case 270:return[1-s,t,i*(l/o),r*(o/l)];default:return[t,s,i,r]}},Ph=new WeakSet,zy=function(){const{x:t,y:s,width:i,height:r,parentDimensions:[o,l],rotation:c}=this;switch(c){case 90:return[1-s,t,i*(o/l),r*(l/o)];case 180:return[1-t,1-s,i,r];case 270:return[s,1-t,i*(o/l),r*(l/o)];default:return[t,s,i,r]}},Il=new WeakSet,Wd=function(t){[this.x,this.y,this.width,this.height]=A(this,cw,h2).call(this,t),this.div&&(this.fixAndSetPosition(),this.setDims()),this._onResized()},Mo=new WeakSet,bc=function(){const{x:t,y:s,width:i,height:r,rotation:o,parentRotation:l,parentDimensions:[c,u]}=this;switch((o*4+l)/90){case 1:return[1-s-r,t,r,i];case 2:return[1-t-i,1-s-r,i,r];case 3:return[s,1-t-i,r,i];case 4:return[t,s-i*(c/u),r*(u/c),i*(c/u)];case 5:return[1-s,t,i*(c/u),r*(u/c)];case 6:return[1-t-r*(u/c),1-s,r*(u/c),i*(c/u)];case 7:return[s-i*(c/u),1-t-r*(u/c),i*(c/u),r*(u/c)];case 8:return[t-i,s-r,i,r];case 9:return[1-s,t-i,r,i];case 10:return[1-t,1-s,i,r];case 11:return[s-r,1-t,r,i];case 12:return[t-r*(u/c),s,r*(u/c),i*(c/u)];case 13:return[1-s-i*(c/u),t-r*(u/c),i*(c/u),r*(u/c)];case 14:return[1-t,1-s-i*(c/u),r*(u/c),i*(c/u)];case 15:return[s,1-t,i*(c/u),r*(u/c)];default:return[t,s,i,r]}},O(q,"_currentDrawId",-1),O(q,"_currentParent",null),p(q,bt,null),p(q,Ll,null),p(q,Nl,null),p(q,Ro,NaN),p(q,Lo,null),p(q,No,null),p(q,Ml,NaN),O(q,"_INNER_MARGIN",3);let L0=q;var Si,xt,St,Fl,Rh,tn,Dt,ys,Ol,Bl,jl,Lh,$y;class yB{constructor(e,t,s,i,r,o){p(this,Lh);p(this,Si,new Float64Array(6));p(this,xt,void 0);p(this,St,void 0);p(this,Fl,void 0);p(this,Rh,void 0);p(this,tn,void 0);p(this,Dt,"");p(this,ys,0);p(this,Ol,new Sm);p(this,Bl,void 0);p(this,jl,void 0);g(this,Bl,s),g(this,jl,i),g(this,Fl,r),g(this,Rh,o),[e,t]=A(this,Lh,$y).call(this,e,t);const l=g(this,xt,[NaN,NaN,NaN,NaN,e,t]);g(this,tn,[e,t]),g(this,St,[{line:l,points:a(this,tn)}]),a(this,Si).set(l,0)}updateProperty(e,t){e==="stroke-width"&&g(this,Rh,t)}isEmpty(){return!a(this,St)||a(this,St).length===0}isCancellable(){return a(this,tn).length<=10}add(e,t){[e,t]=A(this,Lh,$y).call(this,e,t);const[s,i,r,o]=a(this,Si).subarray(2,6),l=e-r,c=t-o;return Math.hypot(a(this,Bl)*l,a(this,jl)*c)<=2?null:(a(this,tn).push(e,t),isNaN(s)?(a(this,Si).set([r,o,e,t],2),a(this,xt).push(NaN,NaN,NaN,NaN,e,t),{path:{d:this.toSVGPath()}}):(isNaN(a(this,Si)[0])&&a(this,xt).splice(6,6),a(this,Si).set([s,i,r,o,e,t],0),a(this,xt).push(...W.createBezierPoints(s,i,r,o,e,t)),{path:{d:this.toSVGPath()}}))}end(e,t){const s=this.add(e,t);return s||(a(this,tn).length===2?{path:{d:this.toSVGPath()}}:null)}startNew(e,t,s,i,r){g(this,Bl,s),g(this,jl,i),g(this,Fl,r),[e,t]=A(this,Lh,$y).call(this,e,t);const o=g(this,xt,[NaN,NaN,NaN,NaN,e,t]);g(this,tn,[e,t]);const l=a(this,St).at(-1);return l&&(l.line=new Float32Array(l.line),l.points=new Float32Array(l.points)),a(this,St).push({line:o,points:a(this,tn)}),a(this,Si).set(o,0),g(this,ys,0),this.toSVGPath(),null}getLastElement(){return a(this,St).at(-1)}setLastElement(e){return a(this,St)?(a(this,St).push(e),g(this,xt,e.line),g(this,tn,e.points),g(this,ys,0),{path:{d:this.toSVGPath()}}):a(this,Ol).setLastElement(e)}removeLastElement(){if(!a(this,St))return a(this,Ol).removeLastElement();a(this,St).pop(),g(this,Dt,"");for(let e=0,t=a(this,St).length;e<t;e++){const{line:s,points:i}=a(this,St)[e];g(this,xt,s),g(this,tn,i),g(this,ys,0),this.toSVGPath()}return{path:{d:a(this,Dt)}}}toSVGPath(){const e=W.svgRound(a(this,xt)[4]),t=W.svgRound(a(this,xt)[5]);if(a(this,tn).length===2)return g(this,Dt,`${a(this,Dt)} M ${e} ${t} Z`),a(this,Dt);if(a(this,tn).length<=6){const i=a(this,Dt).lastIndexOf("M");g(this,Dt,`${a(this,Dt).slice(0,i)} M ${e} ${t}`),g(this,ys,6)}if(a(this,tn).length===4){const i=W.svgRound(a(this,xt)[10]),r=W.svgRound(a(this,xt)[11]);return g(this,Dt,`${a(this,Dt)} L ${i} ${r}`),g(this,ys,12),a(this,Dt)}const s=[];a(this,ys)===0&&(s.push(`M ${e} ${t}`),g(this,ys,6));for(let i=a(this,ys),r=a(this,xt).length;i<r;i+=6){const[o,l,c,u,h,d]=a(this,xt).slice(i,i+6).map(W.svgRound);s.push(`C${o} ${l} ${c} ${u} ${h} ${d}`)}return g(this,Dt,a(this,Dt)+s.join(" ")),g(this,ys,a(this,xt).length),a(this,Dt)}getOutlines(e,t,s,i){const r=a(this,St).at(-1);return r.line=new Float32Array(r.line),r.points=new Float32Array(r.points),a(this,Ol).build(a(this,St),e,t,s,a(this,Fl),a(this,Rh),i),g(this,Si,null),g(this,xt,null),g(this,St,null),g(this,Dt,null),a(this,Ol)}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}Si=new WeakMap,xt=new WeakMap,St=new WeakMap,Fl=new WeakMap,Rh=new WeakMap,tn=new WeakMap,Dt=new WeakMap,ys=new WeakMap,Ol=new WeakMap,Bl=new WeakMap,jl=new WeakMap,Lh=new WeakSet,$y=function(e,t){return W._normalizePoint(e,t,a(this,Bl),a(this,jl),a(this,Fl))};var nn,Xg,Yg,Gn,Ai,Ei,Nh,Mh,Ul,Us,Fi,uw,d2,hw,f2,dw,p2;class Sm extends W{constructor(){super(...arguments);p(this,Us);p(this,uw);p(this,hw);p(this,dw);p(this,nn,void 0);p(this,Xg,0);p(this,Yg,void 0);p(this,Gn,void 0);p(this,Ai,void 0);p(this,Ei,void 0);p(this,Nh,void 0);p(this,Mh,void 0);p(this,Ul,void 0)}build(t,s,i,r,o,l,c){g(this,Ai,s),g(this,Ei,i),g(this,Nh,r),g(this,Mh,o),g(this,Ul,l),g(this,Yg,c??0),g(this,Gn,t),A(this,hw,f2).call(this)}get thickness(){return a(this,Ul)}setLastElement(t){return a(this,Gn).push(t),{path:{d:this.toSVGPath()}}}removeLastElement(){return a(this,Gn).pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const t=[];for(const{line:s}of a(this,Gn)){if(t.push(`M${W.svgRound(s[4])} ${W.svgRound(s[5])}`),s.length===6){t.push("Z");continue}if(s.length===12&&isNaN(s[6])){t.push(`L${W.svgRound(s[10])} ${W.svgRound(s[11])}`);continue}for(let i=6,r=s.length;i<r;i+=6){const[o,l,c,u,h,d]=s.subarray(i,i+6).map(W.svgRound);t.push(`C${o} ${l} ${c} ${u} ${h} ${d}`)}}return t.join("")}serialize([t,s,i,r],o){const l=[],c=[],[u,h,d,f]=A(this,uw,d2).call(this);let m,y,w,x,v,b,S,E,C;switch(a(this,Mh)){case 0:C=W._rescale,m=t,y=s+r,w=i,x=-r,v=t+u*i,b=s+(1-h-f)*r,S=t+(u+d)*i,E=s+(1-h)*r;break;case 90:C=W._rescaleAndSwap,m=t,y=s,w=i,x=r,v=t+h*i,b=s+u*r,S=t+(h+f)*i,E=s+(u+d)*r;break;case 180:C=W._rescale,m=t+i,y=s,w=-i,x=r,v=t+(1-u-d)*i,b=s+h*r,S=t+(1-u)*i,E=s+(h+f)*r;break;case 270:C=W._rescaleAndSwap,m=t+i,y=s+r,w=-i,x=-r,v=t+(1-h-f)*i,b=s+(1-u-d)*r,S=t+(1-h)*i,E=s+(1-u)*r;break}for(const{line:T,points:k}of a(this,Gn))l.push(C(T,m,y,w,x,o?new Array(T.length):null)),c.push(C(k,m,y,w,x,o?new Array(k.length):null));return{lines:l,points:c,rect:[v,b,S,E]}}static deserialize(t,s,i,r,o,{paths:{lines:l,points:c},rotation:u,thickness:h}){const d=[];let f,m,y,w,x;switch(u){case 0:x=W._rescale,f=-t/i,m=s/r+1,y=1/i,w=-1/r;break;case 90:x=W._rescaleAndSwap,f=-s/r,m=-t/i,y=1/r,w=1/i;break;case 180:x=W._rescale,f=t/i+1,m=-s/r,y=-1/i,w=1/r;break;case 270:x=W._rescaleAndSwap,f=s/r+1,m=t/i+1,y=-1/r,w=-1/i;break}if(!l){l=[];for(const b of c){const S=b.length;if(S===2){l.push(new Float32Array([NaN,NaN,NaN,NaN,b[0],b[1]]));continue}if(S===4){l.push(new Float32Array([NaN,NaN,NaN,NaN,b[0],b[1],NaN,NaN,NaN,NaN,b[2],b[3]]));continue}const E=new Float32Array(3*(S-2));l.push(E);let[C,T,k,P]=b.subarray(0,4);E.set([NaN,NaN,NaN,NaN,C,T],0);for(let N=4;N<S;N+=2){const M=b[N],I=b[N+1];E.set(W.createBezierPoints(C,T,k,P,M,I),(N-2)*3),[C,T,k,P]=[k,P,M,I]}}}for(let b=0,S=l.length;b<S;b++)d.push({line:x(l[b].map(E=>E??NaN),f,m,y,w),points:x(c[b].map(E=>E??NaN),f,m,y,w)});const v=new this.prototype.constructor;return v.build(d,i,r,1,u,h,o),v}get box(){return a(this,nn)}updateProperty(t,s){return t==="stroke-width"?A(this,dw,p2).call(this,s):null}updateParentDimensions([t,s],i){const[r,o]=A(this,Us,Fi).call(this);g(this,Ai,t),g(this,Ei,s),g(this,Nh,i);const[l,c]=A(this,Us,Fi).call(this),u=l-r,h=c-o,d=a(this,nn);return d[0]-=u,d[1]-=h,d[2]+=2*u,d[3]+=2*h,d}updateRotation(t){return g(this,Xg,t),{path:{transform:this.rotationTransform}}}get viewBox(){return a(this,nn).map(W.svgRound).join(" ")}get defaultProperties(){const[t,s]=a(this,nn);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${W.svgRound(t)} ${W.svgRound(s)}`}}}get rotationTransform(){const[,,t,s]=a(this,nn);let i=0,r=0,o=0,l=0,c=0,u=0;switch(a(this,Xg)){case 90:r=s/t,o=-t/s,c=t;break;case 180:i=-1,l=-1,c=t,u=s;break;case 270:r=-s/t,o=t/s,u=s;break;default:return""}return`matrix(${i} ${r} ${o} ${l} ${W.svgRound(c)} ${W.svgRound(u)})`}getPathResizingSVGProperties([t,s,i,r]){const[o,l]=A(this,Us,Fi).call(this),[c,u,h,d]=a(this,nn);if(Math.abs(h-o)<=W.PRECISION||Math.abs(d-l)<=W.PRECISION){const x=t+i/2-(c+h/2),v=s+r/2-(u+d/2);return{path:{"transform-origin":`${W.svgRound(t)} ${W.svgRound(s)}`,transform:`${this.rotationTransform} translate(${x} ${v})`}}}const f=(i-2*o)/(h-2*o),m=(r-2*l)/(d-2*l),y=h/i,w=d/r;return{path:{"transform-origin":`${W.svgRound(c)} ${W.svgRound(u)}`,transform:`${this.rotationTransform} scale(${y} ${w}) translate(${W.svgRound(o)} ${W.svgRound(l)}) scale(${f} ${m}) translate(${W.svgRound(-o)} ${W.svgRound(-l)})`}}}getPathResizedSVGProperties([t,s,i,r]){const[o,l]=A(this,Us,Fi).call(this),c=a(this,nn),[u,h,d,f]=c;if(c[0]=t,c[1]=s,c[2]=i,c[3]=r,Math.abs(d-o)<=W.PRECISION||Math.abs(f-l)<=W.PRECISION){const v=t+i/2-(u+d/2),b=s+r/2-(h+f/2);for(const{line:S,points:E}of a(this,Gn))W._translate(S,v,b,S),W._translate(E,v,b,E);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${W.svgRound(t)} ${W.svgRound(s)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const m=(i-2*o)/(d-2*o),y=(r-2*l)/(f-2*l),w=-m*(u+o)+t+o,x=-y*(h+l)+s+l;if(m!==1||y!==1||w!==0||x!==0)for(const{line:v,points:b}of a(this,Gn))W._rescale(v,w,x,m,y,v),W._rescale(b,w,x,m,y,b);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${W.svgRound(t)} ${W.svgRound(s)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([t,s],i){const[r,o]=i,l=a(this,nn),c=t-l[0],u=s-l[1];if(a(this,Ai)===r&&a(this,Ei)===o)for(const{line:h,points:d}of a(this,Gn))W._translate(h,c,u,h),W._translate(d,c,u,d);else{const h=a(this,Ai)/r,d=a(this,Ei)/o;g(this,Ai,r),g(this,Ei,o);for(const{line:f,points:m}of a(this,Gn))W._rescale(f,c,u,h,d,f),W._rescale(m,c,u,h,d,m);l[2]*=h,l[3]*=d}return l[0]=t,l[1]=s,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${W.svgRound(t)} ${W.svgRound(s)}`}}}get defaultSVGProperties(){const t=a(this,nn);return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${W.svgRound(t[0])} ${W.svgRound(t[1])}`,transform:this.rotationTransform||null},bbox:t}}}nn=new WeakMap,Xg=new WeakMap,Yg=new WeakMap,Gn=new WeakMap,Ai=new WeakMap,Ei=new WeakMap,Nh=new WeakMap,Mh=new WeakMap,Ul=new WeakMap,Us=new WeakSet,Fi=function(t=a(this,Ul)){const s=a(this,Yg)+t/2*a(this,Nh);return a(this,Mh)%180===0?[s/a(this,Ai),s/a(this,Ei)]:[s/a(this,Ei),s/a(this,Ai)]},uw=new WeakSet,d2=function(){const[t,s,i,r]=a(this,nn),[o,l]=A(this,Us,Fi).call(this,0);return[t+o,s+l,i-2*o,r-2*l]},hw=new WeakSet,f2=function(){const t=g(this,nn,new Float32Array([1/0,1/0,-1/0,-1/0]));for(const{line:r}of a(this,Gn)){if(r.length<=12){for(let c=4,u=r.length;c<u;c+=6)V.pointBoundingBox(r[c],r[c+1],t);continue}let o=r[4],l=r[5];for(let c=6,u=r.length;c<u;c+=6){const[h,d,f,m,y,w]=r.subarray(c,c+6);V.bezierBoundingBox(o,l,h,d,f,m,y,w,t),o=y,l=w}}const[s,i]=A(this,Us,Fi).call(this);t[0]=Xt(t[0]-s,0,1),t[1]=Xt(t[1]-i,0,1),t[2]=Xt(t[2]+s,0,1),t[3]=Xt(t[3]+i,0,1),t[2]-=t[0],t[3]-=t[1]},dw=new WeakSet,p2=function(t){const[s,i]=A(this,Us,Fi).call(this);g(this,Ul,t);const[r,o]=A(this,Us,Fi).call(this),[l,c]=[r-s,o-i],u=a(this,nn);return u[0]-=l,u[1]-=c,u[2]+=2*l,u[3]+=2*c,u};class e1 extends u2{constructor(e){super(),this._viewParameters=e,super.updateProperties({fill:"none",stroke:Re._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(e,t){e==="stroke-width"&&(t??(t=this["stroke-width"]),t*=this._viewParameters.realScale),super.updateSVGProperty(e,t)}clone(){const e=new e1(this._viewParameters);return e.updateAll(this),e}}var fw,g2;const Oc=class Oc extends L0{constructor(t){super({...t,name:"inkEditor"});p(this,fw);this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(t,s){Re.initialize(t,s),this._defaultDrawingOptions=new e1(s.viewParameters)}static getDefaultDrawingOptions(t){const s=this._defaultDrawingOptions.clone();return s.updateProperties(t),s}static get supportMultipleDrawings(){return!0}static get typesMap(){return ie(this,"typesMap",new Map([[ae.INK_THICKNESS,"stroke-width"],[ae.INK_COLOR,"stroke"],[ae.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(t,s,i,r,o){return new yB(t,s,i,r,o,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(t,s,i,r,o,l){return Sm.deserialize(t,s,i,r,o,l)}static async deserialize(t,s,i){let r=null;if(t instanceof UA){const{data:{inkLists:l,rect:c,rotation:u,id:h,color:d,opacity:f,borderStyle:{rawWidth:m},popupRef:y,richText:w,contentsObj:x,creationDate:v,modificationDate:b},parent:{page:{pageNumber:S}}}=t;r=t={annotationType:Z.INK,color:Array.from(d),thickness:m,opacity:f,paths:{points:l},boxes:null,pageIndex:S-1,rect:c.slice(0),rotation:u,annotationElementId:h,id:h,deleted:!1,popupRef:y,richText:w,comment:(x==null?void 0:x.str)||null,creationDate:v,modificationDate:b}}const o=await super.deserialize(t,s,i);return o._initialData=r,t.comment&&o.setCommentData(t),o}get toolbarButtons(){return this._colorPicker||(this._colorPicker=new k0(this)),[["colorPicker",this._colorPicker]]}get colorType(){return ae.INK_COLOR}get color(){return this._drawingOptions.stroke}get opacity(){return this._drawingOptions["stroke-opacity"]}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:t,_drawingOptions:s,parent:i}=this;s.updateSVGProperty("stroke-width"),i.drawLayer.updateProperties(t,s.toSVGProperties())}static onScaleChangingWhenDrawing(){const t=this._currentParent;t&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),t.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:t,thickness:s,opacity:i}){this._drawingOptions=Oc.getDefaultDrawingOptions({stroke:V.makeHexColor(...t),"stroke-width":s,"stroke-opacity":i})}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:s,points:i}=this.serializeDraw(t),{_drawingOptions:{stroke:r,"stroke-opacity":o,"stroke-width":l}}=this,c=Object.assign(super.serialize(t),{color:Re._colorManager.convert(r),opacity:o,thickness:l,paths:{lines:s,points:i}});return this.addComment(c),t?(c.isCopy=!0,c):this.annotationElementId&&!A(this,fw,g2).call(this,c)?null:(c.id=this.annotationElementId,c)}renderAnnotationElement(t){if(this.deleted)return t.hide(),null;const{points:s,rect:i}=this.serializeDraw(!1);return t.updateEdited({rect:i,thickness:this._drawingOptions["stroke-width"],points:s,popup:this.comment}),null}};fw=new WeakSet,g2=function(t){const{color:s,thickness:i,opacity:r,pageIndex:o}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized||t.color.some((l,c)=>l!==s[c])||t.thickness!==i||t.opacity!==r||t.pageIndex!==o},O(Oc,"_type","ink"),O(Oc,"_editorType",Z.INK),O(Oc,"_defaultDrawingOptions",null);let sS=Oc;class iS extends Sm{toSVGPath(){let e=super.toSVGPath();return e.endsWith("Z")||(e+="Z"),e}}const Jm=8,Sd=3;var zl,Kg,rS,zs,pw,m2,gw,y2,Qg,oS,Dh,Hy,mw,v2,yw,w2,vw,b2,Jg,aS,Zg,lS,ww,x2;class ot{static extractContoursFromText(e,{fontFamily:t,fontStyle:s,fontWeight:i},r,o,l,c){let u=new OffscreenCanvas(1,1),h=u.getContext("2d",{alpha:!1});const d=200,f=h.font=`${s} ${i} ${d}px ${t}`,{actualBoundingBoxLeft:m,actualBoundingBoxRight:y,actualBoundingBoxAscent:w,actualBoundingBoxDescent:x,fontBoundingBoxAscent:v,fontBoundingBoxDescent:b,width:S}=h.measureText(e),E=1.5,C=Math.ceil(Math.max(Math.abs(m)+Math.abs(y)||0,S)*E),T=Math.ceil(Math.max(Math.abs(w)+Math.abs(x)||d,Math.abs(v)+Math.abs(b)||d)*E);u=new OffscreenCanvas(C,T),h=u.getContext("2d",{alpha:!0,willReadFrequently:!0}),h.font=f,h.filter="grayscale(1)",h.fillStyle="white",h.fillRect(0,0,C,T),h.fillStyle="black",h.fillText(e,C*(E-1)/2,T*(3-E)/2);const k=A(this,Jg,aS).call(this,h.getImageData(0,0,C,T).data),P=A(this,vw,b2).call(this,k),N=A(this,Zg,lS).call(this,P),M=A(this,Qg,oS).call(this,k,C,T,N);return this.processDrawnLines({lines:{curves:M,width:C,height:T},pageWidth:r,pageHeight:o,rotation:l,innerMargin:c,mustSmooth:!0,areContours:!0})}static process(e,t,s,i,r){const[o,l,c]=A(this,ww,x2).call(this,e),[u,h]=A(this,yw,w2).call(this,o,l,c,Math.hypot(l,c)*a(this,zl).sigmaSFactor,a(this,zl).sigmaR,a(this,zl).kernelSize),d=A(this,Zg,lS).call(this,h),f=A(this,Qg,oS).call(this,u,l,c,d);return this.processDrawnLines({lines:{curves:f,width:l,height:c},pageWidth:t,pageHeight:s,rotation:i,innerMargin:r,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:e,pageWidth:t,pageHeight:s,rotation:i,innerMargin:r,mustSmooth:o,areContours:l}){i%180!==0&&([t,s]=[s,t]);const{curves:c,width:u,height:h}=e,d=e.thickness??0,f=[],m=Math.min(t/u,s/h),y=m/t,w=m/s,x=[];for(const{points:b}of c){const S=o?A(this,mw,v2).call(this,b):b;if(!S)continue;x.push(S);const E=S.length,C=new Float32Array(E),T=new Float32Array(3*(E===2?2:E-2));if(f.push({line:T,points:C}),E===2){C[0]=S[0]*y,C[1]=S[1]*w,T.set([NaN,NaN,NaN,NaN,C[0],C[1]],0);continue}let[k,P,N,M]=S;k*=y,P*=w,N*=y,M*=w,C.set([k,P,N,M],0),T.set([NaN,NaN,NaN,NaN,k,P],0);for(let I=4;I<E;I+=2){const j=C[I]=S[I]*y,H=C[I+1]=S[I+1]*w;T.set(W.createBezierPoints(k,P,N,M,j,H),(I-2)*3),[k,P,N,M]=[N,M,j,H]}}if(f.length===0)return null;const v=l?new iS:new Sm;return v.build(f,t,s,1,i,l?0:d,r),{outline:v,newCurves:x,areContours:l,thickness:d,width:u,height:h}}static async compressSignature({outlines:e,areContours:t,thickness:s,width:i,height:r}){let o=1/0,l=-1/0,c=0;for(const S of e){c+=S.length;for(let E=2,C=S.length;E<C;E++){const T=S[E]-S[E-2];o=Math.min(o,T),l=Math.max(l,T)}}let u;o>=-128&&l<=127?u=Int8Array:o>=-32768&&l<=32767?u=Int16Array:u=Int32Array;const h=e.length,d=Jm+Sd*h,f=new Uint32Array(d);let m=0;f[m++]=d*Uint32Array.BYTES_PER_ELEMENT+(c-2*h)*u.BYTES_PER_ELEMENT,f[m++]=0,f[m++]=i,f[m++]=r,f[m++]=t?0:1,f[m++]=Math.max(0,Math.floor(s??0)),f[m++]=h,f[m++]=u.BYTES_PER_ELEMENT;for(const S of e)f[m++]=S.length-2,f[m++]=S[0],f[m++]=S[1];const y=new CompressionStream("deflate-raw"),w=y.writable.getWriter();await w.ready,w.write(f);const x=u.prototype.constructor;for(const S of e){const E=new x(S.length-2);for(let C=2,T=S.length;C<T;C++)E[C-2]=S[C]-S[C-2];w.write(E)}w.close();const v=await new Response(y.readable).arrayBuffer(),b=new Uint8Array(v);return yP(b)}static async decompressSignature(e){try{const t=$F(e),{readable:s,writable:i}=new DecompressionStream("deflate-raw"),r=i.getWriter();await r.ready,r.write(t).then(async()=>{await r.ready,await r.close()}).catch(()=>{});let o=null,l=0;for await(const S of s)o||(o=new Uint8Array(new Uint32Array(S.buffer,0,4)[0])),o.set(S,l),l+=S.length;const c=new Uint32Array(o.buffer,0,o.length>>2),u=c[1];if(u!==0)throw new Error(`Invalid version: ${u}`);const h=c[2],d=c[3],f=c[4]===0,m=c[5],y=c[6],w=c[7],x=[],v=(Jm+Sd*y)*Uint32Array.BYTES_PER_ELEMENT;let b;switch(w){case Int8Array.BYTES_PER_ELEMENT:b=new Int8Array(o.buffer,v);break;case Int16Array.BYTES_PER_ELEMENT:b=new Int16Array(o.buffer,v);break;case Int32Array.BYTES_PER_ELEMENT:b=new Int32Array(o.buffer,v);break}l=0;for(let S=0;S<y;S++){const E=c[Sd*S+Jm],C=new Float32Array(E+2);x.push(C);for(let T=0;T<Sd-1;T++)C[T]=c[Sd*S+Jm+T+1];for(let T=0;T<E;T++)C[T+2]=C[T]+b[l++]}return{areContours:f,thickness:m,outlines:x,width:h,height:d}}catch(t){return ee(`decompressSignature: ${t}`),null}}}zl=new WeakMap,Kg=new WeakSet,rS=function(e,t,s,i){return s-=e,i-=t,s===0?i>0?0:4:s===1?i+6:2-i},zs=new WeakMap,pw=new WeakSet,m2=function(e,t,s,i,r,o,l){const c=A(this,Kg,rS).call(this,s,i,r,o);for(let u=0;u<8;u++){const h=(-u+c-l+16)%8,d=a(this,zs)[2*h],f=a(this,zs)[2*h+1];if(e[(s+d)*t+(i+f)]!==0)return h}return-1},gw=new WeakSet,y2=function(e,t,s,i,r,o,l){const c=A(this,Kg,rS).call(this,s,i,r,o);for(let u=0;u<8;u++){const h=(u+c+l+16)%8,d=a(this,zs)[2*h],f=a(this,zs)[2*h+1];if(e[(s+d)*t+(i+f)]!==0)return h}return-1},Qg=new WeakSet,oS=function(e,t,s,i){const r=e.length,o=new Int32Array(r);for(let h=0;h<r;h++)o[h]=e[h]<=i?1:0;for(let h=1;h<s-1;h++)o[h*t]=o[h*t+t-1]=0;for(let h=0;h<t;h++)o[h]=o[t*s-1-h]=0;let l=1,c;const u=[];for(let h=1;h<s-1;h++){c=1;for(let d=1;d<t-1;d++){const f=h*t+d,m=o[f];if(m===0)continue;let y=h,w=d;if(m===1&&o[f-1]===0)l+=1,w-=1;else if(m>=1&&o[f+1]===0)l+=1,w+=1,m>1&&(c=m);else{m!==1&&(c=Math.abs(m));continue}const x=[d,h],v=w===d+1,b={isHole:v,points:x,id:l,parent:0};u.push(b);let S;for(const I of u)if(I.id===c){S=I;break}S?S.isHole?b.parent=v?S.parent:c:b.parent=v?c:S.parent:b.parent=v?c:0;const E=A(this,pw,m2).call(this,o,t,h,d,y,w,0);if(E===-1){o[f]=-l,o[f]!==1&&(c=Math.abs(o[f]));continue}let C=a(this,zs)[2*E],T=a(this,zs)[2*E+1];const k=h+C,P=d+T;y=k,w=P;let N=h,M=d;for(;;){const I=A(this,gw,y2).call(this,o,t,N,M,y,w,1);C=a(this,zs)[2*I],T=a(this,zs)[2*I+1];const j=N+C,H=M+T;x.push(H,j);const z=N*t+M;if(o[z+1]===0?o[z]=-l:o[z]===1&&(o[z]=l),j===h&&H===d&&N===k&&M===P){o[f]!==1&&(c=Math.abs(o[f]));break}else y=N,w=M,N=j,M=H}}}return u},Dh=new WeakSet,Hy=function(e,t,s,i){if(s-t<=4){for(let k=t;k<s-2;k+=2)i.push(e[k],e[k+1]);return}const r=e[t],o=e[t+1],l=e[s-4]-r,c=e[s-3]-o,u=Math.hypot(l,c),h=l/u,d=c/u,f=h*o-d*r,m=c/l,y=1/u,w=Math.atan(m),x=Math.cos(w),v=Math.sin(w),b=y*(Math.abs(x)+Math.abs(v)),S=y*(1-b+b**2),E=Math.max(Math.atan(Math.abs(v+x)*S),Math.atan(Math.abs(v-x)*S));let C=0,T=t;for(let k=t+2;k<s-2;k+=2){const P=Math.abs(f-h*e[k+1]+d*e[k]);P>C&&(T=k,C=P)}C>(u*E)**2?(A(this,Dh,Hy).call(this,e,t,T+2,i),A(this,Dh,Hy).call(this,e,T,s,i)):i.push(r,o)},mw=new WeakSet,v2=function(e){const t=[],s=e.length;return A(this,Dh,Hy).call(this,e,0,s,t),t.push(e[s-2],e[s-1]),t.length<=4?null:t},yw=new WeakSet,w2=function(e,t,s,i,r,o){const l=new Float32Array(o**2),c=-2*i**2,u=o>>1;for(let w=0;w<o;w++){const x=(w-u)**2;for(let v=0;v<o;v++)l[w*o+v]=Math.exp((x+(v-u)**2)/c)}const h=new Float32Array(256),d=-2*r**2;for(let w=0;w<256;w++)h[w]=Math.exp(w**2/d);const f=e.length,m=new Uint8Array(f),y=new Uint32Array(256);for(let w=0;w<s;w++)for(let x=0;x<t;x++){const v=w*t+x,b=e[v];let S=0,E=0;for(let T=0;T<o;T++){const k=w+T-u;if(!(k<0||k>=s))for(let P=0;P<o;P++){const N=x+P-u;if(N<0||N>=t)continue;const M=e[k*t+N],I=l[T*o+P]*h[Math.abs(M-b)];S+=M*I,E+=I}}const C=m[v]=Math.round(S/E);y[C]++}return[m,y]},vw=new WeakSet,b2=function(e){const t=new Uint32Array(256);for(const s of e)t[s]++;return t},Jg=new WeakSet,aS=function(e){const t=e.length,s=new Uint8ClampedArray(t>>2);let i=-1/0,r=1/0;for(let l=0,c=s.length;l<c;l++){const u=s[l]=e[l<<2];i=Math.max(i,u),r=Math.min(r,u)}const o=255/(i-r);for(let l=0,c=s.length;l<c;l++)s[l]=(s[l]-r)*o;return s},Zg=new WeakSet,lS=function(e){let t,s=-1/0,i=-1/0;const r=e.findIndex(c=>c!==0);let o=r,l=r;for(t=r;t<256;t++){const c=e[t];c>s&&(t-o>i&&(i=t-o,l=t-1),s=c,o=t)}for(t=l-1;t>=0&&!(e[t]>e[t+1]);t--);return t},ww=new WeakSet,x2=function(e){const t=e,{width:s,height:i}=e,{maxDim:r}=a(this,zl);let o=s,l=i;if(s>r||i>r){let f=s,m=i,y=Math.log2(Math.max(s,i)/r);const w=Math.floor(y);y=y===w?w-1:w;for(let v=0;v<y;v++){o=Math.ceil(f/2),l=Math.ceil(m/2);const b=new OffscreenCanvas(o,l);b.getContext("2d").drawImage(e,0,0,f,m,0,0,o,l),f=o,m=l,e!==t&&e.close(),e=b.transferToImageBitmap()}const x=Math.min(r/o,r/l);o=Math.round(o*x),l=Math.round(l*x)}const u=new OffscreenCanvas(o,l).getContext("2d",{willReadFrequently:!0});u.fillStyle="white",u.fillRect(0,0,o,l),u.filter="grayscale(1)",u.drawImage(e,0,0,e.width,e.height,0,0,o,l);const h=u.getImageData(0,0,o,l).data;return[A(this,Jg,aS).call(this,h),o,l]},p(ot,Kg),p(ot,pw),p(ot,gw),p(ot,Qg),p(ot,Dh),p(ot,mw),p(ot,yw),p(ot,vw),p(ot,Jg),p(ot,Zg),p(ot,ww),p(ot,zl,{maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16}),p(ot,zs,new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]));class $A extends u2{constructor(){super(),super.updateProperties({fill:Re._defaultLineColor,"stroke-width":0})}clone(){const e=new $A;return e.updateAll(this),e}}class HA extends e1{constructor(e){super(e),super.updateProperties({stroke:Re._defaultLineColor,"stroke-width":1})}clone(){const e=new HA(this._viewParameters);return e.updateAll(this),e}}var Do,_i,Io,$l;const Pn=class Pn extends L0{constructor(t){super({...t,mustBeCommitted:!0,name:"signatureEditor"});p(this,Do,!1);p(this,_i,null);p(this,Io,null);p(this,$l,null);this._willKeepAspectRatio=!0,g(this,Io,t.signatureData||null),g(this,_i,null),this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(t,s){Re.initialize(t,s),this._defaultDrawingOptions=new $A,this._defaultDrawnSignatureOptions=new HA(s.viewParameters)}static getDefaultDrawingOptions(t){const s=this._defaultDrawingOptions.clone();return s.updateProperties(t),s}static get supportMultipleDrawings(){return!1}static get typesMap(){return ie(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!a(this,_i)}}static computeTelemetryFinalData(t){const s=t.get("hasDescription");return{hasAltText:s.get(!0)??0,hasNoAltText:s.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let t,s;const{_isCopy:i}=this;if(i&&(this._isCopy=!1,t=this.x,s=this.y),super.render(),this._drawId===null)if(a(this,Io)){const{lines:r,mustSmooth:o,areContours:l,description:c,uuid:u,heightInPage:h}=a(this,Io),{rawDims:{pageWidth:d,pageHeight:f},rotation:m}=this.parent.viewport,y=ot.processDrawnLines({lines:r,pageWidth:d,pageHeight:f,rotation:m,innerMargin:Pn._INNER_MARGIN,mustSmooth:o,areContours:l});this.addSignature(y,h,c,u)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);else this.div.setAttribute("data-l10n-args",JSON.stringify({description:a(this,_i)||""}));return i&&(this._isCopy=!0,this._moveAfterPaste(t,s)),this.div}setUuid(t){g(this,$l,t),this.addEditToolbar()}getUuid(){return a(this,$l)}get description(){return a(this,_i)}set description(t){g(this,_i,t),this.div&&(this.div.setAttribute("data-l10n-args",JSON.stringify({description:t})),super.addEditToolbar().then(s=>{s==null||s.updateEditSignatureButton(t)}))}getSignaturePreview(){const{newCurves:t,areContours:s,thickness:i,width:r,height:o}=a(this,Io),l=Math.max(r,o),c=ot.processDrawnLines({lines:{curves:t.map(u=>({points:u})),thickness:i,width:r,height:o},pageWidth:l,pageHeight:l,rotation:0,innerMargin:0,mustSmooth:!1,areContours:s});return{areContours:s,outline:c.outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(t,s,i,r){const{x:o,y:l}=this,{outline:c}=g(this,Io,t);g(this,Do,c instanceof iS),this.description=i;let u;a(this,Do)?u=Pn.getDefaultDrawingOptions():(u=Pn._defaultDrawnSignatureOptions.clone(),u.updateProperties({"stroke-width":c.thickness})),this._addOutlines({drawOutlines:c,drawingOptions:u});const[,h]=this.pageDimensions;let d=s/h;d=d>=1?.5:d,this.width*=d/this.height,this.width>=1&&(d*=.9/this.width,this.width=.9),this.height=d,this.setDims(),this.x=o,this.y=l,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(r),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!r,hasDescription:!!i}}),this.div.hidden=!1}getFromImage(t){const{rawDims:{pageWidth:s,pageHeight:i},rotation:r}=this.parent.viewport;return ot.process(t,s,i,r,Pn._INNER_MARGIN)}getFromText(t,s){const{rawDims:{pageWidth:i,pageHeight:r},rotation:o}=this.parent.viewport;return ot.extractContoursFromText(t,s,i,r,o,Pn._INNER_MARGIN)}getDrawnSignature(t){const{rawDims:{pageWidth:s,pageHeight:i},rotation:r}=this.parent.viewport;return ot.processDrawnLines({lines:t,pageWidth:s,pageHeight:i,rotation:r,innerMargin:Pn._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:t,thickness:s}){t?this._drawingOptions=Pn.getDefaultDrawingOptions():(this._drawingOptions=Pn._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":s}))}serialize(t=!1){if(this.isEmpty())return null;const{lines:s,points:i}=this.serializeDraw(t),{_drawingOptions:{"stroke-width":r}}=this,o=Object.assign(super.serialize(t),{isSignature:!0,areContours:a(this,Do),color:[0,0,0],thickness:a(this,Do)?0:r});return this.addComment(o),t?(o.paths={lines:s,points:i},o.uuid=a(this,$l),o.isCopy=!0):o.lines=s,a(this,_i)&&(o.accessibilityData={type:"Figure",alt:a(this,_i)}),o}static deserializeDraw(t,s,i,r,o,l){return l.areContours?iS.deserialize(t,s,i,r,o,l):Sm.deserialize(t,s,i,r,o,l)}static async deserialize(t,s,i){var o;const r=await super.deserialize(t,s,i);return g(r,Do,t.areContours),r.description=((o=t.accessibilityData)==null?void 0:o.alt)||"",g(r,$l,t.uuid),r}};Do=new WeakMap,_i=new WeakMap,Io=new WeakMap,$l=new WeakMap,O(Pn,"_type","signature"),O(Pn,"_editorType",Z.SIGNATURE),O(Pn,"_defaultDrawingOptions",null);let cS=Pn;var Oe,At,Fo,wr,Oo,Ih,br,Hl,Ci,qn,Fh,Vl,Gd,Wl,qd,Oh,Vy,Bh,Wy,jh,Gy,em,hS,Uh,qy,bw,S2;class uS extends Re{constructor(t){super({...t,name:"stampEditor"});p(this,Vl);p(this,Wl);p(this,Oh);p(this,Bh);p(this,jh);p(this,em);p(this,Uh);p(this,bw);p(this,Oe,null);p(this,At,null);p(this,Fo,null);p(this,wr,null);p(this,Oo,null);p(this,Ih,"");p(this,br,null);p(this,Hl,!1);p(this,Ci,null);p(this,qn,!1);p(this,Fh,!1);g(this,wr,t.bitmapUrl),g(this,Oo,t.bitmapFile),this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(t,s){Re.initialize(t,s)}static isHandlingMimeForPasting(t){return A0.includes(t)}static paste(t,s){s.pasteEditor({mode:Z.STAMP},{bitmapFile:t.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var t;return{type:"stamp",hasAltText:!!((t=this.altTextData)!=null&&t.altText)}}static computeTelemetryFinalData(t){const s=t.get("hasAltText");return{hasAltText:s.get(!0)??0,hasNoAltText:s.get(!1)??0}}async mlGuessAltText(t=null,s=!0){if(this.hasAltTextData())return null;const{mlManager:i}=this._uiManager;if(!i)throw new Error("No ML.");if(!await i.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:r,width:o,height:l}=t||this.copyCanvas(null,null,!0).imageData,c=await i.guess({name:"altText",request:{data:r,width:o,height:l,channels:r.length/(o*l)}});if(!c)throw new Error("No response from the AI service.");if(c.error)throw new Error("Error from the AI service.");if(c.cancel)return null;if(!c.output)throw new Error("No valid response from the AI service.");const u=c.output;return await this.setGuessedAltText(u),s&&!this.hasAltTextData()&&(this.altTextData={alt:u,decorative:!1}),u}remove(){var t;a(this,At)&&(g(this,Oe,null),this._uiManager.imageManager.deleteId(a(this,At)),(t=a(this,br))==null||t.remove(),g(this,br,null),a(this,Ci)&&(clearTimeout(a(this,Ci)),g(this,Ci,null))),super.remove()}rebuild(){if(!this.parent){a(this,At)&&A(this,Oh,Vy).call(this);return}super.rebuild(),this.div!==null&&(a(this,At)&&a(this,br)===null&&A(this,Oh,Vy).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(t){this._isDraggable=!0,t&&this.div.focus()}isEmpty(){return!(a(this,Fo)||a(this,Oe)||a(this,wr)||a(this,Oo)||a(this,At)||a(this,Hl))}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let t,s;return this._isCopy&&(t=this.x,s=this.y),super.render(),this.div.hidden=!0,this.createAltText(),a(this,Hl)||(a(this,Oe)?A(this,Bh,Wy).call(this):A(this,Oh,Vy).call(this)),this._isCopy&&this._moveAfterPaste(t,s),this._uiManager.addShouldRescale(this),this.div}setCanvas(t,s){const{id:i,bitmap:r}=this._uiManager.imageManager.getFromCanvas(t,s);s.remove(),i&&this._uiManager.imageManager.isValidId(i)&&(g(this,At,i),r&&g(this,Oe,r),g(this,Hl,!1),A(this,Bh,Wy).call(this))}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;a(this,Ci)!==null&&clearTimeout(a(this,Ci)),g(this,Ci,setTimeout(()=>{g(this,Ci,null),A(this,em,hS).call(this)},200))}copyCanvas(t,s,i=!1){t||(t=224);const{width:r,height:o}=a(this,Oe),l=new Ks;let c=a(this,Oe),u=r,h=o,d=null;if(s){if(r>s||o>s){const k=Math.min(s/r,s/o);u=Math.floor(r*k),h=Math.floor(o*k)}d=document.createElement("canvas");const m=d.width=Math.ceil(u*l.sx),y=d.height=Math.ceil(h*l.sy);a(this,qn)||(c=A(this,jh,Gy).call(this,m,y));const w=d.getContext("2d");w.filter=this._uiManager.hcmFilter;let x="white",v="#cfcfd8";this._uiManager.hcmFilter!=="none"?v="black":WF.isDarkMode&&(x="#8f8f9d",v="#42414d");const b=15,S=b*l.sx,E=b*l.sy,C=new OffscreenCanvas(S*2,E*2),T=C.getContext("2d");T.fillStyle=x,T.fillRect(0,0,S*2,E*2),T.fillStyle=v,T.fillRect(0,0,S,E),T.fillRect(S,E,S,E),w.fillStyle=w.createPattern(C,"repeat"),w.fillRect(0,0,m,y),w.drawImage(c,0,0,c.width,c.height,0,0,m,y)}let f=null;if(i){let m,y;if(l.symmetric&&c.width<t&&c.height<t)m=c.width,y=c.height;else if(c=a(this,Oe),r>t||o>t){const v=Math.min(t/r,t/o);m=Math.floor(r*v),y=Math.floor(o*v),a(this,qn)||(c=A(this,jh,Gy).call(this,m,y))}const x=new OffscreenCanvas(m,y).getContext("2d",{willReadFrequently:!0});x.drawImage(c,0,0,c.width,c.height,0,0,m,y),f={width:m,height:y,data:x.getImageData(0,0,m,y).data}}return{canvas:d,width:u,height:h,imageData:f}}static async deserialize(t,s,i){var x;let r=null,o=!1;if(t instanceof BR){const{data:{rect:v,rotation:b,id:S,structParent:E,popupRef:C,richText:T,contentsObj:k,creationDate:P,modificationDate:N},container:M,parent:{page:{pageNumber:I}},canvas:j}=t;let H,z;j?(delete t.canvas,{id:H,bitmap:z}=i.imageManager.getFromCanvas(M.id,j),j.remove()):(o=!0,t._hasNoCanvas=!0);const Q=((x=await s._structTree.getAriaAttributes(`${LA}${S}`))==null?void 0:x.get("aria-label"))||"";r=t={annotationType:Z.STAMP,bitmapId:H,bitmap:z,pageIndex:I-1,rect:v.slice(0),rotation:b,annotationElementId:S,id:S,deleted:!1,accessibilityData:{decorative:!1,altText:Q},isSvg:!1,structParent:E,popupRef:C,richText:T,comment:(k==null?void 0:k.str)||null,creationDate:P,modificationDate:N}}const l=await super.deserialize(t,s,i),{rect:c,bitmap:u,bitmapUrl:h,bitmapId:d,isSvg:f,accessibilityData:m}=t;o?(i.addMissingCanvas(t.id,l),g(l,Hl,!0)):d&&i.imageManager.isValidId(d)?(g(l,At,d),u&&g(l,Oe,u)):g(l,wr,h),g(l,qn,f);const[y,w]=l.pageDimensions;return l.width=(c[2]-c[0])/y,l.height=(c[3]-c[1])/w,m&&(l.altTextData=m),l._initialData=r,t.comment&&l.setCommentData(t),g(l,Fh,!!r),l}serialize(t=!1,s=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const i=Object.assign(super.serialize(t),{bitmapId:a(this,At),isSvg:a(this,qn)});if(this.addComment(i),t)return i.bitmapUrl=A(this,Uh,qy).call(this,!0),i.accessibilityData=this.serializeAltText(!0),i.isCopy=!0,i;const{decorative:r,altText:o}=this.serializeAltText(!1);if(!r&&o&&(i.accessibilityData={type:"Figure",alt:o}),this.annotationElementId){const c=A(this,bw,S2).call(this,i);return c.isSame?null:(c.isSameAltText?delete i.accessibilityData:i.accessibilityData.structParent=this._initialData.structParent??-1,i.id=this.annotationElementId,delete i.bitmapId,i)}if(s===null)return i;s.stamps||(s.stamps=new Map);const l=a(this,qn)?(i.rect[2]-i.rect[0])*(i.rect[3]-i.rect[1]):null;if(!s.stamps.has(a(this,At)))s.stamps.set(a(this,At),{area:l,serialized:i}),i.bitmap=A(this,Uh,qy).call(this,!1);else if(a(this,qn)){const c=s.stamps.get(a(this,At));l>c.area&&(c.area=l,c.serialized.bitmap.close(),c.serialized.bitmap=A(this,Uh,qy).call(this,!1))}return i}renderAnnotationElement(t){return this.deleted?(t.hide(),null):(t.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}}Oe=new WeakMap,At=new WeakMap,Fo=new WeakMap,wr=new WeakMap,Oo=new WeakMap,Ih=new WeakMap,br=new WeakMap,Hl=new WeakMap,Ci=new WeakMap,qn=new WeakMap,Fh=new WeakMap,Vl=new WeakSet,Gd=function(t,s=!1){if(!t){this.remove();return}g(this,Oe,t.bitmap),s||(g(this,At,t.id),g(this,qn,t.isSvg)),t.file&&g(this,Ih,t.file.name),A(this,Bh,Wy).call(this)},Wl=new WeakSet,qd=function(){if(g(this,Fo,null),this._uiManager.enableWaiting(!1),!!a(this,br)){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&a(this,Oe)){this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&a(this,Oe)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}},Oh=new WeakSet,Vy=function(){if(a(this,At)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(a(this,At)).then(i=>A(this,Vl,Gd).call(this,i,!0)).finally(()=>A(this,Wl,qd).call(this));return}if(a(this,wr)){const i=a(this,wr);g(this,wr,null),this._uiManager.enableWaiting(!0),g(this,Fo,this._uiManager.imageManager.getFromUrl(i).then(r=>A(this,Vl,Gd).call(this,r)).finally(()=>A(this,Wl,qd).call(this)));return}if(a(this,Oo)){const i=a(this,Oo);g(this,Oo,null),this._uiManager.enableWaiting(!0),g(this,Fo,this._uiManager.imageManager.getFromFile(i).then(r=>A(this,Vl,Gd).call(this,r)).finally(()=>A(this,Wl,qd).call(this)));return}const t=document.createElement("input");t.type="file",t.accept=A0.join(",");const s=this._uiManager._signal;g(this,Fo,new Promise(i=>{t.addEventListener("change",async()=>{if(!t.files||t.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const r=await this._uiManager.imageManager.getFromFile(t.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),A(this,Vl,Gd).call(this,r)}i()},{signal:s}),t.addEventListener("cancel",()=>{this.remove(),i()},{signal:s})}).finally(()=>A(this,Wl,qd).call(this))),t.click()},Bh=new WeakSet,Wy=function(){var u;const{div:t}=this;let{width:s,height:i}=a(this,Oe);const[r,o]=this.pageDimensions,l=.75;if(this.width)s=this.width*r,i=this.height*o;else if(s>l*r||i>l*o){const h=Math.min(l*r/s,l*o/i);s*=h,i*=h}this._uiManager.enableWaiting(!1);const c=g(this,br,document.createElement("canvas"));c.setAttribute("role","img"),this.addContainer(c),this.width=s/r,this.height=i/o,this.setDims(),(u=this._initialOptions)!=null&&u.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(t.hidden=!1),A(this,em,hS).call(this),a(this,Fh)||(this.parent.addUndoableEditor(this),g(this,Fh,!0)),this._reportTelemetry({action:"inserted_image"}),a(this,Ih)&&this.div.setAttribute("aria-description",a(this,Ih)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")},jh=new WeakSet,Gy=function(t,s){const{width:i,height:r}=a(this,Oe);let o=i,l=r,c=a(this,Oe);for(;o>2*t||l>2*s;){const u=o,h=l;o>2*t&&(o=o>=16384?Math.floor(o/2)-1:Math.ceil(o/2)),l>2*s&&(l=l>=16384?Math.floor(l/2)-1:Math.ceil(l/2));const d=new OffscreenCanvas(o,l);d.getContext("2d").drawImage(c,0,0,u,h,0,0,o,l),c=d.transferToImageBitmap()}return c},em=new WeakSet,hS=function(){const[t,s]=this.parentDimensions,{width:i,height:r}=this,o=new Ks,l=Math.ceil(i*t*o.sx),c=Math.ceil(r*s*o.sy),u=a(this,br);if(!u||u.width===l&&u.height===c)return;u.width=l,u.height=c;const h=a(this,qn)?a(this,Oe):A(this,jh,Gy).call(this,l,c),d=u.getContext("2d");d.filter=this._uiManager.hcmFilter,d.drawImage(h,0,0,h.width,h.height,0,0,l,c)},Uh=new WeakSet,qy=function(t){if(t){if(a(this,qn)){const r=this._uiManager.imageManager.getSvgUrl(a(this,At));if(r)return r}const s=document.createElement("canvas");return{width:s.width,height:s.height}=a(this,Oe),s.getContext("2d").drawImage(a(this,Oe),0,0),s.toDataURL()}if(a(this,qn)){const[s,i]=this.pageDimensions,r=Math.round(this.width*s*Nr.PDF_TO_CSS_UNITS),o=Math.round(this.height*i*Nr.PDF_TO_CSS_UNITS),l=new OffscreenCanvas(r,o);return l.getContext("2d").drawImage(a(this,Oe),0,0,a(this,Oe).width,a(this,Oe).height,0,0,r,o),l.transferToImageBitmap()}return structuredClone(a(this,Oe))},bw=new WeakSet,S2=function(t){var l;const{pageIndex:s,accessibilityData:{altText:i}}=this._initialData,r=t.pageIndex===s,o=(((l=t.accessibilityData)==null?void 0:l.alt)||"")===i;return{isSame:!this.hasEditedComment&&!this._hasBeenMoved&&!this._hasBeenResized&&r&&o,isSameAltText:o}},O(uS,"_type","stamp"),O(uS,"_editorType",Z.STAMP);var Gl,zh,Bo,jo,xr,bn,Uo,$h,Hh,$s,Sr,Et,Ar,zo,Vh,Y,$o,tm,dS,xw,A2,vs,ti,nm,fS,sm,pS,Wh,Xy;const ks=class ks{constructor({uiManager:e,pageIndex:t,div:s,structTreeLayer:i,accessibilityManager:r,annotationLayer:o,drawLayer:l,textLayer:c,viewport:u,l10n:h}){p(this,tm);p(this,xw);p(this,vs);p(this,nm);p(this,sm);p(this,Wh);p(this,Gl,void 0);p(this,zh,!1);p(this,Bo,null);p(this,jo,null);p(this,xr,null);p(this,bn,new Map);p(this,Uo,!1);p(this,$h,!1);p(this,Hh,!1);p(this,$s,null);p(this,Sr,null);p(this,Et,null);p(this,Ar,null);p(this,zo,null);p(this,Vh,-1);p(this,Y,void 0);const d=[...a(ks,$o).values()];if(!ks._initialized){ks._initialized=!0;for(const f of d)f.initialize(h,e)}e.registerEditorTypes(d),g(this,Y,e),this.pageIndex=t,this.div=s,g(this,Gl,r),g(this,Bo,o),this.viewport=u,g(this,Et,c),this.drawLayer=l,this._structTree=i,a(this,Y).addLayer(this)}get isEmpty(){return a(this,bn).size===0}get isInvisible(){return this.isEmpty&&a(this,Y).getMode()===Z.NONE}updateToolbar(e){a(this,Y).updateToolbar(e)}updateMode(e=a(this,Y).getMode()){switch(A(this,Wh,Xy).call(this),e){case Z.NONE:this.div.classList.toggle("nonEditing",!0),this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case Z.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case Z.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:t}=this.div;if(t.toggle("nonEditing",!1),e===Z.POPUP)t.toggle("commentEditing",!0);else{t.toggle("commentEditing",!1);for(const s of a(ks,$o).values())t.toggle(`${s._type}Editing`,e===s._editorType)}this.div.hidden=!1}hasTextLayer(e){var t;return e===((t=a(this,Et))==null?void 0:t.div)}setEditingState(e){a(this,Y).setEditingState(e)}addCommands(e){a(this,Y).addCommands(e)}cleanUndoStack(e){a(this,Y).cleanUndoStack(e)}toggleDrawing(e=!1){this.div.classList.toggle("drawing",!e)}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}toggleAnnotationLayerPointerEvents(e=!1){var t;(t=a(this,Bo))==null||t.div.classList.toggle("disabled",!e)}async enable(){var s;g(this,Hh,!0),this.div.tabIndex=0,this.togglePointerEvents(!0),this.div.classList.toggle("nonEditing",!1),(s=a(this,zo))==null||s.abort(),g(this,zo,null);const e=new Set;for(const i of a(this,tm,dS))i.enableEditing(),i.show(!0),i.annotationElementId&&(a(this,Y).removeChangedExistingAnnotation(i),e.add(i.annotationElementId));const t=a(this,Bo);if(t)for(const i of t.getEditableAnnotations()){if(i.hide(),a(this,Y).isDeletedAnnotationElement(i.data.id)||e.has(i.data.id))continue;const r=await this.deserialize(i);r&&(this.addOrRebuild(r),r.enableEditing())}g(this,Hh,!1),a(this,Y)._eventBus.dispatch("editorsrendered",{source:this,pageNumber:this.pageIndex+1})}disable(){var s;if(g(this,$h,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1),this.div.classList.toggle("nonEditing",!0),a(this,Et)&&!a(this,zo)){g(this,zo,new AbortController);const i=a(this,Y).combinedSignal(a(this,zo));a(this,Et).div.addEventListener("pointerdown",r=>{const{clientX:l,clientY:c,timeStamp:u}=r,h=a(this,Vh);if(u-h>500){g(this,Vh,u);return}g(this,Vh,-1);const{classList:d}=this.div;d.toggle("getElements",!0);const f=document.elementsFromPoint(l,c);if(d.toggle("getElements",!1),!this.div.contains(f[0]))return;let m;const y=new RegExp(`^${Ef}[0-9]+$`);for(const x of f)if(y.test(x.id)){m=x.id;break}if(!m)return;const w=a(this,bn).get(m);(w==null?void 0:w.annotationElementId)===null&&(r.stopPropagation(),r.preventDefault(),w.dblclick(r))},{signal:i,capture:!0})}const e=a(this,Bo);if(e){const i=new Map,r=new Map;for(const l of a(this,tm,dS)){if(l.disableEditing(),!l.annotationElementId){l.updateFakeAnnotationElement(e);continue}if(l.serialize()!==null){i.set(l.annotationElementId,l);continue}else r.set(l.annotationElementId,l);(s=this.getEditableAnnotation(l.annotationElementId))==null||s.show(),l.remove()}const o=e.getEditableAnnotations();for(const l of o){const{id:c}=l.data;if(a(this,Y).isDeletedAnnotationElement(c)){l.updateEdited({deleted:!0});continue}let u=r.get(c);if(u){u.resetAnnotationElement(l),u.show(!1),l.show();continue}u=i.get(c),u&&(a(this,Y).addChangedExistingAnnotation(u),u.renderAnnotationElement(l)&&u.show(!1)),l.show()}}A(this,Wh,Xy).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:t}=this.div;for(const i of a(ks,$o).values())t.remove(`${i._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),g(this,$h,!1)}getEditableAnnotation(e){var t;return((t=a(this,Bo))==null?void 0:t.getEditableAnnotation(e))||null}setActiveEditor(e){a(this,Y).getActive()!==e&&a(this,Y).setActiveEditor(e)}enableTextSelection(){var e;if(this.div.tabIndex=-1,(e=a(this,Et))!=null&&e.div&&!a(this,Ar)){g(this,Ar,new AbortController);const t=a(this,Y).combinedSignal(a(this,Ar));a(this,Et).div.addEventListener("pointerdown",A(this,xw,A2).bind(this),{signal:t}),a(this,Et).div.classList.add("highlighting")}}disableTextSelection(){var e;this.div.tabIndex=0,(e=a(this,Et))!=null&&e.div&&a(this,Ar)&&(a(this,Ar).abort(),g(this,Ar,null),a(this,Et).div.classList.remove("highlighting"))}enableClick(){if(a(this,jo))return;g(this,jo,new AbortController);const e=a(this,Y).combinedSignal(a(this,jo));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:e});const t=this.pointerup.bind(this);this.div.addEventListener("pointerup",t,{signal:e}),this.div.addEventListener("pointercancel",t,{signal:e})}disableClick(){var e;(e=a(this,jo))==null||e.abort(),g(this,jo,null)}attach(e){a(this,bn).set(e.id,e);const{annotationElementId:t}=e;t&&a(this,Y).isDeletedAnnotationElement(t)&&a(this,Y).removeDeletedAnnotationElement(e)}detach(e){var t;a(this,bn).delete(e.id),(t=a(this,Gl))==null||t.removePointerInTextLayer(e.contentDiv),!a(this,$h)&&e.annotationElementId&&a(this,Y).addDeletedAnnotationElement(e)}remove(e){this.detach(e),a(this,Y).removeEditor(e),e.div.remove(),e.isAttachedToDOM=!1}changeParent(e){var t;e.parent!==this&&(e.parent&&e.annotationElementId&&(a(this,Y).addDeletedAnnotationElement(e.annotationElementId),Re.deleteAnnotationElement(e),e.annotationElementId=null),this.attach(e),(t=e.parent)==null||t.detach(e),e.setParent(this),e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))}add(e){if(!(e.parent===this&&e.isAttachedToDOM)){if(this.changeParent(e),a(this,Y).addEditor(e),this.attach(e),!e.isAttachedToDOM){const t=e.render();this.div.append(t),e.isAttachedToDOM=!0}e.fixAndSetPosition(),e.onceAdded(!a(this,Hh)),a(this,Y).addToAnnotationStorage(e),e._reportTelemetry(e.telemetryInitialData)}}moveEditorInDOM(e){var s;if(!e.isAttachedToDOM)return;const{activeElement:t}=document;e.div.contains(t)&&!a(this,xr)&&(e._focusEventsAllowed=!1,g(this,xr,setTimeout(()=>{g(this,xr,null),e.div.contains(document.activeElement)?e._focusEventsAllowed=!0:(e.div.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:a(this,Y)._signal}),t.focus())},0))),e._structTreeParentId=(s=a(this,Gl))==null?void 0:s.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}addOrRebuild(e){e.needsToBeRebuilt()?(e.parent||(e.parent=this),e.rebuild(),e.show()):this.add(e)}addUndoableEditor(e){const t=()=>e._uiManager.rebuild(e),s=()=>{e.remove()};this.addCommands({cmd:t,undo:s,mustExec:!1})}getEditorByUID(e){for(const t of a(this,bn).values())if(t.uid===e)return t;return null}getNextId(){return a(this,Y).getId()}combinedSignal(e){return a(this,Y).combinedSignal(e)}canCreateNewEmptyEditor(){var e;return(e=a(this,vs,ti))==null?void 0:e.canCreateNewEmptyEditor()}async pasteEditor(e,t){this.updateToolbar(e),await a(this,Y).updateMode(e.mode);const{offsetX:s,offsetY:i}=A(this,sm,pS).call(this),r=this.getNextId(),o=A(this,nm,fS).call(this,{parent:this,id:r,x:s,y:i,uiManager:a(this,Y),isCentered:!0,...t});o&&this.add(o)}async deserialize(e){var t;return await((t=a(ks,$o).get(e.annotationType??e.annotationEditorType))==null?void 0:t.deserialize(e,this,a(this,Y)))||null}createAndAddNewEditor(e,t,s={}){const i=this.getNextId(),r=A(this,nm,fS).call(this,{parent:this,id:i,x:e.offsetX,y:e.offsetY,uiManager:a(this,Y),isCentered:t,...s});return r&&this.add(r),r}get boundingClientRect(){return this.div.getBoundingClientRect()}addNewEditor(e={}){this.createAndAddNewEditor(A(this,sm,pS).call(this),!0,e)}setSelected(e){a(this,Y).setSelected(e)}toggleSelected(e){a(this,Y).toggleSelected(e)}unselect(e){a(this,Y).unselect(e)}pointerup(e){var i;const{isMac:t}=Tt.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div||!a(this,Uo)||(g(this,Uo,!1),(i=a(this,vs,ti))!=null&&i.isDrawer&&a(this,vs,ti).supportMultipleDrawings))return;if(!a(this,zh)){g(this,zh,!0);return}const s=a(this,Y).getMode();if(s===Z.STAMP||s===Z.SIGNATURE){a(this,Y).unselectAll();return}this.createAndAddNewEditor(e,!1)}pointerdown(e){var i;if(a(this,Y).getMode()===Z.HIGHLIGHT&&this.enableTextSelection(),a(this,Uo)){g(this,Uo,!1);return}const{isMac:t}=Tt.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div)return;if(g(this,Uo,!0),(i=a(this,vs,ti))!=null&&i.isDrawer){this.startDrawingSession(e);return}const s=a(this,Y).getActive();g(this,zh,!s||s.isEmpty())}startDrawingSession(e){if(this.div.focus({preventScroll:!0}),a(this,$s)){a(this,vs,ti).startDrawing(this,a(this,Y),!1,e);return}a(this,Y).setCurrentDrawingSession(this),g(this,$s,new AbortController);const t=a(this,Y).combinedSignal(a(this,$s));this.div.addEventListener("blur",({relatedTarget:s})=>{s&&!this.div.contains(s)&&(g(this,Sr,null),this.commitOrRemove())},{signal:t}),a(this,vs,ti).startDrawing(this,a(this,Y),!1,e)}pause(e){if(e){const{activeElement:t}=document;this.div.contains(t)&&g(this,Sr,t);return}a(this,Sr)&&setTimeout(()=>{var t;(t=a(this,Sr))==null||t.focus(),g(this,Sr,null)},0)}endDrawingSession(e=!1){return a(this,$s)?(a(this,Y).setCurrentDrawingSession(null),a(this,$s).abort(),g(this,$s,null),g(this,Sr,null),a(this,vs,ti).endDrawing(e)):null}findNewParent(e,t,s){const i=a(this,Y).findParent(t,s);return i===null||i===this?!1:(i.changeParent(e),!0)}commitOrRemove(){return a(this,$s)?(this.endDrawingSession(),!0):!1}onScaleChanging(){a(this,$s)&&a(this,vs,ti).onScaleChangingWhenDrawing(this)}destroy(){var e,t;this.commitOrRemove(),((e=a(this,Y).getActive())==null?void 0:e.parent)===this&&(a(this,Y).commitOrRemove(),a(this,Y).setActiveEditor(null)),a(this,xr)&&(clearTimeout(a(this,xr)),g(this,xr,null));for(const s of a(this,bn).values())(t=a(this,Gl))==null||t.removePointerInTextLayer(s.contentDiv),s.setParent(null),s.isAttachedToDOM=!1,s.div.remove();this.div=null,a(this,bn).clear(),a(this,Y).removeLayer(this)}render({viewport:e}){this.viewport=e,na(this.div,e);for(const t of a(this,Y).getEditors(this.pageIndex))this.add(t),t.rebuild();this.updateMode()}update({viewport:e}){a(this,Y).commitOrRemove(),A(this,Wh,Xy).call(this);const t=this.viewport.rotation,s=e.rotation;if(this.viewport=e,na(this.div,{rotation:s}),t!==s)for(const i of a(this,bn).values())i.rotate(s)}get pageDimensions(){const{pageWidth:e,pageHeight:t}=this.viewport.rawDims;return[e,t]}get scale(){return a(this,Y).viewParameters.realScale}};Gl=new WeakMap,zh=new WeakMap,Bo=new WeakMap,jo=new WeakMap,xr=new WeakMap,bn=new WeakMap,Uo=new WeakMap,$h=new WeakMap,Hh=new WeakMap,$s=new WeakMap,Sr=new WeakMap,Et=new WeakMap,Ar=new WeakMap,zo=new WeakMap,Vh=new WeakMap,Y=new WeakMap,$o=new WeakMap,tm=new WeakSet,dS=function(){return a(this,bn).size!==0?a(this,bn).values():a(this,Y).getEditors(this.pageIndex)},xw=new WeakSet,A2=function(e){a(this,Y).unselectAll();const{target:t}=e;if(t===a(this,Et).div||(t.getAttribute("role")==="img"||t.classList.contains("endOfContent"))&&a(this,Et).div.contains(t)){const{isMac:s}=Tt.platform;if(e.button!==0||e.ctrlKey&&s)return;a(this,Y).showAllEditors("highlight",!0,!0),a(this,Et).div.classList.add("free"),this.toggleDrawing(),R0.startHighlighting(this,a(this,Y).direction==="ltr",{target:a(this,Et).div,x:e.x,y:e.y}),a(this,Et).div.addEventListener("pointerup",()=>{a(this,Et).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:a(this,Y)._signal}),e.preventDefault()}},vs=new WeakSet,ti=function(){return a(ks,$o).get(a(this,Y).getMode())},nm=new WeakSet,fS=function(e){const t=a(this,vs,ti);return t?new t.prototype.constructor(e):null},sm=new WeakSet,pS=function(){const{x:e,y:t,width:s,height:i}=this.boundingClientRect,r=Math.max(0,e),o=Math.max(0,t),l=Math.min(window.innerWidth,e+s),c=Math.min(window.innerHeight,t+i),u=(r+l)/2-e,h=(o+c)/2-t,[d,f]=this.viewport.rotation%180===0?[u,h]:[h,u];return{offsetX:d,offsetY:f}},Wh=new WeakSet,Xy=function(){for(const e of a(this,bn).values())e.isEmpty()&&e.remove()},O(ks,"_initialized",!1),p(ks,$o,new Map([qx,sS,uS,R0,cS].map(e=>[e._editorType,e])));let N0=ks;var Hs,sn,ql,im,Sw,E2,rm,gS,Aw,_2,om,mS;const ut=class ut{constructor({pageIndex:e}){p(this,rm);p(this,Aw);p(this,om);p(this,Hs,null);p(this,sn,new Map);p(this,ql,new Map);this.pageIndex=e}setParent(e){if(!a(this,Hs)){g(this,Hs,e);return}if(a(this,Hs)!==e){if(a(this,sn).size>0)for(const t of a(this,sn).values())t.remove(),e.append(t);g(this,Hs,e)}}static get _svgFactory(){return ie(this,"_svgFactory",new Lf)}draw(e,t=!1,s=!1){const i=ct(ut,im)._++,r=A(this,rm,gS).call(this),o=ut._svgFactory.createElement("defs");r.append(o);const l=ut._svgFactory.createElement("path");o.append(l);const c=`path_p${this.pageIndex}_${i}`;l.setAttribute("id",c),l.setAttribute("vector-effect","non-scaling-stroke"),t&&a(this,ql).set(i,l);const u=s?A(this,Aw,_2).call(this,o,c):null,h=ut._svgFactory.createElement("use");return r.append(h),h.setAttribute("href",`#${c}`),this.updateProperties(r,e),a(this,sn).set(i,r),{id:i,clipPathId:`url(#${u})`}}drawOutline(e,t){const s=ct(ut,im)._++,i=A(this,rm,gS).call(this),r=ut._svgFactory.createElement("defs");i.append(r);const o=ut._svgFactory.createElement("path");r.append(o);const l=`path_p${this.pageIndex}_${s}`;o.setAttribute("id",l),o.setAttribute("vector-effect","non-scaling-stroke");let c;if(t){const d=ut._svgFactory.createElement("mask");r.append(d),c=`mask_p${this.pageIndex}_${s}`,d.setAttribute("id",c),d.setAttribute("maskUnits","objectBoundingBox");const f=ut._svgFactory.createElement("rect");d.append(f),f.setAttribute("width","1"),f.setAttribute("height","1"),f.setAttribute("fill","white");const m=ut._svgFactory.createElement("use");d.append(m),m.setAttribute("href",`#${l}`),m.setAttribute("stroke","none"),m.setAttribute("fill","black"),m.setAttribute("fill-rule","nonzero"),m.classList.add("mask")}const u=ut._svgFactory.createElement("use");i.append(u),u.setAttribute("href",`#${l}`),c&&u.setAttribute("mask",`url(#${c})`);const h=u.cloneNode();return i.append(h),u.classList.add("mainOutline"),h.classList.add("secondaryOutline"),this.updateProperties(i,e),a(this,sn).set(s,i),s}finalizeDraw(e,t){a(this,ql).delete(e),this.updateProperties(e,t)}updateProperties(e,t){var c;if(!t)return;const{root:s,bbox:i,rootClass:r,path:o}=t,l=typeof e=="number"?a(this,sn).get(e):e;if(l){if(s&&A(this,om,mS).call(this,l,s),i&&A(c=ut,Sw,E2).call(c,l,i),r){const{classList:u}=l;for(const[h,d]of Object.entries(r))u.toggle(h,d)}if(o){const h=l.firstChild.firstChild;A(this,om,mS).call(this,h,o)}}}updateParent(e,t){if(t===this)return;const s=a(this,sn).get(e);s&&(a(t,Hs).append(s),a(this,sn).delete(e),a(t,sn).set(e,s))}remove(e){a(this,ql).delete(e),a(this,Hs)!==null&&(a(this,sn).get(e).remove(),a(this,sn).delete(e))}destroy(){g(this,Hs,null);for(const e of a(this,sn).values())e.remove();a(this,sn).clear(),a(this,ql).clear()}};Hs=new WeakMap,sn=new WeakMap,ql=new WeakMap,im=new WeakMap,Sw=new WeakSet,E2=function(e,[t,s,i,r]){const{style:o}=e;o.top=`${100*s}%`,o.left=`${100*t}%`,o.width=`${100*i}%`,o.height=`${100*r}%`},rm=new WeakSet,gS=function(){const e=ut._svgFactory.create(1,1,!0);return a(this,Hs).append(e),e.setAttribute("aria-hidden",!0),e},Aw=new WeakSet,_2=function(e,t){const s=ut._svgFactory.createElement("clipPath");e.append(s);const i=`clip_${t}`;s.setAttribute("id",i),s.setAttribute("clipPathUnits","objectBoundingBox");const r=ut._svgFactory.createElement("use");return s.append(r),r.setAttribute("href",`#${t}`),r.classList.add("clip"),i},om=new WeakSet,mS=function(e,t){for(const[s,i]of Object.entries(t))i===null?e.removeAttribute(s):e.setAttribute(s,i)},p(ut,Sw),p(ut,im,0);let M0=ut;globalThis._pdfjsTestingUtils={HighlightOutliner:Yx};globalThis.pdfjsLib={AbortException:Lr,AnnotationEditorLayer:N0,AnnotationEditorParamsType:ae,AnnotationEditorType:Z,AnnotationEditorUIManager:sa,AnnotationLayer:zA,AnnotationMode:ki,AnnotationType:et,applyOpacity:SP,build:CR,ColorPicker:Rf,createValidAbsoluteUrl:kA,CSSConstants:xP,DOMSVGFactory:Lf,DrawLayer:M0,FeatureTest:Tt,fetchData:ld,findContrastColor:AP,getDocument:OA,getFilenameFromUrl:vP,getPdfFilenameFromUrl:wP,getRGB:cd,getUuid:RA,getXfaPageViewport:bP,GlobalWorkerOptions:Qn,ImageKind:sf,InvalidPDFException:S0,isDataScheme:wm,isPdfFile:Jw,isValidExplicitDest:nR,MathClamp:Xt,noContextMenu:ts,normalizeUnicode:mP,OPS:ed,OutputScale:Ks,PasswordResponses:pP,PDFDataRangeTransport:BA,PDFDateString:Tf,PDFWorker:td,PermissionFlag:fP,PixelsPerInch:Nr,RenderingCancelledException:Qw,renderRichText:MA,ResponseException:_f,setLayerDimensions:na,shadow:ie,SignatureExtractor:ot,stopEvent:We,SupportedImageMimeTypes:A0,TextLayer:Pf,TouchManager:kf,updateUrlHash:PA,Util:V,VerbosityLevel:mm,version:_R,XfaLayer:NA};const vB=Object.freeze(Object.defineProperty({__proto__:null,AbortException:Lr,AnnotationEditorLayer:N0,AnnotationEditorParamsType:ae,AnnotationEditorType:Z,AnnotationEditorUIManager:sa,AnnotationLayer:zA,AnnotationMode:ki,AnnotationType:et,CSSConstants:xP,ColorPicker:Rf,DOMSVGFactory:Lf,DrawLayer:M0,FeatureTest:Tt,GlobalWorkerOptions:Qn,ImageKind:sf,InvalidPDFException:S0,MathClamp:Xt,OPS:ed,OutputScale:Ks,PDFDataRangeTransport:BA,PDFDateString:Tf,PDFWorker:td,PasswordResponses:pP,PermissionFlag:fP,PixelsPerInch:Nr,RenderingCancelledException:Qw,ResponseException:_f,SignatureExtractor:ot,SupportedImageMimeTypes:A0,TextLayer:Pf,TouchManager:kf,Util:V,VerbosityLevel:mm,XfaLayer:NA,applyOpacity:SP,build:CR,createValidAbsoluteUrl:kA,fetchData:ld,findContrastColor:AP,getDocument:OA,getFilenameFromUrl:vP,getPdfFilenameFromUrl:wP,getRGB:cd,getUuid:RA,getXfaPageViewport:bP,isDataScheme:wm,isPdfFile:Jw,isValidExplicitDest:nR,noContextMenu:ts,normalizeUnicode:mP,renderRichText:MA,setLayerDimensions:na,shadow:ie,stopEvent:We,updateUrlHash:PA,version:_R},Symbol.toStringTag,{value:"Module"}));function C2(n){var e,t,s="";if(typeof n=="string"||typeof n=="number")s+=n;else if(typeof n=="object")if(Array.isArray(n)){var i=n.length;for(e=0;e<i;e++)n[e]&&(t=C2(n[e]))&&(s&&(s+=" "),s+=t)}else for(t in n)n[t]&&(s&&(s+=" "),s+=t);return s}function t1(){for(var n,e,t=0,s="",i=arguments.length;t<i;t++)(n=arguments[t])&&(e=C2(n))&&(s&&(s+=" "),s+=e);return s}var oC=Object.prototype.hasOwnProperty;function aC(n,e,t){for(t of n.keys())if(Wc(t,e))return t}function Wc(n,e){var t,s,i;if(n===e)return!0;if(n&&e&&(t=n.constructor)===e.constructor){if(t===Date)return n.getTime()===e.getTime();if(t===RegExp)return n.toString()===e.toString();if(t===Array){if((s=n.length)===e.length)for(;s--&&Wc(n[s],e[s]););return s===-1}if(t===Set){if(n.size!==e.size)return!1;for(s of n)if(i=s,i&&typeof i=="object"&&(i=aC(e,i),!i)||!e.has(i))return!1;return!0}if(t===Map){if(n.size!==e.size)return!1;for(s of n)if(i=s[0],i&&typeof i=="object"&&(i=aC(e,i),!i)||!Wc(s[1],e.get(i)))return!1;return!0}if(t===ArrayBuffer)n=new Uint8Array(n),e=new Uint8Array(e);else if(t===DataView){if((s=n.byteLength)===e.byteLength)for(;s--&&n.getInt8(s)===e.getInt8(s););return s===-1}if(ArrayBuffer.isView(n)){if((s=n.byteLength)===e.byteLength)for(;s--&&n[s]===e[s];);return s===-1}if(!t||typeof n=="object"){s=0;for(t in n)if(oC.call(n,t)&&++s&&!oC.call(e,t)||!(t in e)||!Wc(n[t],e[t]))return!1;return Object.keys(e).length===s}}return n!==n&&e!==e}function Am(n){let e=!1;return{promise:new Promise((s,i)=>{n.then(r=>!e&&s(r)).catch(r=>!e&&i(r))}),cancel(){e=!0}}}const wB=["onCopy","onCut","onPaste"],bB=["onCompositionEnd","onCompositionStart","onCompositionUpdate"],xB=["onFocus","onBlur"],SB=["onInput","onInvalid","onReset","onSubmit"],AB=["onLoad","onError"],EB=["onKeyDown","onKeyPress","onKeyUp"],_B=["onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEmptied","onEncrypted","onEnded","onError","onLoadedData","onLoadedMetadata","onLoadStart","onPause","onPlay","onPlaying","onProgress","onRateChange","onSeeked","onSeeking","onStalled","onSuspend","onTimeUpdate","onVolumeChange","onWaiting"],CB=["onClick","onContextMenu","onDoubleClick","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp"],TB=["onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop"],kB=["onSelect"],PB=["onTouchCancel","onTouchEnd","onTouchMove","onTouchStart"],RB=["onPointerDown","onPointerMove","onPointerUp","onPointerCancel","onGotPointerCapture","onLostPointerCapture","onPointerEnter","onPointerLeave","onPointerOver","onPointerOut"],LB=["onScroll"],NB=["onWheel"],MB=["onAnimationStart","onAnimationEnd","onAnimationIteration"],DB=["onTransitionEnd"],IB=["onToggle"],FB=["onChange"],OB=[...wB,...bB,...xB,...SB,...AB,...EB,..._B,...CB,...TB,...kB,...PB,...RB,...LB,...NB,...MB,...DB,...FB,...IB];function T2(n,e){const t={};for(const s of OB){const i=n[s];i&&(e?t[s]=r=>i(r,e(s)):t[s]=i)}return t}var BB=!0,q1="Invariant failed";function Ee(n,e){if(!n){if(BB)throw new Error(q1);var t=typeof e=="function"?e():e,s=t?"".concat(q1,": ").concat(t):q1;throw new Error(s)}}var jB=function(){},UB=jB;const Qt=yC(UB),zB=R.createContext(null),k2=zB,$B="noopener noreferrer nofollow";class HB{constructor(){this.externalLinkEnabled=!0,this.externalLinkRel=void 0,this.externalLinkTarget=void 0,this.isInPresentationMode=!1,this.pdfDocument=void 0,this.pdfViewer=void 0}setDocument(e){this.pdfDocument=e}setViewer(e){this.pdfViewer=e}setExternalLinkRel(e){this.externalLinkRel=e}setExternalLinkTarget(e){this.externalLinkTarget=e}setHash(){}setHistory(){}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return Ee(this.pdfViewer,"PDF viewer is not initialized."),this.pdfViewer.currentPageNumber||0}set page(e){Ee(this.pdfViewer,"PDF viewer is not initialized."),this.pdfViewer.currentPageNumber=e}get rotation(){return 0}set rotation(e){}addLinkAttributes(e,t,s){e.href=t,e.rel=this.externalLinkRel||$B,e.target=s?"_blank":this.externalLinkTarget||""}goToDestination(e){return new Promise(t=>{Ee(this.pdfDocument,"PDF document not loaded."),Ee(e,"Destination is not specified."),typeof e=="string"?this.pdfDocument.getDestination(e).then(t):Array.isArray(e)?t(e):e.then(t)}).then(t=>{Ee(Array.isArray(t),`"${t}" is not a valid destination array.`);const s=t[0];new Promise(i=>{Ee(this.pdfDocument,"PDF document not loaded."),s instanceof Object?this.pdfDocument.getPageIndex(s).then(r=>{i(r)}).catch(()=>{Ee(!1,`"${s}" is not a valid page reference.`)}):typeof s=="number"?i(s):Ee(!1,`"${s}" is not a valid destination reference.`)}).then(i=>{const r=i+1;Ee(this.pdfViewer,"PDF viewer is not initialized."),Ee(r>=1&&r<=this.pagesCount,`"${r}" is not a valid page number.`),this.pdfViewer.scrollPageIntoView({dest:t,pageIndex:i,pageNumber:r})})})}goToPage(e){const t=e-1;Ee(this.pdfViewer,"PDF viewer is not initialized."),Ee(e>=1&&e<=this.pagesCount,`"${e}" is not a valid page number.`),this.pdfViewer.scrollPageIntoView({pageIndex:t,pageNumber:e})}goToXY(){}cachePageRef(){}getDestinationHash(){return"#"}getAnchorUrl(){return"#"}executeNamedAction(){}executeSetOCGState(){}isPageVisible(){return!0}isPageCached(){return!0}navigateTo(e){this.goToDestination(e)}}function Gc({children:n,type:e}){return _.jsx("div",{className:`react-pdf__message react-pdf__message--${e}`,children:n})}const VB={NEED_PASSWORD:1,INCORRECT_PASSWORD:2},lC=VB;function WB(n,e){switch(e.type){case"RESOLVE":return{value:e.value,error:void 0};case"REJECT":return{value:!1,error:e.error};case"RESET":return{value:void 0,error:void 0};default:return n}}function nd(){return R.useReducer(WB,{value:void 0,error:void 0})}const n1=typeof window<"u",P2=n1&&window.location.protocol==="file:";function GB(n){return typeof n<"u"}function aa(n){return GB(n)&&n!==null}function qB(n){return typeof n=="string"}function XB(n){return n instanceof ArrayBuffer}function YB(n){return Ee(n1,"isBlob can only be used in a browser environment"),n instanceof Blob}function yS(n){return qB(n)&&/^data:/.test(n)}function cC(n){Ee(yS(n),"Invalid data URI.");const[e="",t=""]=n.split(",");return e.split(";").indexOf("base64")!==-1?atob(t):unescape(t)}function KB(){return n1&&window.devicePixelRatio||1}const R2="On Chromium based browsers, you can use --allow-file-access-from-files flag for debugging purposes.";function uC(){Qt(!P2,`Loading PDF as base64 strings/URLs may not work on protocols other than HTTP/HTTPS. ${R2}`)}function QB(){Qt(!P2,`Loading PDF.js worker may not work on protocols other than HTTP/HTTPS. ${R2}`)}function ic(n){n!=null&&n.cancel&&n.cancel()}function vS(n,e){return Object.defineProperty(n,"width",{get(){return this.getViewport({scale:e}).width},configurable:!0}),Object.defineProperty(n,"height",{get(){return this.getViewport({scale:e}).height},configurable:!0}),Object.defineProperty(n,"originalWidth",{get(){return this.getViewport({scale:1}).width},configurable:!0}),Object.defineProperty(n,"originalHeight",{get(){return this.getViewport({scale:1}).height},configurable:!0}),n}function L2(n){return n.name==="AbortException"||n.name==="RenderingCancelledException"}function JB(n){return new Promise((e,t)=>{const s=new FileReader;s.onload=()=>{if(!s.result)return t(new Error("Error while reading a file."));e(s.result)},s.onerror=i=>{if(!i.target)return t(new Error("Error while reading a file."));const{error:r}=i.target;if(!r)return t(new Error("Error while reading a file."));switch(r.code){case r.NOT_FOUND_ERR:return t(new Error("Error while reading a file: File not found."));case r.SECURITY_ERR:return t(new Error("Error while reading a file: Security error."));case r.ABORT_ERR:return t(new Error("Error while reading a file: Aborted."));default:return t(new Error("Error while reading a file."))}},s.readAsArrayBuffer(n)})}const{PDFDataRangeTransport:ZB}=vB,ej=(n,e)=>{switch(e){case lC.NEED_PASSWORD:{const t=prompt("Enter the password to open this PDF file.");n(t);break}case lC.INCORRECT_PASSWORD:{const t=prompt("Invalid password. Please try again.");n(t);break}}};function hC(n){return typeof n=="object"&&n!==null&&("data"in n||"range"in n||"url"in n)}const tj=R.forwardRef(function({children:e,className:t,error:s="Failed to load PDF file.",externalLinkRel:i,externalLinkTarget:r,file:o,inputRef:l,imageResourcesPath:c,loading:u="Loading PDF",noData:h="No PDF file specified.",onItemClick:d,onLoadError:f,onLoadProgress:m,onLoadSuccess:y,onPassword:w=ej,onSourceError:x,onSourceSuccess:v,options:b,renderMode:S,rotate:E,scale:C,...T},k){const[P,N]=nd(),{value:M,error:I}=P,[j,H]=nd(),{value:z,error:Q}=j,F=R.useRef(new HB),$=R.useRef([]),L=R.useRef(void 0),U=R.useRef(void 0);o&&o!==L.current&&hC(o)&&(Qt(!Wc(o,L.current),`File prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "file" prop.`),L.current=o),b&&b!==U.current&&(Qt(!Wc(b,U.current),`Options prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "options" prop.`),U.current=b);const K=R.useRef({scrollPageIntoView:De=>{const{dest:Ce,pageNumber:Ze,pageIndex:hn=Ze-1}=De;if(d){d({dest:Ce,pageIndex:hn,pageNumber:Ze});return}const mt=$.current[hn];if(mt){mt.scrollIntoView();return}Qt(!1,`An internal link leading to page ${Ze} was clicked, but neither <Document> was provided with onItemClick nor it was able to find the page within itself. Either provide onItemClick to <Document> and handle navigating by yourself or ensure that all pages are rendered within <Document>.`)}});R.useImperativeHandle(k,()=>({linkService:F,pages:$,viewer:K}),[]);function J(){v&&v()}function X(){I&&(Qt(!1,I.toString()),x&&x(I))}function te(){N({type:"RESET"})}R.useEffect(te,[o,N]);const fe=R.useCallback(async()=>{if(!o)return null;if(typeof o=="string")return yS(o)?{data:cC(o)}:(uC(),{url:o});if(o instanceof ZB)return{range:o};if(XB(o))return{data:o};if(n1&&YB(o))return{data:await JB(o)};if(Ee(typeof o=="object","Invalid parameter in file, need either Uint8Array, string or a parameter object"),Ee(hC(o),"Invalid parameter object: need either .data, .range or .url"),"url"in o&&typeof o.url=="string"){if(yS(o.url)){const{url:De,...Ce}=o;return{data:cC(De),...Ce}}uC()}return o},[o]);R.useEffect(()=>{const De=Am(fe());return De.promise.then(Ce=>{N({type:"RESOLVE",value:Ce})}).catch(Ce=>{N({type:"REJECT",error:Ce})}),()=>{ic(De)}},[fe,N]),R.useEffect(()=>{if(!(typeof M>"u")){if(M===!1){X();return}J()}},[M]);function Le(){z&&(y&&y(z),$.current=new Array(z.numPages),F.current.setDocument(z))}function ze(){Q&&(Qt(!1,Q.toString()),f&&f(Q))}R.useEffect(function(){H({type:"RESET"})},[H,M]),R.useEffect(function(){if(!M)return;const Ce=b?{...M,...b}:M,Ze=OA(Ce);m&&(Ze.onProgress=m),w&&(Ze.onPassword=w);const hn=Ze;return hn.promise.then(mt=>{hn.destroyed||H({type:"RESOLVE",value:mt})}).catch(mt=>{hn.destroyed||H({type:"REJECT",error:mt})}),()=>{hn.destroy()}},[b,H,M]),R.useEffect(()=>{if(!(typeof z>"u")){if(z===!1){ze();return}Le()}},[z]),R.useEffect(function(){F.current.setViewer(K.current),F.current.setExternalLinkRel(i),F.current.setExternalLinkTarget(r)},[i,r]);const ue=R.useCallback((De,Ce)=>{$.current[De]=Ce},[]),Li=R.useCallback(De=>{delete $.current[De]},[]),Ni=R.useMemo(()=>({imageResourcesPath:c,linkService:F.current,onItemClick:d,pdf:z,registerPage:ue,renderMode:S,rotate:E,scale:C,unregisterPage:Li}),[c,d,z,ue,S,E,C,Li]),kn=R.useMemo(()=>T2(T,()=>z),[T,z]);function pe(){function De(Ze){return!!(Ze!=null&&Ze.pdf)}if(!De(Ni))throw new Error("pdf is undefined");const Ce=typeof e=="function"?e(Ni):e;return _.jsx(k2.Provider,{value:Ni,children:Ce})}function Mi(){return o?z==null?_.jsx(Gc,{type:"loading",children:typeof u=="function"?u():u}):z===!1?_.jsx(Gc,{type:"error",children:typeof s=="function"?s():s}):pe():_.jsx(Gc,{type:"no-data",children:typeof h=="function"?h():h})}return _.jsx("div",{className:t1("react-pdf__Document",t),ref:l,...kn,children:Mi()})}),wS=tj;function N2(){return R.useContext(k2)}function M2(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];var t=n.filter(Boolean);if(t.length<=1){var s=t[0];return s||null}return function(r){for(var o=0,l=t;o<l.length;o++){var c=l[o];typeof c=="function"?c(r):c&&(c.current=r)}}}const nj=R.createContext(null),D2=nj;function s1(){return R.useContext(D2)}function sj(){const n=N2(),e=s1();Ee(e,"Unable to find Page context.");const t={...n,...e},{filterAnnotations:s,imageResourcesPath:i,linkService:r,onGetAnnotationsError:o,onGetAnnotationsSuccess:l,onRenderAnnotationLayerError:c,onRenderAnnotationLayerSuccess:u,page:h,pdf:d,renderForms:f,rotate:m,scale:y=1}=t;Ee(d,"Attempted to load page annotations, but no document was specified. Wrap <Page /> in a <Document /> or pass explicit `pdf` prop."),Ee(h,"Attempted to load page annotations, but no page was specified."),Ee(r,"Attempted to load page annotations, but no linkService was specified.");const[w,x]=nd(),{value:v,error:b}=w,S=R.useRef(null);Qt(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-annotation-layer"),10)===1,"AnnotationLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-annotations");function E(){v&&l&&l(v)}function C(){b&&(Qt(!1,b.toString()),o&&o(b))}R.useEffect(function(){x({type:"RESET"})},[x,h]),R.useEffect(function(){if(!h)return;const M=Am(h.getAnnotations()),I=M;return M.promise.then(j=>{x({type:"RESOLVE",value:j})}).catch(j=>{x({type:"REJECT",error:j})}),()=>{ic(I)}},[x,h]),R.useEffect(()=>{if(v!==void 0){if(v===!1){C();return}E()}},[v]);function T(){u&&u()}function k(N){Qt(!1,`${N}`),c&&c(N)}const P=R.useMemo(()=>h.getViewport({scale:y,rotation:m}),[h,m,y]);return R.useEffect(function(){if(!d||!h||!r||!v)return;const{current:M}=S;if(!M)return;const I=P.clone({dontFlip:!0}),j={accessibilityManager:null,annotationCanvasMap:null,annotationEditorUIManager:null,annotationStorage:d.annotationStorage,commentManager:null,div:M,l10n:null,linkService:r,page:h,structTreeLayer:null,viewport:I},H={annotations:s?s({annotations:v}):v,annotationStorage:d.annotationStorage,div:M,imageResourcesPath:i,linkService:r,page:h,renderForms:f,viewport:I};M.innerHTML="";try{new zA(j).render(H),T()}catch(z){k(z)}return()=>{}},[v,s,i,r,h,d,f,P]),_.jsx("div",{className:t1("react-pdf__Page__annotations","annotationLayer"),ref:S})}const I2={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},ij=/^H(\d+)$/;function rj(n){return n in I2}function i1(n){return"children"in n}function F2(n){return i1(n)?n.children.length===1&&0 in n.children&&"id"in n.children[0]:!1}function oj(n){const e={};if(i1(n)){const{role:t}=n,s=t.match(ij);if(s)e.role="heading",e["aria-level"]=Number(s[1]);else if(rj(t)){const i=I2[t];i&&(e.role=i)}}return e}function O2(n){const e={};if(i1(n)){if(n.alt!==void 0&&(e["aria-label"]=n.alt),n.lang!==void 0&&(e.lang=n.lang),F2(n)){const[t]=n.children;if(t){const s=O2(t);return{...e,...s}}}}else"id"in n&&(e["aria-owns"]=n.id);return e}function aj(n){return n?{...oj(n),...O2(n)}:null}function B2({className:n,node:e}){const t=R.useMemo(()=>aj(e),[e]),s=R.useMemo(()=>!i1(e)||F2(e)?null:e.children.map((i,r)=>_.jsx(B2,{node:i},r)),[e]);return _.jsx("span",{className:n,...t,children:s})}function lj(){const n=s1();Ee(n,"Unable to find Page context.");const{onGetStructTreeError:e,onGetStructTreeSuccess:t}=n,[s,i]=nd(),{value:r,error:o}=s,{customTextRenderer:l,page:c}=n;function u(){r&&t&&t(r)}function h(){o&&(Qt(!1,o.toString()),e&&e(o))}return R.useEffect(function(){i({type:"RESET"})},[i,c]),R.useEffect(function(){if(l||!c)return;const f=Am(c.getStructTree()),m=f;return f.promise.then(y=>{i({type:"RESOLVE",value:y})}).catch(y=>{i({type:"REJECT",error:y})}),()=>ic(m)},[l,c,i]),R.useEffect(()=>{if(r!==void 0){if(r===!1){h();return}u()}},[r]),r?_.jsx(B2,{className:"react-pdf__Page__structTree structTree",node:r}):null}const dC=ki;function cj(n){const e=s1();Ee(e,"Unable to find Page context.");const t={...e,...n},{_className:s,canvasBackground:i,devicePixelRatio:r=KB(),onRenderError:o,onRenderSuccess:l,page:c,renderForms:u,renderTextLayer:h,rotate:d,scale:f}=t,{canvasRef:m}=n;Ee(c,"Attempted to render page canvas, but no page was specified.");const y=R.useRef(null);function w(){c&&l&&l(vS(c,f))}function x(E){L2(E)||(Qt(!1,E.toString()),o&&o(E))}const v=R.useMemo(()=>c.getViewport({scale:f*r,rotation:d}),[r,c,d,f]),b=R.useMemo(()=>c.getViewport({scale:f,rotation:d}),[c,d,f]);R.useEffect(function(){if(!c)return;c.cleanup();const{current:C}=y;if(!C)return;C.width=v.width,C.height=v.height,C.style.width=`${Math.floor(b.width)}px`,C.style.height=`${Math.floor(b.height)}px`,C.style.visibility="hidden";const T={annotationMode:u?dC.ENABLE_FORMS:dC.ENABLE,canvas:C,canvasContext:C.getContext("2d",{alpha:!1}),viewport:v};i&&(T.background=i);const k=c.render(T),P=k;return k.promise.then(()=>{C.style.visibility="",w()}).catch(x),()=>ic(P)},[i,c,u,v,b]);const S=R.useCallback(()=>{const{current:E}=y;E&&(E.width=0,E.height=0)},[]);return R.useEffect(()=>S,[S]),_.jsx("canvas",{className:`${s}__canvas`,dir:"ltr",ref:M2(m,y),style:{display:"block",userSelect:"none"},children:h?_.jsx(lj,{}):null})}function uj(n){return"str"in n}function hj(){const n=s1();Ee(n,"Unable to find Page context.");const{customTextRenderer:e,onGetTextError:t,onGetTextSuccess:s,onRenderTextLayerError:i,onRenderTextLayerSuccess:r,page:o,pageIndex:l,pageNumber:c,rotate:u,scale:h}=n;Ee(o,"Attempted to load page text content, but no page was specified.");const[d,f]=nd(),{value:m,error:y}=d,w=R.useRef(null);Qt(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-text-layer"),10)===1,"TextLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-text-layer");function x(){m&&s&&s(m)}function v(){y&&(Qt(!1,y.toString()),t&&t(y))}R.useEffect(function(){f({type:"RESET"})},[o,f]),R.useEffect(function(){if(!o)return;const P=Am(o.getTextContent()),N=P;return P.promise.then(M=>{f({type:"RESOLVE",value:M})}).catch(M=>{f({type:"REJECT",error:M})}),()=>ic(N)},[o,f]),R.useEffect(()=>{if(m!==void 0){if(m===!1){v();return}x()}},[m]);const b=R.useCallback(()=>{r&&r()},[r]),S=R.useCallback(k=>{L2(k)||(Qt(!1,k.toString()),i&&i(k))},[i]);function E(){const k=w.current;k&&k.classList.add("selecting")}function C(){const k=w.current;k&&k.classList.remove("selecting")}const T=R.useMemo(()=>o.getViewport({scale:h,rotation:u}),[o,u,h]);return R.useLayoutEffect(function(){if(!o||!m)return;const{current:P}=w;if(!P)return;P.innerHTML="";const N=o.streamTextContent({includeMarkedContent:!0}),M={container:P,textContentSource:N,viewport:T},I=new Pf(M),j=I;return I.render().then(()=>{const H=document.createElement("div");H.className="endOfContent",P.append(H);const z=P.querySelectorAll('[role="presentation"]');if(e){let Q=0;m.items.forEach((F,$)=>{if(!uj(F))return;const L=z[Q];if(!L)return;const U=e({pageIndex:l,pageNumber:c,itemIndex:$,...F});L.innerHTML=U,Q+=F.str&&F.hasEOL?2:1})}b()}).catch(S),()=>ic(j)},[e,S,b,o,l,c,m,T]),_.jsx("div",{className:t1("react-pdf__Page__textContent","textLayer"),onMouseUp:C,onMouseDown:E,ref:w})}const fC=1;function bS(n){const t={...N2(),...n},{_className:s="react-pdf__Page",_enableRegisterUnregisterPage:i=!0,canvasBackground:r,canvasRef:o,children:l,className:c,customRenderer:u,customTextRenderer:h,devicePixelRatio:d,error:f="Failed to load the page.",filterAnnotations:m,height:y,inputRef:w,loading:x="Loading page",noData:v="No page specified.",onGetAnnotationsError:b,onGetAnnotationsSuccess:S,onGetStructTreeError:E,onGetStructTreeSuccess:C,onGetTextError:T,onGetTextSuccess:k,onLoadError:P,onLoadSuccess:N,onRenderAnnotationLayerError:M,onRenderAnnotationLayerSuccess:I,onRenderError:j,onRenderSuccess:H,onRenderTextLayerError:z,onRenderTextLayerSuccess:Q,pageIndex:F,pageNumber:$,pdf:L,registerPage:U,renderAnnotationLayer:K=!0,renderForms:J=!1,renderMode:X="canvas",renderTextLayer:te=!0,rotate:fe,scale:Le=fC,unregisterPage:ze,width:ue,...Li}=t,[Ni,kn]=nd(),{value:pe,error:Mi}=Ni,De=R.useRef(null);Ee(L,"Attempted to load a page, but no document was specified. Wrap <Page /> in a <Document /> or pass explicit `pdf` prop.");const Ce=aa($)?$-1:F??null,Ze=$??(aa(F)?F+1:null),hn=fe??(pe?pe.rotate:null),mt=R.useMemo(()=>{if(!pe)return null;let Dr=1;const uc=Le??fC;if(ue||y){const Ir=pe.getViewport({scale:1,rotation:hn});ue?Dr=ue/Ir.width:y&&(Dr=y/Ir.height)}return uc*Dr},[y,pe,hn,Le,ue]);R.useEffect(function(){return()=>{aa(Ce)&&i&&ze&&ze(Ce)}},[i,L,Ce,ze]);function j2(){if(N){if(!pe||!mt)return;N(vS(pe,mt))}if(i&&U){if(!aa(Ce)||!De.current)return;U(Ce,De.current)}}function U2(){Mi&&(Qt(!1,Mi.toString()),P&&P(Mi))}R.useEffect(function(){kn({type:"RESET"})},[kn,L,Ce]),R.useEffect(function(){if(!L||!Ze)return;const uc=Am(L.getPage(Ze)),Ir=uc;return uc.promise.then(o1=>{kn({type:"RESOLVE",value:o1})}).catch(o1=>{kn({type:"REJECT",error:o1})}),()=>ic(Ir)},[kn,L,Ze]),R.useEffect(()=>{if(pe!==void 0){if(pe===!1){U2();return}j2()}},[pe,mt]);const r1=R.useMemo(()=>aa(Ce)&&Ze&&aa(hn)&&aa(mt)?{_className:s,canvasBackground:r,customTextRenderer:h,devicePixelRatio:d,filterAnnotations:m,onGetAnnotationsError:b,onGetAnnotationsSuccess:S,onGetStructTreeError:E,onGetStructTreeSuccess:C,onGetTextError:T,onGetTextSuccess:k,onRenderAnnotationLayerError:M,onRenderAnnotationLayerSuccess:I,onRenderError:j,onRenderSuccess:H,onRenderTextLayerError:z,onRenderTextLayerSuccess:Q,page:pe,pageIndex:Ce,pageNumber:Ze,renderForms:J,renderTextLayer:te,rotate:hn,scale:mt}:null,[s,r,h,d,m,b,S,E,C,T,k,M,I,j,H,z,Q,pe,Ce,Ze,J,te,hn,mt]),z2=R.useMemo(()=>T2(Li,()=>pe&&(mt?vS(pe,mt):void 0)),[Li,pe,mt]),Em=`${Ce}@${mt}/${hn}`;function $2(){switch(X){case"custom":return Ee(u,'renderMode was set to "custom", but no customRenderer was passed.'),_.jsx(u,{},`${Em}_custom`);case"none":return null;case"canvas":default:return _.jsx(cj,{canvasRef:o},`${Em}_canvas`)}}function H2(){return te?_.jsx(hj,{},`${Em}_text`):null}function V2(){return K?_.jsx(sj,{},`${Em}_annotations`):null}function W2(){function Dr(Ir){return!!(Ir!=null&&Ir.page)}if(!Dr(r1))throw new Error("page is undefined");const uc=typeof l=="function"?l(r1):l;return _.jsxs(D2.Provider,{value:r1,children:[$2(),H2(),V2(),uc]})}function G2(){return Ze?L===null||pe===void 0||pe===null?_.jsx(Gc,{type:"loading",children:typeof x=="function"?x():x}):L===!1||pe===!1?_.jsx(Gc,{type:"error",children:typeof f=="function"?f():f}):W2():_.jsx(Gc,{type:"no-data",children:typeof v=="function"?v():v})}return _.jsx("div",{className:t1(s,c),"data-page-number":Ze,ref:M2(w,De),style:{"--scale-round-x":"1px","--scale-round-y":"1px","--scale-factor":"1","--user-unit":`${mt}`,"--total-scale-factor":"calc(var(--scale-factor) * var(--user-unit))",backgroundColor:r||"white",position:"relative",minWidth:"min-content",minHeight:"min-content"},...z2,children:G2()})}QB();Qn.workerSrc="pdf.worker.mjs";Qn.workerSrc=new URL("/assets/pdf.worker.min-dbcae78a.mjs",self.location).toString();const dj=({answersheetId:n,currentPage:e,onPageSelect:t,onRegionSelect:s})=>{const[i,r]=R.useState(0),[o,l]=R.useState(1),[c,u]=R.useState(!0),[h,d]=R.useState({start:null,end:null,active:!1}),f=R.useRef(null),[m,y]=R.useState({width:0,height:0}),w=dP(n,"answer");R.useEffect(()=>{const P=new ResizeObserver(N=>{const{width:M,height:I}=N[0].contentRect;y({width:M,height:I})});return f.current&&P.observe(f.current),()=>P.disconnect()},[]),R.useEffect(()=>{c&&m.height>0},[c,m]);const x=({numPages:P})=>{r(P)},v=({width:P,height:N,originalWidth:M,originalHeight:I})=>{if(c&&m.height>0){const j=m.height-40,H=m.width-40,z=j/I,Q=H/M,F=Math.min(z,Q);l(F)}},b=()=>{u(!c),c&&l(1)},S=P=>{u(!1),l(N=>{const M=P==="in"?N+.1:N-.1;return Math.max(.2,Math.min(5,M))})},E=P=>{const N=P.currentTarget.getBoundingClientRect();d({start:{x:P.clientX-N.left,y:P.clientY-N.top},end:null,active:!0})},C=P=>{if(!h.active)return;const N=P.currentTarget.getBoundingClientRect();d(M=>({...M,end:{x:P.clientX-N.left,y:P.clientY-N.top}}))},T=P=>{if(h.start&&h.end){const N=P.currentTarget,M=N.querySelector("canvas");if(M){const I=M.getBoundingClientRect(),j=N.getBoundingClientRect(),H=j.left-I.left,z=j.top-I.top,Q=h.start.x+H,F=h.start.y+z,$=h.end.x+H,L=h.end.y+z,U=Math.min(Q,$),K=Math.min(F,L),J=Math.abs($-Q),X=Math.abs(L-F);J>10&&X>10&&s({x:U/I.width,y:K/I.height,width:J/I.width,height:X/I.height})}}d({start:null,end:null,active:!1})},k=()=>{if(!h.start||!h.end)return{};const P=Math.min(h.start.x,h.end.x),N=Math.min(h.start.y,h.end.y),M=Math.abs(h.end.x-h.start.x),I=Math.abs(h.end.y-h.start.y);return{position:"absolute",left:`${P}px`,top:`${N}px`,width:`${M}px`,height:`${I}px`,border:"2px dashed #0ea5e9",backgroundColor:"rgba(14, 165, 233, 0.1)",pointerEvents:"none"}};return _.jsxs("div",{className:"glass-strong h-full rounded-xl overflow-hidden flex flex-col",children:[_.jsxs("div",{className:"p-4 border-b border-white border-opacity-10 flex items-center justify-between",children:[_.jsx("h3",{className:"font-semibold",children:"PDF Viewer"}),_.jsxs("div",{className:"flex gap-2 items-center",children:[_.jsx("button",{onClick:b,className:`p-2 rounded hover:bg-white hover:bg-opacity-10 ${c?"text-primary-400 bg-white bg-opacity-5":""}`,title:c?"Switch to Manual Zoom":"Fit to Page",children:c?_.jsx(kD,{className:"w-4 h-4"}):_.jsx(TD,{className:"w-4 h-4"})}),_.jsx("div",{className:"h-4 w-px bg-white bg-opacity-20 mx-1"}),_.jsx("button",{onClick:()=>S("out"),className:"p-2 hover:bg-white hover:bg-opacity-10 rounded",title:"Zoom Out",children:_.jsx(FD,{className:"w-4 h-4"})}),_.jsxs("span",{className:"text-xs text-gray-400 w-12 text-center",children:[Math.round(o*100),"%"]}),_.jsx("button",{onClick:()=>S("in"),className:"p-2 hover:bg-white hover:bg-opacity-10 rounded",title:"Zoom In",children:_.jsx(ID,{className:"w-4 h-4"})})]})]}),_.jsx("div",{className:"flex-1 overflow-auto p-4 flex justify-center",ref:f,children:_.jsxs("div",{className:"relative inline-block cursor-crosshair shadow-lg",onMouseDown:E,onMouseMove:C,onMouseUp:T,style:{lineHeight:0},children:[_.jsx(wS,{file:w,onLoadSuccess:x,loading:_.jsx("div",{className:"spinner mx-auto"}),error:_.jsx("div",{className:"text-red-400 p-4",children:"Failed to load PDF"}),children:_.jsx(bS,{pageNumber:e+1,scale:o,onLoadSuccess:v,renderTextLayer:!1,renderAnnotationLayer:!1,className:"rounded-lg overflow-hidden",loading:""})}),h.start&&h.end&&_.jsx("div",{style:k()})]})}),_.jsx("div",{className:"p-4 border-t border-white border-opacity-10 overflow-x-auto bg-black bg-opacity-20",children:_.jsx("div",{className:"flex gap-2 mx-auto justify-center min-w-min",children:Array.from({length:i},(P,N)=>_.jsx("button",{onClick:()=>t(N),className:`flex-shrink-0 border-2 rounded-md overflow-hidden transition-all transform hover:scale-105 ${N===e?"border-primary-500 shadow-md ring-2 ring-primary-500 ring-opacity-50":"border-transparent hover:border-primary-300 opacity-70 hover:opacity-100"}`,children:_.jsx(wS,{file:w,children:_.jsx(bS,{pageNumber:N+1,width:60,renderTextLayer:!1,renderAnnotationLayer:!1})})},N))})})]})},fj=({answersheetId:n,page:e,region:t,onTranscriptionComplete:s})=>{const[i,r]=R.useState(""),[o,l]=R.useState(null),[c,u]=R.useState(null),[h,d]=R.useState(!1),[f,m]=R.useState(null);R.useEffect(()=>{t&&n&&y()},[t,n,e]);const y=async()=>{d(!0),m(null);try{const w=await xF(n,e,t);w.success?(r(w.transcription),l(w.diagram_info),u(w.image),s==null||s(w.transcription)):m("Failed to transcribe region")}catch(w){m(w.message||"An error occurred during transcription")}finally{d(!1)}};return _.jsxs("div",{className:"glass-strong h-full rounded-xl overflow-hidden flex flex-col",children:[_.jsx("div",{className:"p-4 border-b border-white border-opacity-10",children:_.jsxs("h3",{className:"font-semibold flex items-center gap-2",children:[_.jsx(g_,{className:"w-5 h-5 text-primary-400"}),"Transcription & Analysis"]})}),_.jsxs("div",{className:"flex-1 overflow-auto p-6",children:[h&&_.jsxs("div",{className:"flex flex-col items-center justify-center h-full",children:[_.jsx(CD,{className:"w-12 h-12 text-primary-400 animate-spin mb-4"}),_.jsx("p",{className:"text-gray-400",children:"Transcribing handwriting with Gemini AI..."})]}),f&&_.jsx("div",{className:"bg-red-500 bg-opacity-10 border border-red-500 rounded-lg p-4",children:_.jsx("p",{className:"text-red-400",children:f})}),!h&&!f&&!i&&_.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center",children:[_.jsx(g_,{className:"w-16 h-16 text-gray-500 mb-4"}),_.jsx("h4",{className:"text-xl font-semibold mb-2",children:"Select a Region"}),_.jsx("p",{className:"text-gray-400",children:"Click and drag on the PDF to select a region for transcription"})]}),i&&_.jsxs("div",{className:"space-y-6",children:[_.jsxs("div",{children:[_.jsx("h4",{className:"font-semibold text-lg mb-3 text-primary-400",children:"Transcribed Text"}),_.jsx("div",{className:"bg-white bg-opacity-5 rounded-lg p-4 border border-white border-opacity-10",children:_.jsx("p",{className:"whitespace-pre-wrap leading-relaxed",children:i})})]}),(o==null?void 0:o.has_diagram)&&_.jsxs("div",{children:[_.jsxs("h4",{className:"font-semibold text-lg mb-3 flex items-center gap-2 text-accent-400",children:[_.jsx(ED,{className:"w-5 h-5"}),"Diagram Detected"]}),_.jsxs("div",{className:"bg-white bg-opacity-5 rounded-lg p-4 border border-white border-opacity-10",children:[_.jsx("p",{className:"text-sm text-gray-300 mb-3",children:o.description}),c&&_.jsx("img",{src:c,alt:"Extracted region",className:"rounded-lg border border-white border-opacity-20 max-w-full"})]})]}),!(o!=null&&o.has_diagram)&&c&&_.jsxs("div",{children:[_.jsx("h4",{className:"font-semibold text-lg mb-3",children:"Selected Region"}),_.jsx("img",{src:c,alt:"Extracted region",className:"rounded-lg border border-white border-opacity-20 max-w-full"})]})]})]})]})},pj=({answersheetId:n,answerSheet:e,questionPapers:t,rubrics:s,onViewQuestionPaper:i,onViewRubric:r})=>{const[o,l]=R.useState(1),[c,u]=R.useState(""),[h,d]=R.useState(""),[f,m]=R.useState([]),[y,w]=R.useState(null),[x,v]=R.useState(!1),[b,S]=R.useState(null),[E,C]=R.useState(null),[T,k]=R.useState(""),[P,N]=R.useState(!1),[M,I]=R.useState(!1);R.useEffect(()=>{t.length>0&&!b&&S(t[0]),s.length>0&&!E&&C(s[0])},[t,s]),R.useEffect(()=>{j(),H()},[n]),R.useEffect(()=>{const L=f.find(U=>U.question_number===o);L?(u(L.marks_awarded.toString()),d(L.max_marks.toString())):(u(""),d(""))},[o,f]),R.useEffect(()=>{e==null||e.status},[n]);const j=async()=>{try{const L=await AF(n);m(L.marks||[])}catch(L){console.error("Failed to load marks:",L)}},H=async()=>{try{const L=await EF(n);w(L)}catch(L){console.error("Failed to load total:",L)}},z=async()=>{if(!c||!h){alert("Please enter both awarded marks and max marks");return}v(!0);try{await SF(n,b==null?void 0:b.id,o,parseFloat(c),parseFloat(h)),await j(),await H(),b&&o<b.total_questions&&Q("next")}catch(L){console.error("Failed to save marks:",L),alert("Failed to save marks")}finally{v(!1)}},Q=L=>{L==="next"?(l(U=>U+1),u(""),d("")):L==="prev"&&o>1&&l(U=>U-1),N(!1)},F=()=>{l(L=>L+1),u(""),d(""),N(!1)},$=async()=>{I(!0);try{await CF(n,T),alert("Evaluation Report Saved Successfully!"),N(!0)}catch(L){console.error("Failed to save report",L),alert("Failed to save report")}finally{I(!1)}};return P?_.jsxs("div",{className:"glass-strong h-full rounded-xl overflow-hidden flex flex-col p-6",children:[_.jsxs("div",{className:"flex items-center gap-2 mb-6 border-b border-white border-opacity-10 pb-4",children:[_.jsx(SD,{className:"w-6 h-6 text-green-400"}),_.jsx("h2",{className:"text-xl font-bold",children:"Evaluation Summary (Marks Card)"})]}),_.jsxs("div",{className:"flex-1 overflow-auto space-y-6",children:[_.jsxs("table",{className:"w-full text-left border-collapse",children:[_.jsx("thead",{children:_.jsxs("tr",{className:"border-b border-white border-opacity-10 text-gray-400",children:[_.jsx("th",{className:"p-2",children:"Q. No"}),_.jsx("th",{className:"p-2 text-right",children:"Marks"}),_.jsx("th",{className:"p-2 text-right",children:"Max"})]})}),_.jsxs("tbody",{children:[f.sort((L,U)=>L.question_number-U.question_number).map(L=>_.jsxs("tr",{className:"border-b border-white border-opacity-5",children:[_.jsx("td",{className:"p-2 font-mono",children:L.question_number}),_.jsx("td",{className:"p-2 text-right font-bold text-accent-300",children:L.marks_awarded}),_.jsx("td",{className:"p-2 text-right text-gray-400",children:L.max_marks})]},L.id)),_.jsxs("tr",{className:"border-t-2 border-white border-opacity-20 text-lg font-bold bg-white bg-opacity-5",children:[_.jsx("td",{className:"p-3",children:"TOTAL"}),_.jsx("td",{className:"p-3 text-right text-accent-400",children:y==null?void 0:y.total_awarded}),_.jsx("td",{className:"p-3 text-right",children:y==null?void 0:y.total_max})]})]})]}),_.jsxs("div",{children:[_.jsx("label",{className:"text-sm text-gray-400 mb-2 block",children:"Evaluator Remarks"}),_.jsx("textarea",{value:T,onChange:L=>k(L.target.value),placeholder:"Enter overall remarks for the student...",className:"w-full h-32 px-4 py-3 bg-white bg-opacity-10 rounded-lg border border-white border-opacity-20 focus:border-primary-500 outline-none resize-none"})]})]}),_.jsxs("div",{className:"mt-6 pt-4 border-t border-white border-opacity-10 flex gap-3",children:[_.jsx("button",{onClick:()=>N(!1),className:"flex-1 btn btn-ghost",children:"Back to Grading"}),_.jsxs("button",{onClick:$,disabled:M,className:"flex-1 btn btn-primary flex items-center justify-center gap-2",children:[_.jsx(p_,{className:"w-4 h-4"}),M?"Saving Report...":"Finalize & Save"]})]})]}):_.jsxs("div",{className:"glass-strong h-full rounded-xl overflow-hidden flex flex-col",children:[_.jsxs("div",{className:"p-4 border-b border-white border-opacity-10 space-y-3",children:[_.jsxs("div",{className:"flex justify-between items-center",children:[_.jsx("h3",{className:"font-semibold",children:"Grading Panel"}),_.jsx("button",{onClick:()=>N(!0),className:"text-xs btn btn-ghost px-2 py-1 text-accent-300",children:"View Marks Card"})]}),_.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[_.jsx("select",{className:"bg-black bg-opacity-30 border border-white border-opacity-10 rounded px-2 py-1 text-xs outline-none",value:(b==null?void 0:b.id)||"",onChange:L=>S(t.find(U=>U.id===parseInt(L.target.value))),children:t.map(L=>_.jsx("option",{value:L.id,children:L.title},L.id))}),_.jsx("select",{className:"bg-black bg-opacity-30 border border-white border-opacity-10 rounded px-2 py-1 text-xs outline-none",value:(E==null?void 0:E.id)||"",onChange:L=>C(s.find(U=>U.id===parseInt(L.target.value))),children:s.map(L=>_.jsx("option",{value:L.id,children:L.title},L.id))})]})]}),_.jsxs("div",{className:"flex-1 overflow-auto p-6 space-y-6",children:[_.jsxs("div",{className:"space-y-3",children:[_.jsxs("button",{onClick:()=>i(b),disabled:!b,className:"w-full btn btn-ghost flex items-center justify-center gap-2",children:[_.jsx(vA,{className:"w-5 h-5"}),"View Question Paper"]}),_.jsxs("button",{onClick:()=>r(E),disabled:!E,className:"w-full btn btn-ghost flex items-center justify-center gap-2",children:[_.jsx(xD,{className:"w-5 h-5"}),"View Rubric"]})]}),_.jsxs("div",{className:"border-t border-white border-opacity-10 pt-6",children:[_.jsxs("div",{className:"mb-6",children:[_.jsx("label",{className:"text-sm text-gray-400 mb-2 block",children:"Question Number"}),_.jsxs("div",{className:"flex items-center gap-3",children:[_.jsx("button",{onClick:()=>Q("prev"),disabled:o===1,className:"p-2 hover:bg-white hover:bg-opacity-10 rounded disabled:opacity-30",children:_.jsx($k,{className:"w-5 h-5"})}),_.jsxs("div",{className:"flex-1 text-center",children:[_.jsx("span",{className:"text-3xl font-bold gradient-text",children:o}),b&&_.jsxs("span",{className:"text-xs text-gray-400 block",children:["of ",b.total_questions]})]}),_.jsx("button",{onClick:()=>Q("next"),disabled:b&&o>=b.total_questions,className:"p-2 hover:bg-white hover:bg-opacity-10 rounded disabled:opacity-30",children:_.jsx(Hk,{className:"w-5 h-5"})}),_.jsx("button",{onClick:F,title:"Add Question Manually",className:"p-2 hover:bg-white hover:bg-opacity-10 rounded text-accent-400",children:_.jsx(RD,{className:"w-5 h-5"})})]})]}),_.jsxs("div",{className:"space-y-4",children:[_.jsxs("div",{children:[_.jsx("label",{className:"text-sm text-gray-400 mb-2 block",children:"Marks Awarded"}),_.jsx("input",{type:"number",step:"0.5",value:c,onChange:L=>u(L.target.value),placeholder:"0",className:"w-full px-4 py-3 bg-white bg-opacity-10 rounded-lg border border-white border-opacity-20 focus:border-primary-500 outline-none text-lg font-semibold"})]}),_.jsxs("div",{children:[_.jsx("label",{className:"text-sm text-gray-400 mb-2 block",children:"Max Marks"}),_.jsx("input",{type:"number",step:"0.5",value:h,onChange:L=>d(L.target.value),placeholder:"0",className:"w-full px-4 py-3 bg-white bg-opacity-10 rounded-lg border border-white border-opacity-20 focus:border-primary-500 outline-none text-lg font-semibold"})]}),_.jsxs("button",{onClick:z,disabled:x||!c||!h,className:"w-full btn btn-primary flex items-center justify-center gap-2",children:[_.jsx(p_,{className:"w-5 h-5"}),x?"Saving...":"Save Marks"]})]})]}),y&&_.jsx("div",{className:"border-t border-white border-opacity-10 pt-6",children:_.jsxs("div",{className:"glass p-4 rounded-lg",children:[_.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[_.jsx(MD,{className:"w-5 h-5 text-accent-400"}),_.jsx("h4",{className:"font-semibold",children:"Total Score"})]}),_.jsxs("div",{className:"text-center",children:[_.jsxs("div",{className:"text-4xl font-bold gradient-text mb-2",children:[y.total_awarded.toFixed(1)," / ",y.total_max.toFixed(1)]}),_.jsxs("div",{className:"text-xl text-gray-400",children:[y.percentage.toFixed(1),"%"]})]})]})})]})]})};Qn.workerSrc=new URL("/assets/pdf.worker.min-dbcae78a.mjs",self.location).toString();const pC=({file:n,onClose:e,title:t})=>{const[s,i]=R.useState(0),[r,o]=R.useState(1),l=n.type.replace("_sheet","").replace("_paper",""),c=dP(n.id,l),u=({numPages:h})=>{i(h)};return _.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black bg-opacity-70 backdrop-blur-sm",children:_.jsxs("div",{className:"glass-strong max-w-4xl w-full max-h-[90vh] rounded-2xl overflow-hidden flex flex-col",children:[_.jsxs("div",{className:"p-4 border-b border-white border-opacity-10 flex items-center justify-between",children:[_.jsx("h3",{className:"text-xl font-semibold gradient-text",children:t}),_.jsx("button",{onClick:e,className:"p-2 hover:bg-white hover:bg-opacity-10 rounded-lg transition-all",children:_.jsx(Wk,{className:"w-6 h-6"})})]}),_.jsx("div",{className:"flex-1 overflow-auto p-6",children:_.jsxs("div",{className:"flex flex-col items-center",children:[_.jsx(wS,{file:c,onLoadSuccess:u,loading:_.jsx("div",{className:"spinner mx-auto"}),error:_.jsx("div",{className:"text-red-500",children:"Failed to load PDF. Please try again."}),children:_.jsx(bS,{pageNumber:r,width:Math.min(window.innerWidth-200,800),renderTextLayer:!0,renderAnnotationLayer:!0})}),s>1&&_.jsxs("div",{className:"mt-6 flex items-center gap-4",children:[_.jsx("button",{onClick:()=>o(h=>Math.max(1,h-1)),disabled:r===1,className:"btn btn-ghost px-4 py-2",children:"Previous"}),_.jsxs("span",{className:"text-gray-300",children:["Page ",r," of ",s]}),_.jsx("button",{onClick:()=>o(h=>Math.min(s,h+1)),disabled:r===s,className:"btn btn-ghost px-4 py-2",children:"Next"})]})]})})]})})},gj=()=>{const{answersheetId:n}=ZM(),e=yA(),[t,s]=R.useState(null),[i,r]=R.useState(0),[o,l]=R.useState(0),[c,u]=R.useState(null),[h,d]=R.useState(null),[f,m]=R.useState(!1),[y,w]=R.useState(!1),[x,v]=R.useState([]),[b,S]=R.useState([]);R.useEffect(()=>{E(),C()},[n]);const E=async()=>{try{const N=(await my("answer")).files.find(I=>I.id===parseInt(n));s(N);const M=await _F(n);l(M.page_count)}catch(P){console.error("Failed to load answer sheet:",P)}},C=async()=>{try{const P=await my("question"),N=await my("rubric");v(P.files||[]),S(N.files||[])}catch(P){console.error("Failed to load documents:",P)}},T=P=>{u(P)},k=P=>{P==="next"&&i<o-1?(r(i+1),u(null),d(null)):P==="prev"&&i>0&&(r(i-1),u(null),d(null))};return _.jsxs("div",{className:"min-h-screen p-6",children:[_.jsxs("header",{className:"mb-6 flex items-center justify-between",children:[_.jsxs("div",{className:"flex items-center gap-4",children:[_.jsx("button",{onClick:()=>e("/"),className:"btn btn-ghost p-3",children:_.jsx(zk,{className:"w-5 h-5"})}),_.jsxs("div",{children:[_.jsxs("h1",{className:"text-2xl font-bold gradient-text",children:["Evaluating: ",(t==null?void 0:t.student_name)||"Loading..."]}),_.jsxs("p",{className:"text-gray-400",children:["Page ",i+1," of ",o]})]})]}),_.jsxs("div",{className:"flex gap-2",children:[_.jsx("button",{onClick:()=>k("prev"),disabled:i===0,className:"btn btn-ghost p-3",children:_.jsx($k,{className:"w-5 h-5"})}),_.jsx("button",{onClick:()=>k("next"),disabled:i>=o-1,className:"btn btn-ghost p-3",children:_.jsx(Hk,{className:"w-5 h-5"})})]})]}),_.jsxs("div",{className:"grid grid-cols-12 gap-6 h-[calc(100vh-180px)]",children:[_.jsx("div",{className:"col-span-3",children:_.jsx(dj,{answersheetId:n,currentPage:i,onPageSelect:r,onRegionSelect:T})}),_.jsx("div",{className:"col-span-6",children:_.jsx(fj,{answersheetId:n,page:i,region:c,onTranscriptionComplete:d})}),_.jsx("div",{className:"col-span-3",children:_.jsx(pj,{answersheetId:n,answerSheet:t,questionPapers:x,rubrics:b,onViewQuestionPaper:()=>m(!0),onViewRubric:()=>w(!0)})})]}),f&&x.length>0&&_.jsx(pC,{file:x[0],onClose:()=>m(!1),title:"Question Paper"}),y&&b.length>0&&_.jsx(pC,{file:b[0],onClose:()=>w(!1),title:"Evaluation Rubric"})]})};function mj(){return _.jsx("div",{className:"min-h-screen",children:_.jsxs(gD,{children:[_.jsx(hy,{path:"/",element:_.jsx(kF,{})}),_.jsx(hy,{path:"/results",element:_.jsx(PF,{})}),_.jsx(hy,{path:"/evaluate/:answersheetId",element:_.jsx(gj,{})})]})})}X1.createRoot(document.getElementById("root")).render(_.jsx(kC.StrictMode,{children:_.jsx(vD,{children:_.jsx(mj,{})})}));
